\input{preamble}

% OK, start here.
%
\begin{document}

\title{Sites and Sheaves}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
The notion of a site was introduced by Grothendieck to be able to study
sheaves in the \'etale topology of schemes. The basic reference for this
notion is perhaps \cite{SGA4}. Our notion of a site differs from that
in \cite{SGA4}; what we call a site is called a category endowed with
a pretopology in \cite[Expos\'e II, D\'efinition 1.3]{SGA4}.
The reason we do this is that in algebraic geometry it is often convenient to
work with a given class of coverings, for example when defining when
a property of schemes is local in a given topology, see Descent,
Section \ref{descent-section-descending-properties}.
Our exposition will closely follow \cite{ArtinTopologies}.
We will not use universes.












\section{Presheaves}
\label{section-presheaves}

\noindent
Let $\mathcal{C}$ be a category.
A {\it presheaf of sets} is a contravariant functor $\mathcal{F}$
from $\mathcal{C}$ to $\textit{Sets}$ (see Categories, Remark
\ref{categories-remark-functor-into-sets}).
So for every object $U$ of $\mathcal{C}$ we have a set
$\mathcal{F}(U)$. The elements of this set are called
the {\it sections} of $\mathcal{F}$ over $U$. For every morphism
$f : V \to U$ the map $\mathcal{F}(f) : \mathcal{F}(U) \to \mathcal{F}(V)$
is called the {\it restriction map} and is often denoted
$f^\ast : \mathcal{F}(U) \to \mathcal{F}(V)$. Another way
of expressing this is to say that $f^*(s)$ is the {\it pullback}
of $s$ via $f$. Functoriality means that $g^* f^* (s) = (f \circ g)^*(s)$.
Sometimes we use the notation $s|_V := f^\ast(s)$.
This notation is consistent with the notion of restriction
of functions from topology because if $W \to V \to U$
are morphisms in $\mathcal{C}$ and $s$ is a section of
$\mathcal{F}$ over $U$ then $s|_W = (s|_V)|_W$ by the
functorial nature of $\mathcal{F}$. Of course we have to be
careful since it may very well happen
that there is more than one morphism $V \to U$ and it is
certainly not going to be the case that the corresponding
pullback maps are equal.

\begin{definition}
\label{definition-presheaves-sets}
A {\it presheaf of sets} on $\mathcal{C}$ is a contravariant
functor from $\mathcal{C}$ to $\textit{Sets}$. {\it Morphisms
of presheaves} are transformations of functors. The category
of presheaves of sets is denoted $\textit{PSh}(\mathcal{C})$.
\end{definition}

\noindent
Note that for any object $U$ of $\mathcal{C}$ the functor of
points $h_U$, see Categories, Example \ref{categories-example-hom-functor}
is a presheaf. These are called the {\it representable presheaves}.
These presheaves have the pleasing property that for any
presheaf $\mathcal{F}$ we have
\begin{equation}
\label{equation-map-representable-into-presheaf}
\Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{F})
=
\mathcal{F}(U).
\end{equation}
This is the Yoneda lemma (Categories, Lemma \ref{categories-lemma-yoneda}).

\medskip\noindent
Similarly, we can define the notion of a presheaf of abelian groups,
rings, etc. More generally we may define a presheaf with values in a
category.

\begin{definition}
\label{definition-presheaf}
Let $\mathcal{C}$, $\mathcal{A}$ be categories.
A {\it presheaf} $\mathcal{F}$ on $\mathcal{C}$
with values in $\mathcal{A}$ is a contravariant
functor from $\mathcal{C}$ to $\mathcal{A}$,
i.e., $\mathcal{F} : \mathcal{C}^{opp} \to \mathcal{A}$.
A {\it morphism} of presheaves $\mathcal{F} \to \mathcal{G}$
on $\mathcal{C}$ with values in $\mathcal{A}$ is a transformation
of functors from $\mathcal{F}$ to $\mathcal{G}$.
\end{definition}

\noindent
These form the objects and morphisms of the category of presheaves
on $\mathcal{C}$ with values in $\mathcal{A}$.

\begin{remark}
\label{remark-big-presheaves}
As already pointed out we may consider the category of
presheaves with values in any of the ``big'' categories
listed in Categories, Remark \ref{categories-remark-big-categories}.
These will be ``big'' categories as well and they will be
listed in the above mentioned remark as we go along.
\end{remark}
















\section{Injective and surjective maps of presheaves}
\label{section-injective-surjective}

\begin{definition}
\label{definition-presheaves-injective-surjective}
Let $\mathcal{C}$ be a category, and let $\varphi : \mathcal{F}
\to \mathcal{G}$ be a map of presheaves of sets.
\begin{enumerate}
\item We say that $\varphi$ is {\it injective} if for every object
$U$ of $\mathcal{C}$ the map $\varphi_U : \mathcal{F}(U)
\to \mathcal{G}(U)$ is injective.
\item We say that $\varphi$ is {\it surjective} if for every object
$U$ of $\mathcal{C}$ the map $\varphi_U : \mathcal{F}(U)
\to \mathcal{G}(U)$ is surjective.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-mono-epi}
The injective (resp.\ surjective) maps defined above
are exactly the monomorphisms (resp.\ epimorphisms) of
$\textit{PSh}(\mathcal{C})$. A map is an isomorphism
if and only if it is both injective and surjective.
\end{lemma}

\begin{proof}
We shall show that $\varphi : \mathcal{F} \to
\mathcal{G}$ is injective if and only if it is a monomorphism
of $\textit{PSh}(\mathcal{C})$. Indeed, the ``only if''
direction is straightforward, so let us show the ``if''
direction. Assume that $\varphi$ is a monomorphism. Let
$U \in \Ob(\mathcal{C})$; we need to show that $\varphi_U$ is
injective. So let $a, b \in \mathcal{F}(U)$ be such that
$\varphi_U (a) = \varphi_U (b)$; we need to check that $a = b$.
Under the isomorphism
(\ref{equation-map-representable-into-presheaf}), the elements
$a$ and $b$ of $\mathcal{F}(U)$ correspond to two natural
transformations
$a', b' \in \Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{F})$.
Similarly, under the analogous isomorphism
$\Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{G})
= \mathcal{G}(U)$,
the two equal elements $\varphi_U (a)$ and $\varphi_U (b)$ of
$\mathcal{G}(U)$ correspond to the two natural transformations
$\varphi \circ a', \varphi \circ b'
\in \Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{G})$,
which therefore must also be equal. So
$\varphi \circ a' = \varphi \circ b'$, and thus $a' = b'$
(since $\varphi$ is monic), whence $a = b$. This finishes (1).

\medskip\noindent
We shall show that $\varphi : \mathcal{F} \to
\mathcal{G}$ is surjective if and only if it is an epimorphism
of $\textit{PSh}(\mathcal{C})$. Indeed, the ``only if''
direction is straightforward, so let us show the ``if''
direction. Assume that $\varphi$ is an epimorphism.

\medskip\noindent
For any two morphisms $f : A \to B$ and $g : A \to C$ in the
category $\textit{Sets}$, we let $\text{inl}_{f,g}$ and
$\text{inr}_{f,g}$ denote the two canonical maps from
$B$ and $C$ to $B \coprod_A C$. (Here, the pushout is
evaluated in $\textit{Sets}$.)

\medskip\noindent
Now, we define a presheaf $\mathcal{H}$ of sets on $\mathcal{C}$
by setting $\mathcal{H}(U)
= \mathcal{G}(U) \coprod_{\mathcal{F}(U)} \mathcal{G}(U)$ (where
the pushout is evaluated in $\textit{Sets}$ and induced by
the map $\varphi_U : \mathcal{F}(U) \to \mathcal{G}(U)$) for
every $U \in \Ob(\mathcal{C})$; its action on morphisms is
defined in the obvious way (by the functoriality of pushout).
Then, there are two natural
transformations $i_1 : \mathcal{G} \to \mathcal{H}$ and
$i_2 : \mathcal{G} \to \mathcal{H}$ whose components at an object
$U \in \Ob(\mathcal{C})$ are given by the maps
$\text{inl}_{\varphi_U, \varphi_U}$ and
$\text{inr}_{\varphi_U, \varphi_U}$, respectively. The
definition of a pushout shows that $i_1 \circ \varphi
= i_2 \circ \varphi$, whence $i_1 = i_2$ (since $\varphi$ is an
epimorphism). Thus, for every $U \in \Ob(\mathcal{C})$, we have
$\text{inl}_{\varphi_U, \varphi_U}
= \text{inr}_{\varphi_U, \varphi_U}$. Thus, $\varphi_U$
must be surjective (since a simple combinatorial argument shows
that if $f : A \to B$ is a morphism in $\textit{Sets}$, then
$\text{inl}_{f,f} = \text{inr}_{f,f}$ if and
only if $f$ is surjective). In other words, $\varphi$ is
surjective, and (2) is proven.

\medskip\noindent
We shall show that $\varphi : \mathcal{F} \to
\mathcal{G}$ is both injective and surjective if and only if it
is an isomorphism of $\textit{PSh}(\mathcal{C})$. This time,
the ``if'' direction is straightforward. To prove the ``only if''
direction, it suffices to observe that if $\varphi$ is both
injective and surjective, then $\varphi_U$ is an invertible map
for every $U \in \Ob(\mathcal{C})$, and the inverses of these
maps for all $U$ can be combined to a natural transformation
$\mathcal{G} \to \mathcal{F}$ which is an inverse to $\varphi$.
\end{proof}

\begin{definition}
\label{definition-sub-presheaf}
We say $\mathcal{F}$ is a {\it subpresheaf} of $\mathcal{G}$
if for every object $U \in \Ob(\mathcal{C})$ the set
$\mathcal{F}(U)$ is a subset of $\mathcal{G}(U)$, compatibly
with the restriction mappings.
\end{definition}

\noindent
In other words, the inclusion
maps $\mathcal{F}(U) \to \mathcal{G}(U)$
glue together to give an (injective) morphism of
presheaves $\mathcal{F} \to \mathcal{G}$.

\begin{lemma}
\label{lemma-image}
Let $\mathcal{C}$ be a category.
Suppose that $\varphi : \mathcal{F} \to \mathcal{G}$ is a
morphism of presheaves of sets on $\mathcal{C}$.
There exists a unique subpresheaf $\mathcal{G}' \subset \mathcal{G}$
such that $\varphi$ factors as
$\mathcal{F} \to \mathcal{G}' \to \mathcal{G}$
and such that the first map is surjective.
\end{lemma}

\begin{proof}
To prove existence, just set
$\mathcal{G}'(U) = \varphi_U \left(\mathcal{F}(U)\right)$
for every $U \in \Ob(C)$ (and inherit the action on morphisms
from $\mathcal{G}$), and prove that this defines a
subpresheaf of $\mathcal{G}$ and that $\varphi$ factors as
$\mathcal{F} \to \mathcal{G}' \to \mathcal{G}$ with the
first map being surjective. Uniqueness is straightforward.
\end{proof}

\begin{definition}
\label{definition-image}
Notation as in Lemma \ref{lemma-image}. We
say that $\mathcal{G}'$ is the {\it image of $\varphi$}.
\end{definition}
















\section{Limits and colimits of presheaves}
\label{section-limits-colimits-PSh}

\noindent
Let $\mathcal{C}$ be a category.
Limits and colimits exist in the category
$\textit{PSh}(\mathcal{C})$. In addition, for any
$U \in \Ob(\mathcal{C})$ the functor
$$
\textit{PSh}(\mathcal{C})
\longrightarrow
\textit{Sets}, \quad
\mathcal{F}
\longmapsto
\mathcal{F}(U)
$$
commutes with limits and colimits. Perhaps the easiest way to prove
these statements is the following. Given a diagram
$
\mathcal{F} :
\mathcal{I}
\to
\textit{PSh}(\mathcal{C})
$
define presheaves
$$
\mathcal{F}_{\lim} :
U
\longmapsto
\lim_{i \in \mathcal{I}} \mathcal{F}_i(U)
\text{  and  }
\mathcal{F}_{\colim} :
U
\longmapsto
\colim_{i \in \mathcal{I}} \mathcal{F}_i(U)
$$
There are clearly projection maps $\mathcal{F}_{\lim} \to \mathcal{F}_i$
and canonical maps $\mathcal{F}_i \to \mathcal{F}_{\colim}$. These
maps satisfy the requirements of the maps of a limit (reps.\ colimit)
of Categories, Definition \ref{categories-definition-limit}
(resp.\ Categories, Definition \ref{categories-definition-colimit}).
Indeed, they clearly form a cone, resp. a cocone, over $\mathcal{F}$.
Furthermore, if $(\mathcal{G}, q_i : \mathcal{G} \to \mathcal{F}_i)$
is another
system (as in the definition of a limit), then we get for every
$U$ a system of maps $\mathcal{G}(U) \to \mathcal{F}_i(U)$
with suitable functoriality requirements. And thus a unique
map $\mathcal{G}(U) \to \mathcal{F}_{\lim}(U)$. It is easy
to verify these are compatible  as we vary $U$ and arise from
the desired map $\mathcal{G} \to \mathcal{F}_{\lim}$.
A similar argument works in the case of the colimit.





















\section{Functoriality of categories of presheaves}
\label{section-functoriality-PSh}

\noindent
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor between categories.
In this case we denote
$$
u^p :
\textit{PSh}(\mathcal{D})
\longrightarrow
\textit{PSh}(\mathcal{C})
$$
the functor that associates to $\mathcal{G}$ on $\mathcal{D}$ the presheaf
$u^p\mathcal{G} = \mathcal{G} \circ u$. Note that by the previous section
this functor commutes with all limits.

\medskip\noindent
For $V \in \Ob(\mathcal{D})$ let $\mathcal{I}^u_V$
denote the category with
\begin{equation}
\label{equation-colim-category}
\begin{matrix}
\Ob(\mathcal{I}^u_V)
&
=
&
\{
(U, \phi)
\mid
U \in \Ob(\mathcal{C}),
\phi : V \to u(U)
\}
\\
\Mor_{\mathcal{I}^u_V}((U, \phi), (U', \phi'))
&
=
&
\{
f : U \to U' \text{ in }\mathcal{C}
\mid
u(f) \circ \phi = \phi'
\}
\end{matrix}
\end{equation}
We sometimes drop the subscript ${}^u$ from the notation and we simply write
$\mathcal{I}_V$.
We will use these categories to define a left adjoint to the functor $u^p$.
Before we do so we prove a few technical lemmas.

\begin{lemma}
\label{lemma-almost-directed}
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor between categories.
Suppose that $\mathcal{C}$ has fibre products and equalizers, and that
$u$ commutes with them. Then the categories $(\mathcal{I}_V)^{opp}$
satisfy the hypotheses of
Categories, Lemma \ref{categories-lemma-split-into-directed}.
\end{lemma}

\begin{proof}
There are two conditions to check.

\medskip\noindent
First, suppose we are given three objects
$\phi : V \to u(U)$, $\phi' : V \to u(U')$, and $\phi'' : V \to u(U'')$
and morphisms $a : U' \to U$, $b : U'' \to U$ such that
$u(a) \circ \phi' = \phi$ and $u(b) \circ \phi'' = \phi$.
We have to show there exists another object $\phi''' : V \to u(U''')$
and morphisms $c : U''' \to U'$ and $d : U''' \to U''$ such that
$u(c) \circ \phi''' = \phi'$, $u(d) \circ \phi''' = \phi''$ and
$a \circ c = b \circ d$. We take $U''' = U' \times_U U''$
with $c$ and $d$ the projection morphisms. This works as $u$ commutes
with fibre products; we omit the verification.

\medskip\noindent
Second, suppose we are given two objects
$\phi : V \to u(U)$ and $\phi' : V \to u(U')$
and morphisms $a, b : (U, \phi) \to (U', \phi')$.
We have to find a morphism $c : (U'', \phi'') \to (U, \phi)$
which equalizes $a$ and $b$. Let $c : U'' \to U$ be the equalizer of
$a$ and $b$ in the category $\mathcal{C}$. As $u$ commutes
with equalizers and since $u(a) \circ \phi = u(b) \circ \phi = \phi'$
we obtain a morphism $\phi'' : V \to u(U'')$.
\end{proof}

\begin{lemma}
\label{lemma-directed}
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor between categories.
Assume
\begin{enumerate}
\item the category $\mathcal{C}$ has a final object $X$ and
$u(X)$ is a final object of $\mathcal{D}$ , and
\item the category $\mathcal{C}$ has fibre products and
$u$ commutes with them.
\end{enumerate}
Then the index categories $(\mathcal{I}^u_V)^{opp}$ are filtered (see
Categories, Definition \ref{categories-definition-directed}).
\end{lemma}

\begin{proof}
The assumptions imply that the assumptions of
Lemma \ref{lemma-almost-directed}
are satisfied (see the discussion in
Categories, Section \ref{categories-section-finite-limits}).
By
Categories, Lemma \ref{categories-lemma-split-into-directed}
we see that $\mathcal{I}_V$ is a (possibly empty) disjoint union of
directed categories.
Hence it suffices to show that $\mathcal{I}_V$ is connected.

\medskip\noindent
First, we show that $\mathcal{I}_V$ is nonempty.
Namely, let $X$ be the final object of $\mathcal{C}$,
which exists by assumption.
Let $V \to u(X)$ be the morphism coming from the fact
that $u(X)$ is final in $\mathcal{D}$ by assumption.
This gives an object of $\mathcal{I}_V$.

\medskip\noindent
Second, we show that $\mathcal{I}_V$ is connected.
Let $\phi_1 : V \to u(U_1)$ and $\phi_2 : V \to u(U_2)$ be
in $\Ob(\mathcal{I}_V)$. By assumption $U_1\times U_2$
exists and $u(U_1\times U_2) = u(U_1)\times u(U_2)$.
Consider the morphism $\phi : V \to u(U_1\times U_2)$
corresponding to $(\phi_1, \phi_2)$ by the universal property
of products. Clearly the object $\phi : V \to u(U_1\times U_2)$
maps to both $\phi_1 : V \to u(U_1)$ and $\phi_2 : V \to u(U_2)$.
\end{proof}

\noindent
Given $g : V' \to V$ in $\mathcal{D}$ we get a functor
$\overline{g} : \mathcal{I}_V \to \mathcal{I}_{V'}$
by setting $\overline{g}(U, \phi) = (U, \phi \circ g)$
on objects. Given a presheaf $\mathcal{F}$ on $\mathcal{C}$
we obtain a functor
$$
\mathcal{F}_V :
\mathcal{I}_V^{opp}
\longrightarrow
\textit{Sets}, \quad
(U, \phi)
\longmapsto
\mathcal{F}(U).
$$
In other words, $\mathcal{F}_V$ is a presheaf of sets on $\mathcal{I}_V$.
Note that we have $\mathcal{F}_{V'} \circ \overline{g} = \mathcal{F}_V$.
We define
$$
u_p\mathcal{F}(V) =
\colim_{\mathcal{I}_V^{opp}} \mathcal{F}_V
$$
As a colimit we obtain for each $(U, \phi) \in \Ob(\mathcal{I}_V)$
a canonical map $\mathcal{F}(U)\xrightarrow{c(\phi)}u_p\mathcal{F}(V)$.
For $g : V' \to V$ as above there is a
canonical restriction map
$g^* : u_p\mathcal{F}(V) \to u_p\mathcal{F}(V')$
compatible with
$\mathcal{F}_{V'} \circ \overline{g} = \mathcal{F}_V$
by Categories, Lemma \ref{categories-lemma-functorial-colimit}.
It is the unique map so that for all $(U, \phi) \in \Ob(\mathcal{I}_V)$
the diagram
$$
\xymatrix{
\mathcal{F}(U) \ar[r]^{c(\phi)} \ar[d]_{\text{id}}
&
u_p\mathcal{F}(V) \ar[d]^{g^*}
\\
\mathcal{F}(U) \ar[r]^{c(\phi \circ g)}
&
u_p\mathcal{F}(V')
}
$$
commutes. The uniqueness of these maps implies that we obtain a
presheaf. This presheaf will be denoted $u_p\mathcal{F}$.

\begin{lemma}
\label{lemma-recover}
There is a canonical map
$\mathcal{F}(U) \to u_p\mathcal{F}(u(U))$,
which is compatible with restriction maps
(on $\mathcal{F}$ and on $u_p\mathcal{F}$).
\end{lemma}

\begin{proof}
This is just the map $c(\text{id}_{u(U)})$ introduced above.
\end{proof}

\noindent
Note that any map of presheaves $\mathcal{F} \to \mathcal{F}'$
gives rise to compatible systems of maps between functors
$\mathcal{F}_V \to \mathcal{F}'_V$, and hence to a map
of presheaves $u_p\mathcal{F} \to u_p\mathcal{F}'$. In other
words, we have defined a functor
$$
u_p :
\textit{PSh}(\mathcal{C})
\longrightarrow
\textit{PSh}(\mathcal{D})
$$

\begin{lemma}
\label{lemma-adjoints-u}
The functor $u_p$ is a left adjoint to the functor $u^p$.
In other words the formula
$$
\Mor_{\textit{PSh}(\mathcal{C})}(\mathcal{F}, u^p\mathcal{G})
=
\Mor_{\textit{PSh}(\mathcal{D})}(u_p\mathcal{F}, \mathcal{G})
$$
holds bifunctorially in $\mathcal{F}$ and $\mathcal{G}$.
\end{lemma}

\begin{proof}
Let $\mathcal{G}$ be a presheaf on $\mathcal{D}$ and let
$\mathcal{F}$ be a presheaf on $\mathcal{C}$.
We will show that the displayed formula holds
by constructing maps either way. We will leave
it to the reader to verify they are each others inverse.

\medskip\noindent
Given a map $\alpha : u_p \mathcal{F} \to \mathcal{G}$
we get $u^p\alpha : u^p u_p \mathcal{F} \to u^p \mathcal{G}$.
Lemma \ref{lemma-recover} says that there is a
map $\mathcal{F} \to u^p u_p \mathcal{F}$. The composition
of the two gives the desired map. (The good thing about this construction
is that it is clearly functorial in everything in sight.)

\medskip\noindent
Conversely, given a map $\beta : \mathcal{F} \to u^p\mathcal{G}$
we get a map $u_p\beta : u_p\mathcal{F} \to u_p u^p\mathcal{G}$.
We claim that the functor $u^p\mathcal{G}_Y$ on $\mathcal{I}_Y$
has a canonical map to the constant functor with value $\mathcal{G}(Y)$.
Namely, for every object $(X, \phi)$ of $\mathcal{I}_Y$,
the value of $u^p\mathcal{G}_Y$ on this object is $\mathcal{G}(u(X))$
which maps to $\mathcal{G}(Y)$ by $\mathcal{G}(\phi) = \phi^* $.
This is a transformation of functors because $\mathcal{G}$ is a functor
itself. This leads to a map $u_p u^p \mathcal{G}(Y) \to \mathcal{G}(Y)$.
Another trivial verification shows that this is functorial in $Y$
leading to a map of presheaves $u_p u^p \mathcal{G} \to \mathcal{G}$.
The composition $u_p\mathcal{F} \to u_p u^p\mathcal{G} \to
\mathcal{G}$ is the desired map.
\end{proof}

\begin{remark}
\label{remark-functoriality-presheaves-values}
Suppose that $\mathcal{A}$ is a category such that
any diagram $\mathcal{I}_Y \to \mathcal{A}$ has a
colimit in $\mathcal{A}$. In this case it is clear
that there are functors $u^p$ and $u_p$, defined in
exactly the same way as above, on the categories
of presheaves with values in $\mathcal{A}$.
Moreover, the adjointness of the pair
$u^p$ and $u_p$ continues to hold in this setting.
\end{remark}

\begin{lemma}
\label{lemma-pullback-representable-presheaf}
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor between categories.
For any object $U$ of $\mathcal{C}$ we have $u_ph_U = h_{u(U)}$.
\end{lemma}

\begin{proof}
By adjointness of $u_p$ and $u^p$ we have
$$
\Mor_{\textit{PSh}(\mathcal{D})}(u_ph_U, \mathcal{G})
=
\Mor_{\textit{PSh}(\mathcal{C})}(h_U, u^p\mathcal{G})
=
u^p\mathcal{G}(U) =
\mathcal{G}(u(U))
$$
and hence by Yoneda's lemma we see that $u_ph_U = h_{u(U)}$ as
presheaves.
\end{proof}

















\section{Sites}
\label{section-sites-definitions}

\noindent
Our notion of a site uses the following type of structures.

\begin{definition}
\label{definition-family-morphisms-fixed-target}
Let $\mathcal{C}$ be a category, see
Conventions, Section \ref{conventions-section-categories}.
A {\it family of morphisms with fixed target} in $\mathcal{C}$ is
given by an object $U \in \Ob(\mathcal{C})$, a set $I$ and
for each $i\in I$ a morphism $U_i \to U$ of $\mathcal{C}$ with target $U$.
We use the notation $\{U_i \to U\}_{i\in I}$ to indicate this.
\end{definition}

\noindent
It can happen that the set $I$ is empty! This
notation is meant to suggest an open covering as in topology.

\begin{definition}
\label{definition-site}
A {\it site}\footnote{This notation differs from that of \cite{SGA4}, as
explained in the introduction.} is given by a category $\mathcal{C}$ and a set
$\text{Cov}(\mathcal{C})$ of families of morphisms with fixed target
$\{U_i \to U\}_{i \in I}$, called {\it coverings of $\mathcal{C}$},
satisfying the following axioms
\begin{enumerate}
\item If $V \to U$ is an isomorphism then $\{V \to U\} \in
\text{Cov}(\mathcal{C})$.
\item If $\{U_i \to U\}_{i\in I} \in \text{Cov}(\mathcal{C})$ and for each
$i$ we have $\{V_{ij} \to U_i\}_{j\in J_i} \in \text{Cov}(\mathcal{C})$, then
$\{V_{ij} \to U\}_{i \in I, j\in J_i} \in \text{Cov}(\mathcal{C})$.
\item If $\{U_i \to U\}_{i\in I}\in \text{Cov}(\mathcal{C})$
and $V \to U$ is a morphism of $\mathcal{C}$ then $U_i \times_U V$
exists for all $i$ and
$\{U_i \times_U V \to V \}_{i\in I} \in \text{Cov}(\mathcal{C})$.
\end{enumerate}
\end{definition}

\noindent
Clarifications. In axiom (1) we require there should be a covering
$\{U_i \to U\}_{i \in I}$ of $\mathcal{C}$ such that $I = \{i\}$
is a singleton set and such that the morphism $U_i \to U$ is equal to
the morphism $V \to U$ given in (1). In the following we often denote
$\{V \to U\}$ a family of morphisms with fixed target whose index set
is a singleton. In axiom (3) we require the existence of the covering
for some choice of the fibre products $U_i \times_U V$ for $i \in I$.

\begin{remark}
\label{remark-no-big-sites}
(On set theoretic issues -- skip on a first reading.)
The main reason for introducing sites is to study the
category of sheaves on a site, because it is the generalization
of the category of sheaves on a topological space that has
been so important in algebraic geometry. In order to avoid thinking
about things like ``classes of classes'' and so on, we will
not allow sites to be ``big'' categories, in contrast to what
we do for categories and $2$-categories.

\medskip\noindent
Suppose that $\mathcal{C}$ is a category and that
$\text{Cov}(\mathcal{C})$ is a proper class of coverings
satisfying (1), (2) and (3) above. We will not allow this as a
site either, mainly because we are going to take limits over coverings.
However, there are several natural
ways to replace $\text{Cov}(\mathcal{C})$ by a set of coverings
or a slightly different structure
that give rise to the same category of sheaves. For example:
\begin{enumerate}
\item In Sets, Section \ref{sets-section-coverings-site}
we show how to pick a suitable set of
coverings that gives the same category of sheaves.
\item Another thing we can do is to take the associated topology
(see Definition \ref{definition-topology-associated-site}).
The resulting topology on $\mathcal{C}$ has the same category of sheaves.
Two topologies have the same categories of sheaves if and only if
they are equal, see Theorem \ref{theorem-topology-and-topos}.
A topology on a category is given by a choice of sieves on objects.
The collection of all possible sieves and even all possible
topologies on $\mathcal{C}$ is a set.
\item We could also slightly modify the notion of a site, see
Remark \ref{remark-shrink-coverings} below, and end up with a
canonical set of coverings.
\end{enumerate}
Each of these solutions has some minor drawback. For the first, one has
to check that constructions later on do not depend on the choice
of the set of coverings. For the second, one has to learn about topologies
and redo many of the arguments for sites. For the third, see
the last sentence of Remark \ref{remark-shrink-coverings}.

\medskip\noindent
Our approach will be to work with sites as in Definition \ref{definition-site}
above. Given a category $\mathcal{C}$ with a proper class of coverings
as above, we will replace this by a set of coverings producing a site using
Sets, Lemma \ref{sets-lemma-coverings-site}. It is shown in
Lemma \ref{lemma-choice-set-coverings-immaterial} below that the resulting
category of sheaves (the topos) is independent of this choice. We leave it to
the reader to use one of the other two strategies to deal with these issues if
he/she so desires.
\end{remark}

\begin{example}
\label{example-site-topological}
Let $X$ be a topological space. Let $X_{Zar}$ be the category whose
objects consist of all the open sets $U$ in $X$ and whose morphisms
are just the inclusion maps. That is, there is at most one morphism
between any two objects in $X_{Zar}$. Now define
$\{U_i \to U\}_{i \in I}\in \text{Cov}(X_{Zar})$ if
and only if $\bigcup U_i = U$.
Conditions (1) and (2) above are clear, and (3) is also
clear once we realize that in $X_{Zar}$ we have
$U \times V = U \cap V$. Note that in particular the empty
set has to be an element of $X_{Zar}$ since otherwise
this would not work in general. Furthermore, it is equally important,
as we will see later, to allow the {\it empty covering of the empty
set as a covering}!
We turn $X_{Zar}$ into a site
by choosing a suitable set of coverings
$\text{Cov}(X_{Zar})_{\kappa, \alpha}$ as in
Sets, Lemma \ref{sets-lemma-coverings-site}.
Presheaves and sheaves (as defined below)
on the site $X_{Zar}$ agree exactly with the usual notion of
a presheaves and sheaves on a topological space, as defined
in Sheaves, Section \ref{sheaves-section-introduction}.
\end{example}

\begin{example}
\label{example-site-on-group}
Let $G$ be a group. Consider the category $G\textit{-Sets}$
whose objects are sets $X$ with a left $G$-action, with
$G$-equivariant maps as the morphisms. An important example
is ${}_GG$ which is the $G$-set whose underlying set is $G$ and
action given by left multiplication. This category has
fiber products, see Categories, Section
\ref{categories-section-example-fibre-products}.
We declare $\{\varphi_i : U_i \to U\}_{i\in I}$ to be
a covering if $\bigcup_{i\in I} \varphi_i(U_i) = U$.
This gives a class of coverings on $G\textit{-Sets}$
which is easily seen to satisfy conditions (1), (2), and (3)
of Definition \ref{definition-site}. The result is not a
site since both the collection of objects of the underlying category and
the collection of coverings form a proper class.
We first replace by $G\textit{-Sets}$ by a
full subcategory $G\textit{-Sets}_\alpha$ as in Sets,
Lemma \ref{sets-lemma-sets-with-group-action}.
After this the site
$(G\textit{-Sets}_\alpha,
\text{Cov}_{\kappa, \alpha'}(G\textit{-Sets}_\alpha))$
gotten by suitably restricting the collection of coverings
as in Sets, Lemma \ref{sets-lemma-coverings-site} will be
denoted $\mathcal{T}_G$.

\medskip\noindent
As a special case, if the group $G$ is countable, then we can let
$\mathcal{T}_G$ be the category of countable $G$-sets and coverings
those jointly surjective families of morphisms
$\{\varphi_i : U_i \to U\}_{i \in I}$ such that $I$ is countable.
\end{example}

\begin{example}
\label{example-indiscrete}
Let $\mathcal{C}$ be a category. There is a canonical way to turn this
into a site where $\{\text{id}_U : U \to U\}$ are the coverings.
Sheaves on this site are the presheaves on $\mathcal{C}$.
This corresponding topology is called the {\it chaotic} or
{\it indiscrete topology}.
\end{example}















\section{Sheaves}
\label{section-sheaves}

\noindent
Let $\mathcal{C}$ be a site. Before we introduce the notion of
a sheaf with values in a category we explain what it means
for a presheaf of sets to be a sheaf. Let $\mathcal{F}$ be
a presheaf of sets on $\mathcal{C}$ and let
$\{U_i \to U\}_{i\in I}$ be an element of $\text{Cov}(\mathcal{C})$.
By assumption all the fibre products $U_i \times_U U_j$ exist
in $\mathcal{C}$. There are two natural maps
$$
\xymatrix{
\prod\nolimits_{i\in I}
\mathcal{F}(U_i)
\ar@<1ex>[r]^-{\text{pr}_0^*} \ar@<-1ex>[r]_-{\text{pr}_1^*}
&
\prod\nolimits_{(i_0, i_1) \in I \times I}
\mathcal{F}(U_{i_0} \times_U U_{i_1})
}
$$
which we will denote $\text{pr}^*_i$, $i = 0, 1$ as indicated
in the displayed equation.
Namely, an element of the left hand side corresponds to a
family $(s_i)_{i\in I}$, where each $s_i$ is a section of
$\mathcal{F}$ over $U_i$. For each pair $(i_0, i_1) \in I \times I$
we have the projection morphisms
$$
\text{pr}^{(i_0, i_1)}_{i_0} :
U_{i_0} \times_U U_{i_1}
\longrightarrow
U_{i_0}
\text{ and }
\text{pr}^{(i_0, i_1)}_{i_1} :
U_{i_0} \times_U U_{i_1}
\longrightarrow
U_{i_1}.
$$
Thus we may pull back either the section $s_{i_0}$ via
the first of these maps or the section $s_{i_1}$ via the
second. Explicitly the maps we referred to above are
$$
\text{pr}_0^* :
(s_i)_{i\in I}
\longmapsto
\Big(
\text{pr}^{(i_0, i_1), *}_{i_0}(s_{i_0})
\Big)_{(i_0, i_1) \in I \times I}
$$
and
$$
\text{pr}_1^* :
(s_i)_{i\in I}
\longmapsto
\Big(
\text{pr}^{(i_0, i_1), *}_{i_1}(s_{i_1})
\Big)_{(i_0, i_1) \in I \times I}.
$$
Finally consider the natural map
$$
\mathcal{F}(U)
\longrightarrow
\prod\nolimits_{i\in I}
\mathcal{F}(U_i), \quad
s
\longmapsto
(s|_{U_i})_{i \in I}
$$
where we have used the notation $s|_{U_i}$ to indicate the
pullback of $s$ via the map $U_i \to U$. It is clear from the
functorial nature of $\mathcal{F}$ and the commutativity
of the fibre product diagrams that
$\text{pr}_0^*( (s|_{U_i})_{i \in I} ) =
\text{pr}_1^*( (s|_{U_i})_{i \in I} )$.

\begin{definition}
\label{definition-sheaf-sets}
Let $\mathcal{C}$ be a site, and let $\mathcal{F}$ be a presheaf of sets
on $\mathcal{C}$. We say $\mathcal{F}$ is a {\it sheaf} if
for every covering $\{U_i \to U\}_{i \in I} \in \text{Cov}(\mathcal{C})$
the diagram
\begin{equation}
\label{equation-sheaf-condition}
\xymatrix{
\mathcal{F}(U) \ar[r]
&
\prod\nolimits_{i\in I}
\mathcal{F}(U_i)
\ar@<1ex>[r]^-{\text{pr}_0^*} \ar@<-1ex>[r]_-{\text{pr}_1^*}
&
\prod\nolimits_{(i_0, i_1) \in I \times I}
\mathcal{F}(U_{i_0} \times_U U_{i_1})
}
\end{equation}
represents the first arrow as the equalizer of $\text{pr}_0^*$
and $\text{pr}_1^*$.
\end{definition}

\noindent
Loosely speaking this means that given sections $s_i \in \mathcal{F}(U_i)$
such that
$$
s_i|_{U_i \times_U U_j} = s_j|_{U_i \times_U U_j}
$$
in $\mathcal{F}(U_i \times_U U_j)$ for all pairs $(i, j) \in I \times I$
then there exists a unique $s \in \mathcal{F}(U)$ such
that $s_i = s|_{U_i}$.

\begin{remark}
\label{remark-sheaf-condition-empty-covering}
If the covering $\{U_i \to U\}_{i \in I}$ is the empty family (this means
that $I = \emptyset$), then the sheaf condition signifies that
$\mathcal{F}(U) = \{*\}$ is a singleton set. This is because
in (\ref{equation-sheaf-condition}) the second and third sets
are empty products in the category of sets, which are final objects
in the category of sets, hence singletons.
\end{remark}

\begin{example}
\label{example-sheaves-topological}
Let $X$ be a topological space. Let $X_{Zar}$ be the
site constructed in Example \ref{example-site-topological}.
The notion of a sheaf on $X_{Zar}$ coincides
with the notion of a sheaf on $X$ introduced in
Sheaves, Definition \ref{sheaves-definition-sheaf}.
\end{example}

\begin{example}
\label{example-topological-wrong}
Let $X$ be a topological space. Let us consider the site $X'_{Zar}$ which is
the same as the site $X_{Zar}$ of
Example \ref{example-site-topological} except that
we disallow the empty covering of the empty set.
In other words, we do allow the covering $\{\emptyset \to \emptyset\}$
but we do not allow the covering whose index set is empty.
It is easy to show that this still defines a site. However,
we claim that the sheaves on $X'_{Zar}$ are different
from the sheaves on $X_{Zar}$. For example, as an extreme
case consider the situation where $X = \{p\}$ is a singleton.
Then the objects of $X'_{Zar}$ are $\emptyset, X$
and every covering if $\emptyset$ can be refined by
$\{\emptyset \to \emptyset\}$ and every covering of $X$ by $\{X \to X\}$.
Clearly, a sheaf on this is given by any choice of
a set $\mathcal{F}(\emptyset)$ and any choice of a
set $\mathcal{F}(X)$, together with any restriction map
$\mathcal{F}(X) \to \mathcal{F}(\emptyset)$. Thus sheaves
on $X'_{Zar}$ are the same as usual sheaves on the two point space
$\{\eta, p\}$ with open sets $\{\emptyset, \{\eta\}, \{p, \eta\}\}$.
In general sheaves on $X'_{Zar}$ are the same as sheaves
on the space $X \amalg \{\eta\}$, with opens given by
the empty set and any set of the form $U \cup \{\eta\}$ for
$U \subset X$ open.
\end{example}


\begin{definition}
\label{definition-category-sheaves-sets}
The category {\it $\Sh(\mathcal{C})$}
of sheaves of sets is the full subcategory of the category
$\textit{PSh}(\mathcal{C})$ whose objects are the sheaves of sets.
\end{definition}

\noindent
Let $\mathcal{A}$ be a category. If products indexed by $I$, and
$I \times I$ exist in $\mathcal{A}$ for any $I$ that occurs as an index
set for covering families then Definition \ref{definition-sheaf-sets}
above makes sense, and defines a notion of a sheaf on $\mathcal{C}$
with values in $\mathcal{A}$. Note that the diagram in $\mathcal{A}$
$$
\xymatrix{
\mathcal{F}(U) \ar[r]
&
\prod\nolimits_{i\in I}
\mathcal{F}(U_i)
\ar@<1ex>[r]^-{\text{pr}_0^*} \ar@<-1ex>[r]_-{\text{pr}_1^*}
&
\prod\nolimits_{(i_0, i_1) \in I \times I}
\mathcal{F}(U_{i_0} \times_U U_{i_1})
}
$$
is an equalizer diagram if and only if for every object $X$ of
$\mathcal{A}$ the diagram of sets
$$
\xymatrix{
\Mor_\mathcal{A}(X, \mathcal{F}(U)) \ar[r]
&
\prod
\Mor_\mathcal{A}(X, \mathcal{F}(U_i))
\ar@<1ex>[r]^-{\text{pr}_0^*} \ar@<-1ex>[r]_-{\text{pr}_1^*}
&
\prod
\Mor_\mathcal{A}(X, \mathcal{F}(U_{i_0} \times_U U_{i_1}))
}
$$
is an equalizer diagram.

\medskip\noindent
Suppose $\mathcal{A}$ is arbitrary.
Let $\mathcal{F}$ be a presheaf with values in $\mathcal{A}$.
Choose any object $X\in \Ob(\mathcal{A})$.
Then we get a presheaf of sets $\mathcal{F}_X$ defined
by the rule
$$
\mathcal{F}_X(U) = \Mor_\mathcal{A}(X, \mathcal{F}(U)).
$$
From the above it follows that a good definition is
obtained by requiring all the presheaves $\mathcal{F}_X$ to be
sheaves of sets.

\begin{definition}
\label{definition-sheaf}
Let $\mathcal{C}$ be a site, let $\mathcal{A}$ be a category
and let $\mathcal{F}$ be a presheaf on $\mathcal{C}$ with values in
$\mathcal{A}$. We say that $\mathcal{F}$ is a {\it sheaf}
if for all objects $X$ of $\mathcal{A}$ the presheaf of sets
$\mathcal{F}_X$ (defined above) is a sheaf.
\end{definition}











\section{Families of morphisms with fixed target}
\label{section-refinements}

\noindent
This section is meant to introduce some notions regarding
families of morphisms with the same target.

\begin{definition}
\label{definition-morphism-coverings}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{U_i \to U\}_{i\in I}$ be a family
of morphisms of $\mathcal{C}$ with fixed target.
Let $\mathcal{V} = \{V_j \to V\}_{j\in J}$ be another.
\begin{enumerate}
\item
A {\it morphism of families of maps with fixed target
of $\mathcal{C}$ from  $\mathcal{U}$ to $\mathcal{V}$},
or simply a {\it morphism from $\mathcal{U}$ to $\mathcal{V}$}
is given by a morphism $U \to V$, a map of sets
$\alpha : I \to J$ and for each $i\in I$
a morphism $U_i \to V_{\alpha(i)}$ such that the diagram
$$
\xymatrix{
U_i \ar[r] \ar[d]
&
V_{\alpha(i)} \ar[d]
\\
U \ar[r]
&
V
}
$$
is commutative.
\item In the special case that $U = V$ and $U \to V$ is the identity
we call $\mathcal{U}$ a {\it refinement} of the family $\mathcal{V}$.
\end{enumerate}
\end{definition}

\noindent
A trivial but important remark is that if
$\mathcal{V} = \{V_j \to V\}_{j \in J}$
is the {\it empty family of maps}, i.e., if $J = \emptyset$, then no
family $\mathcal{U} = \{U_i \to V\}_{i \in I}$ with $I \not = \emptyset$
can refine $\mathcal{V}$!

\begin{definition}
\label{definition-combinatorial-tautological}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{\varphi_i : U_i \to U\}_{i\in I}$, and
$\mathcal{V} = \{\psi_j : V_j \to U\}_{j\in J}$ be two families of morphisms
with fixed target.
\begin{enumerate}
\item  We say $\mathcal{U}$ and $\mathcal{V}$ are
{\it combinatorially equivalent}
if there exist maps
$\alpha : I \to J$ and $\beta : J\to I$ such that
$\varphi_i = \psi_{\alpha(i)}$ and $\psi_j = \varphi_{\beta(j)}$.
\item We say $\mathcal{U}$ and $\mathcal{V}$ are
{\it tautologically equivalent} if there exist maps
$\alpha : I \to J$ and $\beta : J\to I$ and
for all $i\in I$ and $j \in J$ commutative diagrams
$$
\xymatrix{
U_i \ar[rd] \ar[rr] & &
V_{\alpha(i)} \ar[ld] & &
V_j \ar[rd] \ar[rr] & &
U_{\beta(j)} \ar[ld] \\
&
U & & & &
U &
}
$$
with isomorphisms as horizontal arrows.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-tautological-combinatorial}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{\varphi_i : U_i \to U\}_{i\in I}$, and
$\mathcal{V} = \{\psi_j : V_j \to U\}_{j\in J}$ be two families of morphisms
with the same fixed target.
\begin{enumerate}
\item If $\mathcal{U}$ and $\mathcal{V}$ are combinatorially equivalent
then they are tautologically equivalent.
\item If $\mathcal{U}$ and $\mathcal{V}$ are tautologically equivalent
then $\mathcal{U}$ is a refinement of $\mathcal{V}$ and
$\mathcal{V}$ is a refinement of $\mathcal{U}$.
\item The relation ``being combinatorially equivalent'' is an
equivalence relation on all families of morphisms with fixed target.
\item The relation ``being tautologically equivalent'' is an
equivalence relation on all families of morphisms with fixed target.
\item The relation ``$\mathcal{U}$ refines $\mathcal{V}$ and
$\mathcal{V}$ refines $\mathcal{U}$'' is an equivalence relation on
all families of morphisms with fixed target.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
In the following lemma, given a category $\mathcal{C}$, a presheaf
$\mathcal{F}$  on $\mathcal{C}$, a
family $\mathcal{U} = \{U_i \to U\}_{i\in I}$ such that
all fibre products $U_i \times_U U_{i'}$ exist, we say that
{\it the sheaf condition for $\mathcal{F}$ with respect to
$\mathcal{U}$} holds if the diagram (\ref{equation-sheaf-condition})
is an equalizer diagram.

\begin{lemma}
\label{lemma-tautological-same-sheaf}
Let $\mathcal{C}$ be a category. Let
$\mathcal{U} = \{\varphi_i : U_i \to U\}_{i\in I}$, and
$\mathcal{V} = \{\psi_j : V_j \to U\}_{j\in J}$ be two families of morphisms
with the same fixed target. Assume that the fibre products
$U_i \times_U U_{i'}$ and $V_j \times_U V_{j'}$ exist.
If $\mathcal{U}$ and $\mathcal{V}$ are
tautologically equivalent, then for any presheaf $\mathcal{F}$ on
$\mathcal{C}$ the sheaf condition for $\mathcal{F}$ with respect to
$\mathcal{U}$ is equivalent to the sheaf condition for $\mathcal{F}$
with respect to $\mathcal{V}$.
\end{lemma}

\begin{proof}
First, note that if $\varphi : A \to B$ is an isomorphism in the
category $\mathcal{C}$, then $\varphi^* : \mathcal{F}(B) \to \mathcal{F}(A)$
is an isomorphism. Let $\beta : J \to I$ be a map and let
$\chi_j : V_j \to U_{\beta(j)}$ be isomorphisms over $U$ which
are assumed to exist by hypothesis. Let us show that the sheaf
condition for $\mathcal{V}$ implies the sheaf condition for $\mathcal{U}$.
Suppose given sections $s_i \in \mathcal{F}(U_i)$ such that
$$
s_i|_{U_i \times_U U_{i'}} = s_{i'}|_{U_i \times_U U_{i'}}
$$
in $\mathcal{F}(U_i \times_U U_{i'})$ for all pairs $(i, i') \in I \times I$.
Then we can define $s_j = \chi_j^*s_{\beta(j)}$. For any pair
$(j, j') \in J \times J$ the morphism
$\chi_j \times_{\text{id}_U} \chi_{j'} : V_j \times_U V_{j'} \to
U_{\beta(j)} \times_U U_{\beta(j')}$ is an isomorphism as well.
Hence by transport of structure we see that
$$
s_j|_{V_j \times_U V_{j'}} = s_{j'}|_{V_j \times_U V_{j'}}
$$
as well. The sheaf condition w.r.t.\ $\mathcal{V}$ implies there
exists a unique $s$ such that $s|_{V_j} = s_j$ for all $j \in J$.
By the first remark of the proof this implies that $s|_{U_i} = s_i$
for all $i \in \Im(\beta)$ as well. Suppose that $i \in I$,
$i \not \in \Im(\beta)$. For such an $i$ we have isomorphisms
$U_i \to V_{\alpha(i)} \to U_{\beta(\alpha(i))}$ over $U$. This gives a
morphism $U_i \to U_i \times_U U_{\beta(\alpha(i))}$ which is a
section of the projection. Because $s_i$ and $s_{\beta(\alpha(i))}$
restrict to the same element on the fibre product we conclude that
$s_{\beta(\alpha(i))}$ pulls back to $s_i$ via $U_i \to U_{\beta(\alpha(i))}$.
Thus we see that also $s_i = s|_{U_i}$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-refine-same-topology}
Let $\mathcal{C}$ be a category. Let $\text{Cov}_i$, $i = 1, 2$
be two sets of families of morphisms with fixed target which
each define the structure of a site on $\mathcal{C}$.
\begin{enumerate}
\item If every $\mathcal{U} \in \text{Cov}_1$ is tautologically
equivalent to some $\mathcal{V} \in \text{Cov}_2$, then
$\Sh(\mathcal{C}, \text{Cov}_2) \subset
\Sh(\mathcal{C}, \text{Cov}_1)$.
If also, every $\mathcal{U} \in \text{Cov}_2$ is tautologically
equivalent to some $\mathcal{V} \in \text{Cov}_1$ then
the category of sheaves are equal.
\item Suppose
that for each $\mathcal{U} \in \text{Cov}_1$ there exists a
$\mathcal{V} \in \text{Cov}_2$ such that $\mathcal{V}$ refines
$\mathcal{U}$. In this case
$\Sh(\mathcal{C}, \text{Cov}_2) \subset
\Sh(\mathcal{C}, \text{Cov}_1)$.
If also for every $\mathcal{U} \in \text{Cov}_2$
there exists a $\mathcal{V} \in \text{Cov}_1$ such that $\mathcal{V}$
refines $\mathcal{U}$, then the categories of sheaves
are equal.
\end{enumerate}
\end{lemma}

\begin{proof}
Part (1) follows directly from Lemma \ref{lemma-tautological-same-sheaf}
and the definitions.

\medskip\noindent
We advise the reader to {\bf skip the proof of (2)} on a first reading.
Let $\mathcal{F}$ be a sheaf of sets for the site
$(\mathcal{C}, \text{Cov}_2)$. Let $\mathcal{U} \in \text{Cov}_1$,
say $\mathcal{U} = \{U_i \to U\}_{i\in I}$. Choose a
refinement $\mathcal{V} \in \text{Cov}_2$ of $\mathcal{U}$, say
$\mathcal{V} = \{V_j \to U\}_{j\in J}$ and refinement given
by $\alpha : J \to I$ and $f_j : V_j \to U_{\alpha(j)}$.

\medskip\noindent
First let $s, s' \in \mathcal{F}(U)$. If for all $i \in I$ we
have $s|_{U_i} = s'|_{U_i}$, then we also have $s|_{V_j} = s'|_{V_j}$
for all $j \in J$. This implies that $s = s'$ by the sheaf condition
for $\mathcal{F}$ with respect to $\text{Cov}_2$. Hence we see that
the unicity in the sheaf condition for $\mathcal{F}$ and the
site $(\mathcal{C}, \text{Cov}_1)$ holds.

\medskip\noindent
Next, suppose given
$s_i \in \mathcal{F}(U_i)$ such that $s_i|_{U_i \times_U U_{i'}}
= s_{i'}|_{U_i \times_U U_{i'}}$ for all $i, i' \in I$.
Set $s_j = f_j^*(s_{\alpha(j)}) \in \mathcal{F}(V_j)$.
Since the morphisms $f_j$ are morphisms over $U$ we obtain
induced morphisms $f_{jj'} : V_j \times_U V_{j'} \to
U_{\alpha(i)} \times_U U_{\alpha(i')}$ compatible with the
$f_j, f_{j'}$ via the projection maps. It follows that
$$
s_j|_{V_j \times_U V_{j'}}
= f_{jj'}^*(s_{\alpha(j)}|_{U_{\alpha(j)} \times_U U_{\alpha(j')}})
= f_{jj'}^*(s_{\alpha(j')}|_{U_{\alpha(j)} \times_U U_{\alpha(j')}})
= s_{j'}|_{V_j \times_U V_{j'}}
$$
for all $j, j' \in J$. Hence, by the sheaf condition
for $\mathcal{F}$ with respect to $\text{Cov}_2$, we get a section
$s \in \mathcal{F}(U)$ which restricts to $s_j$ on each $V_j$.
We are done if we show $s$ restricts to $s_{i_0}$ on $U_{i_0}$
for any $i_0 \in I$. For each $i_0 \in I$ the family
$\mathcal{U}' = \{U_i \times_U U_{i_0} \to U_{i_0}\}_{i \in I}$
is an element of $\text{Cov}_1$ by the axioms of a site.
Also, the family
$\mathcal{V}' = \{V_j \times_U U_{i_0} \to U_{i_0}\}_{j \in J}$
is an element of $\text{Cov}_2$.
Then $\mathcal{V}'$ refines $\mathcal{U}'$
via $\alpha : J \to I$ and the maps $f'_j = f_j \times \text{id}_{U_{i_0}}$.
The element $s_{i_0}$ restricts to $s_i|_{U_i \times_U U_{i_0}}$
on the members of the covering $\mathcal{U}'$ and hence via
$(f_j')^*$ to the elements $s_j|_{V_j \times_U U_{i_0}}$ on the members
of the covering $\mathcal{V}'$. By construction of $s$ this is the
same as the family of restrictions of $s|_{U_{i_0}}$ to the members
of the covering $\mathcal{V}'$. Hence by the sheaf condition
for $\mathcal{F}$ with respect to $\text{Cov}_2$ we see that
$s|_{U_{i_0}} = s_{i_0}$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-choice-set-coverings-immaterial}
Let $\mathcal{C}$ be a category.
Let $\text{Cov}(\mathcal{C})$ be a proper class of coverings
satisfying conditions (1), (2) and (3) of Definition \ref{definition-site}.
Let $\text{Cov}_1, \text{Cov}_2 \subset \text{Cov}(\mathcal{C})$
be two subsets of $\text{Cov}(\mathcal{C})$ which endow
$\mathcal{C}$ with the structure of a site. If
every covering $\mathcal{U} \in \text{Cov}(\mathcal{C})$
is combinatorially equivalent to a covering in
$\text{Cov}_1$ and combinatorially equivalent to a
covering in $\text{Cov}_2$, then
$\Sh(\mathcal{C}, \text{Cov}_1) =
\Sh(\mathcal{C}, \text{Cov}_2)$.
\end{lemma}

\begin{proof}
This is clear from Lemmas \ref{lemma-refine-same-topology}
and \ref{lemma-tautological-combinatorial} above as the hypothesis
implies that every covering
$\mathcal{U} \in \text{Cov}_1 \subset \text{Cov}(\mathcal{C})$
is combinatorially equivalent to an element of $\text{Cov}_2$,
and similarly with the roles of $\text{Cov}_1$ and $\text{Cov}_2$
reversed.
\end{proof}
















\section{The example of G-sets}
\label{section-example-sheaf-G-sets}

\noindent
As an example, consider the site $\mathcal{T}_G$ of
Example \ref{example-site-on-group}. We will describe the
category of sheaves on $\mathcal{T}_G$. The answer will turn
out to be independent of the choices made in defining $\mathcal{T}_G$.
In fact, during the proof we will need only the following
properties of the site $\mathcal{T}_G$:
\begin{enumerate}
\item[(a)] $\mathcal{T}_G$ is a full subcategory of $G\textit{-Sets}$,
\item[(b)] $\mathcal{T}_G$ contains the $G$-set ${}_GG$,
\item[(c)] $\mathcal{T}_G$ has fibre products and they are the same as
in $G\textit{-Sets}$,
\item[(d)] given $U \in \Ob(\mathcal{T}_G)$ and a $G$-invariant
subset $O \subset U$, there exists an object of $\mathcal{T}_G$ isomorphic
to $O$, and
\item[(e)] any surjective family of maps $\{U_i \to U\}_{i \in I}$, with
$U, U_i \in \Ob(\mathcal{T}_G)$ is combinatorially equivalent to a
covering of $\mathcal{T}_G$.
\end{enumerate}
These properties hold by Sets, Lemmas \ref{sets-lemma-what-is-in-it-G-sets}
and \ref{sets-lemma-coverings-site}.

\medskip\noindent
Remark that the map
$$
\Hom_G({}_GG, {}_GG)
\longrightarrow
G^{opp},
\varphi
\longmapsto
\varphi(1)
$$
is an isomorphism of groups. The inverse map sends $g \in G$
to the map $R_g : s \mapsto sg$ (i.e.\ right multiplication).
Note that $R_{g_1g_2} = R_{g_2} \circ R_{g_1}$ so the opposite
is necessary.

\medskip\noindent
This implies that for every presheaf $\mathcal{F}$ on $\mathcal{T}_G$
the value $\mathcal{F}({}_GG)$ inherits the structure of a $G$-set
as follows: $g \cdot s$ for $g \in G$ and $s \in \mathcal{F}({}_GG)$
defined by $\mathcal{F}(R_g)(s)$. This is a left action
because
$$
(g_1g_2) \cdot s  = \mathcal{F}(R_{g_1g_2})(s) =
\mathcal{F}(R_{g_2}\circ R_{g_1})(s) =
\mathcal{F}(R_{g_1})( \mathcal{F}(R_{g_2})(s)) =
g_1 \cdot (g_2 \cdot s).
$$
Here we've used that $\mathcal{F}$
is contravariant. Note that if $\mathcal{F} \to \mathcal{G}$
is a morphism of presheaves of sets on $\mathcal{T}_G$
then we get a map $\mathcal{F}({}_GG) \to \mathcal{G}({}_GG)$
which is compatible with the $G$-actions we have just defined.
All in all we have constructed a functor
$$
\textit{PSh}(\mathcal{T}_G)
\longrightarrow
G\textit{-Sets}, \quad
\mathcal{F}
\longmapsto
\mathcal{F}({}_GG).
$$
We leave it to the reader to verify that this construction
has the pleasing property that the representable presheaf
$h_U$ is mapped to something canonically isomorphic to $U$.
In a formula $h_U({}_GG) = \Hom_G({}_GG, U) \cong U$.

\medskip\noindent
Suppose that $S$ is a $G$-set. We define a presheaf
$\mathcal{F}_S$ by the formula\footnote{It may appear this is the
representable presheaf defined by $S$. This may not be the case
because $S$ may not be an object of $\mathcal{T}_G$ which was chosen
to be a sufficiently large set of $G$-sets.}
$$
\mathcal{F}_S(U)
=
\Mor_{G\textit{-Sets}}(U, S).
$$
This is clearly a presheaf. On the other hand, suppose that
$\{U_i \to U\}_{i\in I}$ is a covering in $\mathcal{T}_G$.
This implies that $\coprod_i U_i \to U$ is surjective. Thus it is
clear that the map
$$
\mathcal{F}_S(U)
=
\Mor_{G\textit{-Sets}}(U, S)
\longrightarrow
\prod \mathcal{F}_S(U_i)
=
\prod \Mor_{G\textit{-Sets}}(U_i, S)
$$
is injective. And, given a family of $G$-equivariant
maps $s_i : U_i \to S$, such that all the diagrams
$$
\xymatrix{
U_i \times_U U_j \ar[d] \ar[r]
&
U_j \ar[d]^{s_j}
\\
U_i \ar[r]^{s_i}
&
S
}
$$
commute, there is a unique $G$-equivariant map
$s : U \to S$ such that $s_i$ is the composition
$U_i \to U \to S$. Namely, we just define $s(u) = s_i(u_i)$
where $i\in I$ is any index such that there exists some
$u_i \in U_i$ mapping to $u$ under the map $U_i \to U$.
The commutativity of the diagrams above implies exactly
that this construction is well defined. All in all we have
constructed a functor
$$
G\textit{-Sets}
\longrightarrow
\Sh(\mathcal{T}_G), \quad
S
\longmapsto
\mathcal{F}_S
.
$$

\medskip\noindent
We now have the following diagram of categories and functors
$$
\xymatrix{
\textit{PSh}(\mathcal{T}_G) \ar[rr]^{\mathcal{F} \mapsto \mathcal{F}({}_GG)}
&
&
G\textit{-Sets} \ar[ld]_{S \mapsto \mathcal{F}_S}
\\
&
\Sh(\mathcal{T}_G) \ar[lu]
&
}
$$
It is immediate from the definitions that $\mathcal{F}_S({}_GG)
= \Mor_G({}_GG, S) = S$, the last equality by evaluation at $1$.
This almost proves the following.

\begin{proposition}
\label{proposition-sheaves-on-group}
The functors $\mathcal{F} \mapsto \mathcal{F}({}_GG)$
and $S \mapsto \mathcal{F}_S$ define quasi-inverse
equivalences between $\Sh(\mathcal{T}_G)$
and $G\textit{-Sets}$.
\end{proposition}

\begin{proof}
We have already seen that composing the functors one way around
is isomorphic to the identity functor.
In the other direction, for any sheaf $\mathcal{H}$ there is a natural
map of sheaves
$$
can :
\mathcal{H}
\longrightarrow
\mathcal{F}_{\mathcal{H}({}_GG)}.
$$
Namely, for any object $U$ of $\mathcal{T}_G$ we let $can_U$
be the map
$$
\begin{matrix}
\mathcal{H}(U)
&
\longrightarrow
&
\mathcal{F}_{\mathcal{H}({}_GG)}(U)
=
\Mor_G(U, \mathcal{H}({}_GG))
\\
s
&
\longmapsto
&
(u \mapsto \alpha_u^*s).
\end{matrix}
$$
Here $\alpha_u : {}_GG \to U$ is the map
$\alpha_u(g) = gu$ and $\alpha_u^* : \mathcal{H}(U)
\to \mathcal{H}({}_GG)$ is the pullback map. A trivial
but confusing verification shows that this is indeed a map
of presheaves. We have to show that $can$ is an isomorphism.
We do this by showing $can_U$ is an isomorphism for all
$U \in \Ob(\mathcal{T}_G)$. We leave the (important but
easy) case that $U = {}_GG$ to the reader.
A general object $U$ of $\mathcal{T}_G$ is a disjoint union of
$G$-orbits: $U = \coprod_{i\in I} O_i$. The family of maps
$\{O_i \to U\}_{i \in I}$ is tautologically equivalent
to a covering in $\mathcal{T}_G$ (by the properties of $\mathcal{T}_G$
listed at the beginning of this section). Hence by Lemma
\ref{lemma-tautological-same-sheaf} the sheaf $\mathcal{H}$
satisfies the sheaf property with respect to
$\{O_i \to U\}_{i \in I}$. The sheaf property for this covering
implies $\mathcal{H}(U) = \prod_i \mathcal{H}(O_i)$.
Hence it suffices to show that $can_U$ is an
isomorphism when $U$ consists of a single $G$-orbit. Let $u \in U$
and let $H \subset G$ be its stabilizer. Clearly,
$\Mor_G(U, \mathcal{H}({}_GG)) = \mathcal{H}({}_GG)^H$
equals the subset of $H$-invariant elements. On the other hand
consider the covering $\{{}_GG \to U\}$ given by $g \mapsto
gu$ (again it is just combinatorially equivalent to some covering
of $\mathcal{T}_G$, and again this doesn't matter).
Note that the fibre product $({}_GG)\times_U ({}_GG)$
is equal to $\{(g, gh), g\in G, h\in H\} \cong \coprod_{h\in H} {}_GG$.
Hence the sheaf property for this covering reads as
$$
\xymatrix{
\mathcal{H}(U) \ar[r]
&
\mathcal{H}({}_GG)
\ar@<1ex>[r]^-{\text{pr}_0^*} \ar@<-1ex>[r]_-{\text{pr}_1^*}
&
\prod_{h \in H}
\mathcal{H}({}_GG).
}
$$
The two maps $\text{pr}_i^*$ into the factor
$\mathcal{H}({}_GG)$ differ by multiplication by $h$.
Now the result follows from this and the fact that $can$
is an isomorphism for $U = {}_GG$.
\end{proof}





















\section{Sheafification}
\label{section-sheafification}

\noindent
In order to define the sheafification we study the zeroth
{\v C}ech cohomology group of a covering and its functoriality
properties.

\medskip\noindent
Let $\mathcal{F}$ be a presheaf of sets on $\mathcal{C}$, and let
$\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
Let us use the notation $\mathcal{F}(\mathcal{U})$ to indicate the equalizer
$$
H^0(\mathcal{U}, \mathcal{F})
=
\{
(s_i)_{i\in I} \in \prod\nolimits_i \mathcal{F}(U_i)
\mid
s_i|_{U_i \times_U U_j} = s_j|_{U_i \times_U U_j}
\ \forall i, j \in I
\}.
$$
As we will see later, this is the zeroth {\v C}ech cohomology
of $\mathcal{F}$ over $U$ with respect to the covering $\mathcal{U}$.
A small remark is that we can define $H^0(\mathcal{U}, \mathcal{F})$
as soon as all the morphisms $U_i \to U$ are representable, i.e.,
$\mathcal{U}$ need not be a covering of the site.
There is a canonical map $\mathcal{F}(U) \to H^0(\mathcal{U}, \mathcal{F})$.
It is clear that a morphism of coverings $\mathcal{U} \to \mathcal{V}$
induces commutative diagrams
$$
\xymatrix{
& U_i \ar[rr] & & V_{\alpha(i)} \\
U_i \times_U U_j \ar[rr] \ar[ur] \ar[dr] & &
V_{\alpha(i)} \times_V V_{\alpha(j)} \ar[ur] \ar[dr] & \\
& U_j \ar[rr] & & V_{\alpha(j)}
}.
$$
This in turn produces a map $H^0(\mathcal{V}, \mathcal{F}) \to
H^0(\mathcal{U}, \mathcal{F})$, compatible with the map $\mathcal{F}(V)
\to \mathcal{F}(U)$.

\medskip\noindent
By construction, a presheaf $\mathcal{F}$ is a sheaf if and only if for
every covering $\mathcal{U}$ of $\mathcal{C}$ the natural map
$\mathcal{F}(U) \to H^0(\mathcal{U}, \mathcal{F})$ is bijective.
We will use this notion to prove the following
simple lemma about limits of sheaves.

\begin{lemma}
\label{lemma-limit-sheaf}
Let $\mathcal{F} : \mathcal{I} \to \Sh(\mathcal{C})$
be a diagram. Then $\lim_\mathcal{I} \mathcal{F}$ exists
and is equal to the limit in the category of presheaves.
\end{lemma}

\begin{proof}
Let $\lim_i \mathcal{F}_i$ be the limit as a presheaf.
We will show that this is a sheaf and then it will trivially follow
that it is a limit in the category of sheaves. To prove the sheaf
property, let $\mathcal{V} = \{V_j \to V\}_{j\in J}$ be a covering.
Let $(s_j)_{j\in J}$ be an element of $H^0(\mathcal{V}, \lim_i \mathcal{F}_i)$.
Using the projection maps we get elements $(s_{j, i})_{j\in J}$
in $H^0(\mathcal{V}, \mathcal{F}_i)$. By the sheaf property for
$\mathcal{F}_i$ we see that there is a unique $s_i \in \mathcal{F}_i(V)$
such that $s_{j, i} = s_i|_{V_j}$. Let $\phi : i \to i'$ be a morphism
of the index category. We would like to show that
$\mathcal{F}(\phi) : \mathcal{F}_i \to \mathcal{F}_{i'}$
maps $s_i$ to $s_{i'}$. We know this is true for the sections
$s_{i, j}$ and $s_{i', j}$ for all $j$ and hence by the sheaf property
for $\mathcal{F}_{i'}$ this is true. At this point we have an
element $s = (s_i)_{i \in \Ob(\mathcal{I})}$ of
$(\lim_i \mathcal{F}_i)(V)$. We leave it to the reader to see
this element has the required property that $s_j = s|_{V_j}$.
\end{proof}

\begin{example}
\label{example-singleton-sheaf}
A particular example is the limit over the empty diagram.
This gives the final object in the category of (pre)sheaves.
It is the presheaf that associates
to each object $U$ of $\mathcal{C}$ a singleton set, with unique
restriction mappings and moreover this presheaf is a sheaf.
We often denote this sheaf by $*$.
\end{example}

\noindent
Let $\mathcal{J}_U$ be the category of all coverings of $U$.
In other words, the objects of $\mathcal{J}_U$ are the coverings
of $U$ in $\mathcal{C}$, and the morphisms are the refinements.
By our conventions on sites this is indeed a category, i.e.,
the collection of objects and morphisms forms a set.
Note that $\Ob(\mathcal{J}_U)$ is not empty since
$\{\text{id}_U\}$ is an object of it. According to the remarks
above the construction $\mathcal{U} \mapsto H^0(\mathcal{U}, \mathcal{F})$
is a contravariant functor on $\mathcal{J}_U$.
We define
$$
\mathcal{F}^{+}(U)
=
\colim_{\mathcal{J}_U^{opp}}
H^0(\mathcal{U}, \mathcal{F})
$$
See Categories, Section \ref{categories-section-limits} for
a discussion of limits and colimits. We point out that later
we will see that $\mathcal{F}^{+}(U)$ is the zeroth {\v C}ech
cohomology of $\mathcal{F}$ over $U$.

\medskip\noindent
Before we say more about the structure of the colimit, we turn
the collection of sets
$\mathcal{F}^{+}(U)$, $U \in \Ob(\mathcal{C})$
into a presheaf. Namely, let $V \to U$ be a morphism of $\mathcal{C}$.
By the axioms of a site there is a functor\footnote{This construction
actually involves a choice of the fibre products $U_i \times_U V$
and hence the axiom of choice. The resulting map does not depend on
the choices made, see below.}
$$
\mathcal{J}_U
\longrightarrow
\mathcal{J}_V, \quad
\{U_i \to U\}
\longmapsto
\{U_i \times_U V \to V\}.
$$
Note that the projection maps furnish a functorial
morphism of coverings $\{U_i \times_U V \to V\} \to \{U_i \to U\}$
and hence, by the construction above, a functorial map of sets
$H^0(\{U_i \to U\}, \mathcal{F}) \to
H^0(\{U_i \times_U V \to V\}, \mathcal{F})$.
In other words, there is a transformation of functors
from $H^0(-, \mathcal{F}) : \mathcal{J}_U^{opp} \to \textit{Sets}$
to the composition
$\mathcal{J}_U^{opp} \to \mathcal{J}_V^{opp}
\xrightarrow{H^0(-, \mathcal{F})} \textit{Sets}$. Hence by
generalities of colimits we obtain a canonical map
$\mathcal{F}^+(U) \to \mathcal{F}^+(V)$. In terms of the description
of the set $\mathcal{F}^+(U)$ above, it just takes the element
associated with $s = (s_i) \in H^0(\{U_i \to U\}, \mathcal{F})$ to the
element associated with $(s_i|_{V \times_U U_i})
\in H^0(\{U_i \times_U V \to V\}, \mathcal{F})$.

\begin{lemma}
\label{lemma-plus-presheaf}
The constructions above define a presheaf
$\mathcal{F}^+$ together with a canonical
map of presheaves $\mathcal{F} \to \mathcal{F}^+$.
\end{lemma}

\begin{proof}
All we have to do is to show that given morphisms
$W \to V \to U$ the composition $\mathcal{F}^+(U)
\to \mathcal{F}^+(V) \to \mathcal{F}^+(W)$
equals the map $\mathcal{F}^+(U) \to \mathcal{F}^+(W)$.
This can be shown directly by verifying that, given
a covering $\{U_i \to U\}$ and
$s = (s_i) \in H^0(\{U_i \to U\}, \mathcal{F})$,
we have canonically
$W \times_U U_i \cong W \times_V (V \times_U U_i)$,
and
$s_i|_{W \times_U U_i}$
corresponds to
$(s_i|_{V \times_U U_i})|_{W \times_V (V \times_U U_i)}$
via this isomorphism.
\end{proof}

\noindent
More indirectly, the result of
Lemma \ref{lemma-independent-refinement} shows that
we may pullback an element $s$ as above via any morphism
from any covering of $W$ to $\{U_i \to U\}$
and we will always end up with the same element in
$\mathcal{F}^+(W)$.

\begin{lemma}
\label{lemma-plus-functorial}
The association $\mathcal{F} \mapsto
(\mathcal{F} \to \mathcal{F}^+)$
is a functor.
\end{lemma}

\begin{proof}
Instead of proving this we state exactly what needs to be proven.
Let $\mathcal{F} \to \mathcal{G}$ be a map of presheaves. Prove
the commutativity of:
$$
\xymatrix{
\mathcal{F} \ar[r] \ar[d]
&
\mathcal{F}^{+} \ar[d]
\\
\mathcal{G} \ar[r]
&
\mathcal{G}^{+}
}
$$
\end{proof}

\noindent
The next two lemmas imply that the colimits above are colimits
over a directed set.

\begin{lemma}
\label{lemma-common-refinement}
Given a pair of coverings $\{U_i \to U\}$
and $\{V_j \to U\}$ of a given object $U$ of the site
$\mathcal{C}$, there exists a covering which is a
common refinement.
\end{lemma}

\begin{proof}
Since $\mathcal{C}$ is a site we have that for every $i$ the
family $\{V_j \times_U U_i \to U_i\}_j$ is a covering.
And, then another axiom implies that $\{V_j \times_U U_i \to U\}_{i, j}$
is a covering of $U$. Clearly this covering refines both given
coverings.
\end{proof}

\begin{lemma}
\label{lemma-independent-refinement}
Any two morphisms $f, g: \mathcal{U} \to \mathcal{V}$ of coverings
inducing the same morphism $U \to V$ induce the same
map $H^0(\mathcal{V}, \mathcal{F}) \to  H^0(\mathcal{U}, \mathcal{F})$.
\end{lemma}

\begin{proof}
Let $\mathcal{U} = \{U_i \to U\}_{i\in I}$ and
$\mathcal{V} = \{V_j \to V\}_{j\in J}$.
The morphism $f$ consists of a map $U\to V$, a map $\alpha : I \to J$ and
maps $f_i : U_i \to V_{\alpha(i)}$.
Likewise, $g$~determines a map $\beta : I \to J$ and maps
$g_i : U_i \to V_{\beta(i)}$.
As $f$ and $g$ induce the same map $U\to V$, the diagram
$$
\xymatrix{
&
V_{\alpha(i)} \ar[dr]
\\
U_i \ar[ur]^{f_i} \ar[dr]_{g_i}
&
&
V
\\
&
V_{\beta(i)} \ar[ur]
}
$$
is commutative for every $i\in I$. Hence $f$ and $g$ factor through
the fibre product
$$
\xymatrix{
&
V_{\alpha(i)}
\\
U_i \ar[r]^-\varphi \ar[ur]^{f_i} \ar[dr]_{g_i}
&
V_{\alpha(i)} \times_V V_{\beta(i)} \ar[u]_{\text{pr}_1} \ar[d]^{\text{pr}_2}
\\
&
V_{\beta(i)}.
}
$$
Now let $s = (s_j)_j \in H^0(\mathcal{V}, \mathcal{F})$.
Then for all $i\in I$:
$$
(f^*s)_i
=
f_i^*(s_{\alpha(i)})
=
\varphi^*\text{pr}_1^*(s_{\alpha(i)})
=
\varphi^*\text{pr}_2^*(s_{\beta(i)})
=
g_i^*(s_{\beta(i)})
=
(g^*s)_i,
$$
where the middle equality is given by the definition
of $H^0(\mathcal{V}, \mathcal{F})$.
This shows that the maps
$H^0(\mathcal{V}, \mathcal{F}) \to H^0(\mathcal{U}, \mathcal{F})$
induced by $f$ and $g$ are equal.
\end{proof}

\begin{remark}
\label{remark-both-refine-same-H0}
In particular this lemma shows that if $\mathcal{U}$ is
a refinement of $\mathcal{V}$, and if $\mathcal{V}$ is a
refinement of $\mathcal{U}$, then there is a canonical
identification $H^0(\mathcal{U}, \mathcal{F}) =
H^0(\mathcal{V}, \mathcal{F})$.
\end{remark}

\noindent
From these two lemmas, and the fact that $\mathcal{J}_U$ is nonempty,
it follows that the diagram $H^0(-, \mathcal{F}) : \mathcal{J}_U^{opp}
\to \textit{Sets}$ is filtered, see
Categories, Definition \ref{categories-definition-directed}.
Hence, by Categories,
Section \ref{categories-section-directed-colimits}
the colimit $\mathcal{F}^{+}(U)$ may be described
in the following straightforward manner. Namely, every element in the set
$\mathcal{F}^{+}(U)$ arises from an element
$s \in H^0(\mathcal{U}, \mathcal{F})$ for some covering
$\mathcal{U}$ of $U$. Given a second element $s' \in
H^0(\mathcal{U}', \mathcal{F})$ then $s$ and $s'$ determine
the same element of the colimit if and only if there exists a covering
$\mathcal{V}$ of $U$ and refinements $f : \mathcal{V} \to \mathcal{U}$ and
$f' : \mathcal{V} \to \mathcal{U}'$ such that $f^*s = (f')^*s'$
in $H^0(\mathcal{V}, \mathcal{F})$. Since the trivial covering
$\{\text{id}_U\}$ is an object of $\mathcal{J}_U$ we get
a canonical map $\mathcal{F}(U) \to \mathcal{F}^+(U)$.

\begin{lemma}
\label{lemma-plus-surjective}
The map $\theta : \mathcal{F} \to \mathcal{F}^+$ has the following
property: For every object $U$ of $\mathcal{C}$ and every section
$s \in \mathcal{F}^+(U)$ there exists a covering $\{U_i \to U\}$
such that $s|_{U_i}$ is in the image of $\theta : \mathcal{F}(U_i)
\to \mathcal{F}^{+}(U_i)$.
\end{lemma}

\begin{proof}
Namely, let $\{U_i \to U\}$ be a covering such that $s$ arises
from the element $(s_i) \in H^0(\{U_i \to U\}, \mathcal{F})$.
According to Lemma \ref{lemma-independent-refinement} we may
consider the covering $\{U_i \to U_i\}$ and the (obvious) morphism
of coverings $\{U_i \to U_i\} \to \{U_i \to U\}$ to compute the
pullback of $s$ to an element of $\mathcal{F}^+(U_i)$. And indeed,
using this covering we get exactly $\theta(s_i)$ for the restriction
of $s$ to $U_i$.
\end{proof}

\begin{definition}
\label{definition-separated}
We say that a presheaf of sets $\mathcal{F}$ on a site
$\mathcal{C}$ is {\it separated} if, for all coverings
of $\{U_i \rightarrow U\}$, the map
$\mathcal{F}(U) \to \prod \mathcal{F}(U_i)$ is injective.
\end{definition}

\begin{theorem}
\label{theorem-plus}
With $\mathcal{F}$ as above
\begin{enumerate}
\item
\label{item-sep}
The presheaf $\mathcal{F}^+$ is separated.
\item
\label{item-sheaf}
If $\mathcal{F}$ is separated, then $\mathcal{F}^+$ is a sheaf
and the map of presheaves $\mathcal{F} \to \mathcal{F}^+$ is injective.
\item
\label{item-plus-iso}
If $\mathcal{F}$ is a sheaf, then $\mathcal{F} \to \mathcal{F}^+$
is an isomorphism.
\item
\label{item-plusplus}
The presheaf $\mathcal{F}^{++}$ is always a sheaf.
\end{enumerate}
\end{theorem}

\begin{proof}
Proof of (\ref{item-sep}).
Suppose that $s, s' \in \mathcal{F}^+(U)$ and suppose that
there exists some covering $\{U_i \to U\}$ such that
$s|_{U_i} = s'|_{U_i}$ for all $i$. We now have three coverings
of $U$: the covering $\{U_i \to U\}$ above, a covering $\mathcal{U}$
for $s$ as in Lemma \ref{lemma-plus-surjective},
and a similar covering $\mathcal{U}'$ for $s'$. By Lemma
\ref{lemma-common-refinement}, we can find a common refinement,
say $\{W_j \to U\}$. This means we have $s_j, s'_j \in \mathcal{F}(W_j)$
such that $s|_{W_j} = \theta(s_j)$, similarly for $s'|_{W_j}$, and
such that $\theta(s_j) = \theta(s'_j)$. This last equality means
that there exists some covering $\{W_{jk} \to W_j\}$ such that
$s_j|_{W_{jk}} = s'_j|_{W_{jk}}$. Then since $\{W_{jk} \to U\}$
is a covering we see that $s, s'$ map to the same element of
$H^0(\{W_{jk} \to U\}, \mathcal{F})$ as desired.

\medskip\noindent
Proof of (\ref{item-sheaf}). It is clear that $\mathcal{F} \to
\mathcal{F}^+$ is injective because all the maps
$\mathcal{F}(U) \to H^0(\mathcal{U}, \mathcal{F})$
are injective. It is also clear that, if $\mathcal{U} \to
\mathcal{U}'$ is a refinement, then $H^0(\mathcal{U}', \mathcal{F})
\to H^0(\mathcal{U}, \mathcal{F})$ is injective. Now,
suppose that $\{U_i \to U\}$ is a covering, and let
$(s_i)$ be a family of elements of $\mathcal{F}^+(U_i)$
satisfying the sheaf condition
$s_i|_{U_i \times_U U_j} = s_j|_{U_i \times_U U_j}$
for all $i, j \in I$. Choose coverings (as in
Lemma \ref{lemma-plus-surjective}) $\{U_{ij} \to U_i\}$
such that $s_i|_{U_{ij}}$ is the image of the (unique)
element $s_{ij} \in \mathcal{F}(U_{ij})$. The sheaf condition
implies that $s_{ij}$ and $s_{i'j'}$ agree over
$U_{ij} \times_U U_{i'j'}$ because it maps to
$U_i \times_U U_{i'}$ and we have the equality there.
Hence $(s_{ij}) \in H^0(\{U_{ij} \to U\}, \mathcal{F})$
gives rise to an element $s \in \mathcal{F}^+(U)$. We leave
it to the reader to verify that $s|_{U_i} = s_i$.

\medskip\noindent
Proof of (\ref{item-plus-iso}). This is immediate from the definitions
because the sheaf property says exactly that every map
$\mathcal{F} \to H^0(\mathcal{U}, \mathcal{F})$ is bijective
(for every covering $\mathcal{U}$ of $U$).

\medskip\noindent
Statement (\ref{item-plusplus}) is now obvious.
\end{proof}

\begin{definition}
\label{definition-associated-sheaf}
Let $\mathcal{C}$ be a site and let $\mathcal{F}$ be a presheaf
of sets on $\mathcal{C}$. The sheaf $\mathcal{F}^\# := \mathcal{F}^{++}$
together with the canonical map $\mathcal{F} \to \mathcal{F}^\#$
is called the {\it sheaf associated to $\mathcal{F}$}.
\end{definition}

\begin{proposition}
\label{proposition-sheafification-adjoint}
The canonical map $\mathcal{F} \to \mathcal{F}^\#$ has the
following universal property: For any map $\mathcal{F} \to \mathcal{G}$,
where $\mathcal{G}$ is a sheaf of sets, there is a unique map
$\mathcal{F}^\# \to \mathcal{G}$ such that $\mathcal{F} \to \mathcal{F}^\#
\to \mathcal{G}$ equals the given map.
\end{proposition}

\begin{proof}
By Lemma \ref{lemma-plus-functorial} we get a commutative diagram
$$
\xymatrix{
\mathcal{F} \ar[r] \ar[d]
&
\mathcal{F}^{+} \ar[r] \ar[d]
&
\mathcal{F}^{++} \ar[d]
\\
\mathcal{G} \ar[r]
&
\mathcal{G}^{+} \ar[r]
&
\mathcal{G}^{++}
}
$$
and by Theorem \ref{theorem-plus} the lower horizontal maps
are isomorphisms. The uniqueness follows from Lemma
\ref{lemma-plus-surjective} which says that every section of
$\mathcal{F}^\#$ locally comes from sections of $\mathcal{F}$.
\end{proof}

\noindent
It is clear from this result that the functor $\mathcal{F}
\mapsto (\mathcal{F} \to \mathcal{F}^\#)$ is unique
up to unique isomorphism of functors. Actually, let us temporarily
denote $i : \Sh(\mathcal{C}) \to \textit{PSh}(\mathcal{C})$
the functor of inclusion. The result above actually says that
$$
\Mor_{\textit{PSh}(\mathcal{C})}(\mathcal{F}, i(\mathcal{G}))
=
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}^\#, \mathcal{G}).
$$
In other words, the functor of sheafification is the left adjoint
to the inclusion functor $i$. We finish this section with a couple
of lemmas.

\begin{lemma}
\label{lemma-colimit-sheaves}
Let $\mathcal{F} : \mathcal{I} \to \Sh(\mathcal{C})$
be a diagram. Then $\colim_\mathcal{I} \mathcal{F}$ exists
and is the sheafification of the colimit in the category of presheaves.
\end{lemma}

\begin{proof}
Since the sheafification functor is a left adjoint it commutes
with all colimits, see Categories,
Lemma \ref{categories-lemma-adjoint-exact}.
Hence, since $\textit{PSh}(\mathcal{C})$ has colimits, we deduce
that $\Sh(\mathcal{C})$ has colimits (which are the
sheafifications of the colimits in presheaves).
\end{proof}

\begin{lemma}
\label{lemma-sheafification-exact}
The functor $\textit{PSh}(\mathcal{C}) \to \Sh(\mathcal{C})$,
$\mathcal{F} \mapsto \mathcal{F}^\#$ is exact.
\end{lemma}

\begin{proof}
Since it is a left adjoint it is right exact, see
Categories, Lemma \ref{categories-lemma-exact-adjoint}.
On the other hand, by Lemmas \ref{lemma-common-refinement}
and Lemma \ref{lemma-independent-refinement} the colimits
in the construction of $\mathcal{F}^+$ are really over the
directed set $\Ob(\mathcal{J}_U)$ where
$\mathcal{U} \geq \mathcal{U}'$ if and only if
$\mathcal{U}$ is a refinement of $\mathcal{U}'$. Hence by
Categories, Lemma \ref{categories-lemma-directed-commutes}
we see that $\mathcal{F} \to \mathcal{F}^+$ commutes
with finite limits (as a functor from presheaves to
presheaves). Then we conclude using
Lemma \ref{lemma-limit-sheaf}.
\end{proof}

\begin{lemma}
\label{lemma-sections-sheafification}
Let $\mathcal{C}$ be a site.
Let $\mathcal{F}$ be a presheaf of sets on $\mathcal{C}$.
Denote $\theta^2 : \mathcal{F} \to \mathcal{F}^\#$ the canonical
map of $\mathcal{F}$ into its sheafification.
Let $U$ be an object of $\mathcal{C}$.
Let $s \in \mathcal{F}^\#(U)$. There exists
a covering $\{U_i \to U\}$ and sections
$s_i \in \mathcal{F}(U_i)$ such that
\begin{enumerate}
\item $s|_{U_i} = \theta^2(s_i)$, and
\item for every $i, j$ there exists a covering
$\{U_{ijk} \to U_i \times_U U_j\}$ of $\mathcal{C}$ such that
the pullback of $s_i$ and $s_j$ to each $U_{ijk}$ agree.
\end{enumerate}
Conversely, given any covering $\{U_i \to U\}$, elements
$s_i \in \mathcal{F}(U_i)$ such that (2) holds, then there
exists a unique section $s \in \mathcal{F}^\#(U)$ such
that (1) holds.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}












\section{Injective and surjective maps of sheaves}
\label{section-sheaves-injective}

\begin{definition}
\label{definition-sheaves-injective-surjective}
Let $\mathcal{C}$ be a site, and let $\varphi : \mathcal{F}
\to \mathcal{G}$ be a map of sheaves of sets.
\begin{enumerate}
\item We say that $\varphi$ is {\it injective} if for every object
$U$ of $\mathcal{C}$ the map $\varphi : \mathcal{F}(U)
\to \mathcal{G}(U)$ is injective.
\item We say that $\varphi$ is {\it surjective} if for every object
$U$ of $\mathcal{C}$ and every section $s\in \mathcal{G}(U)$
there exists a covering $\{U_i \to U\}$ such that for
all $i$ the restriction $s|_{U_i}$ is in the image of
$\varphi : \mathcal{F}(U_i) \to \mathcal{G}(U_i)$.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-mono-epi-sheaves}
The injective (resp.\ surjective) maps defined above
are exactly the monomorphisms (resp.\ epimorphisms) of
the category $\Sh(\mathcal{C})$. A map of sheaves
is an isomorphism if and only if it is both injective
and surjective.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-coequalizer-surjection}
Let $\mathcal{C}$ be a site. Let $\mathcal{F} \to \mathcal{G}$
be a surjection of sheaves of sets. Then the diagram
$$
\xymatrix{
\mathcal{F} \times_\mathcal{G} \mathcal{F}
\ar@<1ex>[r] \ar@<-1ex>[r]
&
\mathcal{F} \ar[r]
&
\mathcal{G}}
$$
represents $\mathcal{G}$ as a coequalizer.
\end{lemma}

\begin{proof}
Let $\mathcal{H}$ be a sheaf of sets and let
$\varphi : \mathcal{F} \to \mathcal{H}$ be a map of sheaves equalizing
the two maps $\mathcal{F} \times_\mathcal{G} \mathcal{F} \to \mathcal{F}$.
Let $\mathcal{G}' \subset \mathcal{G}$ be the presheaf image of
the map $\mathcal{F} \to \mathcal{G}$. As the product
$\mathcal{F} \times_\mathcal{G} \mathcal{F}$ may be computed in the
category of presheaves we see that it is equal to the presheaf product
$\mathcal{F} \times_{\mathcal{G}'} \mathcal{F}$. Hence $\varphi$
induces a unique map of presheaves $\psi' : \mathcal{G}' \to \mathcal{H}$.
Since $\mathcal{G}$ is the sheafification of $\mathcal{G}'$ by
Lemma \ref{lemma-mono-epi-sheaves}
we conclude that $\psi'$ extends uniquely to a map of sheaves
$\psi : \mathcal{G} \to \mathcal{H}$. We omit the verification that
$\varphi$ is equal to the composition of $\psi$ and the given map.
\end{proof}














\section{Representable sheaves}
\label{section-representable-sheaves}

\noindent
Let $\mathcal{C}$ be a category. The canonical topology is
the finest topology such that all representable presheaves
are sheaves (it is formally defined in
Definition \ref{definition-canonical-topology} but we will not
need this).
This topology is not always the topology associated to the
structure of a site on $\mathcal{C}$.
We will give a collection of coverings that generates this topology
in case $\mathcal{C}$ has fibered products. First we give
the following general definition.

\begin{definition}
\label{definition-universal-effective-epimorphisms}
Let $\mathcal{C}$ be a category. We say that a family $\{U_i \to U\}_{i \in I}$
is an {\it effective epimorphism} if all the morphisms $U_i \to U$ are
representable (see
Categories, Definition \ref{categories-definition-representable-morphism}),
and for any $X\in \Ob(\mathcal{C})$ the sequence
$$
\xymatrix{
\Mor_\mathcal{C}(U, X) \ar[r]
&
\prod\nolimits_{i \in I} \Mor_\mathcal{C}(U_i, X)
\ar@<1ex>[r] \ar@<-1ex>[r]
&
\prod\nolimits_{(i, j) \in I^2} \Mor_\mathcal{C}(U_i \times_U U_j, X)
}
$$
is an equalizer diagram. We say that a family $\{U_i \to U\}$ is a
{\it universal effective epimorphism} if for any morphism $V \to U$
the base change $\{U_i \times_U V \to V\}$ is an effective epimorphism.
\end{definition}

\noindent
The class of families which are universal effective epimorphisms
satisfies the axioms of Definition \ref{definition-site}.
If $\mathcal{C}$ has fibre products, then the associated topology is
the canonical topology. (In this case, to get a site argue as in Sets,
Lemma \ref{sets-lemma-coverings-site}.)

\medskip\noindent
Conversely, suppose that $\mathcal{C}$ is a site such that
all representable presheaves are sheaves. Then clearly, all
coverings are universal effective epimorphisms.
Thus the following definition is the ``correct'' one in the
setting of sites.

\begin{definition}
\label{definition-weaker-than-canonical}
We say that the topology on a site $\mathcal{C}$ is
{\it weaker than the canonical topology}, or that the topology is
{\it subcanonical} if all the coverings
of $\mathcal{C}$ are universal effective epimorphisms.
\end{definition}

\noindent
A representable sheaf is a representable presheaf which is also a
sheaf. Since it is perhaps better to avoid this terminology when the
topology is not subcanonical, we only define it formally in that case.

\begin{definition}
\label{definition-representable-sheaf}
Let $\mathcal{C}$ be a site whose topology is subcanonical.
The Yoneda embedding $h$ (see
Categories, Section \ref{categories-section-opposite})
presents $\mathcal{C}$ as a full subcategory of the
category of sheaves of $\mathcal{C}$. In this case
we call sheaves of the form $h_U$ with $U \in \Ob(\mathcal{C})$
{\it representable sheaves} on $\mathcal{C}$.
Notation: Sometimes, the representable sheaf $h_U$ associated to $U$ is
denoted {\it $\underline{U}$}.
\end{definition}

\noindent
Note that we have in the situation of the definition
$$
\Mor_{\Sh(\mathcal{C})}(h_U, \mathcal{F}) = \mathcal{F}(U)
$$
for every sheaf $\mathcal{F}$, since it holds for presheaves, see
(\ref{equation-map-representable-into-presheaf}). In general the
presheaves $h_U$ are not sheaves and to get a sheaf you have to
sheafify them. In this case we still have
\begin{equation}
\label{equation-map-representable-into-sheaf}
\Mor_{\Sh(\mathcal{C})}(h_U^\#, \mathcal{F}) =
\Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{F}) =
\mathcal{F}(U)
\end{equation}
for every sheaf $\mathcal{F}$. Namely, the first equality holds
by the adjointness property of $\#$ and the second is
(\ref{equation-map-representable-into-presheaf}).

\begin{lemma}
\label{lemma-covering-surjective-after-sheafification}
\begin{slogan}
Coverings become surjective after sheafification.
\end{slogan}
Let $\mathcal{C}$ be a site. If
$\{U_i \to U\}_{i \in I}$ is a covering of the site
$\mathcal{C}$, then the morphism of presheaves of sets
$$
\coprod\nolimits_{i \in I} h_{U_i} \to h_U
$$
becomes surjective after sheafification.
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-mono-epi-sheaves} above we have to show that
$\coprod\nolimits_{i \in I} h_{U_i}^\# \to h_U^\#$
is an epimorphism. Let $\mathcal{F}$ be a sheaf of sets.
A morphism $h_U^\# \to \mathcal{F}$
corresponds to a section $s \in \mathcal{F}(U)$.
Hence the injectivity of $\Mor(h_U^\#, \mathcal{F})
\to \prod_i \Mor(h_{U_i}^\#, \mathcal{F})$ follows
directly from the sheaf property of $\mathcal{F}$.
\end{proof}

\noindent
The next lemma says, in the case the topology is weaker than the
canonical topology, that every sheaf is made up out of
representable sheaves in a way.

\begin{lemma}
\label{lemma-sheaf-coequalizer-representable}
Let $\mathcal{C}$ be a site. Let $E \subset \Ob(\mathcal{C})$ be a
subset such that every object of $\mathcal{C}$ has a covering by
elements of $E$. Let $\mathcal{F}$ be a sheaf of sets. There exists a
diagram of sheaves of sets
$$
\xymatrix{
\mathcal{F}_1 \ar@<1ex>[r] \ar@<-1ex>[r] &
\mathcal{F}_0 \ar[r] &
\mathcal{F}
}
$$
which represents $\mathcal{F}$ as a coequalizer,
such that $\mathcal{F}_i$, $i = 0, 1$ are coproducts
of sheaves of the form $h_U^\#$ with $U \in E$.
\end{lemma}

\begin{proof}
First we show there is an epimorphism $\mathcal{F}_0 \to \mathcal{F}$
of the desired type. Namely, just take
$$
\mathcal{F}_0 =
\coprod\nolimits_{U \in E, s \in \mathcal{F}(U)}
(h_U)^\# \longrightarrow \mathcal{F}
$$
Here the arrow restricted to the component corresponding to $(U, s)$ maps
the element $\text{id}_U \in h_U^\#(U)$ to the section $s \in \mathcal{F}(U)$.
This is an epimorphism according to Lemma \ref{lemma-mono-epi-sheaves} and
our condition on $E$. To construct $\mathcal{F}_1$ first set
$\mathcal{G} = \mathcal{F}_0 \times_\mathcal{F} \mathcal{F}_0$ and
then construct an epimorphism $\mathcal{F}_1 \to \mathcal{G}$
as above. See Lemma \ref{lemma-coequalizer-surjection}.
\end{proof}


\section{Continuous functors}
\label{section-continuous-functors}

\begin{definition}
\label{definition-continuous}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
A functor $u : \mathcal{C} \to \mathcal{D}$ is called
{\it continuous} if for every
$\{V_i \to V\}_{i\in I} \in \text{Cov}(\mathcal{C})$
we have the following
\begin{enumerate}
\item $\{u(V_i) \to u(V)\}_{i\in I}$ is in $\text{Cov}(\mathcal{D})$, and
\item for any morphism $T \to V$ in $\mathcal{C}$ the morphism
$u(T \times_V V_i) \to u(T) \times_{u(V)} u(V_i)$ is an isomorphism.
\end{enumerate}
\end{definition}

\noindent
Recall that given a functor $u$ as above, and a presheaf of sets
$\mathcal{F}$ on $\mathcal{D}$ we have defined
$u^p\mathcal{F}$ to be simply the presheaf
$\mathcal{F} \circ u$, in other words
$$
u^p\mathcal{F} (V) = \mathcal{F}(u(V))
$$
for every object $V$ of $\mathcal{C}$.

\begin{lemma}
\label{lemma-pushforward-sheaf}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous functor.
If $\mathcal{F}$ is a sheaf on $\mathcal{D}$ then
$u^p\mathcal{F}$ is a sheaf as well.
\end{lemma}

\begin{proof}
Let $\{V_i \to V\}$ be a covering.
By assumption $\{u(V_i) \to u(V)\}$ is a covering
in $\mathcal{D}$ and $u(V_i \times_V V_j) =
u(V_i)\times_{u(V)}u(V_j)$. Hence the sheaf condition for
$u^p\mathcal{F}$ and the covering $\{V_i \to V\}$
is precisely the same as the sheaf condition for $\mathcal{F}$
and the covering $\{u(V_i) \to u(V)\}$.
\end{proof}

\noindent
In order to avoid confusion we sometimes denote
$$
u^s :
\Sh(\mathcal{D})
\longrightarrow
\Sh(\mathcal{C})
$$
the functor $u^p$ restricted to the subcategory of sheaves of sets.
Recall that $u^p$ has a left adjoint
$u_p : \textit{PSh}(\mathcal{C}) \to \textit{PSh}(\mathcal{D})$, see
Section \ref{section-functoriality-PSh}.

\begin{lemma}
\label{lemma-adjoint-sheaves}
In the situation of Lemma \ref{lemma-pushforward-sheaf}.
The functor $u_s : \mathcal{G} \mapsto (u_p \mathcal{G})^\#$
is a left adjoint to $u^s$.
\end{lemma}

\begin{proof}
Follows directly from Lemma \ref{lemma-adjoints-u} and
Proposition \ref{proposition-sheafification-adjoint}.
\end{proof}

\noindent
Here is a technical lemma.

\begin{lemma}
\label{lemma-technical-up}
In the situation of Lemma \ref{lemma-pushforward-sheaf}.
For any presheaf $\mathcal{G}$ on $\mathcal{C}$
we have $(u_p\mathcal{G})^\# = (u_p(\mathcal{G}^\#))^\#$.
\end{lemma}

\begin{proof}
For any sheaf $\mathcal{F}$ on $\mathcal{D}$ we have
\begin{eqnarray*}
\Mor_{\Sh(\mathcal{D})}(u_s(\mathcal{G}^\#), \mathcal{F})
& = &
\Mor_{\Sh(\mathcal{C})}(\mathcal{G}^\#, u^s\mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{C})}(\mathcal{G}^\#, u^p\mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{C})}(\mathcal{G}, u^p\mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{D})}(u_p\mathcal{G}, \mathcal{F}) \\
& = &
\Mor_{\Sh(\mathcal{D})}((u_p\mathcal{G})^\#, \mathcal{F})
\end{eqnarray*}
and the result follows from the Yoneda lemma.
\end{proof}

\begin{lemma}
\label{lemma-pullback-representable-sheaf}
Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous functor
between sites.
For any object $U$ of $\mathcal{C}$ we have $u_sh_U^\# = h_{u(U)}^\#$.
\end{lemma}

\begin{proof}
Follows from
Lemmas \ref{lemma-pullback-representable-presheaf}
and \ref{lemma-technical-up}.
\end{proof}


\begin{remark}
\label{remark-quasi-continuous}
(Skip on first reading.)
Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Let us
use the definition of tautologically equivalent families of maps,
see Definition \ref{definition-combinatorial-tautological}
to (slightly) weaken the conditions defining continuity.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Let us call $u$ {\it quasi-continuous} if for every
$\mathcal{V} = \{V_i \to V\}_{i\in I} \in \text{Cov}(\mathcal{C})$
we have the following
\begin{enumerate}
\item[(1')] the family of maps
$\{u(V_i) \to u(V)\}_{i\in I}$ is tautologically equivalent
to an element of $\text{Cov}(\mathcal{D})$, and
\item[(2)] for any morphism $T \to V$ in $\mathcal{C}$ the morphism
$u(T \times_V V_i) \to u(T) \times_{u(V)} u(V_i)$ is an isomorphism.
\end{enumerate}
We are going to see that Lemmas \ref{lemma-pushforward-sheaf}
and \ref{lemma-adjoint-sheaves} hold in case
$u$ is quasi-continuous as well.

\medskip\noindent
We first remark that the morphisms $u(V_i) \to u(V)$ are representable, since
they are isomorphic to representable morphisms (by the first condition).
In particular, the family $u(\mathcal{V}) = \{u(V_i) \to u(V)\}_{i\in I}$
gives rise to a zeroth {\v C}ech cohomology group
$H^0(u(\mathcal{V}), \mathcal{F})$ for any presheaf $\mathcal{F}$ on
$\mathcal{D}$.
Let $\mathcal{U} = \{U_j \to u(V)\}_{j \in J}$ be an element
of $\text{Cov}(\mathcal{D})$ tautologically
equivalent to $\{u(V_i) \to u(V)\}_{i \in I}$. Note that $u(\mathcal{V})$
is a refinement of $\mathcal{U}$ and vice versa. Hence by Remark
\ref{remark-both-refine-same-H0} we see that
$H^0(u(\mathcal{V}), \mathcal{F}) = H^0(\mathcal{U}, \mathcal{F})$.
In particular, if $\mathcal{F}$ is a sheaf, then
$\mathcal{F}(u(V)) = H^0(u(\mathcal{V}), \mathcal{F})$ because
of the sheaf property expressed in terms of zeroth {\v C}ech cohomology
groups. We conclude that $u^p\mathcal{F}$ is a sheaf if $\mathcal{F}$
is a sheaf, since $H^0(\mathcal{V}, u^p\mathcal{F}) =
H^0(u(\mathcal{V}), \mathcal{F})$ which we just observed is
equal to $\mathcal{F}(u(V)) = u^p\mathcal{F}(V)$. Thus Lemma
\ref{lemma-pushforward-sheaf} holds. Lemma \ref{lemma-adjoint-sheaves}
follows immediately.
\end{remark}






\section{Morphisms of sites}
\label{section-morphism-sites}

\begin{definition}
\label{definition-morphism-sites}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
A {\it morphism of sites} $f : \mathcal{D} \to \mathcal{C}$
is given by a continuous functor $u : \mathcal{C} \to \mathcal{D}$
such that the functor $u_s$ is exact.
\end{definition}

\noindent
Notice how the functor $u$ goes in the direction {\it opposite}
the morphism $f$. If $f \leftrightarrow u$ is a morphism of sites
then we use the notation $f^{-1} = u_s$ and $f_* = u^s$.
The functor $f^{-1}$ is called the {\it pullback functor} and
the functor $f_*$ is called the {\it pushforward functor}.
As in topology we have the following adjointness property
$$
\Mor_{\Sh(\mathcal{D})}(f^{-1}\mathcal{G}, \mathcal{F})
=
\Mor_{\Sh(\mathcal{C})}(\mathcal{G}, f_*\mathcal{F})
$$
The motivation for this definition comes from the following
example.

\begin{example}
\label{example-continuous-map}
Let $f : X  \to Y$ be a continuous map of topological spaces.
Recall that we have sites $X_{Zar}$ and $Y_{Zar}$,
see Example \ref{example-site-topological}. Consider the functor
$u : Y_{Zar} \to X_{Zar}$, $V \mapsto f^{-1}(V)$.
This functor is clearly continuous because inverse images of
open coverings are open coverings. (Actually, this depends on how
you chose sets of coverings for $X_{Zar}$ and $Y_{Zar}$.
But in any case the functor is quasi-continuous, see Remark
\ref{remark-quasi-continuous}.)
It is easy to verify that
the functor $u^s$ equals the usual pushforward functor $f_*$
from topology. Hence, since $u_s$ is an adjoint and since
the usual topological pullback functor $f^{-1}$ is an adjoint as well,
we get a canonical isomorphism $f^{-1} \cong u_s$. Since $f^{-1}$
is exact we deduce that $u_s$ is exact. Hence $u$ defines a morphism
of sites $f : X_{Zar} \to Y_{Zar}$, which we may denote
$f$ as well since we've already seen the functors $u_s, u^s$ agree
with their usual notions anyway.
\end{example}

\begin{example}
\label{example-finer-topology}
Let $\mathcal{C}$ be a category. Let
$$
\text{Cov}(\mathcal{C}) \supset \text{Cov}'(\mathcal{C})
$$
be two sets of families of morphisms with fixed target
which turn $\mathcal{C}$ into a site. Denote $\mathcal{C}_\tau$
the site corresponding to $\text{Cov}(\mathcal{C})$ and
$\mathcal{C}_{\tau'}$ the site corresponding to $\text{Cov}'(\mathcal{C})$.
We claim the identity functor on $\mathcal{C}$ defines a morphism of sites
$$
\epsilon : \mathcal{C}_\tau \longrightarrow \mathcal{C}_{\tau'}
$$
Namely, observe that $\text{id} : \mathcal{C}_{\tau'} \to \mathcal{C}_\tau$
is continuous as every
$\tau'$-covering is a $\tau$-covering. Thus the functor
$\epsilon_* = \text{id}^s$ is the identity functor on underlying
presheaves. Hence the left adjoint $\epsilon^{-1}$
of $\epsilon_*$ sends a $\tau'$-sheaf $\mathcal{F}$
to the $\tau$-sheafification of $\mathcal{F}$ (by the
universal property of sheafification).
Finite limits of $\tau'$-sheaves agree with finite limits
of presheaves (Lemma \ref{lemma-limit-sheaf}) and $\tau$-sheafification
commutes with finite limits (Lemma \ref{lemma-sheafification-exact}).
Thus $\epsilon^{-1}$ is left exact. Since $\epsilon^{-1}$
is a left adjoint it is also right exact
(Categories, Lemma \ref{categories-lemma-exact-adjoint}).
Thus $\epsilon^{-1}$ is exact and we have checked all the
conditions of Definition \ref{definition-morphism-sites}.
\end{example}

\begin{lemma}
\label{lemma-composition-morphisms-sites}
Let $\mathcal{C}_i$, $i = 1, 2, 3$ be sites. Let
$u : \mathcal{C}_2 \to \mathcal{C}_1$ and
$v : \mathcal{C}_3 \to \mathcal{C}_2$ be continuous functors
which induce morphisms of sites. Then the functor
$u \circ v : \mathcal{C}_3 \to \mathcal{C}_1$ is continuous and
defines a morphism of sites $\mathcal{C}_1 \to \mathcal{C}_3$.
\end{lemma}

\begin{proof}
It is immediate from the definitions that $u \circ v$ is a continuous functor.
In addition, we clearly have $(u \circ v)^p = v^p \circ u^p$, and hence
$(u \circ v)^s = v^s \circ u^s$. Hence functors $(u \circ v)_s$  and
$u_s \circ v_s$ are both left adjoints of $(u \circ v)^s$. Therefore
$(u \circ v)_s \cong u_s \circ v_s$ and we conclude that $(u \circ v)_s$
is exact as a composition of exact functors.
\end{proof}

\begin{definition}
\label{definition-composition-morphisms-sites}
Let $\mathcal{C}_i$, $i = 1, 2, 3$ be sites. Let
$f : \mathcal{C}_1 \to \mathcal{C}_2$ and
$g : \mathcal{C}_2 \to \mathcal{C}_3$ be morphisms of sites
given by continuous functors $u : \mathcal{C}_2 \to \mathcal{C}_1$
and $v : \mathcal{C}_3 \to \mathcal{C}_2$. The {\it composition}
$g \circ f$ is the morphism of sites corresponding to the
functor $u \circ v$.
\end{definition}

\noindent
In this situation we have $(g \circ f)_* = g_* \circ f_*$ and
$(g \circ f)^{-1} = f^{-1} \circ g^{-1}$ (see proof of
Lemma \ref{lemma-composition-morphisms-sites}).

\begin{lemma}
\label{lemma-directed-morphism}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Let
$u : \mathcal{C} \to \mathcal{D}$ be continuous.
Assume all the categories $(\mathcal{I}_V^u)^{opp}$ of
Section \ref{section-functoriality-PSh}
are filtered. Then $u$ defines a morphism of sites $\mathcal{D} \to
\mathcal{C}$, in other words $u_s$ is exact.
\end{lemma}

\begin{proof}
Since $u_s$ is the left adjoint of $u^s$ we see that $u_s$ is right
exact, see Categories, Lemma \ref{categories-lemma-exact-adjoint}.
Hence it suffices to show that $u_s$ is left exact. In other words
we have to show that $u_s$ commutes with finite limits.
Because the categories $\mathcal{I}_Y^{opp}$ are filtered
we see that $u_p$ commutes with finite limits, see
Categories, Lemma \ref{categories-lemma-directed-commutes}
(this also uses the description of limits in $\textit{PSh}$,
see Section \ref{section-limits-colimits-PSh}).
And since sheafification commutes with finite limits as well
(Lemma \ref{lemma-sheafification-exact}) we conclude because
$u_s = \# \circ u_p$.
\end{proof}

\begin{proposition}
\label{proposition-get-morphism}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Let
$u : \mathcal{C} \to \mathcal{D}$ be continuous.
Assume furthermore the following:
\begin{enumerate}
\item the category $\mathcal{C}$ has a final object $X$ and
$u(X)$ is a final object of $\mathcal{D}$ , and
\item the category $\mathcal{C}$ has fibre products and
$u$ commutes with them.
\end{enumerate}
Then $u$ defines a morphism of sites $\mathcal{D} \to
\mathcal{C}$, in other words $u_s$ is exact.
\end{proposition}

\begin{proof}
This follows from Lemmas \ref{lemma-directed} and
\ref{lemma-directed-morphism}.
\end{proof}

\begin{remark}
\label{remark-explain-left-exact}
The conditions of Proposition \ref{proposition-get-morphism} above
are equivalent to saying that $u$ is left exact, i.e., commutes
with finite limits. See
Categories, Lemmas
\ref{categories-lemma-finite-limits-exist} and
\ref{categories-lemma-characterize-left-exact}.
It seems more natural to phrase it in terms of final objects
and fibre products since this seems to have more geometric meaning
in the examples.
\end{remark}

\noindent
Lemma \ref{lemma-continuous-with-continuous-left-adjoint} will
provide another way to prove a continuous functor
gives rise to a morphism of sites.

\begin{remark}
\label{remark-quasi-continuous-morphism-sites}
(Skip on first reading.)
Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Analogously to
Definition \ref{definition-morphism-sites} we say that
a {\it quasi-morphism of sites $f : \mathcal{D} \to \mathcal{C}$}
is given by a quasi-continuous functor $u : \mathcal{C} \to \mathcal{D}$
(see Remark \ref{remark-quasi-continuous}) such that $u_s$ is exact.
The analogue of Proposition \ref{proposition-get-morphism} in this
setting is obtained by replacing the word ``continuous''
by the word ``quasi-continuous'', and replacing the word
``morphism'' by ``quasi-morphism''. The proof is literally the
same.
\end{remark}

\noindent
In Definition \ref{definition-morphism-sites} the condition that $u_s$
be exact cannot be omitted. For example, the conclusion of the following
lemma need not hold if one only assumes that $u$ is continuous.

\begin{lemma}
\label{lemma-morphism-of-sites-covering}
Let $f : \mathcal{D} \to \mathcal{C}$ be a morphism of sites given by the
functor $u : \mathcal{C} \to \mathcal{D}$. Given any object $V$ of
$\mathcal{D}$ there exists a covering $\{V_j \to V\}$ such that for every
$j$ there exists a morphism $V_j \to u(U_j)$ for some object $U_j$
of $\mathcal{C}$.
\end{lemma}

\begin{proof}
Since $f^{-1} = u_s$ is exact we have $f^{-1}* = *$ where $*$ denotes the
final object of the category of sheaves
(Example \ref{example-singleton-sheaf}).
Since $f^{-1}* = u_s*$ is the sheafification of $u_p*$ we see
there exists a covering $\{V_j \to V\}$ such that $(u_p*)(V_j)$
is nonempty. Since $(u_p*)(V_j)$ is a colimit over the category
$\mathcal{I}^u_{V_j}$ whose objects are morphisms $V_j \to u(U)$
the lemma follows.
\end{proof}



























\section{Topoi}
\label{section-topoi}

\noindent
Here is a definition of a topos which is suitable for our purposes.
Namely, a topos is the category of sheaves on a site. In order to specify
a topos you just specify the site. The real difference between a topos
and a site lies in the definition of morphisms. Namely, it turns out that
there are lots of morphisms of topoi which do not come from morphisms
of the underlying sites.

\begin{definition}[Topoi]
\label{definition-topos}
A {\it topos} is the category $\Sh(\mathcal{C})$ of sheaves
on a site $\mathcal{C}$.
\begin{enumerate}
\item Let $\mathcal{C}$, $\mathcal{D}$ be sites.
A {\it morphism of topoi} $f$ from $\Sh(\mathcal{D})$
to $\Sh(\mathcal{C})$ is given by a pair of functors
$f_* : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$
and
$f^{-1} : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$
such that
\begin{enumerate}
\item we have
$$
\Mor_{\Sh(\mathcal{D})}(f^{-1}\mathcal{G}, \mathcal{F})
=
\Mor_{\Sh(\mathcal{C})}(\mathcal{G}, f_*\mathcal{F})
$$
bifunctorially, and
\item the functor $f^{-1}$ commutes with finite limits, i.e.,
is left exact.
\end{enumerate}
\item Let $\mathcal{C}$, $\mathcal{D}$, $\mathcal{E}$ be sites.
Given morphisms of topoi
$f :\Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ and
$g :\Sh(\mathcal{E}) \to \Sh(\mathcal{D})$ the
{\it composition $f\circ g$} is the morphism of topoi defined
by the functors
$(f \circ g)_* = f_* \circ g_*$ and
$(f \circ g)^{-1} = g^{-1} \circ f^{-1}$.
\end{enumerate}
\end{definition}

\noindent
Suppose that $\alpha : \mathcal{S}_1 \to \mathcal{S}_2$ is an equivalence of
(possibly ``big'') categories. If $\mathcal{S}_1$, $\mathcal{S}_2$
are topoi, then setting $f_* = \alpha$ and $f^{-1}$ equal to a quasi-inverse
of $\alpha$ gives a morphism $f : \mathcal{S}_1 \to \mathcal{S}_2$ of topoi.
Moreover this morphism is an equivalence in the $2$-category of topoi (see
Section \ref{section-2-category}).
Thus it makes sense to say ``$\mathcal{S}$ is a topos'' if $\mathcal{S}$
is equivalent to the category of sheaves on a site (and not necessarily
equal to the category of sheaves on a site). We will occasionally
use this abuse of notation.

\medskip\noindent
The {\it empty topos} is topos
of sheaves on the site $\mathcal{C}$, where $\mathcal{C}$
is the empty category. We will sometimes write $\emptyset$ for this site.
This is a site which has a unique sheaf (since $\emptyset$ has no
objects). Thus $\Sh(\emptyset)$ is equivalent to the category
having a single object and a single morphism.

\medskip\noindent
The {\it punctual topos} is the topos of sheaves on the site
$\mathcal{C}$ which has a single object $pt$ and one morphism
$\text{id}_{pt}$ and whose only covering is the covering
$\{\text{id}_{pt}\}$. We will simply write $pt$ for this site.
It is clear that the category of sheaves $ = $ the category of
presheaves $ = $ the category of sets.
In a formula $\Sh(pt) = \textit{Sets}$.

\medskip\noindent
Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Let
$f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ be a morphism of topoi.
Note that $f_*$ commutes with all limits and that
$f^{-1}$ commutes with all colimits, see Categories,
Lemma \ref{categories-lemma-adjoint-exact}.
In particular, the condition on $f^{-1}$ in the definition above
guarantees that $f^{-1}$ is exact. Morphisms of topoi are often constructed
using either Lemma \ref{lemma-cocontinuous-morphism-topoi}
or the following lemma.

\begin{lemma}
\label{lemma-morphism-sites-topoi}
Given a morphism of sites $f : \mathcal{D} \to \mathcal{C}$
corresponding to the functor $u : \mathcal{C} \to \mathcal{D}$
the pair of functors $(f^{-1} = u_s, f_* = u^s)$ is a morphism of topoi.
\end{lemma}

\begin{proof}
This is obvious from Definition \ref{definition-morphism-sites}.
\end{proof}

\begin{remark}
\label{remark-pt-topos}
There are many sites that give rise to the topos $\Sh(pt)$.
A useful example is the following. Suppose that $S$ is a set (of sets)
which contains at least one nonempty element. Let $\mathcal{S}$ be the
category whose objects are elements of $S$ and whose morphisms are
arbitrary set maps. Assume that $\mathcal{S}$ has fibre products.
For example this will be the case if $S = \mathcal{P}(\text{infinite set})$
is the power set of any infinite set (exercise in set theory).
Make $\mathcal{S}$ into a site by declaring
surjective families of maps to be coverings (and choose
a suitable sufficiently large set of covering families as in
Sets, Section \ref{sets-section-coverings-site}).
We claim that $\Sh(\mathcal{S})$ is equivalent to the category of
sets.

\medskip\noindent
We first prove this in case $S$ contains $e \in S$ which is a singleton.
In this case, there is an equivalence of topoi
$i : \Sh(pt) \to \Sh(\mathcal{S})$ given by
the functors
\begin{equation}
\label{equation-sheaves-pt-sets}
i^{-1}\mathcal{F} = \mathcal{F}(e), \quad
i_*E = (U \mapsto \Mor_{\textit{Sets}}(U, E))
\end{equation}
Namely, suppose that $\mathcal{F}$ is a sheaf on $\mathcal{S}$.
For any $U \in \Ob(\mathcal{S}) = S$ we can find a covering
$\{\varphi_u : e \to U\}_{u \in U}$, where $\varphi_u$
maps the unique element of $e$ to $u \in U$. The sheaf condition
implies in this case that
$\mathcal{F}(U) = \prod_{u \in U} \mathcal{F}(e)$.
In other words
$\mathcal{F}(U) = \Mor_{\textit{Sets}}(U, \mathcal{F}(e))$.
Moreover, this rule is compatible with restriction mappings. Hence
the functor
$$
i_* :
\textit{Sets} = \Sh(pt)
\longrightarrow
\Sh(\mathcal{S}), \quad
E \longmapsto (U \mapsto \Mor_{\textit{Sets}}(U, E))
$$
is an equivalence of categories, and its inverse is the functor
$i^{-1}$ given above.

\medskip\noindent
If $\mathcal{S}$ does not contain a singleton, then the functor
$i_*$ as defined above still makes sense. To show that it is still
an equivalence in this case, choose any nonempty $\tilde e \in S$
and a map $\varphi : \tilde e \to \tilde e$ whose image is a singleton.
For any sheaf $\mathcal{F}$ set
$$
\mathcal{F}(e) :=
\Im(
\mathcal{F}(\varphi) :
\mathcal{F}(\tilde e)
\longrightarrow
\mathcal{F}(\tilde e)
)
$$
and show that this is a quasi-inverse to $i_*$. Details omitted.
\end{remark}

\begin{remark}
\label{remark-morphism-topoi-big}
(Set theoretical issues related to morphisms of topoi. Skip
on a first reading.)
A morphism of topoi as defined above is not a set but a class.
In other words it is given by a mathematical formula rather
than a mathematical object. Although we may contemplate
the collection of all morphisms between two given topoi,
it is not a good idea to introduce it as a mathematical object.
On the other hand, suppose $\mathcal{C}$ and $\mathcal{D}$ are
given sites. Consider a functor
$\Phi : \mathcal{C} \to \Sh(\mathcal{D})$.
Such a thing is a set, in other words, it is a mathematical object.
We may, in succession, ask the following questions on $\Phi$.
\begin{enumerate}
\item Is it true, given a sheaf $\mathcal{F}$ on $\mathcal{D}$,
that the rule
$U \mapsto \Mor_{\Sh(\mathcal{D})}(\Phi(U), \mathcal{F})$
defines a sheaf on $\mathcal{C}$? If so, this defines a functor
$\Phi_* : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$.
\item Is it true that $\Phi_*$ has a left adjoint? If so,
write $\Phi^{-1}$ for this left adjoint.
\item Is it true that $\Phi^{-1}$ is exact?
\end{enumerate}
If the last question still has the answer ``yes'', then we obtain
a morphism of topoi $(\Phi_*, \Phi^{-1})$. Moreover, given any
morphism of topoi $(f_*, f^{-1})$ we may set
$\Phi(U) = f^{-1}(h_U^\#)$ and obtain a functor $\Phi$ as above
with $f_* \cong \Phi_*$ and $f^{-1} \cong \Phi^{-1}$ (compatible
with adjoint property).
The upshot is that by working with the collection of $\Phi$
instead of morphisms of topoi, we (a) replaced the notion of
a morphism of topoi by a mathematical object, and (b)
the collection of $\Phi$ forms a class (and not a collection
of classes). Of course, more can be said, for example one can work
out more precisely the significance of conditions (2) and (3) above;
we do this in the case of points of topoi in Section \ref{section-points}.
\end{remark}

\begin{remark}
\label{remark-quasi-continuous-morphism-topoi}
(Skip on first reading.)
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
A quasi-morphism of sites $f : \mathcal{D} \to \mathcal{C}$
(see Remark \ref{remark-quasi-continuous-morphism-sites})
gives rise to a morphism of topoi $f$ from
$\Sh(\mathcal{D})$ to $\Sh(\mathcal{C})$
exactly as in Lemma \ref{lemma-morphism-sites-topoi}.
\end{remark}













\section{G-sets and morphisms}
\label{section-G-sets-morphisms}

\noindent
Let $\varphi : G \to H$ be a homomorphism of groups.
Choose (suitable) sites $\mathcal{T}_G$ and $\mathcal{T}_H$ as in
Example \ref{example-site-on-group} and
Section \ref{section-example-sheaf-G-sets}.
Let $u : \mathcal{T}_H \to \mathcal{T}_G$ be the functor which assigns
to a $H$-set $U$ the $G$-set $U_\varphi$ which has the same underlying
set but $G$ action defined by $g \cdot u = \varphi(g)u$.
It is clear that $u$ commutes with finite limits and is
continuous\footnote{Set theoretical remark: First choose $\mathcal{T}_H$.
Then choose $\mathcal{T}_G$ to contain $u(\mathcal{T}_H)$ and such that
every covering in $\mathcal{T}_H$ corresponds to a covering in
$\mathcal{T}_G$. This is possible by
Sets, Lemmas
\ref{sets-lemma-sets-with-group-action},
\ref{sets-lemma-what-is-in-it-G-sets} and
\ref{sets-lemma-coverings-site}.}.
Applying
Proposition \ref{proposition-get-morphism}
and
Lemma \ref{lemma-morphism-sites-topoi}
we obtain a morphism of topoi
$$
f : \Sh(\mathcal{T}_G) \longrightarrow \Sh(\mathcal{T}_H)
$$
associated with $\varphi$. Using
Proposition \ref{proposition-sheaves-on-group}
we see that we get a pair of adjoint functors
$$
f_* : G\textit{-Sets} \longrightarrow H\textit{-Sets}, \quad
f^{-1} : H\textit{-Sets} \longrightarrow G\textit{-Sets}.
$$
Let's work out what are these functors in this case.

\medskip\noindent
We first work out a formula for $f_*$.
Recall that given a $G$-set $S$ the corresponding sheaf
$\mathcal{F}_S$ on $\mathcal{T}_G$ is given by the rule
$\mathcal{F}_S(U) = \Mor_G(U, S)$. And on the other hand, given
a sheaf $\mathcal{G}$ on $\mathcal{T}_H$ the corresponding $H$-set
is given by the rule $\mathcal{G}({}_HH)$. Hence we see that
$$
f_*S = \Mor_{G\textit{-Sets}}(({}_HH)_\varphi, S).
$$
If we work this out a little bit more then we get
$$
f_*S = \{ a : H \to S \mid a(gh) = ga(h) \}
$$
with left $H$-action given by
$(h \cdot a)(h') = a(h'h)$
for any element $a \in f_*S$.

\medskip\noindent
Next, we explicitly compute $f^{-1}$. Note that since the topology
on $\mathcal{T}_G$ and $\mathcal{T}_H$ is subcanonical, all representable
presheaves are sheaves. Moreover, given an object $V$ of $\mathcal{T}_H$
we see that $f^{-1}h_V$ is equal to $h_{u(V)}$ (see
Lemma \ref{lemma-pullback-representable-sheaf}). Hence we see that
$f^{-1}S = S_\varphi$ for representable sheaves. Since every sheaf on
$\mathcal{T}_H$ is a coproduct of representable sheaves we conclude that
this is true in general. Hence we see that
for any $H$-set $T$ we have
$$
f^{-1}T = T_\varphi.
$$
The adjunction between $f^{-1}$ and $f_*$ is evidenced by the formula
$$
\Mor_{G\textit{-Sets}}(T_\varphi, S) =
\Mor_{H\textit{-Sets}}(T, f_*S)
$$
with $f_*S$ as above. This can be proved directly. Moreover, it is then clear
that $(f^{-1}, f_*)$ form an adjoint pair and that $f^{-1}$ is exact.
So alternatively to the above the morphism of topoi
$f : G\textit{-Sets} \to H\textit{-Sets}$ can be defined directly in this
manner.













\section{Quasi-compact objects and colimits}
\label{section-quasi-compact}

\noindent
To be able to use the same language as in the case of topological spaces
we introduce the following terminology.

\begin{definition}
\label{definition-quasi-compact}
Let $\mathcal{C}$ be a site. An object $U$ of $\mathcal{C}$ is
{\it quasi-compact} if given a covering $\mathcal{U} = \{U_i \to U\}_{i \in I}$
in $\mathcal{C}$ there exists another covering
$\mathcal{V} = \{V_j \to U\}_{j \in J}$ and a morphism
$\mathcal{V} \to \mathcal{U}$ of families of maps with fixed target
given by $\alpha : J \to I$ and $V_j \to U_{\alpha(j)}$
(see Definition \ref{definition-morphism-coverings})
such that the image of $\alpha$ is a finite subset of $I$.
\end{definition}

\noindent
Of course the usual notion is sufficient to conclude that
$U$ is quasi-compact.

\begin{lemma}
\label{lemma-conclude-quasi-compact}
Let $\mathcal{C}$ be a site. Let $U$ be an object of $\mathcal{C}$.
Consider the following conditions
\begin{enumerate}
\item $U$ is quasi-compact,
\item for every covering $\{U_i \to U\}_{i \in I}$ in $\mathcal{C}$
there exists a finite covering $\{V_j \to U\}_{j = 1, \ldots, m}$
of $\mathcal{C}$ refining $\mathcal{U}$, and
\item for every covering $\{U_i \to U\}_{i \in I}$ in $\mathcal{C}$
there exists a finite subset $I' \subset I$ such that
$\{U_i \to U\}_{i \in I'}$ is a covering in $\mathcal{C}$.
\end{enumerate}
Then we always have (3) $\Rightarrow$ (2) $\Rightarrow$ (1)
but the reverse implications do not hold in general.
\end{lemma}

\begin{proof}
The implications are immediate from the definitions.
Let $X = [0, 1] \subset \mathbf{R}$
as a topological space (with the usual $\epsilon$-$\delta$ topology).
Let $\mathcal{C}$ be the category of open subspaces of $X$ with
inclusions as morphisms and usual open coverings (compare with
Example \ref{example-site-topological}). However, then we change the notion
of covering in $\mathcal{C}$ to exclude all finite coverings, except
for the coverings of the form $\{U \to U\}$. It is easy to see that this
will be a site as in Definition \ref{definition-site}.
In this site the object $X = U = [0, 1]$ is quasi-compact in the sense of
Definition \ref{definition-quasi-compact} but $U$ does not satisfy (2).
We leave it to the reader to make an example where (2) holds but not (3).
\end{proof}

\noindent
Here is the topos theoretic meaning of a quasi-compact object.

\begin{lemma}
\label{lemma-quasi-compact}
Let $\mathcal{C}$ be a site. Let $U$ be an object of $\mathcal{C}$.
The following are equivalent
\begin{enumerate}
\item $U$ is quasi-compact, and
\item for every surjection of sheaves
$\coprod_{i \in I} \mathcal{F}_i \to h_U^\#$
there is a finite subset $J \subset I$ such that
$\coprod_{i \in J} \mathcal{F}_i \to h_U^\#$ is surjective.
\end{enumerate}
\end{lemma}

\begin{proof}
Assume (1) and let $\coprod_{i \in I} \mathcal{F}_i \to h_U^\#$
be a surjection. Then $\text{id}_U$ is a section of
$h_U^\#$ over $U$. Hence there exists a covering
$\{U_a \to U\}_{a \in A}$ and for each $a \in A$
a section $s_a$ of $\coprod_{i \in I} \mathcal{F}_i$
over $U_a$ mapping to $\text{id}_U$. By the construction of coproducts as
sheafification of coproducts of presheaves
(Lemma \ref{lemma-colimit-sheaves}), for each $a$
there exists a covering $\{U_{ab} \to U_a\}_{b \in B_a}$ and
for all $b \in B_a$ an $\iota(b) \in I$ and a section
$s_{b}$ of $\mathcal{F}_{\iota(b)}$ over $U_{ab}$
mapping to $\text{id}_U|_{U_{ab}}$. Thus after replacing
the covering $\{U_a \to U\}_{a \in A}$ by
$\{U_{ab} \to U\}_{a \in A, b \in B_a}$
we may assume we have a map $\iota : A \to I$
and for each $a \in A$ a section $s_a$ of $\mathcal{F}_{\iota(a)}$
over $U_a$ mapping to $\text{id}_U$.
Since $U$ is quasi-compact, there is a covering
$\{V_c \to U\}_{c \in C}$, a map $\alpha : C \to A$
with finite image, and $V_c \to U_{\alpha(c)}$ over $U$.
Then we see that $J = \Im(\iota \circ \alpha) \subset I$ works
because $\coprod_{c \in C} h_{V_c}^\# \to h_U^\#$ is surjective
(Lemma \ref{lemma-covering-surjective-after-sheafification})
and factors through $\coprod_{i \in J} \mathcal{F}_i \to h_U^\#$.
(Here we use that the composition
$h_{V_c}^\# \to h_{U_{\alpha(c)}}
\xrightarrow{s_{\alpha(c)}} \mathcal{F}_{\iota(\alpha(c))} \to h_U^\#$
is the map $h_{V_c}^\# \to h_U^\#$ coming from the morphism
$V_c \to U$ because $s_{\alpha(c)}$ maps to $\text{id}_U|_{U_{\alpha(c)}}$.)

\medskip\noindent
Assume (2). Let $\{U_i \to U\}_{i \in I}$ be a covering.
By Lemma \ref{lemma-covering-surjective-after-sheafification}
we see that $\coprod_{i \in I} h_{U_i}^\# \to h_U^\#$ is surjective.
Thus we find a finite subset $J \subset I$ such that
$\coprod_{j \in J} h_{U_j}^\# \to h_U^\#$ is surjective.
Then arguing as above we find a covering
$\{V_c \to U\}_{c \in C}$ of $U$ in $\mathcal{C}$
and a map $\iota : C \to J$
such that $\text{id}_U$ lifts to a section
of $s_c$ of $h_{U_{\iota(c)}}^\#$ over $V_c$.
Refining the covering even further we may assume
$s_c \in h_{U_{\iota(c)}}(V_c)$ mapping to $\text{id}_U$.
Then $s_c : V_c \to U_{\iota(c)}$ is a morphism over $U$
and we conclude.
\end{proof}

\noindent
The lemma above motivates the following definition.

\begin{definition}
\label{definition-quasi-compact-topos}
An object $\mathcal{F}$ of a topos $\Sh(\mathcal{C})$ is {\it quasi-compact}
if for any surjective map $\coprod_{i \in I} \mathcal{F}_i \to \mathcal{F}$
of $\Sh(\mathcal{C})$ there exists a finite subset $J \subset I$ such
that $\coprod_{i \in J} \mathcal{F}_i \to \mathcal{F}$ is surjective.
A topos $\Sh(\mathcal{C})$ is said to be {\it quasi-compact}
if its final object $*$ is a quasi-compact object.
\end{definition}

\noindent
By Lemma \ref{lemma-quasi-compact}
if the site $\mathcal{C}$ has a final object $X$, then
$\Sh(\mathcal{C})$ is quasi-compact if and only if $X$ is quasi-compact.
The following lemma is the analogue of
Sheaves, Lemma \ref{sheaves-lemma-directed-colimits-sections}
for sites.

\begin{lemma}
\label{lemma-directed-colimits-sections}
Let $\mathcal{C}$ be a site. Let
$\mathcal{I} \to \Sh(\mathcal{C})$, $i \mapsto \mathcal{F}_i$
be a filtered diagram of sheaves of sets.
Let $U \in \Ob(\mathcal{C})$.
Consider the canonical map
$$
\Psi :
\colim_i \mathcal{F}_i(U)
\longrightarrow
\left(\colim_i \mathcal{F}_i\right)(U)
$$
With the terminology introduced above:
\begin{enumerate}
\item If all the transition maps are injective then
$\Psi$ is injective for any $U$.
\item If $U$ is quasi-compact, then $\Psi$ is injective.
\item If $U$ is quasi-compact and all the transition maps are injective
then $\Psi$ is an isomorphism.
\item If $U$ has a cofinal system of coverings
$\{U_j \to U\}_{j \in J}$ with
$J$ finite and $U_j \times_U U_{j'}$ quasi-compact
for all $j, j' \in J$, then $\Psi$ is bijective.
\end{enumerate}
\end{lemma}

\begin{proof}
Assume all the transition maps are injective. In this case the presheaf
$\mathcal{F}' : V \mapsto \colim_i \mathcal{F}_i(V)$ is
separated (see Definition \ref{definition-separated}).
By Lemma \ref{lemma-colimit-sheaves}
we have
$(\mathcal{F}')^\# = \colim_i \mathcal{F}_i$.
By Theorem \ref{theorem-plus}
we see that $\mathcal{F}' \to (\mathcal{F}')^\#$ is injective.
This proves (1).

\medskip\noindent
Assume $U$ is quasi-compact. Suppose that $s \in \mathcal{F}_i(U)$ and
$s' \in \mathcal{F}_{i'}(U)$ give rise to elements on
the left hand side which have the same image under $\Psi$.
This means we can choose a covering $\{U_a \to U\}_{a \in A}$
and for each $a \in A$ an index $i_a \in I$, $i_a \geq i$, $i_a \geq i'$
such that $\varphi_{ii_a}(s) = \varphi_{i'i_a}(s')$.
Because $U$ is quasi-compact we can choose a covering
$\{V_b \to U\}_{b \in B}$, a map $\alpha : B \to A$ with finite image,
and morphisms $V_b \to U_{\alpha(b)}$ over $U$.
Pick $i''\in I$ to be $\geq$ than all of the $i_{\alpha(b)}$
which is possible because the image of $\alpha$ is finite.
We conclude that $\varphi_{ii''}(s)$ and $\varphi_{i'i''}(s)$
agree on $V_b$ for all $b \in B$ and hence that
$\varphi_{ii''}(s) = \varphi_{i'i''}(s)$. This proves (2).

\medskip\noindent
Assume $U$ is quasi-compact and all transition maps injective.
Let $s$ be an element of the target of $\Psi$. There exists a covering
$\{U_a \to U\}_{a \in A}$ and for each $a \in A$ an index $i_a \in I$
and a section $s_a \in \mathcal{F}_{i_a}(U_a)$
such that $s|_{U_a}$ comes from $s_a$ for all $a \in A$.
Because $U$ is quasi-compact we can choose a covering
$\{V_b \to U\}_{b \in B}$, a map $\alpha : B \to A$ with finite image,
and morphisms $V_b \to U_{\alpha(b)}$ over $U$.
Pick $i \in I$ to be $\geq$ than all of the $i_{\alpha(b)}$
which is possible because the image of $\alpha$ is finite.
By (1) the sections
$s_b = \varphi_{i_{\alpha(b)} i}(s_{\alpha(b)})|_{V_b}$
agree over $V_b \times_U V_{b'}$.
Hence they glue to a section
$s' \in \mathcal{F}_i(U)$ which maps to $s$ under $\Psi$.
This proves (3).

\medskip\noindent
Assume the hypothesis of (4).
Let $s$ be an element of the target of $\Psi$.
By assumption there  exists a finite covering
$\{U_j \to U\}_{j = 1, \ldots, m} U_j$, with $U_j \times_U U_{j'}$
quasi-compact for all $j, j' \in J$ and
for each $j$ an index $i_j \in I$ and $s_j \in \mathcal{F}_{i_j}(U_j)$
such that $s|_{U_j}$ is the image of $s_j$ for all $j$.
Since $U_j \times_U U_{j'}$ is quasi-compact we can apply (2)
and we see that there exists an $i_{jj'} \in I$,
$i_{jj'} \geq i_j$, $i_{jj'} \geq i_{j'}$ such that
$\varphi_{i_ji_{jj'}}(s_j)$ and $\varphi_{i_{j'}i_{jj'}}(s_{j'})$
agree over $U_j \times_U U_{j'}$. Choose an index $i \in I$
wich is bigger or equal than all the $i_{jj'}$. Then we see that
the sections $\varphi_{i_ji}(s_j)$ of $\mathcal{F}_i$ glue
to a section of $\mathcal{F}_i$ over $U$. This section is mapped
to the element $s$ as desired.
\end{proof}








\section{Colimits of sites}
\label{section-colimit-sites}

\noindent
We need an analogue of Lemma \ref{lemma-directed-colimits-sections}
in the case that the site
is the limit of an inverse system of sites. For simplicity we only
explain the construction in case the index sets of coverings are finite.

\begin{situation}
\label{situation-inverse-limit-sites}
Here we are given
\begin{enumerate}
\item a cofiltered index category $\mathcal{I}$,
\item for $i \in \Ob(\mathcal{I})$ a site $\mathcal{C}_i$ such that every
covering in $\mathcal{C}_i$ has a finite index set,
\item for a morphism $a : i \to j$ in $\mathcal{I}$ a morphism of sites
$f_a : \mathcal{C}_i \to \mathcal{C}_j$ given by a continuous functor
$u_a : \mathcal{C}_j \to \mathcal{C}_i$,
\end{enumerate}
such that $f_a \circ f_b = f_c$ whenever $c = a \circ b$ in $\mathcal{I}$.
\end{situation}

\begin{lemma}
\label{lemma-colimit-sites}
In Situation \ref{situation-inverse-limit-sites} we can construct
a site $(\mathcal{C}, \text{Cov}(\mathcal{C}))$ as follows
\begin{enumerate}
\item as a category $\mathcal{C} = \colim \mathcal{C}_i$, and
\item $\text{Cov}(\mathcal{C})$ is the union of the images
of $\text{Cov}(\mathcal{C}_i)$ by $u_i : \mathcal{C}_i \to \mathcal{C}$.
\end{enumerate}
\end{lemma}

\begin{proof}
Our definition of composition of morphisms of sites implies that
$u_b \circ u_a = u_c$ whenever $c = a \circ b$ in $\mathcal{I}$.
The formula $\mathcal{C} = \colim \mathcal{C}_i$ means that
$\Ob(\mathcal{C}) = \colim \Ob(\mathcal{C}_i)$ and
$\text{Arrows}(\mathcal{C}) = \colim \text{Arrows}(\mathcal{C}_i)$.
Then source, target, and composition are inherited from the
source, target, and composition on $\text{Arrows}(\mathcal{C}_i)$.
In this way we obtain a category. 
Denote $u_i : \mathcal{C}_i \to \mathcal{C}$ the obvious functor.
Remark that given any finite diagram in $\mathcal{C}$
there exists an $i$ such that this diagram is
the image of a diagram in $\mathcal{C}_i$.

\medskip\noindent
Let $\{U^t \to U\}$ be a covering of $\mathcal{C}$. We first prove that if
$V \to U$ is a morphism of $\mathcal{C}$, then $U^t \times_U V$ exists.
By our remark above and our definition of coverings, we can find an
$i$, a covering $\{U_i^t \to U_i\}$ of $\mathcal{C}_i$ and a morphism
$V_i \to U_i$ whose image by $u_i$ is the given data. We claim that
$U^t \times_U V$ is the image of $U^t_i \times_{U_i} V_i$ by $u_i$.
Namely, for every $a : j \to i$ in $\mathcal{I}$ the functor $u_a$
is continuous, hence
$u_a(U^t_i \times_{U_i} V_i) = u_a(U^t_i) \times_{u_a(U_i)} u_a(V_i)$.
In particular we can replace $i$ by $j$, if we so desire.
Thus, if $W$ is another object of $\mathcal{C}$, then we may
assume $W = u_i(W_i)$ and we see that
\begin{align*}
& \Mor_\mathcal{C}(W, u_i(U^t_i \times_{U_i} V_i)) \\
& =
\colim_{a : j \to i}
\Mor_{\mathcal{C}_j}(u_a(W_i), u_a(U^t_i \times_{U_i} V_i)) \\
& =
\colim_{a : j \to i}
\Mor_{\mathcal{C}_j}(u_a(W_i), u_a(U^t_i))
\times_{\Mor_{\mathcal{C}_j}(u_a(W_i), u_a(U_i))}
\Mor_{\mathcal{C}_j}(u_a(W_i), u_a(V_i)) \\
& =
\Mor_\mathcal{C}(W, U^t)
\times_{\Mor_\mathcal{C}(W, U)}
\Mor_\mathcal{C}(W, V)
\end{align*}
as filtered colimits commute with finite limits
(Categories, Lemma \ref{categories-lemma-directed-commutes}).
It also follows that
$\{U^t \times_U V \to V\}$ is a covering in $\mathcal{C}$.
In this way we see that axiom (3) of Definition \ref{definition-site} holds.

\medskip\noindent
To verify axiom (2) of Definition \ref{definition-site}
let $\{U^t \to U\}_{t \in T}$ be a covering of $\mathcal{C}$
and for each $t$ let $\{U^{ts} \to U^t\}$ be a covering of
$\mathcal{C}$. Then we can find an $i$ and a covering
$\{U^t_i \to U_i\}_{t \in T}$ of $\mathcal{C}_i$ whose image by $u_i$ is
$\{U^t \to U\}$. Since $T$ is {\bf finite} we may choose an $a : j \to i$
in $\mathcal{I}$ and coverings $\{U^{ts}_j \to u_a(U^t_i)\}$ of
$\mathcal{C}_j$ whose image by $u_j$ gives $\{U^{ts} \to U^t\}$.
Then we conclude that $\{U^{ts} \to U\}$ is a covering of $\mathcal{C}$
by an application of axiom (2) to the site $\mathcal{C}_j$.

\medskip\noindent
We omit the proof of axiom (1) of Definition \ref{definition-site}.
\end{proof}

\begin{lemma}
\label{lemma-compute-pullback-to-limit}
In Situation \ref{situation-inverse-limit-sites} let
$u_i : \mathcal{C}_i \to \mathcal{C}$ be as constructed in
Lemma \ref{lemma-colimit-sites}. Then $u_i$ defines a morphism
of sites $f_i : \mathcal{C} \to \mathcal{C}_i$. For
$U_i \in \Ob(\mathcal{C}_i)$ and sheaf $\mathcal{F}$ on $\mathcal{C}_i$ we have
\begin{equation}
\label{equation-compute-pullback-to-limit}
f_i^{-1}\mathcal{F}(u_i(U_i)) =
\colim_{a : j \to i} f_a^{-1}\mathcal{F}(u_a(U_i))
\end{equation}
\end{lemma}

\begin{proof}
It is immediate from the arguments in the proof of
Lemma \ref{lemma-colimit-sites} that the functors $u_i$ are continuous.
To finish the proof we have to show that $f_i^{-1} := u_{i, s}$
is an exact functor $\Sh(\mathcal{C}_i) \to \Sh(\mathcal{C})$.
In fact it suffices to show that $f_i^{-1}$ is left exact, because
it is right exact as a left adjoint
(Categories, Lemma \ref{categories-lemma-exact-adjoint}).
We first prove (\ref{equation-compute-pullback-to-limit})
and then we deduce exactness.

\medskip\noindent
For an arbitrary object $V$ of $\mathcal{C}$ we can pick a $a : j \to i$
and an object $V_j \in \Ob(\mathcal{C})$ with $V = u_j(V_j)$. Then we
can set
$$
\mathcal{G}(V) = \colim_{b : k \to j} f_{a \circ b}^{-1}\mathcal{F}(u_b(V_j))
$$
The value $\mathcal{G}(V)$ of the colimit is independent of the choice
of $b : j \to i$ and of the object $V_j$ with $u_j(V_j) = V$; we omit
the verification. Moreover, if $\alpha : V \to V'$ is a morphism of
$\mathcal{C}$, then we can choose $b : j \to i$ and a morphism
$\alpha_j : V_j \to V'_j$ with $u_j(\alpha_j) = \alpha$. This induces
a map $\mathcal{G}(V') \to \mathcal{G}(V)$ by using the restrictions
along the morphisms $u_b(\alpha_j) : u_b(V_j) \to u_b(V'_j)$. A check
shows that $\mathcal{G}$ is a presheaf (omitted).
In fact, $\mathcal{G}$ satisfies the sheaf condition. Namely,
any covering $\mathcal{U} = \{U^t \to U\}$ in $\mathcal{C}$
comes from a finite level. Say $\mathcal{U}_j = \{U^t_j \to U_j\}$
is mapped to $\mathcal{U}$ by $u_j$ for some $a : j \to i$ in $\mathcal{I}$.
Then we have
$$
H^0(\mathcal{U}, \mathcal{G}) =
\colim_{b : k \to j} H^0(u_b(\mathcal{U}_j), f_{b \circ a}^{-1}\mathcal{F}) =
\colim_{b : k \to j} f_{b \circ a}^{-1}\mathcal{F}(u_b(U_j)) =
\mathcal{G}(U)
$$
as desired. The first equality holds because filtered colimits commute
with finite limits
(Categories, Lemma \ref{categories-lemma-directed-commutes}).
By construction $\mathcal{G}(U)$ is given by the right hand side of
(\ref{equation-compute-pullback-to-limit}).
Hence (\ref{equation-compute-pullback-to-limit}) is true if we can
show that $\mathcal{G}$ is equal to $f_i^{-1}\mathcal{F}$.

\medskip\noindent
In this paragraph we check that $\mathcal{G}$ is canonically isomorphic to
$f_i^{-1}\mathcal{F}$. We strongly encourage the reader to skip this paragraph.
To check this we have to show there is a bijection
$\Mor_{\Sh(\mathcal{C})}(\mathcal{G}, \mathcal{H}) =
\Mor_{\Sh(\mathcal{C}_i)}(\mathcal{F}, f_{i, *}\mathcal{H})$
functorial in the sheaf $\mathcal{H}$ on $\mathcal{C}$
where $f_{i, *} = u_i^p$. A map
$\mathcal{G} \to \mathcal{H}$ is the same thing as a compatible
system of maps
$$
\varphi_{a, b, V_j} :
f_{a \circ b}^{-1}\mathcal{F}(u_b(V_j))
\longrightarrow
\mathcal{H}(u_j(V_j))
$$
for all $a : j \to i$, $b : k \to j$ and $V_j \in \Ob(\mathcal{C}_j)$.
The compatibilities force the maps $\varphi_{a, b, V_j}$ to be equal
to $\varphi_{a \circ b, \text{id}, u_b(V_j)}$. Given $a : j \to i$, the
family of maps $\varphi_{a, \text{id}, V_j}$ corresponds to a map
of sheaves $\varphi_a : f_a^{-1}\mathcal{F} \to f_{j, *}\mathcal{H}$.
The compatibilities between the $\varphi_{a, \text{id}, u_a(V_i)}$
and the $\varphi_{\text{id}, \text{id}, V_i}$ implies that $\varphi_a$
is the adjoint of the map $\varphi_{id}$ via
$$
\Mor_{\Sh(\mathcal{C}_j)}(f_a^{-1}\mathcal{F}, f_{j, *}\mathcal{H}) =
\Mor_{\Sh(\mathcal{C}_i)}(\mathcal{F}, f_{a, *}f_{j, *}\mathcal{H}) =
\Mor_{\Sh(\mathcal{C}_i)}(\mathcal{F}, f_{i, *}\mathcal{H})
$$
Thus finally we see that the whole system of maps $\varphi_{a, b, V_j}$
is determined by the map $\varphi_{id} : \mathcal{F} \to f_{i, *}\mathcal{H}$.
Conversely, given such a map $\psi : \mathcal{F} \to f_{i, *}\mathcal{H}$
we can read the argument just given backwards to construct the family
of maps $\varphi_{a, b, V_j}$. This finishes the proof that
$\mathcal{G} = f_i^{-1}\mathcal{F}$.

\medskip\noindent
Assume (\ref{equation-compute-pullback-to-limit}) holds. Then the functor
$\mathcal{F} \mapsto f_i^{-1}\mathcal{F}(U)$ commutes with finite limits
because finite limits of sheaves are computed in the category of presheaves
(Lemma \ref{lemma-limit-sheaf}), the functors $f_a^{-1}$ commutes with finite
limits, and filtered colimits commute with finite limits. To see that
$\mathcal{F} \mapsto f_i^{-1}\mathcal{F}(V)$ commutes with finite limits
for a general object $V$ of $\mathcal{C}$, we can use the same argument using
the formula for $f_i^{-1}\mathcal{F}(V) = \mathcal{G}(V)$ given above.
Thus $f_i^{-1}$ is left exact and the proof of the lemma is complete.
\end{proof}

\begin{lemma}
\label{lemma-colimit}
In Situation \ref{situation-inverse-limit-sites} assume given
\begin{enumerate}
\item a sheaf $\mathcal{F}_i$ on $\mathcal{C}_i$ for all
$i \in \Ob(\mathcal{I})$,
\item for $a : j \to i$ a map
$\varphi_a : f_a^{-1}\mathcal{F}_i \to \mathcal{F}_j$
of sheaves on $\mathcal{C}_j$
\end{enumerate}
such that $\varphi_c = \varphi_b \circ f_b^{-1}\varphi_a$
whenever $c = a \circ b$. Set $\mathcal{F} = \colim f_i^{-1}\mathcal{F}_i$
on the site $\mathcal{C}$ of Lemma \ref{lemma-colimit-sites}.
Let $i \in \Ob(\mathcal{I})$ and $X_i \in \text{Ob}(\mathcal{C}_i)$. Then
$$
\colim_{a : j \to i} \mathcal{F}_j(u_a(X_i)) = \mathcal{F}(u_i(X_i))
$$
\end{lemma}

\begin{proof}
A formal argument shows that
$$
\colim_{a : j \to i} \mathcal{F}_i(u_a(X_i)) =
\colim_{a : j \to i} \colim_{b : k \to j}
f_b^{-1}\mathcal{F}_j(u_{a \circ b}(X_i))
$$
By (\ref{equation-compute-pullback-to-limit})
we see that the inner colimit is equal to
$f_j^{-1}\mathcal{F}_j(u_i(X_i))$ hence we conclude by
Lemma \ref{lemma-directed-colimits-sections}.
\end{proof}

\begin{lemma}
\label{lemma-colimit-push-pull}
In Situation \ref{situation-inverse-limit-sites} assume
we have a sheaf $\mathcal{F}$ on $\mathcal{C}$. Then
$$
\mathcal{F} = \colim f_i^{-1}f_{i, *}\mathcal{F}
$$
where the transition maps are $f_j^{-1}\varphi_a$
for $a : j \to i$ where
$\varphi_a : f_a^{-1}f_{i, *}\mathcal{F} \to f_{j, *}\mathcal{F}$
is a canonical map
satisfying a cocycle condition as in Lemma \ref{lemma-colimit}.
\end{lemma}

\begin{proof}
For the morphism
$$
\varphi_a : f_a^{-1}f_{i, *}\mathcal{F} \to f_{j, *}\mathcal{F}
$$
we choose the adjoint to the identity map
$$
f_{i, *}\mathcal{F} \to f_{a, *}f_{j, *}\mathcal{F}
$$
Hence $\varphi_a$ is the counit for the adjunction given by
$(f_a^{-1}, f_{a, *})$. We must prove that for all
$a : j \to i$ and $b : k \to i$ with composition $c = a \circ b$
we have
$\varphi_c = \varphi_b \circ f_b^{-1}\varphi_a$.
This follows from Categories, Lemma \ref{categories-lemma-compose-counits}.
Lastly, we must prove that the map given by adjunction
$$
\colim_{i \in I} f_i^{-1}f_{i, *}\mathcal{F}
\longrightarrow
\mathcal{F}
$$
is an isomorphism. For an object $U$ of $\mathcal{C}$
we need to show the map
$$
(\colim_{i \in I} f_i^{-1}\mathcal{F}_i)(U) \to \mathcal{F}(U)
$$
is bijective. Choose an $i$ and an object $U_i$ of $\mathcal{C}_i$
with $u_i(U_i) = U$. Then the left hand side is equal to
$$
(\colim_{i \in I} f_i^{-1}\mathcal{F}_i)(U) =
\colim_{a : j \to i} f_{j, *}\mathcal{F}(u_a(U_i))
$$
by Lemma \ref{lemma-colimit}. Since $u_j(u_a(U_i)) = U$
we have $f_{j, *}\mathcal{F}(u_a(U_i)) = \mathcal{F}(U)$
for all $a : j \to i$ by definition. Hence the value of the colimit is
$\mathcal{F}(U)$ and the proof is complete.
\end{proof}











\section{More functoriality of presheaves}
\label{section-more-functoriality-PSh}

\noindent
In this section we revisit the material of
Section \ref{section-functoriality-PSh}.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor between categories.
Recall that
$$
u^p :
\textit{PSh}(\mathcal{D})
\longrightarrow
\textit{PSh}(\mathcal{C})
$$
is the functor that associates to $\mathcal{G}$ on $\mathcal{D}$ the presheaf
$u^p\mathcal{G} = \mathcal{G} \circ u$. It turns out that this functor
not only has a left adjoint (namely $u_p$) but also a right adjoint.

\medskip\noindent
Namely, for any $V \in \Ob(\mathcal{D})$
we define a category ${}_V\mathcal{I} = {}_V^u\mathcal{I}$.
Its objects are pairs $(U, \psi : u(U) \to V)$.
Note that the arrow is in the opposite direction from the arrow
we used in defining the category $\mathcal{I}_V^u$ in
Section \ref{section-functoriality-PSh}.
A morphism $(U, \psi) \to (U', \psi')$ is given
by a morphism $\alpha : U \to U'$ such that
$\psi = \psi' \circ u(\alpha)$.
In addition, given any presheaf of sets $\mathcal{F}$
on $\mathcal{C}$ we introduce the functor
${}_V\mathcal{F} : {}_V\mathcal{I}^{opp} \to \textit{Sets}$,
which is defined by the rule
${}_V\mathcal{F}(U, \psi) = \mathcal{F}(U)$. We define
$$
{}_pu(\mathcal{F})(V) := \lim_{{}_V\mathcal{I}^{opp}} {}_V\mathcal{F}
$$
As a limit there are projection maps
$c(\psi) : {}_pu(\mathcal{F})(V) \to \mathcal{F}(U)$
for every object $(U, \psi)$ of ${}_V\mathcal{I}$.
In fact,
$$
{}_pu(\mathcal{F})(V)
=
\left\{
\begin{matrix}
\text{collections }
s_{(U, \psi)} \in \mathcal{F}(U) \\
\forall \beta : (U_1, \psi_1) \to (U_2, \psi_2)
\text{ in }{}_V\mathcal{I} \\
\text{ we have } \beta^*s_{(U_2, \psi_2)} = s_{(U_1, \psi_1)}
\end{matrix}
\right\}
$$
where the correspondence is given by $s \mapsto s_{(U, \psi)} = c(\psi)(s)$.
We leave it to the reader to define the restriction mappings
${}_pu(\mathcal{F})(V) \to {}_pu(\mathcal{F})(V')$
associated to any morphism $V' \to V$ of $\mathcal{D}$.
The resulting presheaf will be denoted ${}_pu\mathcal{F}$.

\begin{lemma}
\label{lemma-recover-pu}
There is a canonical map
${}_pu\mathcal{F}(u(U)) \to \mathcal{F}(U)$,
which is compatible with restriction maps.
\end{lemma}

\begin{proof}
This is just the projection map $c(\text{id}_{u(U)})$ above.
\end{proof}

\noindent
Note that any map of presheaves $\mathcal{F} \to \mathcal{F}'$
gives rise to compatible systems of maps between functors
${}_V\mathcal{F} \to {}_V\mathcal{F}'$, and hence to a map
of presheaves ${}_pu\mathcal{F} \to {}_pu\mathcal{F}'$. In other
words, we have defined a functor
$$
{}_pu :
\textit{PSh}(\mathcal{C})
\longrightarrow
\textit{PSh}(\mathcal{D})
$$

\begin{lemma}
\label{lemma-adjoints-pu}
The functor ${}_pu$ is a right adjoint to the functor $u^p$.
In other words the formula
$$
\Mor_{\textit{PSh}(\mathcal{C})}(u^p\mathcal{G}, \mathcal{F})
=
\Mor_{\textit{PSh}(\mathcal{D})}(\mathcal{G}, {}_pu\mathcal{F})
$$
holds bifunctorially in $\mathcal{F}$ and $\mathcal{G}$.
\end{lemma}

\begin{proof}
This is proved in exactly the same way as the proof
of Lemma \ref{lemma-adjoints-u}. We note that the map
$u^p{}_pu \mathcal{F} \to \mathcal{F}$ from
Lemma \ref{lemma-recover-pu} is the map that
is used to go from the right to the left.

\medskip\noindent
Alternately, think
of a presheaf of sets $\mathcal{F}$ on $\mathcal{C}$ as a presheaf
$\mathcal{F}'$ on $\mathcal{C}^{opp}$ with values in $\textit{Sets}^{opp}$,
and similarly on $\mathcal{D}$.
Check that $({}_pu \mathcal{F})' = u_p(\mathcal{F}')$,
and that $(u^p\mathcal{G})' = u^p(\mathcal{G}')$.
By Remark \ref{remark-functoriality-presheaves-values}
we have the adjointness of $u_p$ and $u^p$ for
presheaves with values in $\textit{Sets}^{opp}$.
The result then follows formally from this.
\end{proof}

\noindent
Thus given a functor $u : \mathcal{C} \to \mathcal{D}$ of categories
we obtain a sequence of functors
$$
u_p, u^p, {}_pu
$$
between categories of presheaves where in each consecutive pair the
first is left adjoint to the second.

\begin{lemma}
\label{lemma-adjoint-functors}
Let $u : \mathcal{C} \to \mathcal{D}$ and $v : \mathcal{D} \to \mathcal{C}$
be functors of categories. Assume that $v$ is right adjoint to $u$.
Then we have
\begin{enumerate}
\item $u^ph_V = h_{v(V)}$ for any $V$ in $\mathcal{D}$,
\item the category $\mathcal{I}^v_U$ has an initial object,
\item the category ${}_V^u\mathcal{I}$ has a final object,
\item ${}_pu = v^p$, and
\item $u^p = v_p$.
\end{enumerate}
\end{lemma}

\begin{proof}
Proof of (1). Let $V$ be an object of $\mathcal{D}$. We have
$u^ph_V = h_{v(V)}$ because
$u^ph_V(U) = \Mor_\mathcal{D}(u(U), V) = \Mor_\mathcal{C}(U, v(V))$
by assumption.

\medskip\noindent
Proof of (2). Let $U$ be an object of $\mathcal{C}$. Let
$\eta : U \to v(u(U))$ be the map adjoint to the map
$\text{id} : u(U) \to u(U)$. Then we claim $(u(U), \eta)$
is an initial object of $\mathcal{I}_U^v$. Namely, given
an object $(V, \phi : U \to v(V))$ of $\mathcal{I}_U^v$
the morphism $\phi$ is adjoint to a map $\psi : u(U) \to V$
which then defines a morphism $(u(U), \eta) \to (V, \phi)$.

\medskip\noindent
Proof of (3). Let $V$ be an object of $\mathcal{D}$. Let
$\xi : u(v(V)) \to V$ be the map adjoint to the map
$\text{id} : v(V) \to v(V)$. Then we claim $(v(V), \xi)$
is a final object of ${}_V^u\mathcal{I}$. Namely, given
an object $(U, \psi : u(U) \to V)$ of ${}_V^u\mathcal{I}$
the morphism $\psi$ is adjoint to a map $\phi : U \to v(V)$
which then defines a morphism $(U, \psi) \to (v(V), \xi)$.

\medskip\noindent
Hence for any presheaf $\mathcal{F}$ on $\mathcal{C}$ we have
\begin{eqnarray*}
v^p\mathcal{F}(V)
& = &
\mathcal{F}(v(V)) \\
& = &
\Mor_{\textit{PSh}(\mathcal{C})}(h_{v(V)}, \mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{C})}(u^ph_V, \mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{D})}(h_V, {}_pu\mathcal{F}) \\
& = &
{}_pu\mathcal{F}(V)
\end{eqnarray*}
which proves part (4). Part (5) follows by the uniqueness of adjoint functors.
\end{proof}

\begin{lemma}
\label{lemma-continuous-with-continuous-left-adjoint}
A continuous functor of sites which has a continuous left adjoint
defines a morphism of sites.
\end{lemma}

\begin{proof}
Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous functor of sites.
Let $w : \mathcal{D} \to \mathcal{C}$ be a continuous left adjoint.
Then $u_p = w^p$ by Lemma \ref{lemma-adjoint-functors}.
Hence $u_s = w^s$ has a left adjoint, namely $w_s$
(Lemma \ref{lemma-adjoint-sheaves}). Thus $u_s$ has both a right and a
left adjoint, whence is exact
(Categories, Lemma \ref{categories-lemma-exact-adjoint}).
\end{proof}




\section{Cocontinuous functors}
\label{section-cocontinuous-functors}

\noindent
There is another way to construct morphisms of topoi.
This involves using cocontinuous functors between sites defined as
follows.

\begin{definition}
\label{definition-cocontinuous}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
The functor $u$ is called {\it cocontinuous}
if for every $U \in \Ob(\mathcal{C})$
and every covering $\{V_j \to u(U)\}_{j \in J}$ of $\mathcal{D}$
there exists a covering
$\{U_i \to U\}_{i\in I}$ of $\mathcal{C}$
such that the family of maps $\{u(U_i) \to u(U)\}_{i \in I}$
refines the covering $\{V_j \to u(U)\}_{j \in J}$.
\end{definition}

\noindent
Note that $\{u(U_i) \to u(U)\}_{i \in I}$ is in general {\it not}
a covering of the site $\mathcal{D}$.

\begin{lemma}
\label{lemma-pu-sheaf}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be cocontinuous.
Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$.
Then ${}_pu\mathcal{F}$ is a sheaf on $\mathcal{D}$,
which we will denote ${}_su\mathcal{F}$.
\end{lemma}

\begin{proof}
Let $\{V_j \to V\}_{j \in J}$ be a covering of the site $\mathcal{D}$.
We have to show that
$$
\xymatrix{
&\ \phantom{}_pu\mathcal{F}(V) \ar[r] &
\prod {}_pu\mathcal{F}(V_j) \ar@<1ex>[r] \ar@<-1ex>[r] &
\prod {}_pu\mathcal{F}(V_j \times_V V_{j'}) &
}
$$
is an equalizer diagram. Since ${}_pu$ is right adjoint to $u^p$
we have
$$
{}_pu\mathcal{F}(V) =
\Mor_{\textit{PSh}(\mathcal{D})}(h_V, {}_pu\mathcal{F}) =
\Mor_{\textit{PSh}(\mathcal{C})}(u^ph_V, \mathcal{F}) =
\Mor_{\Sh(\mathcal{C})}((u^ph_V)^\#, \mathcal{F})
$$
Hence it suffices to show that
\begin{equation}
\label{equation-coequalizer}
\xymatrix{
\coprod u^p h_{V_j \times_V V_{j'}} \ar@<1ex>[r] \ar@<-1ex>[r] &
\coprod u^p h_{V_j} \ar[r] &
u^p h_V
}
\end{equation}
becomes a coequalizer diagram after sheafification. (Recall that a coproduct
in the category of sheaves is the sheafification of the coproduct in the
category of presheaves, see Lemma \ref{lemma-colimit-sheaves}.)

\medskip\noindent
We first show that the second arrow of (\ref{equation-coequalizer})
becomes surjective after sheafification.
To do this we use Lemma \ref{lemma-mono-epi-sheaves}. Thus it suffices to
show a section $s$ of $u^ph_V$ over $U$ lifts
to a section of $\coprod u^p h_{V_j}$ on the members of a covering of $U$.
Note that $s$ is a morphism $s : u(U) \to V$. Then
$\{V_j \times_{V, s} u(U) \to u(U)\}$ is a covering of $\mathcal{D}$.
Hence, as $u$ is cocontinuous, there is a covering $\{U_i \to U\}$
such that $\{u(U_i) \to u(U)\}$ refines $\{V_j \times_{V, s} u(U) \to u(U)\}$.
This means that each restriction $s|_{U_i} : u(U_i) \to V$ factors
through a morphism $s_i : u(U_i) \to V_j$ for some $j$, i.e., $s|_{U_i}$
is in the image of $u^ph_{V_j}(U_i) \to u^ph_V(U_i)$ as desired.

\medskip\noindent
Let $s, s' \in (\coprod u^ph_{V_j})^\#(U)$ map to the same element
of $(u^ph_V)^\#(U)$. To finish the proof of the lemma we show that
after replacing $U$ by the members of a covering that $s, s'$ are
the image of the same section of $\coprod u^p h_{V_j \times_V V_{j'}}$
by the two maps of (\ref{equation-coequalizer}). We may first replace $U$
by the members of a covering and assume that $s \in u^ph_{V_j}(U)$
and $s' \in u^ph_{V_{j'}}(U)$. A second such replacement guarantees
that $s$ and $s'$ have the same image in $u^ph_V(U)$ instead of in
the sheafification. Hence $s : u(U) \to V_j$ and $s' : u(U) \to V_{j'}$
are morphisms of $\mathcal{D}$ such that
$$
\xymatrix{
u(U) \ar[r]_{s'} \ar[d]_s & V_{j'} \ar[d] \\
V_j \ar[r] & V
}
$$
is commutative. Thus we obtain $t = (s, s') : u(U) \to V_j \times_V V_{j'}$,
i.e., a section $t \in u^ph_{V_j \times_V V_{j'}}(U)$
which maps to $s, s'$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-exact-cocontinuous}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be cocontinuous.
The functor
$\Sh(\mathcal{D}) \to \Sh(\mathcal{C})$,
$\mathcal{G} \mapsto (u^p\mathcal{G})^\#$
is a left adjoint to the functor ${}_su$ introduced
in Lemma \ref{lemma-pu-sheaf} above. Moreover, it
is exact.
\end{lemma}

\begin{proof}
Let us prove the adjointness property as follows
\begin{eqnarray*}
\Mor_{\Sh(\mathcal{C})}
((u^p\mathcal{G})^\#, \mathcal{F})
& = &
\Mor_{\textit{PSh}(\mathcal{C})}
(u^p\mathcal{G}, \mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{D})}
(\mathcal{G}, {}_pu\mathcal{F}) \\
& = &
\Mor_{\Sh(\mathcal{D})}
(\mathcal{G}, {}_su\mathcal{F}).
\end{eqnarray*}
Thus it is a left adjoint and hence right exact,
see Categories, Lemma \ref{categories-lemma-exact-adjoint}.
We have seen that sheafification is left exact,
see Lemma \ref{lemma-sheafification-exact}.
Moreover, the inclusion
$i : \Sh(\mathcal{D}) \to \textit{PSh}(\mathcal{D})$
is left exact by Lemma \ref{lemma-limit-sheaf}. Finally, the functor
$u^p$ is left exact because it is a right adjoint
(namely to $u_p$). Thus the functor is the composition
${}^\# \circ u^p \circ i$ of left exact functors,
hence left exact.
\end{proof}

\noindent
We finish this section with a technical lemma.

\begin{lemma}
\label{lemma-technical-pu}
In the situation of Lemma \ref{lemma-exact-cocontinuous}.
For any presheaf $\mathcal{G}$ on $\mathcal{D}$
we have $(u^p\mathcal{G})^\# = (u^p(\mathcal{G}^\#))^\#$.
\end{lemma}

\begin{proof}
For any sheaf $\mathcal{F}$ on $\mathcal{C}$ we have
\begin{eqnarray*}
\Mor_{\Sh(\mathcal{C})}((u^p(\mathcal{G}^\#))^\#, \mathcal{F})
& = &
\Mor_{\Sh(\mathcal{D})}(\mathcal{G}^\#, {}_su\mathcal{F}) \\
& = &
\Mor_{\Sh(\mathcal{D})}(\mathcal{G}^\#, {}_pu\mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{D})}(\mathcal{G}, {}_pu\mathcal{F}) \\
& = &
\Mor_{\textit{PSh}(\mathcal{C})}(u^p\mathcal{G}, \mathcal{F}) \\
& = &
\Mor_{\Sh(\mathcal{C})}((u^p\mathcal{G})^\#, \mathcal{F})
\end{eqnarray*}
and the result follows from the Yoneda lemma.
\end{proof}

\begin{remark}
\label{remark-cartesian-cocontinuous}
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor between categories.
Given morphisms $g : u(U) \to V$ and $f : W \to V$ in $\mathcal{D}$
we can consider the functor
$$
\mathcal{C}^{opp} \longrightarrow \textit{Sets},\quad
T \longmapsto
\Mor_\mathcal{C}(T, U)
\times_{\Mor_\mathcal{D}(u(T), V)}
\Mor_\mathcal{D}(u(T), W)
$$
If this functor is representable, denote $U \times_{g, V, f} W$
the corresponding object of $\mathcal{C}$.
Assume that $\mathcal{C}$ and $\mathcal{D}$ are sites.
Consider the property $P$: for every covering $\{f_j : V_j \to V\}$
of $\mathcal{D}$ and any morphism $g : u(U) \to V$ we have
\begin{enumerate}
\item $U \times_{g, V, f_i} V_i$ exists for all $i$, and
\item $\{U \times_{g, V, f_i} V_i \to U\}$ is a covering of $\mathcal{C}$.
\end{enumerate}
Please note the similarity with the definition of continuous
functors. If $u$ has $P$ then $u$ is cocontinuous (details omitted).
Many of the cocontinuous functors we will encounter satisfy $P$.
\end{remark}


\section{Cocontinuous functors and morphisms of topoi}
\label{section-cocontinuous-morphism-topoi}

\noindent
It is clear from the above that a cocontinuous functor $u$
gives a morphism of topoi in the same direction as $u$.
Thus this is in the opposite direction from the morphism of topoi
associated (under certain conditions) to a continuous $u$ as in
Definition \ref{definition-morphism-sites},
Proposition \ref{proposition-get-morphism}, and
Lemma \ref{lemma-morphism-sites-topoi}.

\begin{lemma}
\label{lemma-cocontinuous-morphism-topoi}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be cocontinuous.
The functors $g_* = {}_su$ and $g^{-1} = (u^p\ )^\#$
define a morphism of topoi
$g$ from  $\Sh(\mathcal{C})$ to $\Sh(\mathcal{D})$.
\end{lemma}

\begin{proof}
This is exactly the content of Lemma \ref{lemma-exact-cocontinuous}.
\end{proof}

\begin{lemma}
\label{lemma-composition-cocontinuous}
Let $u : \mathcal{C} \to \mathcal{D}$, and $v : \mathcal{D} \to \mathcal{E}$
be cocontinuous functors. Then $v \circ u$ is cocontinuous and we
have $h = g \circ f$
where $f : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$,
resp.\ $g : \Sh(\mathcal{D}) \to \Sh(\mathcal{E})$,
resp.\ $h : \Sh(\mathcal{C}) \to \Sh(\mathcal{E})$ is the
morphism of topoi associated to $u$, resp.\ $v$, resp.\ $v \circ u$.
\end{lemma}

\begin{proof}
Let $U \in \Ob(\mathcal{C})$.
Let $\{E_i \to v(u(U))\}$ be a covering of $U$ in $\mathcal{E}$.
By assumption there exists a covering $\{D_j \to u(U)\}$ in $\mathcal{D}$
such that $\{v(D_j) \to v(u(U))\}$ refines $\{E_i \to v(u(U))\}$. Also
by assumption there exists a covering $\{C_l \to U\}$ in $\mathcal{C}$
such that $\{u(C_l) \to u(U)\}$ refines $\{D_j \to u(U)\}$. Then it is
true that $\{v(u(C_l)) \to v(u(U))\}$ refines the covering
$\{E_i \to v(u(U))\}$. This proves that $v \circ u$ is cocontinuous.
To prove the last assertion it suffices to show that
${}_sv \circ {}_su = {}_s(v \circ u)$. It suffices to prove that
${}_pv \circ {}_pu = {}_p(v \circ u)$, see Lemma \ref{lemma-pu-sheaf}.
Since ${}_pu$, resp.\ ${}_pv$, resp.\ ${}_p(v \circ u)$ is right adjoint to
$u^p$, resp.\ $v^p$, resp.\ $(v \circ u)^p$ it suffices to prove that
$u^p \circ v^p = (v \circ u)^p$. And this is direct from the definitions.
\end{proof}

\begin{example}
\label{example-open-immersion-cocontinuous}
Let $X$ be a topological space.
Let $j : U  \to X$ be the inclusion of an open subspace.
Recall that we have sites $X_{Zar}$ and $U_{Zar}$,
see Example \ref{example-site-topological}.
Recall that we have the functor $u : X_{Zar} \to U_{Zar}$
associated to $j$ which is continuous and gives rise
to a morphism of sites $U_{Zar} \to X_{Zar}$,
see Example \ref{example-continuous-map}.
This also gives a morphism of topoi $(j_*, j^{-1})$.
Next, consider the functor
$v : U_{Zar} \to X_{Zar}$, $V \mapsto v(V) = V$
(just the same open but now thought of as an object of $X_{Zar}$).
This functor is cocontinuous. Namely, if $v(V) = \bigcup_{j \in J} W_j$
is an open covering in $X$, then each $W_j$ must be a subset of
$U$ and hence is of the form $v(V_j)$,
and trivially $V = \bigcup_{j \in J} V_j$ is an open covering in $U$.
We conclude by Lemma \ref{lemma-cocontinuous-morphism-topoi} above
that there is a morphism of topoi associated to $v$
$$
\Sh(U) \longrightarrow \Sh(X)
$$
given by ${}_sv$ and $(v^p\ )^\#$. We claim that
actually $(v^p\ )^\# = j^{-1}$ and that ${}_sv = j_*$,
in other words, that this is the same morphism of topoi
as the one given above. Perhaps the easiest way to see
this is to realize that for any sheaf
$\mathcal{G}$ on $X$ we have
$v^p\mathcal{G}(V) = \mathcal{G}(V)$ which according to
Sheaves, Lemma \ref{sheaves-lemma-j-pullback} is a description
of $j^{-1}\mathcal{G}$ (and hence sheafification is superfluous
in this case). The equality of ${}_sv$ and $j_*$ follows by
uniqueness of adjoint functors (but may also be computed directly).
\end{example}

\begin{example}
\label{example-open-map-cocontinuous}
This example is a slight generalization of
Example \ref{example-open-immersion-cocontinuous}.
Let $f : X \to Y$ be a continuous map of topological spaces.
Assume that $f$ is open.
Recall that we have sites $X_{Zar}$ and $Y_{Zar}$,
see Example \ref{example-site-topological}.
Recall that we have the functor $u : Y_{Zar} \to X_{Zar}$
associated to $f$ which is continuous and gives rise
to a morphism of sites $X_{Zar} \to Y_{Zar}$,
see Example \ref{example-continuous-map}.
This also gives a morphism of topoi $(f_*, f^{-1})$.
Next, consider the functor
$v : X_{Zar} \to Y_{Zar}$, $U \mapsto v(U) = f(U)$.
This functor is cocontinuous. Namely, if $f(U) = \bigcup_{j \in J} V_j$
is an open covering in $Y$, then setting $U_j = f^{-1}(V_j) \cap U$
we get an open covering $U = \bigcup U_j$ such that $f(U) = \bigcup f(U_j)$
is a refinement of $f(U) = \bigcup V_j$.
We conclude by Lemma \ref{lemma-cocontinuous-morphism-topoi} above
that there is a morphism of topoi associated to $v$
$$
\Sh(X) \longrightarrow \Sh(Y)
$$
given by ${}_sv$ and $(v^p\ )^\#$. We claim that
actually $(v^p\ )^\# = f^{-1}$ and that ${}_sv = f_*$,
in other words, that this is the same morphism of topoi
as the one given above. For any sheaf
$\mathcal{G}$ on $Y$ we have
$v^p\mathcal{G}(U) = \mathcal{G}(f(U))$.
On the other hand, we may compute
$u_p\mathcal{G}(U) = \colim_{f(U) \subset V} \mathcal{G}(V)
= \mathcal{G}(f(U))$ because clearly $(f(U), U \subset f^{-1}(f(U)))$
is an initial object of the category $\mathcal{I}_U^u$ of
Section \ref{section-functoriality-PSh}.
Hence $u_p = v^p$ and we conclude $f^{-1} = u_s = (v^p\ )^\#$.
The equality of ${}_sv$ and $f_*$ follows by
uniqueness of adjoint functors (but may also be computed directly).
\end{example}

\noindent
In the first Example \ref{example-open-immersion-cocontinuous}
the functor $v$ is also continuous. But in the second
Example \ref{example-open-map-cocontinuous} it is generally not continuous
because condition (2) of Definition \ref{definition-continuous} may fail.
Hence the following lemma applies to the first example, but not to the second.

\begin{lemma}
\label{lemma-when-shriek}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Assume that
\begin{enumerate}
\item[(a)] $u$ is cocontinuous, and
\item[(b)] $u$ is continuous.
\end{enumerate}
Let $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$
be the associated morphism of topoi. Then
\begin{enumerate}
\item sheafification in the formula $g^{-1} = (u^p\ )^\#$ is
unnecessary, in other words $g^{-1}(\mathcal{G})(U) = \mathcal{G}(u(U))$,
\item $g^{-1}$ has a left adjoint $g_{!} = (u_p\ )^\#$, and
\item $g^{-1}$ commutes with arbitrary limits and colimits.
\end{enumerate}
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-pushforward-sheaf} for any sheaf $\mathcal{G}$
on $\mathcal{D}$ the presheaf $u^p\mathcal{G}$ is a sheaf on $\mathcal{C}$.
And then we see the adjointness by the following string of
equalities
\begin{eqnarray*}
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, g^{-1}\mathcal{G})
& = &
\Mor_{\textit{PSh}(\mathcal{C})}(\mathcal{F}, u^p\mathcal{G})
\\
& = &
\Mor_{\textit{PSh}(\mathcal{D})}(u_p\mathcal{F}, \mathcal{G})
\\
& = &
\Mor_{\Sh(\mathcal{D})}(g_{!}\mathcal{F}, \mathcal{G})
\end{eqnarray*}
The statement on limits and colimits follows from the
discussion in Categories, Section \ref{categories-section-adjoint}.
\end{proof}

\noindent
In the situation of Lemma \ref{lemma-when-shriek} above we see that we have
a sequence of adjoint functors
$$
g_{!}, \ g^{-1}, \ g_*.
$$
The functor $g_!$ is {\it not} exact in general, because it does
not transform a final object of $\Sh(\mathcal{C})$
into a final object of $\Sh(\mathcal{D})$ in general.
See Sheaves, Remark \ref{sheaves-remark-j-shriek-not-exact}.
On the other hand, in the topological setting of
Example \ref{example-open-immersion-cocontinuous} the functor
$j_!$ is exact on abelian sheaves, see
Modules, Lemma \ref{modules-lemma-j-shriek-exact}. The following lemma gives
the generalization to the case of sites.

\begin{lemma}
\label{lemma-preserve-equalizers}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Assume that
\begin{enumerate}
\item[(a)] $u$ is cocontinuous,
\item[(b)] $u$ is continuous, and
\item[(c)] fibre products and equalizers exist in $\mathcal{C}$ and
$u$ commutes with them.
\end{enumerate}
In this case the functor $g_!$ above commutes with fibre products and
equalizers (and more generally with finite connected limits).
\end{lemma}

\begin{proof}
Assume (a), (b), and (c).
We have $g_! = (u_p\ )^\#$. Recall (Lemma \ref{lemma-limit-sheaf}) that
limits of sheaves are equal to the corresponding limits as presheaves.
And sheafification commutes with finite limits
(Lemma \ref{lemma-sheafification-exact}). Thus it
suffices to show that $u_p$ commutes with fibre products and equalizers.
To do this it suffices that colimits over the categories
$(\mathcal{I}_V^u)^{opp}$ of
Section \ref{section-functoriality-PSh}
commute with fibre products and equalizers. This follows
from
Lemma \ref{lemma-almost-directed}
and
Categories, Lemma \ref{categories-lemma-almost-directed-commutes-equalizers}.
\end{proof}

\noindent
The following lemma deals with a case that is even more like
the morphism associated to an open immersion of topological spaces.

\begin{lemma}
\label{lemma-back-and-forth}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Assume that
\begin{enumerate}
\item[(a)] $u$ is cocontinuous,
\item[(b)] $u$ is continuous, and
\item[(c)] $u$ is fully faithful.
\end{enumerate}
For $g_!, g^{-1}, g_*$ as above
the canonical maps $\mathcal{F} \to g^{-1}g_!\mathcal{F}$
and $g^{-1}g_*\mathcal{F} \to \mathcal{F}$ are isomorphisms
for all sheaves $\mathcal{F}$ on $\mathcal{C}$.
\end{lemma}

\begin{proof}
Let $X$ be an object of $\mathcal{C}$.
In Lemmas \ref{lemma-pu-sheaf} and \ref{lemma-when-shriek} we have seen that
sheafification is not necessary for the functors
$g^{-1} = (u^p\ )^\#$ and $g_{*} = ({}_pu\ )^\#$.
We may compute
$(g^{-1}g_{*}\mathcal{F})(X) = g_{*}\mathcal{F}(u(X))
= \lim \mathcal{F}(Y)$. Here the limit
is over the category of pairs $(Y, u(Y) \to u(X))$
where the morphisms $u(Y) \to u(X)$ are not required to be
of the form $u(\alpha)$ with $\alpha$ a morphism of $\mathcal{C}$.
By assumption (c) we see that they automatically come from
morphisms of $\mathcal{C}$ and we deduce that the limit is the
value on $(X, u(\text{id}_X))$, i.e., $\mathcal{F}(X)$.
This proves that $g^{-1}g_{*}\mathcal{F} = \mathcal{F}$.

\medskip\noindent
On the other hand, $(g^{-1}g_{!}\mathcal{F})(X) =
g_{!}\mathcal{F}(u(X)) = (u_p\mathcal{F})^\#(u(X))$, and
$u_p\mathcal{F}(u(X)) = \colim \mathcal{F}(Y)$.
Here the colimit is over the category of pairs $(Y, u(X) \to u(Y))$
where the morphisms $u(X) \to u(Y)$ are not required to be
of the form $u(\alpha)$ with $\alpha$ a morphism of $\mathcal{C}$.
By assumption (c) we see that they automatically come
from morphisms of $\mathcal{C}$ and we deduce that the colimit is the
value on $(X, u(\text{id}_X))$, i.e., $\mathcal{F}(X)$. Thus for every
$X \in \Ob(\mathcal{C})$ we have
$u_p\mathcal{F}(u(X)) = \mathcal{F}(X)$.
Since $u$ is cocontinuous and continuous any covering of $u(X)$ in
$\mathcal{D}$ can be refined by a covering (!) $\{u(X_i) \to u(X)\}$
of $\mathcal{D}$ where $\{X_i \to X\}$ is a covering in $\mathcal{C}$.
This implies that $(u_p\mathcal{F})^+(u(X)) = \mathcal{F}(X)$ also,
since in the colimit defining the value of $(u_p\mathcal{F})^+$
on $u(X)$ we may restrict to the cofinal system of coverings
$\{u(X_i) \to u(X)\}$ as above. Hence we see that
$(u_p\mathcal{F})^+(u(X)) = \mathcal{F}(X)$ for all objects $X$
of $\mathcal{C}$ as well. Repeating this argument one more time
gives the equality $(u_p\mathcal{F})^\#(u(X)) = \mathcal{F}(X)$
for all objects $X$ of $\mathcal{C}$. This produces the desired
equality $g^{-1}g_!\mathcal{F} = \mathcal{F}$.
\end{proof}

\noindent
Finally, here is a case that does not have any corresponding topological
example. We will use this lemma to see what happens when we enlarge a
``partial universe'' of schemes keeping the same topology. In the situation
of the lemma, the morphism of topoi $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$
identifies $\Sh(\mathcal{C})$ as a subtopos of $\Sh(\mathcal{D})$
(Section \ref{section-subtopoi}) and moreover, the given embedding has a
retraction.

\begin{lemma}
\label{lemma-bigger-site}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Assume that
\begin{enumerate}
\item[(a)] $u$ is cocontinuous,
\item[(b)] $u$ is continuous,
\item[(c)] $u$ is fully faithful,
\item[(d)] fibre products exist in $\mathcal{C}$ and $u$ commutes with them,
and
\item[(e)] there exist final objects
$e_\mathcal{C} \in \Ob(\mathcal{C})$,
$e_\mathcal{D} \in \Ob(\mathcal{D})$ such that
$u(e_\mathcal{C}) = e_\mathcal{D}$.
\end{enumerate}
Let $g_!, g^{-1}, g_*$ be as above. Then, $u$ defines a morphism of sites
$f : \mathcal{D} \to \mathcal{C}$ with $f_* = g^{-1}$, $f^{-1} = g_!$.
The composition
$$
\xymatrix{
\Sh(\mathcal{C}) \ar[r]^g &
\Sh(\mathcal{D}) \ar[r]^f &
\Sh(\mathcal{C})
}
$$
is isomorphic to the identity morphism of the topos
$\Sh(\mathcal{C})$. Moreover, the functor $f^{-1}$ is fully faithful.
\end{lemma}

\begin{proof}
By assumption the functor $u$ satisfies the hypotheses of
Proposition \ref{proposition-get-morphism}. Hence $u$ defines
a morphism of sites and hence a morphism of topoi $f$ as in
Lemma \ref{lemma-morphism-sites-topoi}. The formulas
$f_* = g^{-1}$ and $f^{-1} = g_!$ are clear from the lemma cited and
Lemma \ref{lemma-when-shriek}.
We have
$f_* \circ g_* = g^{-1} \circ g_* \cong \text{id}$, and
$g^{-1} \circ f^{-1} = g^{-1} \circ g_! \cong \text{id}$
by Lemma \ref{lemma-back-and-forth}.

\medskip\noindent
We still have to show that $f^{-1}$ is fully faithful.
Let $\mathcal{F}, \mathcal{G} \in \Ob(\Sh(\mathcal{C}))$.
We have to show that the map
$$
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, \mathcal{G})
\longrightarrow
\Mor_{\Sh(\mathcal{D})}(f^{-1}\mathcal{F}, f^{-1}\mathcal{G})
$$
is bijective. But the right hand side is equal to
\begin{align*}
\Mor_{\Sh(\mathcal{D})}(f^{-1}\mathcal{F}, f^{-1}\mathcal{G})
& =
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, f_*f^{-1}\mathcal{G}) \\
& =
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, g^{-1}f^{-1}\mathcal{G}) \\
& =
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, \mathcal{G})
\end{align*}
(the first equality by adjunction) which proves what we want.
\end{proof}

\begin{example}
\label{example-closed-map-cocontinuous-false}
Let $X$ be a topological space.
Let $i : Z  \to X$ be the inclusion of a subset (with induced
topology). Consider the functor $u : X_{Zar} \to Z_{Zar}$,
$U \mapsto u(U) = Z \cap U$.
At first glance it may appear that this functor is cocontinuous as
well. After all, since $Z$ has the induced topology,
shouldn't any covering of $U\cap Z$ it come from a covering
of $U$ in $X$? Not so! Namely, what if $U \cap Z = \emptyset$?
In that case, the empty covering is a covering of
$U \cap Z$, and the empty covering can only be refined by
the empty covering. Thus we conclude that
$u$ cocontinuous $\Rightarrow$ every nonempty open $U$
of $X$ has nonempty intersection with $Z$.
But this is not sufficient. For example, if
$X = \mathbf{R}$ the real number line with the usual
topology, and $Z = \mathbf{R} \setminus \{0\}$, then
there is an open covering of $Z$, namely
$Z = \{x < 0\} \cup \bigcup_n \{1/n < x\}$ which
cannot be refined by the restriction of any
open covering of $X$.
\end{example}







\section{Cocontinuous functors which have a right adjoint}
\label{section-cocontinuous-adjoint}

\noindent
It may happen that a cocontinuous functor $u$ has a right adjoint $v$.
In this case it is often the case that $v$ is continuous, and if so,
then it defines a morphism of topoi (which is the same as the one
defined by $u$).

\begin{lemma}
\label{lemma-have-functor-other-way}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Let
$u : \mathcal{C} \to \mathcal{D}$, and $v : \mathcal{D} \to \mathcal{C}$
be functors. Assume that $u$ is cocontinuous,
and that $v$ is a right adjoint to $u$.
Let $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be
the morphism of topoi associated to $u$, see
Lemma \ref{lemma-cocontinuous-morphism-topoi}.
Then $g_*\mathcal{F}$ is equal to the presheaf
$v^p\mathcal{F}$, in other words, $(g_*\mathcal{F})(V) = \mathcal{F}(v(V))$.
\end{lemma}

\begin{proof}
We have $u^ph_V = h_{v(V)}$ by Lemma \ref{lemma-adjoint-functors}.
By Lemma \ref{lemma-technical-pu} this implies that
$g^{-1}(h_V^\#) = (u^ph_V^\#)^\# = (u^ph_V)^\# = h_{v(V)}^\#$.
Hence for any sheaf $\mathcal{F}$ on $\mathcal{C}$ we have
\begin{eqnarray*}
(g_*\mathcal{F})(V)
& = &
\Mor_{\Sh(\mathcal{D})}(h_V^\#, g_*\mathcal{F}) \\
& = &
\Mor_{\Sh(\mathcal{C})}(g^{-1}(h_V^\#), \mathcal{F}) \\
& = &
\Mor_{\Sh(\mathcal{C})}(h_{v(V)}^\#, \mathcal{F}) \\
& = &
\mathcal{F}(v(V))
\end{eqnarray*}
which proves the lemma.
\end{proof}

\noindent
In the situation of Lemma \ref{lemma-have-functor-other-way}
we see that $v^p$ transforms sheaves
into sheaves. Hence we can define $v^s = v^p$ restricted to sheaves.
Just as in Lemma \ref{lemma-adjoint-sheaves} we see that
$v_s : \mathcal{G} \mapsto (v_p\mathcal{G})^\#$ is a left adjoint to $v^s$.
On the other hand, we have $v^s = g_*$ and $g^{-1}$ is a left
adjoint of $g_*$ as well. We conclude that $g^{-1} = v_s$ is exact.

\begin{lemma}
\label{lemma-have-functor-other-way-morphism}
In the situation of Lemma \ref{lemma-have-functor-other-way}.
We have $g_* = v^s = v^p$ and $g^{-1} = v_s = (v_p\ )^\#$.
If $v$ is continuous then $v$ defines a morphism of sites $f$
from $\mathcal{C}$ to $\mathcal{D}$ whose associated morphism
of topoi is equal to the morphism $g$ associated to the cocontinuous
functor $u$. In other words, a continuous functor which has a
cocontinuous left adjoint defines a morphism of sites.
\end{lemma}

\begin{proof}
Clear from the discussion above the lemma and
Definitions \ref{definition-morphism-sites} and
Lemma \ref{lemma-morphism-sites-topoi}.
\end{proof}

\begin{example}
\label{example-finer-topology-bis}
This example continues the discussion of
Example \ref{example-finer-topology}
from which we borrow the notation $\mathcal{C}, \tau, \tau', \epsilon$.
Observe that the identity functor $v : \mathcal{C}_{\tau'} \to \mathcal{C}_\tau$
is a continuous functor and the identity functor
$u : \mathcal{C}_\tau \to \mathcal{C}_{\tau'}$
is a cocontinuous functor. Moreover $u$ is left adjoint to $v$.
Hence the results of
Lemmas \ref{lemma-have-functor-other-way} and
\ref{lemma-have-functor-other-way-morphism}
apply and we conclude $v$ defines a morphism of sites, namely
$$
\epsilon : \mathcal{C}_\tau \longrightarrow \mathcal{C}_{\tau'}
$$
whose corresponding morphism of topoi is the same as the morphism
of topoi associated to the cocontinuous functor $u$.
\end{example}







\section{Cocontinuous functors which have a left adjoint}
\label{section-cocontinuous-left-adjoint}

\noindent
It may happen that a cocontinuous functor $u$ has a left adjoint $w$.

\begin{lemma}
\label{lemma-have-left-adjoint}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites. Let
$g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be
the morphism of topoi associated to a continuous and cocontinuous functor
$u : \mathcal{C} \to \mathcal{D}$, see
Lemmas \ref{lemma-cocontinuous-morphism-topoi} and
\ref{lemma-when-shriek}.
\begin{enumerate}
\item If $w : \mathcal{D} \to \mathcal{C}$ is a left adjoint to $u$, then
\begin{enumerate}
\item $g_!\mathcal{F}$ is the sheaf associated to the presheaf
$w^p\mathcal{F}$, and
\item $g_!$ is exact.
\end{enumerate}
\item if $w$ is a continuous left adjoint, then $g_!$
has a left adjoint.
\item If $w$ is a cocontinuous left adjoint, then $g_! = h^{-1}$ and
$g^{-1} = h_*$ where $h : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ is
the morphism of topoi associated to $w$.
\end{enumerate}
\end{lemma}

\begin{proof}
Recall that $g_!\mathcal{F}$ is the sheafification of $u_p\mathcal{F}$.
Hence (1)(a) follows from the fact that $u_p = w^p$ by
Lemma \ref{lemma-adjoint-functors}.

\medskip\noindent
To see (1)(b) note that $g_!$ commutes with all colimits as $g_!$
is a left adjoint (Categories, Lemma \ref{categories-lemma-adjoint-exact}).
Let $i \mapsto \mathcal{F}_i$ be a finite diagram in $\Sh(\mathcal{C})$.
Then $\lim \mathcal{F}_i$ is computed in the category of presheaves
(Lemma \ref{lemma-limit-sheaf}). Since $w^p$ is a right adjoint
(Lemma \ref{lemma-adjoints-u})
we see that $w^p \lim \mathcal{F}_i = \lim w^p\mathcal{F}_i$. Since
sheafification is exact
(Lemma \ref{lemma-sheafification-exact})
we conclude by (1)(a).

\medskip\noindent
Assume $w$ is continuous. Then $g_! = (w^p\ )^\# = w^s$ but sheafification
isn't necessary and one has the left adjoint $w_s$, see
Lemmas \ref{lemma-pushforward-sheaf} and \ref{lemma-adjoint-sheaves}.

\medskip\noindent
Assume $w$ is cocontinuous. The equality $g_! = h^{-1}$ follows from (1)(a)
and the definitions. The equality $g^{-1} = h_*$ follows from the equality
$g_! = h^{-1}$ and uniqueness of adjoint functor. Alternatively one can deduce
it from Lemma \ref{lemma-have-functor-other-way}.
\end{proof}









\section{Existence of lower shriek}
\label{section-lower-shriek}

\noindent
In this section we discuss some cases of morphisms of topoi $f$ for which
$f^{-1}$ has a left adjoint $f_!$.

\begin{lemma}
\label{lemma-existence-lower-shriek}
Let $\mathcal{C}$, $\mathcal{D}$ be two sites.
Let $f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ be a morphism of topoi.
Let $E \subset \Ob(\mathcal{D})$ be a subset such that
\begin{enumerate}
\item for $V \in E$ there exists a sheaf $\mathcal{G}$
on $\mathcal{C}$ such that $f^{-1}\mathcal{F}(V) = 
\Mor_{\Sh(\mathcal{C})}(\mathcal{G}, \mathcal{F})$ functorially
for $\mathcal{F}$ in $\Sh(\mathcal{C})$,
\item every object of $\mathcal{D}$ has a covering by objects of $E$.
\end{enumerate}
Then $f^{-1}$ has a left adjoint $f_!$.
\end{lemma}

\begin{proof}
By the Yoneda lemma (Categories, Lemma \ref{categories-lemma-yoneda})
the sheaf $\mathcal{G}_V$ corresponding to $V \in E$
is defined up to unique isomorphism by the formula
$f^{-1}\mathcal{F}(V) = \Mor_{\Sh(\mathcal{C})}(\mathcal{G}_V, \mathcal{F})$.
Recall that
$f^{-1}\mathcal{F}(V) = \Mor_{\Sh(\mathcal{D})}(h_V^\#, f^{-1}\mathcal{F})$.
Denote $i_V : h_V^\# \to f^{-1}\mathcal{G}_V$ the map corresponding to
$\text{id}$ in $\Mor(\mathcal{G}_V, \mathcal{G}_V)$.
Functoriality in (1) implies that the bijection is given by
$$
\Mor_{\Sh(\mathcal{C})}(\mathcal{G}_V, \mathcal{F}) \to
\Mor_{\Sh(\mathcal{D})}(h_V^\#, f^{-1}\mathcal{F}),\quad
\varphi \mapsto f^{-1}\varphi \circ i_V
$$
For any $V_1, V_2 \in E$ there is a canonical map
$$
\Mor_{\Sh(\mathcal{D})}(h^\#_{V_2}, h^\#_{V_1})
\to
\Hom_{\Sh(\mathcal{C})}(\mathcal{G}_{V_2}, \mathcal{G}_{V_1}),\quad
\varphi \mapsto f_!(\varphi)
$$
which is characterized by
$f^{-1}(f_!(\varphi)) \circ i_{V_2} = i_{V_1} \circ \varphi$.
Note that $\varphi \mapsto f_!(\varphi)$ is
compatible with composition; this can be seen directly
from the characterization. Hence $h_V^\# \mapsto \mathcal{G}_V$
and $\varphi \mapsto f_!\varphi$ is a functor from
the full subcategory of $\Sh(\mathcal{D})$ whose objects are the $h_V^\#$.

\medskip\noindent
Let $J$ be a set and let $J \to E$, $j \mapsto V_j$ be a map.
Then we have a functorial bijection
$$
\Mor_{\Sh(\mathcal{C})}(\coprod \mathcal{G}_{V_j}, \mathcal{F})
\longrightarrow
\Mor_{\Sh(\mathcal{D})}(\coprod h_{V_j}^\#, f^{-1}\mathcal{F})
$$
using the product of the bijections above. Hence we can extend the
functor $f_!$ to the full subcategory of $\Sh(\mathcal{D})$ whose
objects are coproducts of $h_V^\#$ with $V \in E$.

\medskip\noindent
Given an arbitrary sheaf $\mathcal{H}$ on $\mathcal{D}$ we choose a
coequalizer diagram
$$
\xymatrix{
\mathcal{H}_1 \ar@<1ex>[r] \ar@<-1ex>[r] &
\mathcal{H}_0 \ar[r] &
\mathcal{H}
}
$$
where $\mathcal{H}_i = \coprod h_{V_{i, j}}^\#$
is a coproduct with $V_{i, j} \in E$.
This is possible by assumption (2), see
Lemma \ref{lemma-sheaf-coequalizer-representable}
(for those worried about set theoretical issues, note that
the construction given in
Lemma \ref{lemma-sheaf-coequalizer-representable} is canonical).
Define $f_!(\mathcal{H})$ to be the sheaf on $\mathcal{C}$
which makes
$$
\xymatrix{
f_!\mathcal{H}_1 \ar@<1ex>[r] \ar@<-1ex>[r] &
f_!\mathcal{H}_0 \ar[r] &
f_!\mathcal{H}
}
$$
a coequalizer diagram. Then
\begin{align*}
\Mor(f_!\mathcal{H}, \mathcal{F})
& =
\text{Equalizer}(
\xymatrix{
\Mor(f_!\mathcal{H}_0, \mathcal{F}) \ar@<1ex>[r] \ar@<-1ex>[r] &
\Mor(f_!\mathcal{H}_1, \mathcal{F})
}
) \\
& =
\text{Equalizer}(
\xymatrix{
\Mor(\mathcal{H}_0, f^{-1}\mathcal{F}) \ar@<1ex>[r] \ar@<-1ex>[r] &
\Mor(\mathcal{H}_1, f^{-1}\mathcal{F})
}
) \\
& =
\Hom(\mathcal{H}, f^{-1}\mathcal{F})
\end{align*}
Hence we see that we can extend $f_!$ to the whole category of sheaves
on $\mathcal{D}$.
\end{proof}








\section{Localization}
\label{section-localize}

\noindent
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
See
Categories, Example \ref{categories-example-category-over-X}
for the definition of the category $\mathcal{C}/U$ of
objects over $U$. We turn $\mathcal{C}/U$ into a site
by declaring a family of morphisms $\{V_j \to V\}$ of
objects over $U$ to be a covering of $\mathcal{C}/U$
if and only if it is a covering in $\mathcal{C}$.
Consider the forgetful functor
$$
j_U : \mathcal{C}/U \longrightarrow \mathcal{C}.
$$
This is clearly cocontinuous and continuous. Hence by the
results of the previous sections we obtain a morphism of topoi
$$
j_U : \Sh(\mathcal{C}/U) \longrightarrow \Sh(\mathcal{C})
$$
given by $j_U^{-1}$ and $j_{U*}$, as well as a functor $j_{U!}$.

\begin{definition}
\label{definition-localize}
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
\begin{enumerate}
\item The site $\mathcal{C}/U$ is called the {\it localization of
the site $\mathcal{C}$ at the object $U$}.
\item The morphism of topoi
$j_U : \Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})$
is called the {\it localization morphism}.
\item The functor $j_{U*}$ is called the {\it direct image functor}.
\item For a sheaf $\mathcal{F}$ on $\mathcal{C}$ the sheaf
$j_U^{-1}\mathcal{F}$ is called the {\it restriction of $\mathcal{F}$
to $\mathcal{C}/U$}.
\item For a sheaf $\mathcal{G}$ on $\mathcal{C}/U$
the sheaf $j_{U!}\mathcal{G}$ is called the
{\it extension of $\mathcal{G}$ by the empty set}.
\end{enumerate}
\end{definition}

\noindent
The restriction $j_U^{-1}\mathcal{F}$ is the sheaf
defined by the rule $j_U^{-1}\mathcal{F}(X/U) = \mathcal{F}(X)$ as expected.
The extension by the empty set also has a very easy description in
this case; here it is.

\begin{lemma}
\label{lemma-describe-j-shriek}
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
Let $\mathcal{G}$ be a presheaf on $\mathcal{C}/U$.
Then $j_{U!}(\mathcal{G}^\#)$ is the sheaf associated to the presheaf
$$
V
\longmapsto
\coprod\nolimits_{\varphi \in \Mor_\mathcal{C}(V, U)}
\mathcal{G}(V \xrightarrow{\varphi} U)
$$
with obvious restriction mappings.
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-when-shriek} we have
$j_{U!}(\mathcal{G}^\#) = ((j_U)_p\mathcal{G}^\#)^\#$.
By Lemma \ref{lemma-technical-up} this is equal to $((j_U)_p\mathcal{G})^\#$.
Hence it suffices to prove that $(j_U)_p$ is given by
the formula above for any presheaf $\mathcal{G}$ on $\mathcal{C}/U$.
OK, and by the definition in Section \ref{section-functoriality-PSh} we have
$$
(j_U)_p\mathcal{G}(V)
=
\colim_{(W/U, V \to W)} \mathcal{G}(W)
$$
Now it is clear that the category of pairs $(W/U, V \to W)$
has an object $O_\varphi = (\varphi : V \to U, \text{id} : V \to V)$ for every
$\varphi : V \to U$, and moreover for any object there is a unique
morphism from one of the $O_\varphi$ into it. The result follows.
\end{proof}

\begin{lemma}
\label{lemma-describe-j-shriek-representable}
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
Let $X/U$ be an object of $\mathcal{C}/U$.
Then we have $j_{U!}(h_{X/U}^\#) = h_X^\#$.
\end{lemma}

\begin{proof}
Denote $p : X \to U$ the structure morphism of $X$.
By Lemma \ref{lemma-describe-j-shriek} we see $j_{U!}(h_{X/U}^\#)$
is the sheaf associated to the presheaf
$$
V
\longmapsto
\coprod\nolimits_{\varphi \in \Mor_\mathcal{C}(V, U)}
\{\psi : V \to X \mid p \circ \psi = \varphi\}
$$
This is clearly the same thing as $\Mor_\mathcal{C}(V, X)$.
Hence the lemma follows.
\end{proof}

\noindent
We have $j_{U!}(*) = h_U^\#$ by either of the
two lemmas above. Hence for every sheaf
$\mathcal{G}$ over $\mathcal{C}/U$ there is a canonical map
of sheaves $j_{U!}\mathcal{G} \to h_U^\#$. This characterizes
sheaves in the essential image of $j_{U!}$.

\begin{lemma}
\label{lemma-essential-image-j-shriek}
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
The functor $j_{U!}$ gives an equivalence of categories
$$
\Sh(\mathcal{C}/U)
\longrightarrow
\Sh(\mathcal{C})/h_U^\#
$$
\end{lemma}

\begin{proof}
Let us denote objects of $\mathcal{C}/U$ as pairs $(X, a)$
where $X$ is an object of $\mathcal{C}$ and $a : X \to U$ is
a morphism of $\mathcal{C}$. Similarly, objects of
$\Sh(\mathcal{C})/h_U^\#$ are pairs $(\mathcal{F}, \varphi)$.
The functor $\Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})/h_U^\#$
sends $\mathcal{G}$ to the pair $(j_{U!}\mathcal{G}, \gamma)$
where $\gamma$ is the composition of
$j_{U!}\mathcal{G} \to j_{U!}*$ with the identification
$j_{U!}* = h_U^\#$.

\medskip\noindent
Let us construct a functor from
$\Sh(\mathcal{C})/h_U^\#$ to $\Sh(\mathcal{C}/U)$.
Suppose that $(\mathcal{F}, \varphi)$ is given.
For an object $(X, a)$ of $\mathcal{C}/U$
we consider the set $\mathcal{F}_\varphi(X, a)$
of elements $s \in \mathcal{F}(X)$ which under $\varphi$ map to the image
of $a \in \Mor_\mathcal{C}(X, U) = h_U(X)$ in
$h_U^\#(X)$. It is easy to see that
$(X, a) \mapsto \mathcal{F}_\varphi(X, a)$ is
a sheaf on $\mathcal{C}/U$. Clearly, the rule
$(\mathcal{F}, \varphi) \mapsto \mathcal{F}_\varphi$
defines a functor $\Sh(\mathcal{C})/h_U^\# \to \Sh(\mathcal{C}/U)$.

\medskip\noindent
Consider also the functor
$\textit{PSh}(\mathcal{C})/h_U \to \textit{PSh}(\mathcal{C}/U)$,
$(\mathcal{F}, \varphi) \mapsto \mathcal{F}_\varphi$
where $\mathcal{F}_\varphi(X, a)$ is defined as the set of elements
of $\mathcal{F}(X)$ mapping to $a \in h_U(X)$.
We claim that the diagram
$$
\xymatrix{
\textit{PSh}(\mathcal{C})/h_U \ar[r] \ar[d] &
\textit{PSh}(\mathcal{C}/U) \ar[d] \\
\Sh(\mathcal{C})/h_U^\# \ar[r] &
\Sh(\mathcal{C}/U)
}
$$
commutes, where the vertical arrows are given by sheafification.
To see this\footnote{An alternative is to describe
$\mathcal{F}_\varphi$ by the cartesian diagram
$$
\vcenter{
\xymatrix{
\mathcal{F}_\varphi \ar[r] \ar[d] & {*} \ar[d] \\
\mathcal{F}|_{\mathcal{C}/U} \ar[r] & h_U|_{\mathcal{C}/U}
}
}
\quad\text{for presheaves and}\quad
\vcenter{
\xymatrix{
\mathcal{F}_\varphi \ar[r] \ar[d] & {*} \ar[d] \\
\mathcal{F}|_{\mathcal{C}/U} \ar[r] & h_U^\#|_{\mathcal{C}/U}
}
}
$$
for sheaves and use that restriction to $\mathcal{C}/U$ commutes
with sheafification.}, it
suffices to prove that the construction commutes with
the functor $\mathcal{F} \mapsto \mathcal{F}^+$ of
Lemmas \ref{lemma-plus-presheaf} and \ref{lemma-plus-functorial}
and Theorem \ref{theorem-plus}.
Commutation with $\mathcal{F} \mapsto \mathcal{F}^+$ follows from the fact
that given $(X, a)$ the categories of coverings of $(X, a)$ in
$\mathcal{C}/U$ and coverings of $X$ in $\mathcal{C}$
are canonically identified.

\medskip\noindent
Next, let $\textit{PSh}(\mathcal{C}/U) \to \textit{PSh}(\mathcal{C})/h_U$
send $\mathcal{G}$ to the pair $(j_{U!}^{PSh}\mathcal{G}, \gamma)$
where $j_{U!}^{PSh}\mathcal{G}$ the presheaf defined by the formula
in Lemma \ref{lemma-describe-j-shriek} and $\gamma$ is the composition of
$j_{U!}^{PSh}\mathcal{G} \to j_{U!}*$ with the identification
$j_{U!}^{PSh}* = h_U$ (obvious from the formula).
Then it is immediately clear that the diagram
$$
\xymatrix{
\textit{PSh}(\mathcal{C}/U) \ar[r] \ar[d] &
\textit{PSh}(\mathcal{C})/h_U \ar[d] \\
\Sh(\mathcal{C}/U) \ar[r] &
\Sh(\mathcal{C})/h_U^\#
}
$$
commutes, where the vertical arrows are sheafification.
Putting everything together it suffices to show there are
functorial isomorphisms $(j_{U!}^{PSh}\mathcal{G})_\gamma = \mathcal{G}$
for $\mathcal{G}$ in $\textit{PSh}(\mathcal{C}/U)$
and $j_{U!}^{PSh}\mathcal{F}_\varphi = \mathcal{F}$
for $(\mathcal{F}, \varphi)$ in $\textit{PSh}(\mathcal{C})/h_U$.
The value of the presheaf $(j_{U!}^{PSh}\mathcal{G})_\gamma$
on $(X, a)$ is the fibre of the map
$$
\coprod\nolimits_{a' : X \to U} \mathcal{G}(X, a') \to \Mor_\mathcal{C}(X, U)
$$
over $a$ which is $\mathcal{G}(X, a)$. This proves the first equality.
The value of the presheaf $j_{U!}^{PSh}\mathcal{F}_\varphi$ is
on $X$ is
$$
\coprod\nolimits_{a : X \to U} \mathcal{F}_\varphi(X, a) =
\mathcal{F}(X)
$$
because given a set map $S \to S'$ the set $S$ is the disjoint
union of its fibres.
\end{proof}

\noindent
Lemma \ref{lemma-essential-image-j-shriek}
says the functor $j_{U!}$ is the composition
$$
\Sh(\mathcal{C}/U) \rightarrow
\Sh(\mathcal{C})/h_U^\# \rightarrow
\Sh(\mathcal{C})
$$
where the first arrow is an equivalence.

\begin{lemma}
\label{lemma-j-shriek-commutes-equalizers-fibre-products}
Let $\mathcal{C}$ be a site. Let $U \in \Ob(\mathcal{C})$.
The functor $j_{U!}$ commutes with fibre products and equalizers (and
more generally finite connected limits). In particular, if
$\mathcal{F} \subset \mathcal{F}'$ in $\Sh(\mathcal{C}/U)$, then
$j_{U!}\mathcal{F} \subset j_{U!}\mathcal{F}'$.
\end{lemma}

\begin{proof}
Via Lemma \ref{lemma-essential-image-j-shriek}
and the fact that an equivalence of categories commutes
with all limits, this reduces to the fact that the functor
$\Sh(\mathcal{C})/h_U^\# \rightarrow \Sh(\mathcal{C})$
commutes with fibre products and equalizers. Alternatively, one can
prove this directly using the description of $j_{U!}$ in
Lemma \ref{lemma-describe-j-shriek}
using that sheafification is exact. (Also, in case $\mathcal{C}$ has
fibre products and equalizers, the result follows from
Lemma \ref{lemma-preserve-equalizers}.)
\end{proof}

\begin{lemma}
\label{lemma-j-shriek-reflects-injections-surjections}
Let $\mathcal{C}$ be a site. Let $U \in \Ob(\mathcal{C})$.
The functor $j_{U!}$ reflects injections and surjections.
\end{lemma}

\begin{proof}
We have to show $j_{U!}$ reflects monomorphisms and epimorphisms, see
Lemma \ref{lemma-mono-epi-sheaves}.
Via Lemma \ref{lemma-essential-image-j-shriek}
this reduces to the fact that the functor
$\Sh(\mathcal{C})/h_U^\# \to \Sh(\mathcal{C})$
reflects monomorphisms and epimorphisms.
\end{proof}

\begin{lemma}
\label{lemma-compute-j-shriek-restrict}
Let $\mathcal{C}$ be a site. Let $U \in \Ob(\mathcal{C})$.
For any sheaf $\mathcal{F}$ on $\mathcal{C}$ we have
$j_{U!}j_U^{-1}\mathcal{F} = \mathcal{F} \times h_U^\#$.
\end{lemma}

\begin{proof}
This is clear from the description of $j_{U!}$ in
Lemma \ref{lemma-describe-j-shriek}.
\end{proof}

\begin{lemma}
\label{lemma-relocalize}
Let $\mathcal{C}$ be a site.
Let $f : V \to U$ be a morphism of $\mathcal{C}$.
Then there exists a commutative diagram
$$
\xymatrix{
\mathcal{C}/V \ar[rd]_{j_V} \ar[rr]_j & &
\mathcal{C}/U \ar[ld]^{j_U} \\
& \mathcal{C} &
}
$$
of continuous and cocontinuous functors.
The functor $j : \mathcal{C}/V \to \mathcal{C}/U$,
$(a : W \to V) \mapsto (f \circ a : W \to U)$
is identified with the functor
$j_{V/U} : (\mathcal{C}/U)/(V/U) \to \mathcal{C}/U$
via the identification $(\mathcal{C}/U)/(V/U) = \mathcal{C}/V$.
Moreover we have $j_{V!} = j_{U!} \circ j_!$,
$j_V^{-1} = j^{-1} \circ j_U^{-1}$, and
$j_{V*} = j_{U*} \circ j_*$.
\end{lemma}

\begin{proof}
The commutativity of the diagram is immediate.
The agreement of $j$ with $j_{V/U}$ follows from the definitions. By
Lemma \ref{lemma-composition-cocontinuous}
we see that the following diagram of morphisms of topoi
\begin{equation}
\label{equation-relocalize}
\vcenter{
\xymatrix{
\Sh(\mathcal{C}/V) \ar[rd]_{j_V} \ar[rr]_j & &
\Sh(\mathcal{C}/U) \ar[ld]^{j_U} \\
& \Sh(\mathcal{C}) &
}
}
\end{equation}
is commutative. This proves that
$j_V^{-1} = j^{-1} \circ j_U^{-1}$ and $j_{V*} = j_{U*} \circ j_*$.
The equality $j_{V!} = j_{U!} \circ j_!$
follows formally from adjointness properties.
\end{proof}

\begin{lemma}
\label{lemma-relocalize-explicit}
Notation $\mathcal{C}$, $f : V \to U$, $j_U$, $j_V$, and $j$ as in
Lemma \ref{lemma-relocalize}. Via the identifications
$\Sh(\mathcal{C}/V) = \Sh(\mathcal{C})/h_V^\#$
and
$\Sh(\mathcal{C}/U) = \Sh(\mathcal{C})/h_U^\#$
of
Lemma \ref{lemma-essential-image-j-shriek}
we have
\begin{enumerate}
\item the functor $j^{-1}$ has the following description
$$
j^{-1}(\mathcal{H} \xrightarrow{\varphi} h_U^\#)
=
(\mathcal{H} \times_{\varphi, h_U^\#, f} h_V^\# \to h_V^\#).
$$
\item the functor $j_!$ has the following description
$$
j_!(\mathcal{H} \xrightarrow{\varphi} h_V^\#) =
(\mathcal{H} \xrightarrow{h_f \circ \varphi} h_U^\#)
$$
\end{enumerate}
\end{lemma}

\begin{proof}
Proof of (2). Recall that the identification
$\Sh(\mathcal{C}/V) \to \Sh(\mathcal{C})/h_V^\#$
sends $\mathcal{G}$ to $j_{V!}\mathcal{G} \to j_{V!}(*) = h_V^\#$
and similarly for
$\Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})/h_U^\#$.
Thus $j_!\mathcal{G}$ is mapped to
$j_{U!}(j_!\mathcal{G}) \to j_{U!}(*) = h_U^\#$
and (2) follows because $j_{U!}j_! = j_{V!}$
by Lemma \ref{lemma-relocalize}.

\medskip\noindent
The reader can now prove (1) by using that $j^{-1}$ is the
right adjoint to $j_!$ and using that the rule in (1)
is the right adjoint to the rule in (2). Here is a direct proof.
Suppose that $\varphi : \mathcal{H} \to h_U^\#$ is an object of
$\Sh(\mathcal{C})/h_U^\#$. By the proof of
Lemma \ref{lemma-essential-image-j-shriek}
this corresponds to the sheaf
$\mathcal{H}_\varphi$ on $\mathcal{C}/U$ defined by the rule
$$
(a : W \to U)
\longmapsto
\{ s \in \mathcal{H}(W) \mid \varphi(s) = a\}
$$
on $\mathcal{C}/U$. The pullback $j^{-1}\mathcal{H}_\varphi$ to
$\mathcal{C}/V$ is given by the rule
$$
(a : W \to V)
\longmapsto
\{ s \in \mathcal{H}(W) \mid \varphi(s) = f \circ a\}
$$
by the description of $j^{-1} = j_{U/V}^{-1}$ as the restriction
of $\mathcal{H}_\varphi$ to $\mathcal{C}/V$.
On the other hand, applying the rule to the object
$$
\xymatrix{
\mathcal{H}' = \mathcal{H} \times_{\varphi, h_U^\#, f} h_V^\#
\ar[rr]^-{\varphi'} & & h_V^\#
}
$$
of $\Sh(\mathcal{C})/h_V^\#$
we get $\mathcal{H}'_{\varphi'}$
given by
\begin{align*}
(a : W \to V)
\longmapsto
&  \{ s' \in \mathcal{H}'(W) \mid \varphi'(s') = a\} \\
= &
\{ (s, a') \in \mathcal{H}(W) \times h_V^\#(W) \mid
a' = a \text{ and } \varphi(s) = f \circ a'\}
\end{align*}
which is exactly the same rule as the one describing
$j^{-1}\mathcal{H}_\varphi$ above.
\end{proof}

\begin{remark}
\label{remark-localize-presheaves}
Localization and presheaves. Let $\mathcal{C}$ be a category.
Let $U$ be an object of $\mathcal{C}$. Strictly speaking the functors
$j_U^{-1}$, $j_{U*}$ and $j_{U!}$ have not been defined for presheaves.
But of course, we can think of a presheaf as a sheaf for the
chaotic topology on $\mathcal{C}$ (see Example \ref{example-indiscrete}).
Hence we also obtain a functor
$$
j_U^{-1} :
\textit{PSh}(\mathcal{C})
\longrightarrow
\textit{PSh}(\mathcal{C}/U)
$$
and functors
$$
j_{U*}, j_{U!} :
\textit{PSh}(\mathcal{C}/U)
\longrightarrow
\textit{PSh}(\mathcal{C})
$$
which are right, left adjoint to $j_U^{-1}$. By
Lemma \ref{lemma-describe-j-shriek}
we see that $j_{U!}\mathcal{G}$ is the presheaf
$$
V \longmapsto
\coprod\nolimits_{\varphi \in \Mor_\mathcal{C}(V, U)}
\mathcal{G}(V \xrightarrow{\varphi} U)
$$
In addition the functor $j_{U!}$ commutes with fibre products and
equalizers.
\end{remark}

\begin{remark}
\label{remark-localization-cartesian-cocontinuous}
Let $\mathcal{C}$ be a site. Let $U \to V$ be a morphism of $\mathcal{C}$.
The cocontinuous functors $\mathcal{C}/U \to \mathcal{C}$ and
$j : \mathcal{C}/U \to \mathcal{C}/V$ (Lemma \ref{lemma-relocalize})
satisfy property $P$ of Remark \ref{remark-cartesian-cocontinuous}.
For example, if we have objects $(X/U)$, $(W/V)$, a morphism
$g : j(X/U) \to (W/V)$, and a covering $\{f_i  : (W_i/V) \to (W/V)\}$ then
$(X \times_W W_i/U)$ is an avatar of $(X/U) \times_{g, (W/V), f_i} (W_i/V)$
and the family $\{(X \times_W W_i/U) \to (X/U)\}$ is a covering
of $\mathcal{C}/U$.
\end{remark}






\section{Glueing sheaves}
\label{section-glueing-sheaves}

\noindent
This section is the analogue of
Sheaves, Section \ref{sheaves-section-glueing-sheaves}.

\begin{lemma}
\label{lemma-glue-maps}
\begin{slogan}
Maps of sheaves glue.
\end{slogan}
Let $\mathcal{C}$ be a site.
Let $\{U_i \to U\}$ be a covering of $\mathcal{C}$.
Let $\mathcal{F}$, $\mathcal{G}$ be sheaves on $\mathcal{C}$.
Given a collection
$$
\varphi_i :
\mathcal{F}|_{\mathcal{C}/U_i}
\longrightarrow
\mathcal{G}|_{\mathcal{C}/U_i}
$$
of maps of sheaves such that for all $i, j \in I$ the maps
$\varphi_i, \varphi_j$ restrict to the same map
$\varphi_{ij} : \mathcal{F}|_{\mathcal{C}/U_i \times_U U_j} \to
\mathcal{G}|_{\mathcal{C}/U_i \times_U U_j}$
then there exists a unique map of sheaves
$$
\varphi :
\mathcal{F}|_{\mathcal{C}/U}
\longrightarrow
\mathcal{G}|_{\mathcal{C}/U}
$$
whose restriction to each $\mathcal{C}/U_i$ agrees with $\varphi_i$.
\end{lemma}

\begin{proof}
The restrictions used in the lemma are those of
Lemma \ref{lemma-relocalize}.
Let $V/U$ be an object of $\mathcal{C}/U$.
Set $V_i = U_i \times_U V$ and denote $\mathcal{V} = \{V_i \to V\}$.
Observe that $(U_i \times_U U_j) \times_U V = V_i \times_V V_j$.
Then we have
$\mathcal{F}|_{\mathcal{C}/U_i}(V_i/U_i) = \mathcal{F}(V_i)$
and
$\mathcal{F}|_{\mathcal{C}/U_i \times_U U_j}(V_i \times_V V_j/U_i \times_U U_j)
= \mathcal{F}(V_i \times_V V_j)$
and similarly for $\mathcal{G}$.
Thus we can define $\varphi$ on sections over $V$ 
as the dotted arrows in the diagram
$$
\xymatrix{
\mathcal{F}(V) \ar@{=}[r] &
H^0(\mathcal{V}, \mathcal{F}) \ar@{..>}[d] \ar[r] &
\prod \mathcal{F}(V_i)
\ar[d]_{\prod \varphi_i}
\ar@<1ex>[r] \ar@<-1ex>[r] &
\prod \mathcal{F}(V_i \times_V V_j) \ar[d]_{\prod \varphi_{ij}} \\
\mathcal{G}(V) \ar@{=}[r] &
H^0(\mathcal{V}, \mathcal{G}) \ar[r] &
\prod \mathcal{G}(V_i)
\ar@<1ex>[r] \ar@<-1ex>[r] &
\prod \mathcal{G}(V_i \times_V V_j)
}
$$
The equality signs come from the sheaf condition; see
Section \ref{section-sheafification} for the notation
$H^0(\mathcal{V}, -)$.
We omit the verification that these maps are compatible
with the restriction maps.
\end{proof}

\noindent
The previous lemma implies that given two sheaves $\mathcal{F}$,
$\mathcal{G}$ on a site $\mathcal{C}$ the rule
$$
U \longmapsto
\Mor_{\Sh(\mathcal{C}/U)}(
\mathcal{F}|_{\mathcal{C}/U}, \mathcal{G}|_{\mathcal{C}/U})
$$
defines a sheaf $\SheafHom(\mathcal{F},\mathcal{G})$.
This is a kind of {\it internal hom sheaf}. It is
seldom used in the setting of sheaves of sets, and more usually
in the setting of sheaves of modules, see
Modules on Sites, Section \ref{sites-modules-section-internal-hom}.

\begin{lemma}
\label{lemma-internal-hom-sheaf}
\begin{slogan}
The category of sheaves on a site is cartesian closed
\end{slogan}
Let $\mathcal{C}$ be a site. Let $\mathcal{F}$, $\mathcal{G}$ and
$\mathcal{H}$ be sheaves on $\mathcal{C}$. There is a canonical bijection
$$
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}\times\mathcal{G},\mathcal{H}) =
\Mor_{\Sh(\mathcal{C})}(\mathcal{F},\SheafHom(\mathcal{G},\mathcal{H}))
$$
which is functorial in all three entries.
\end{lemma}

\begin{proof}
The lemma says that the functors $-\times\mathcal{G}$ and
$\SheafHom(\mathcal{G},-)$ are adjoint to each other. 
To show this, we use the notion of unit and counit, see
Categories, Section \ref{categories-section-adjoint}.
The unit
$$
\eta_\mathcal{F} :
\mathcal{F}
\longrightarrow
\SheafHom(\mathcal{G},\mathcal{F}\times\mathcal{G})
$$
sends $s \in \mathcal{F}(U)$ to the map
$\mathcal{G}|_{\mathcal{C}/U} \to
\mathcal{F}|_{\mathcal{C}/U}\times\mathcal{G}|_{\mathcal{C}/U}$
which over $V/U$ is given by
$$
\mathcal{G}(V) \longrightarrow \mathcal{F}(V)\times \mathcal{G}(V), \quad
t \longmapsto (s|_{V},t).
$$
The counit
$$
\epsilon_{\mathcal{H}} :
\SheafHom(\mathcal{G}, \mathcal{H}) \times \mathcal{G}
\longrightarrow
\mathcal{H}
$$
is the evaluation map. It is given by the rule
$$
\Mor_{\Sh(\mathcal{C}/U)}(
\mathcal{G}|_{\mathcal{C}/U}, \mathcal{H}|_{\mathcal{C}/U})
\times \mathcal{G}(U)
\longrightarrow
\mathcal{H}(U),\quad
(\varphi, s) \longmapsto \varphi(s).
$$
Then for each $\varphi : \mathcal{F} \times \mathcal{G} \to \mathcal{H}$,
the corresponding morphism
$\mathcal{F} \to \SheafHom(\mathcal{G},\mathcal{H})$
is given by mapping each section $s \in \mathcal{F}(U)$
to the morphism of sheaves on $\mathcal{C}/U$ which on
sections over $V/U$ is given by
$$
\mathcal{G}(V) \longrightarrow \mathcal{H}(V),\quad
t \longmapsto \varphi(s|_V, t).
$$
Conversely, for each
$\psi : \mathcal{F} \to \SheafHom(\mathcal{G}, \mathcal{H})$,
the corresponding morphism
$\mathcal{F} \times \mathcal{G} \to \mathcal{H}$ is given by
$$
\mathcal{F}(U) \times \mathcal{G}(U) \longrightarrow \mathcal{H}(U),\quad
(s, t) \longmapsto \psi(s)(t)
$$
on sections over an object $U$. We omit the details of the proof showing
that these constructions are mutually inverse.
\end{proof}

\begin{lemma}
\label{lemma-hom-sheaf-hU}
Let $\mathcal{C}$ be a site and $U \in \Ob(\mathcal{C})$.
Then $\SheafHom(h_U^\#, \mathcal{F}) = j_*(\mathcal{F}|_{\mathcal{C}/U})$
for $\mathcal{F}$ in $\Sh(\mathcal{C})$.
\end{lemma}

\begin{proof}
This can be shown by directly constructing an isomorphism
of sheaves. Instead we argue as follows.
Let $\mathcal{G}$ be a sheaf on $\mathcal{C}$.
Then
\begin{align*}
\Mor(\mathcal{G}, j_*(\mathcal{F}|_{\mathcal{C}/U}))
& =
\Mor(\mathcal{G}|_{\mathcal{C}/U}, \mathcal{F}|_{\mathcal{C}/U}) \\
& =
\Mor(j_!(\mathcal{G}|_{\mathcal{C}/U}), \mathcal{F}) \\
& =
\Mor(\mathcal{G} \times h_U^\#, \mathcal{F}) \\
& =
\Mor(\mathcal{G}, \SheafHom(h_U^\#, \mathcal{F}))
\end{align*}
and we conclude by the Yoneda lemma. Here we used
Lemmas \ref{lemma-internal-hom-sheaf} and
\ref{lemma-compute-j-shriek-restrict}.
\end{proof}

\noindent
Let $\mathcal{C}$ be a site.
Let $\{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
For each $i \in I$ let $\mathcal{F}_i$ be a sheaf of sets on
$\mathcal{C}/U_i$.
For each pair $i, j \in I$, let
$$
\varphi_{ij} :
\mathcal{F}_i|_{\mathcal{C}/U_i \times_U U_j}
\longrightarrow
\mathcal{F}_j|_{\mathcal{C}/U_i \times_U U_j}
$$
be an isomorphism of sheaves of sets. Assume in addition
that for every triple of indices $i, j, k \in I$ the
following diagram is commutative
$$
\xymatrix{
\mathcal{F}_i|_{\mathcal{C}/U_i \times_U U_j \times_U U_k}
\ar[rr]_{\varphi_{ik}}
\ar[rd]_{\varphi_{ij}} & &
\mathcal{F}_k|_{\mathcal{C}/U_i \times_U U_j \times_U U_k} \\
&
\mathcal{F}_j|_{\mathcal{C}/U_i \times_U U_j \times_U U_k}
\ar[ru]_{\varphi_{jk}}
}
$$
We will call such a collection of data
$(\mathcal{F}_i, \varphi_{ij})$
a {\it glueing data for sheaves of sets with respect to
the covering $\{U_i \to U\}_{i \in I}$}.

\begin{lemma}
\label{lemma-glue-sheaves}
Let $\mathcal{C}$ be a site.
Let $\{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
Given any glueing data $(\mathcal{F}_i, \varphi_{ij})$
for sheaves of sets with respect to the covering $\{U_i \to U\}_{i \in I}$
there exists a sheaf of sets $\mathcal{F}$ on $\mathcal{C}/U$
together with isomorphisms
$$
\varphi_i : \mathcal{F}|_{\mathcal{C}/U_i} \to \mathcal{F}_i
$$
such that the diagrams
$$
\xymatrix{
\mathcal{F}|_{\mathcal{C}/U_i \times_U U_j}
\ar[d]_{\text{id}} \ar[r]_{\varphi_i} &
\mathcal{F}_i|_{\mathcal{C}/U_i \times_U U_j} \ar[d]^{\varphi_{ij}} \\
\mathcal{F}|_{\mathcal{C}/U_i \times_U U_j} \ar[r]^{\varphi_j} &
\mathcal{F}_j|_{\mathcal{C}/U_i \times_U U_j}
}
$$
are commutative.
\end{lemma}

\begin{proof}
Let us describe how to construct the sheaf $\mathcal{F}$ on
$\mathcal{C}/U$. Let $a : V \to U$ be an object of $\mathcal{C}/U$.
Then
$$
\mathcal{F}(V/U) = \{
(s_i)_{i \in I} \in \prod_{i \in I} \mathcal{F}_i(U_i \times_U V/U_i)
\mid
\varphi_{ij}(s_i|_{U_i \times_U U_j \times_U V})
=
s_j|_{U_i \times_U U_j \times_U V}
\}
$$
We omit the construction of the restriction mappings.
We omit the verification that this is a sheaf.
We omit the construction of the isomorphisms $\varphi_i$,
and we omit proving the commutativity of the diagrams
of the lemma.
\end{proof}

\noindent
Let $\mathcal{C}$ be a site.
Let $\{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
Let $\mathcal{F}$ be a sheaf on $\mathcal{C}/U$.
Associated to $\mathcal{F}$ we have its
{\it canonical glueing data} given by the restrictions
$\mathcal{F}|_{\mathcal{C}/U_i}$ and the canonical isomorphisms
$$
\left(\mathcal{F}|_{\mathcal{C}/U_i}\right)|_{\mathcal{C}/U_i \times_U U_j}
=
\left(\mathcal{F}|_{\mathcal{C}/U_j}\right)|_{\mathcal{C}/U_i \times_U U_j}
$$
coming from the fact that the composition of the functors
$\mathcal{C}/U_i \times_U U_j \to \mathcal{C}/U_i \to \mathcal{C}/U$
and
$\mathcal{C}/U_i \times_U U_j \to \mathcal{C}/U_j \to \mathcal{C}/U$
are equal.

\begin{lemma}
\label{lemma-mapping-property-glue}
Let $\mathcal{C}$ be a site.
Let $\{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
The category $\Sh(\mathcal{C}/U)$ is equivalent
to the category of glueing data via the functor that associates
to $\mathcal{F}$ on $\mathcal{C}/U$ the canonical glueing data.
\end{lemma}

\begin{proof}
In
Lemma \ref{lemma-glue-maps}
we saw that the functor is fully faithful, and in
Lemma \ref{lemma-glue-sheaves}
we proved that it is essentially surjective (by explicitly constructing
a quasi-inverse functor).
\end{proof}




\section{More localization}
\label{section-more-localize}

\noindent
In this section we prove a few lemmas on localization where we
impose some additional hypotheses on the site on or the object
we are localizing at.

\begin{lemma}
\label{lemma-describe-j-shriek-good-site}
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
If the topology on $\mathcal{C}$ is subcanonical, see
Definition \ref{definition-weaker-than-canonical},
and if $\mathcal{G}$ is a sheaf on $\mathcal{C}/U$, then
$$
j_{U!}(\mathcal{G})(V)
=
\coprod\nolimits_{\varphi \in \Mor_\mathcal{C}(V, U)}
\mathcal{G}(V \xrightarrow{\varphi} U),
$$
in other words sheafification is not necessary in
Lemma \ref{lemma-describe-j-shriek}.
\end{lemma}

\begin{proof}
Let $\mathcal{V} = \{V_i \to V\}_{i \in I}$ be a covering of $V$
in the site $\mathcal{C}$.
We are going to check the sheaf condition for the presheaf $\mathcal{H}$
of Lemma \ref{lemma-describe-j-shriek} directly.
Let $(s_i, \varphi_i)_{i \in I} \in \prod_i \mathcal{H}(V_i)$,
This means $\varphi_i : V_i \to U$ is a morphism in $\mathcal{C}$, and
$s_i \in \mathcal{G}(V_i \xrightarrow{\varphi_i} U)$.
The restriction of the pair $(s_i, \varphi_i)$ to
$V_i \times_V V_j$ is the pair
$(s_i|_{V_i \times_V V_j/U}, \text{pr}_1 \circ \varphi_i)$, and
likewise the restriction of the pair $(s_j, \varphi_j)$ to
$V_i \times_V V_j$ is the pair
$(s_j|_{V_i \times_V V_j/U}, \text{pr}_2 \circ \varphi_j)$.
Hence, if the family $(s_i, \varphi_i)$ lies in
$\check{H}^0(\mathcal{V}, \mathcal{H})$, then we see that
$\text{pr}_1 \circ \varphi_i = \text{pr}_2 \circ \varphi_j$.
The condition that the topology on $\mathcal{C}$ is weaker than the canonical
topology then implies that there exists a unique morphism
$\varphi : V \to U$ such that $\varphi_i$ is the composition
of $V_i \to V$ with $\varphi$. At this point the sheaf condition for
$\mathcal{G}$ guarantees that the sections $s_i$ glue to a unique
section $s \in \mathcal{G}(V \xrightarrow{\varphi} U)$.
Hence $(s, \varphi) \in \mathcal{H}(V)$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-localize-given-products}
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
Assume $\mathcal{C}$ has products of pairs of objects.
Then
\begin{enumerate}
\item the functor $j_U$ has a continuous right adjoint,
namely the functor $v(X) = X \times U / U$,
\item the functor $v$ defines a morphism of sites
$\mathcal{C}/U \to \mathcal{C}$ whose associated morphism of topoi equals
$j_U : \Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})$, and
\item we have $j_{U*}\mathcal{F}(X) = \mathcal{F}(X \times U/U)$.
\end{enumerate}
\end{lemma}

\begin{proof}
The functor $v$ being right adjoint to $j_U$ means that given $Y/U$ and $X$
we have
$$
\Mor_\mathcal{C}(Y, X)
=
\Mor_{\mathcal{C}/U}(Y/U, X \times U/U)
$$
which is clear. To check that $v$ is continuous let $\{X_i \to X\}$ be
a covering of $\mathcal{C}$. By the third axiom of a site
(Definition \ref{definition-site})
we see that
$$
\{X_i \times_X (X \times U) \to X \times_X (X \times U)\}
=
\{X_i \times U \to X \times U\}
$$
is a covering of $\mathcal{C}$ also. Hence $v$ is continuous. The other
statements of the lemma follow from Lemmas \ref{lemma-have-functor-other-way}
and \ref{lemma-have-functor-other-way-morphism}.
\end{proof}

\begin{lemma}
\label{lemma-relocalize-given-fibre-products}
Let $\mathcal{C}$ be a site. Let $U \to V$ be a morphism of $\mathcal{C}$.
Assume $\mathcal{C}$ has fibre products. Let $j$ be as in
Lemma \ref{lemma-relocalize}. Then
\begin{enumerate}
\item the functor $j : \mathcal{C}/U \to \mathcal{C}/V$
has a continuous right adjoint, namely the functor
$v : (X/V) \mapsto (X \times_V U/U)$,
\item the functor $v$ defines a morphism of sites
$\mathcal{C}/U \to \mathcal{C}/V$ whose associated morphism of topoi equals
$j$, and
\item we have $j_*\mathcal{F}(X/V) = \mathcal{F}(X \times_V U/U)$.
\end{enumerate}
\end{lemma}

\begin{proof}
Follows from Lemma \ref{lemma-localize-given-products} since $j$ may be viewed
as a localization functor by Lemma \ref{lemma-relocalize}.
\end{proof}

\noindent
A fundamental property of an open immersion is
that the restriction of the pushforward and the restriction
of the extension by the empty set produces back the original sheaf.
This is not always true for the functors associated to $j_U$
above. It is true when $U$ is a ``subobject of the final object''.

\begin{lemma}
\label{lemma-restrict-back}
Let $\mathcal{C}$ be a site.
Let $U \in \Ob(\mathcal{C})$.
Assume that every $X$ in $\mathcal{C}$ has at most
one morphism to $U$. Let $\mathcal{F}$ be a sheaf on $\mathcal{C}/U$.
The canonical maps $\mathcal{F} \to j_U^{-1}j_{U!}\mathcal{F}$
and $j_U^{-1}j_{U*}\mathcal{F} \to \mathcal{F}$ are
isomorphisms.
\end{lemma}

\begin{proof}
This is a special case of Lemma \ref{lemma-back-and-forth}
because the assumption on $U$ is equivalent to the fully faithfulness
of the localization functor $\mathcal{C}/U \to \mathcal{C}$.
\end{proof}

\begin{lemma}
\label{lemma-localize-cartesian-square}
Let $\mathcal{C}$ be a site. Let
$$
\xymatrix{
U' \ar[d] \ar[r] & U \ar[d] \\
V' \ar[r] & V
}
$$
be a commutative diagram of $\mathcal{C}$. The
morphisms of Lemma \ref{lemma-relocalize}
produce commutative diagrams
$$
\vcenter{
\xymatrix{
\mathcal{C}/U' \ar[d]_{j_{U'/V'}} \ar[r]_{j_{U'/U}} &
\mathcal{C}/U \ar[d]^{j_{U/V}} \\
\mathcal{C}/V' \ar[r]^{j_{V'/V}} & \mathcal{C}/V
}
}
\quad\text{and}\quad
\vcenter{
\xymatrix{
\Sh(\mathcal{C}/U') \ar[d]_{j_{U'/V'}} \ar[r]_{j_{U'/U}} &
\Sh(\mathcal{C}/U) \ar[d]^{j_{U/V}} \\
\Sh(\mathcal{C}/V') \ar[r]^{j_{V'/V}} &
\Sh(\mathcal{C}/V)
}
}
$$
of continuous and cocontinuous functors and of topoi.
Moreover, if the initial diagram of $\mathcal{C}$ is cartesian,
then we have
$j_{V'/V}^{-1} \circ j_{U/V, *} = j_{U'/V', *} \circ j_{U'/U}^{-1}$.
\end{lemma}

\begin{proof}
The commutativity of the left square in the first statement of the lemma
is immediate from the definitions. It implies the commutativity
of the diagram of topoi by Lemma \ref{lemma-composition-cocontinuous}.
Assume the diagram is cartesian.
By the uniqueness of adjoint functors, to show
$j_{V'/V}^{-1} \circ j_{U/V, *} = j_{U'/V', *} \circ j_{U'/U}^{-1}$
is equivalent to showing
$j_{U/V}^{-1} \circ j_{V'/V!} = j_{U'/U!} \circ j_{U'/V'}^{-1}$.
Via the identifications of Lemma \ref{lemma-essential-image-j-shriek}
we may think of our diagram of topoi as
$$
\xymatrix{
\Sh(\mathcal{C})/h_{U'}^\# \ar[d] \ar[r] &
\Sh(\mathcal{C})/h_U^\# \ar[d] \\
\Sh(\mathcal{C})/h_{V'}^\# \ar[r] &
\Sh(\mathcal{C})/h_V^\#
}
$$
and we know how to interpret the functors $j^{-1}$ and $j_!$
by Lemma \ref{lemma-relocalize-explicit}. Thus we have to show
given $\mathcal{F} \to h_{V'}^\#$ that
$$
\mathcal{F} \times_{h_{V'}^\#} h_{U'}^\# =
\mathcal{F} \times_{h_V^\#} h_U^\#
$$
as sheaves with map to $h_U^\#$.
This is true because $h_{U'} = h_{V'} \times_{h_V} h_U$
and hence also
$$
h_{U'}^\# = h_{V'}^\# \times_{h_V^\#} h_U^\#
$$
as sheafification is exact.
\end{proof}











\section{Localization and morphisms}
\label{section-localize-morphisms}

\noindent
The following lemma is important in order to understand relation
between localization and morphisms of sites and topoi.

\begin{lemma}
\label{lemma-localize-morphism}
Let $f : \mathcal{C} \to \mathcal{D}$ be a morphism of sites
corresponding to the continuous functor $u : \mathcal{D} \to \mathcal{C}$.
Let $V \in \Ob(\mathcal{D})$ and set $U = u(V)$.
Then the functor $u' : \mathcal{D}/V \to \mathcal{C}/U$,
$V'/V \mapsto u(V')/U$ determines a morphism of sites
$f' : \mathcal{C}/U \to \mathcal{D}/V$.
The morphism $f'$ fits into a commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{C}/U) \ar[r]_{j_U} \ar[d]_{f'} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D}/V) \ar[r]^{j_V} &
\Sh(\mathcal{D}).
}
$$
Using the identifications
$\Sh(\mathcal{C}/U) = \Sh(\mathcal{C})/h_U^\#$ and
$\Sh(\mathcal{D}/V) = \Sh(\mathcal{D})/h_V^\#$ of
Lemma \ref{lemma-essential-image-j-shriek}
the functor $(f')^{-1}$ is described by the rule
$$
(f')^{-1}(\mathcal{H} \xrightarrow{\varphi} h_V^\#)
=
(f^{-1}\mathcal{H} \xrightarrow{f^{-1}\varphi} h_U^\#).
$$
Finally, we have $f'_*j_U^{-1} = j_V^{-1}f_*$.
\end{lemma}

\begin{proof}
It is clear that $u'$ is continuous, and hence we get functors
$f'_* = (u')^s = (u')^p$ (see
Sections \ref{section-functoriality-PSh}
and \ref{section-continuous-functors})
and an adjoint $(f')^{-1} = (u')_s = ((u')_p\ )^\#$. The assertion
$f'_*j_U^{-1} = j_V^{-1}f_*$ follows as
$$
(j_V^{-1}f_*\mathcal{F})(V'/V)
= f_*\mathcal{F}(V') = \mathcal{F}(u(V'))
= (j_U^{-1}\mathcal{F})(u(V')/U)
= (f'_*j_U^{-1}\mathcal{F})(V'/V)
$$
which holds even for presheaves. What isn't clear a priori is
that $(f')^{-1}$ is exact, that the diagram commutes, and that
the description of $(f')^{-1}$ holds.

\medskip\noindent
Let $\mathcal{H}$ be a sheaf on $\mathcal{D}/V$.
Let us compute $j_{U!}(f')^{-1}\mathcal{H}$. We have
\begin{eqnarray*}
j_{U!}(f')^{-1}\mathcal{H}
& =
((j_U)_p(u'_p\mathcal{H})^\#)^\# \\
& =
((j_U)_pu'_p\mathcal{H})^\# \\
& =
(u_p(j_V)_p\mathcal{H})^\# \\
& =
f^{-1}j_{V!}\mathcal{H}
\end{eqnarray*}
The first equality by unwinding the definitions.
The second equality by Lemma \ref{lemma-technical-up}.
The third equality because $u \circ j_V = j_U \circ u'$.
The fourth equality by Lemma \ref{lemma-technical-up} again.
All of the equalities above are isomorphisms of functors, and
hence we may interpret this as saying that the following
diagram of categories and functors is commutative
$$
\xymatrix{
\Sh(\mathcal{C}/U) \ar[r]_{j_{U!}} &
\Sh(\mathcal{C})/h_U^\# \ar[r] &
\Sh(\mathcal{C}) \\
\Sh(\mathcal{D}/V) \ar[r]^{j_{V!}} \ar[u]^{(f')^{-1}} &
\Sh(\mathcal{D})/h_V^\# \ar[r] \ar[u]^{f^{-1}} &
\Sh(\mathcal{D}) \ar[u]^{f^{-1}}
}
$$
The middle arrow makes sense as $f^{-1}h_V^\# = (h_{u(V)})^\# = h_U^\#$, see
Lemma \ref{lemma-pullback-representable-sheaf}.
In particular this proves the description of $(f')^{-1}$ given
in the statement of the lemma.
Since by
Lemma \ref{lemma-essential-image-j-shriek}
the left horizontal arrows are equivalences
and since $f^{-1}$ is exact by assumption we conclude that
$(f')^{-1} = u'_s$ is exact. Namely, because it is a left adjoint
it is already right exact
(Categories, Lemma \ref{categories-lemma-adjoint-exact}).
Hence we only need to show that
it transforms a final object into a final object and commutes
with fibre products
(Categories, Lemma \ref{categories-lemma-characterize-left-exact}).
Both are clear for the induced functor
$f^{-1} : \Sh(\mathcal{D})/h_V^\# \to \Sh(\mathcal{C})/h_U^\#$.
This proves that $f'$ is a morphism of sites.

\medskip\noindent
We still have to verify that $(f')^{-1}j_V^{-1} = j_U^{-1}f^{-1}$.
To see this use the formula above and the description
in Lemma \ref{lemma-compute-j-shriek-restrict}. Namely,
combined these give, for any sheaf $\mathcal{G}$ on $\mathcal{D}$, that
$$
j_{U!}(f')^{-1}j_V^{-1}\mathcal{G}
=
f^{-1}j_{V!}j_V^{-1}\mathcal{G}
=
f^{-1}(\mathcal{G} \times h_V^\#)
=
f^{-1}\mathcal{G} \times h_U^\#
=
j_{U!}j_U^{-1}f^{-1}\mathcal{G}.
$$
Since the functor $j_{U!}$ induces an equivalence
$\Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})/h_U^\#$
we conclude.
\end{proof}

\noindent
The following lemma is a special case of the more general
Lemma \ref{lemma-localize-morphism}
above.

\begin{lemma}
\label{lemma-localize-morphism-strong}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{D} \to \mathcal{C}$ be a functor.
Let $V \in \Ob(\mathcal{D})$. Set $U = u(V)$.
Assume that
\begin{enumerate}
\item $\mathcal{C}$ and $\mathcal{D}$ have
all finite limits,
\item $u$ is continuous, and
\item $u$ commutes with finite limits.
\end{enumerate}
There exists a commutative diagram of morphisms of sites
$$
\xymatrix{
\mathcal{C}/U \ar[r]_{j_U} \ar[d]_{f'} & \mathcal{C} \ar[d]^f \\
\mathcal{D}/V \ar[r]^{j_V} & \mathcal{D}
}
$$
where the right vertical arrow corresponds to $u$,
the left vertical arrow corresponds to the
functor $u' : \mathcal{D}/V \to \mathcal{C}/U$, $V'/V \mapsto u(V')/u(V)$
and the horizontal arrows correspond to the functors
$\mathcal{C} \to \mathcal{C}/U$, $X \mapsto X \times U$
and $\mathcal{D} \to \mathcal{D}/V$, $Y \mapsto Y \times V$
as in Lemma \ref{lemma-localize-given-products}.
Moreover, the associated diagram of morphisms of topoi is
equal to the diagram of
Lemma \ref{lemma-localize-morphism}.
In particular we have $f'_*j_U^{-1} = j_V^{-1}f_*$.
\end{lemma}

\begin{proof}
Note that $u$ satisfies the assumptions of
Proposition \ref{proposition-get-morphism} and hence induces
a morphism of sites $f : \mathcal{C} \to \mathcal{D}$ by that proposition.
It is clear that $u$ induces a functor $u'$ as indicated.
It is clear that this functor also satisfies the assumptions of
Proposition \ref{proposition-get-morphism}.
Hence we get a morphism of sites $f' : \mathcal{C}/U \to \mathcal{D}/V$.
The diagram commutes by our definition of composition of morphisms of
sites (see Definition \ref{definition-composition-morphisms-sites})
and because
$$
u(Y \times V) = u(Y) \times u(V) = u(Y) \times U
$$
which shows that the diagram of categories and functors opposite to
the diagram of the lemma commutes.
\end{proof}

\noindent
At this point we can localize a site, we know how to relocalize,
and we can localize a morphism of sites at an object of the site downstairs.
If we combine these then we get the following kind of diagram.

\begin{lemma}
\label{lemma-relocalize-morphism}
Let $f : \mathcal{C} \to \mathcal{D}$ be a morphism of sites
corresponding to the continuous functor $u : \mathcal{D} \to \mathcal{C}$.
Let $V \in \Ob(\mathcal{D})$, $U \in \Ob(\mathcal{C})$
and $c : U \to u(V)$ a morphism of $\mathcal{C}$.
There exists a commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{C}/U) \ar[r]_{j_U} \ar[d]_{f_c} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D}/V) \ar[r]^{j_V} &
\Sh(\mathcal{D}).
}
$$
We have $f_c = f' \circ j_{U/u(V)}$ where
$f' : \Sh(\mathcal{C}/u(V)) \to \Sh(\mathcal{D}/V)$
is as in
Lemma \ref{lemma-localize-morphism}
and
$j_{U/u(V)} : \Sh(\mathcal{C}/U) \to \Sh(\mathcal{C}/u(V))$
is as in
Lemma \ref{lemma-relocalize}.
Using the identifications
$\Sh(\mathcal{C}/U) = \Sh(\mathcal{C})/h_U^\#$ and
$\Sh(\mathcal{D}/V) = \Sh(\mathcal{D})/h_V^\#$ of
Lemma \ref{lemma-essential-image-j-shriek}
the functor $(f_c)^{-1}$ is described by the rule
$$
(f_c)^{-1}(\mathcal{H} \xrightarrow{\varphi} h_V^\#)
=
(f^{-1}\mathcal{H} \times_{f^{-1}\varphi, h_{u(V)}^\#, c} h_U^\#
\rightarrow h_U^\#).
$$
Finally, given any morphisms $b : V' \to V$, $a : U' \to U$ and
$c' : U' \to u(V')$ such that
$$
\xymatrix{
U' \ar[r]_-{c'} \ar[d]_a & u(V') \ar[d]^{u(b)} \\
U \ar[r]^-c & u(V)
}
$$
commutes, then the diagram
$$
\xymatrix{
\Sh(\mathcal{C}/U') \ar[r]_{j_{U'/U}} \ar[d]_{f_{c'}} &
\Sh(\mathcal{C}/U) \ar[d]^{f_c} \\
\Sh(\mathcal{D}/V') \ar[r]^{j_{V'/V}} &
\Sh(\mathcal{D}/V).
}
$$
commutes.
\end{lemma}

\begin{proof}
This lemma proves itself, and is more a collection of things we know
at this stage of the development of theory. For example the commutativity
of the first square follows from the commutativity of
Diagram (\ref{equation-relocalize})
and the commutativity of the diagram in
Lemma \ref{lemma-localize-morphism}.
The description of $f_c^{-1}$ follows on combining
Lemma \ref{lemma-relocalize-explicit}
with
Lemma \ref{lemma-localize-morphism}.
The commutativity of the last square then follows from the
equality
$$
f^{-1}\mathcal{H} \times_{h_{u(V)}^\#, c} h_U^\# \times_{h_U^\#} h_{U'}^\#
=
f^{-1}(\mathcal{H} \times_{h_V^\#} h_{V'}^\#)
\times_{h_{u(V'), c'}^\#} h_{U'}^\#
$$
which is formal using that $f^{-1}h_V^\# = h_{u(V)}^\#$ and
$f^{-1}h_{V'}^\# = h_{u(V')}^\#$, see
Lemma \ref{lemma-pullback-representable-sheaf}.
\end{proof}

\noindent
In the following lemma we find another kind of functoriality of
localization, in case the morphism of topoi comes from a
cocontinuous functor. This is a kind of diagram which is different
from the diagram in
Lemma \ref{lemma-localize-morphism},
and in particular, in general the equality $f'_*j_U^{-1} = j_V^{-1}f_*$ seen in
Lemma \ref{lemma-localize-morphism}
does not hold in the situation of the following lemma.

\begin{lemma}
\label{lemma-localize-cocontinuous}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a cocontinuous functor.
Let $U$ be an object of $\mathcal{C}$, and set $V = u(U)$.
We have a commutative diagram
$$
\xymatrix{
\mathcal{C}/U \ar[r]_{j_U} \ar[d]_{u'} & \mathcal{C} \ar[d]^u \\
\mathcal{D}/V \ar[r]^-{j_V} & \mathcal{D}
}
$$
where the left vertical arrow is
$u' : \mathcal{C}/U \to \mathcal{D}/V$, $U'/U \mapsto V'/V$.
Then $u'$ is cocontinuous also and we get a commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{C}/U) \ar[r]_{j_U} \ar[d]_{f'} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D}/V) \ar[r]^-{j_V} &
\Sh(\mathcal{D})
}
$$
where $f$ (resp.\ $f'$) corresponds to $u$ (resp.\ $u'$).
\end{lemma}

\begin{proof}
The commutativity of the first diagram is clear.
It implies the commutativity of the second diagram provided we
show that $u'$ is cocontinuous.

\medskip\noindent
Let $U'/U$ be an object of $\mathcal{C}/U$.
Let $\{V_j/V \to u(U')/V\}_{j \in J}$ be a covering of $u(U')/V$
in $\mathcal{D}/V$. Since $u$ is cocontinuous there exists a
covering $\{U_i' \to U'\}_{i \in I}$ such that the family
$\{u(U_i') \to u(U')\}$ refines the covering
$\{V_j \to u(U')\}$ in $\mathcal{D}$. In other words, there exists
a map of index sets $\alpha : I \to J$ and morphisms
$\phi_i : u(U_i') \to V_{\alpha(i)}$ over $U'$.
Think of $U_i'$ as an object over
$U$ via the composition $U'_i \to U' \to U$. Then
$\{U'_i/U \to U'/U\}$ is a covering of $\mathcal{C}/U$ such that
$\{u(U_i')/V \to u(U')/V\}$ refines $\{V_j/V \to u(U')/V\}$
(use the same $\alpha$ and the same maps $\phi_i$). Hence
$u' : \mathcal{C}/U \to \mathcal{D}/V$ is cocontinuous.
\end{proof}

\begin{lemma}
\label{lemma-localize-cocontinuous-downstairs}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a cocontinuous functor.
Let $V$ be an object of $\mathcal{D}$. Let
${}^u_V\mathcal{I}$ be the category introduced in
Section \ref{section-more-functoriality-PSh}.
We have a commutative diagram
$$
\vcenter{
\xymatrix{
\,_V^u\mathcal{I} \ar[r]_j \ar[d]_{u'} &
\mathcal{C} \ar[d]^u \\
\mathcal{D}/V \ar[r]^-{j_V} &
\mathcal{D}
}
}
\quad\text{where}\quad
\begin{matrix}
j : (U, \psi) \mapsto U \\
u' : (U, \psi) \mapsto (\psi : u(U) \to V)
\end{matrix}
$$
Declare a family of morphisms $\{(U_i, \psi_i) \to (U, \psi)\}$
of ${}^u_V\mathcal{I}$ to be a covering if and only if
$\{U_i \to U\}$ is a covering in $\mathcal{C}$.
Then
\begin{enumerate}
\item ${}^u_V\mathcal{I}$ is a site,
\item $j$ is continuous and cocontinuous,
\item $u'$ is cocontinuous,
\item we get a commutative diagram of topoi
$$
\xymatrix{
\Sh({}^u_V\mathcal{I}) \ar[r]_j \ar[d]_{f'} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D}/V) \ar[r]^-{j_V} &
\Sh(\mathcal{D})
}
$$
where $f$ (resp.\ $f'$) corresponds to $u$ (resp.\ $u'$), and
\item we have $f'_*j^{-1} = j_V^{-1}f_*$.
\end{enumerate}
\end{lemma}

\begin{proof}
Parts (1), (2), (3), and (4) are straightforward consequences of the
definitions and the fact that the functor $j$ commutes with fibre products.
We omit the details. To see (5) recall that $f_*$ is given by
${}_su = {}_pu$. Hence the value of $j_V^{-1}f_*\mathcal{F}$ on
$V'/V$ is the value of ${}_pu\mathcal{F}$ on $V'$ which is the
limit of the values of $\mathcal{F}$ on the category
${}^u_{V'}\mathcal{I}$. Clearly, there is an equivalence
of categories
$$
{}^u_{V'}\mathcal{I} \to {}^{u'}_{V'/V}\mathcal{I}
$$
Since the value of $f'_*j^{-1}\mathcal{F}$ on $V'/V$ is
given by the limit of the values of $j^{-1}\mathcal{F}$
on the category ${}^{u'}_{V'/V}\mathcal{I}$ and since
the values of $j^{-1}\mathcal{F}$ on objects of
${}^u_V\mathcal{I}$ are just the values of $\mathcal{F}$
(by Lemma \ref{lemma-when-shriek} as $j$ is continuous and
cocontinuous)
we see that (5) is true.
\end{proof}

\noindent
The following two results are of a slightly different nature.

\begin{lemma}
\label{lemma-special-square-cocontinuous}
Assume given sites $\mathcal{C}', \mathcal{C}, \mathcal{D}', \mathcal{D}$
and functors
$$
\xymatrix{
\mathcal{C}' \ar[r]_{v'} \ar[d]_{u'} &
\mathcal{C} \ar[d]^u \\
\mathcal{D}' \ar[r]^v &
\mathcal{D}
}
$$
Assume
\begin{enumerate}
\item $u$, $u'$, $v$, and $v'$ are cocontinuous giving rise to morphisms of
topoi $f$, $f'$, $g$, and $g'$ by Lemma \ref{lemma-cocontinuous-morphism-topoi},
\item $v \circ u' = u \circ v'$,
\item $v$ and $v'$ are continuous as well as cocontinuous, and
\item for any object $V'$ of $\mathcal{D}'$ the functor
${}^{u'}_{V'}\mathcal{I} \to {}^{\ \ \ u}_{v(V')}\mathcal{I}$
given by $v$ is cofinal.
\end{enumerate}
Then $f'_* \circ (g')^{-1} = g^{-1} \circ f_*$ and
$g'_! \circ (f')^{-1} = f^{-1} \circ g_!$.
\end{lemma}

\begin{proof}
The categories ${}^{u'}_{V'}\mathcal{I}$ and
${}^{\ \ \ u}_{v(V')}\mathcal{I}$ are defined in
Section \ref{section-more-functoriality-PSh}.
The functor in condition (4) sends the object
$\psi : u'(U') \to V'$ of ${}^{u'}_{V'}\mathcal{I}$ to the object
$v(\psi) : uv'(U') = vu'(U') \to v(V')$ of ${}^{\ \ \ u}_{v(V')}\mathcal{I}$.
Recall that $g^{-1}$ is given by $v^p$ (Lemma \ref{lemma-when-shriek}) and
$f_*$ is given by ${}_su = {}_pu$. Hence the value of
$g^{-1}f_*\mathcal{F}$ on $V'$ is the value of ${}_pu\mathcal{F}$
on $v(V')$ which is the limit
$$
\lim_{u(U) \to v(V') \in \Ob({}^{\ \ \ u}_{v(V')}\mathcal{I}^{opp})}
\mathcal{F}(U)
$$
By the same reasoning, the value of $f'_*(g')^{-1}\mathcal{F}$
on $V'$ is given by the limit
$$
\lim_{u'(U') \to V' \in \Ob({}^{u'}_{V'}\mathcal{I}^{opp})} \mathcal{F}(v'(U'))
$$
Thus assumption (4) and Categories, Lemma \ref{categories-lemma-initial}
show that these agree and the first equality of the
lemma is proved. The second equality follows from the first by uniqueness of
adjoints.
\end{proof}

\begin{lemma}
\label{lemma-special-square-continuous}
Assume given sites $\mathcal{C}', \mathcal{C}, \mathcal{D}', \mathcal{D}$
and functors
$$
\xymatrix{
\mathcal{C}' \ar[r]_{v'} &
\mathcal{C} \\
\mathcal{D}' \ar[r]^v \ar[u]^{u'} &
\mathcal{D} \ar[u]_u
}
$$
With notation as in Sections \ref{section-morphism-sites}
and \ref{section-cocontinuous-morphism-topoi} assume
\begin{enumerate}
\item $u$ and $u'$ are continuous giving rise to morphisms of
sites $f$ and $f'$,
\item $v$ and $v'$ are cocontinuous giving rise to morphisms
of topoi $g$ and $g'$,
\item $u \circ v = v' \circ u'$, and
\item $v$ and $v'$ are continuous as well as cocontinuous.
\end{enumerate}
Then\footnote{In this generality
we don't know $f \circ g'$ is equal to $g \circ f'$
as morphisms of topoi (there is a canonical $2$-arrow from
the first to the second which may not be an isomorphism).}
$f'_* \circ (g')^{-1} = g^{-1} \circ f_*$ and
$g'_! \circ (f')^{-1} = f^{-1} \circ g_!$.
\end{lemma}

\begin{proof}
Namely, we have
$$
f'_*(g')^{-1}\mathcal{F} = (u')^p((v')^p\mathcal{F})^\# =
(u')^p(v')^p\mathcal{F}
$$
The first equality by definition and the
second by Lemma \ref{lemma-when-shriek}. We have
$$
g^{-1}f_*\mathcal{F} = (v^pu^p\mathcal{F})^\# =
((u')^p(v')^p\mathcal{F})^\# = (u')^p(v')^p\mathcal{F}
$$
The first equality by definition, the second because
$u \circ v = v' \circ u'$, the third because we already saw that
$(u')^p(v')^p\mathcal{F}$ is a sheaf. This proves
$f'_* \circ (g')^{-1} = g^{-1} \circ f_*$ and the equality
$g'_! \circ (f')^{-1} = f^{-1} \circ g_!$ follows by
uniqueness of left adjoints.
\end{proof}
















\section{Morphisms of topoi}
\label{section-morphisms-topoi}

\noindent
In this section we show that any morphism of topoi is equivalent
to a morphism of topoi which comes from a morphism of sites.
Please compare with \cite[Expos\'e IV, Proposition 4.9.4]{SGA4}.

\begin{lemma}
\label{lemma-equivalence}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Assume that
\begin{enumerate}
\item $u$ is cocontinuous,
\item $u$ is continuous,
\item given $a, b : U' \to U$ in $\mathcal{C}$ such that
$u(a) = u(b)$, then there exists a covering $\{f_i : U'_i \to U'\}$
in $\mathcal{C}$ such that $a \circ f_i = b \circ f_i$,
\item given $U', U \in \Ob(\mathcal{C})$ and
a morphism $c : u(U') \to u(U)$ in $\mathcal{D}$ there exists
a covering $\{f_i : U_i' \to U'\}$ in $\mathcal{C}$
and morphisms $c_i : U_i' \to U$ such that $u(c_i) = c \circ u(f_i)$, and
\item given $V \in \Ob(\mathcal{D})$ there exists a covering
of $V$ in $\mathcal{D}$ of the form $\{u(U_i) \to V\}_{i \in I}$.
\end{enumerate}
Then the morphism of topoi
$$
g : \Sh(\mathcal{C}) \longrightarrow \Sh(\mathcal{D})
$$
associated to the cocontinuous functor $u$ by
Lemma \ref{lemma-cocontinuous-morphism-topoi}
is an equivalence.
\end{lemma}

\begin{proof}
Assume $u$ satisfies properties (1) -- (5). We will show that
the adjunction mappings
$$
\mathcal{G} \longrightarrow g_*g^{-1}\mathcal{G}
\quad\text{and}\quad
g^{-1}g_*\mathcal{F} \longrightarrow \mathcal{F}
$$
are isomorphisms.

\medskip\noindent
Note that Lemma \ref{lemma-when-shriek} applies and we have
$g^{-1}\mathcal{G}(U) = \mathcal{G}(u(U))$ for any sheaf $\mathcal{G}$
on $\mathcal{D}$. Next, let $\mathcal{F}$ be a sheaf on $\mathcal{C}$,
and let $V$ be an object of $\mathcal{D}$. By definition we have
$g_*\mathcal{F}(V) = \lim_{u(U) \to V} \mathcal{F}(U)$.
Hence
$$
g^{-1}g_*\mathcal{F}(U) = \lim_{U', u(U') \to u(U)} \mathcal{F}(U')
$$
where the morphisms $\psi : u(U') \to u(U)$ need not be of the form
$u(\alpha)$. The category of such pairs $(U', \psi)$ has a final
object, namely $(U, \text{id})$, which gives rise to the map from
the limit into $\mathcal{F}(U)$. Let $(s_{(U', \psi)})$ be an element
of the limit. We want to show that $s_{(U', \psi)}$ is uniquely determined
by the value $s_{(U, \text{id})} \in \mathcal{F}(U)$. By property (4) given
any $(U', \psi)$ there exists a covering $\{U'_i \to U'\}$ such that the
compositions $u(U'_i) \to u(U') \to u(U)$ are of the form $u(c_i)$
for some $c_i : U'_i \to U$ in $\mathcal{C}$. Hence
$$
s_{(U', \psi)}|_{U'_i} = c_i^*(s_{(U, \text{id})}).
$$
Since $\mathcal{F}$ is a sheaf it follows that indeed $s_{(U', \psi)}$
is determined by $s_{(U, \text{id})}$. This proves uniqueness.
For existence, assume given any
$s \in \mathcal{F}(U)$, $\psi : u(U') \to u(U)$, $\{f_i : U_i' \to U'\}$
and $c_i : U_i' \to U$ such that $\psi \circ u(f_i) = u(c_i)$ as above.
We claim there exists a (unique) element
$s_{(U', \psi)} \in \mathcal{F}(U')$ such that
$$
s_{(U', \psi)}|_{U'_i} = c_i^*(s).
$$
Namely, a priori it is not clear the elements
$c_i^*(s)|_{U_i' \times_{U'} U_j'}$
and $c_j^*(s)|_{U_i' \times_{U'} U_j'}$ agree, since
the diagram
$$
\xymatrix{
U_i' \times_{U'} U_j' \ar[r]_-{\text{pr}_2} \ar[d]_{\text{pr}_1} &
U_j' \ar[d]^{c_j} \\
U_i' \ar[r]^{c_i} & U}
$$
need not commute. But condition (3) of the lemma guarantees that there
exist coverings
$\{f_{ijk} : U'_{ijk} \to U_i' \times_{U'} U_j'\}_{k \in K_{ij}}$ such that
$c_i \circ \text{pr}_1 \circ f_{ijk} = c_j \circ \text{pr}_2 \circ f_{ijk}$.
Hence
$$
f_{ijk}^* \left(c_i^*s|_{U_i' \times_{U'} U_j'}\right)
=
f_{ijk}^* \left(c_j^*s|_{U_i' \times_{U'} U_j'}\right)
$$
Hence $c_i^*(s)|_{U_i' \times_{U'} U_j'} = c_j^*(s)|_{U_i' \times_{U'} U_j'}$
by the sheaf condition for $\mathcal{F}$ and hence the existence of
$s_{(U', \psi)}$ also by the sheaf condition for $\mathcal{F}$. The uniqueness
guarantees that the collection $(s_{(U', \psi)})$ so obtained is an element
of the limit with $s_{(U, \psi)} = s$. This proves
that $g^{-1}g_*\mathcal{F} \to \mathcal{F}$ is an isomorphism.

\medskip\noindent
Let $\mathcal{G}$ be a sheaf on $\mathcal{D}$. Let $V$ be an
object of $\mathcal{D}$. Then we see that
$$
g_*g^{-1}\mathcal{G}(V) =
\lim_{U, \psi : u(U) \to V} \mathcal{G}(u(U))
$$
By the preceding paragraph we see that the value of the sheaf
$g_*g^{-1}\mathcal{G}$ on an object $V$ of the form $V = u(U)$
is equal to $\mathcal{G}(u(U))$. (Formally, this holds because
we have $g^{-1}g_*g^{-1} \cong g^{-1}$, and the description
of $g^{-1}$ given at the beginning of the proof; informally just by
comparing limits here and above.)
Hence the adjunction mapping $\mathcal{G} \to g_*g^{-1}\mathcal{G}$ has
the property that it is a bijection on sections over any object of the
form $u(U)$. Since by axiom (5) there
exists a covering of $V$ by objects of the form $u(U)$ we see
easily that the adjunction map is an isomorphism.
\end{proof}

\noindent
It will be convenient to give cocontinuous functors as in
Lemma \ref{lemma-equivalence} a name.

\begin{definition}
\label{definition-special-cocontinuous-functor}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
A {\it special cocontinuous functor $u$ from $\mathcal{C}$ to $\mathcal{D}$}
is a cocontinuous functor $u : \mathcal{C} \to \mathcal{D}$ satisfying
the assumptions and conclusions of Lemma \ref{lemma-equivalence}.
\end{definition}

\begin{lemma}
\label{lemma-localize-special-cocontinuous}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a special cocontinuous functor.
For every object $U$ of $\mathcal{C}$ we have a commutative diagram
$$
\xymatrix{
\mathcal{C}/U \ar[r]_{j_U} \ar[d] & \mathcal{C} \ar[d]^u \\
\mathcal{D}/u(U) \ar[r]^-{j_{u(U)}} & \mathcal{D}
}
$$
as in Lemma \ref{lemma-localize-cocontinuous}.
The left vertical arrow is a special cocontinuous functor.
Hence in the commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{C}/U) \ar[r]_{j_U} \ar[d] &
\Sh(\mathcal{C}) \ar[d]^u \\
\Sh(\mathcal{D}/u(U)) \ar[r]^-{j_{u(U)}} &
\Sh(\mathcal{D})
}
$$
the vertical arrows are equivalences.
\end{lemma}

\begin{proof}
We have seen the existence and commutativity of the diagrams in
Lemma \ref{lemma-localize-cocontinuous}. We have to check
hypotheses (1) -- (5) of Lemma \ref{lemma-equivalence} for the
induced functor $u : \mathcal{C}/U \to \mathcal{D}/u(U)$.
This is completely mechanical.

\medskip\noindent
Property (1). This is Lemma \ref{lemma-localize-cocontinuous}.

\medskip\noindent
Property (2). Let $\{U_i'/U \to U'/U\}_{i \in I}$ be a covering
of $U'/U$ in $\mathcal{C}/U$. Because $u$ is continuous we see that
$\{u(U_i')/u(U) \to u(U')/u(U)\}_{i \in I}$ is a covering
of $u(U')/u(U)$ in $\mathcal{D}/u(U)$. Hence (2) holds
for $u : \mathcal{C}/U \to \mathcal{D}/u(U)$.

\medskip\noindent
Property (3). Let $a, b : U''/U \to U'/U$ in $\mathcal{C}/U$
be morphisms such that $u(a) = u(b)$ in $\mathcal{D}/u(U)$.
Because $u$ satisfies (3) we see there exists a covering
$\{f_i : U''_i \to U''\}$ in $\mathcal{C}$ such that
$a \circ f_i = b \circ f_i$. This gives a covering
$\{f_i : U''_i/U \to U''/U\}$ in $\mathcal{C}/U$ such that
$a \circ f_i = b \circ f_i$. Hence (3) holds
for $u : \mathcal{C}/U \to \mathcal{D}/u(U)$.

\medskip\noindent
Property (4). Let $U''/U, U'/U \in \Ob(\mathcal{C}/U)$ and
a morphism $c : u(U'')/u(U) \to u(U')/u(U)$ in $\mathcal{D}/u(U)$
be given. Because $u$ satisfies property (4) there exists
a covering $\{f_i : U_i'' \to U''\}$ in $\mathcal{C}$
and morphisms $c_i : U_i'' \to U'$ such that $u(c_i) = c \circ u(f_i)$.
We think of $U_i''$ as an object over $U$ via the composition
$U_i'' \to U'' \to U$.
It may not be true that $c_i$ is a morphism over $U$!
But since $u(c_i)$ is a morphism over $u(U)$ we may apply
property (3) for $u$ and find coverings $\{f_{ik} : U''_{ik} \to U''_i\}$
such that $c_{ik} = c_i \circ f_{ik} : U''_{ik} \to U'$ are morphisms over $U$.
Hence $\{f_i \circ f_{ik} : U''_{ik}/U \to U''/U\}$ is a covering
in $\mathcal{C}/U$ such that $u(c_{ik}) = c \circ u(f_{ik})$.
Hence (4) holds
for $u : \mathcal{C}/U \to \mathcal{D}/u(U)$.

\medskip\noindent
Property (5). Let $h : V \to u(U)$ be an object of $\mathcal{D}/u(U)$.
Because $u$ satisfies property (5) there exists a covering
$\{c_i : u(U_i) \to V\}$ in $\mathcal{D}$. By property (4) we can find
coverings $\{f_{ij} : U_{ij} \to U_i\}$ and morphisms
$c_{ij} : U_{ij} \to U$ such that $u(c_{ij}) = h \circ c_i \circ u(f_{ij})$.
Hence $\{u(U_{ij})/u(U) \to V/u(U)\}$ is a covering in
$\mathcal{D}/u(U)$ of the desired shape and we conclude that
(5) holds for $u : \mathcal{C}/U \to \mathcal{D}/u(U)$.
\end{proof}

\begin{lemma}
\label{lemma-special-equivalence}
Let $\mathcal{C}$ be a site. Let
$\mathcal{C}' \subset \Sh(\mathcal{C})$
be a full subcategory (with a set of objects) such that
\begin{enumerate}
\item $h_U^\# \in \Ob(\mathcal{C}')$ for all
$U \in \Ob(\mathcal{C})$, and
\item $\mathcal{C}'$ is preserved under fibre products in
$\Sh(\mathcal{C})$.
\end{enumerate}
Declare a covering of $\mathcal{C}'$ to be any family
$\{\mathcal{F}_i \to \mathcal{F}\}_{i \in I}$ of maps such that
$\coprod_{i \in I} \mathcal{F}_i \to \mathcal{F}$ is a surjective
map of sheaves. Then
\begin{enumerate}
\item $\mathcal{C}'$ is a site (after
choosing a set of coverings, see Sets, Lemma \ref{sets-lemma-coverings-site}),
\item representable presheaves on $\mathcal{C}'$ are sheaves
(i.e., the topology on $\mathcal{C}'$ is subcanonical, see
Definition \ref{definition-weaker-than-canonical}),
\item the functor $v : \mathcal{C} \to \mathcal{C}'$,
$U \mapsto h_U^\#$ is a special cocontinuous functor, hence induces an
equivalence $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{C}')$,
\item for any $\mathcal{F} \in \Ob(\mathcal{C}')$ we have
$g^{-1}h_\mathcal{F} = \mathcal{F}$, and
\item for any $U \in \Ob(\mathcal{C})$ we have
$g_*h_U^\# = h_{v(U)} = h_{h_U^\#}$.
\end{enumerate}
\end{lemma}

\begin{proof}
Warning: Some of the statements above may look be a bit confusing at first;
this is because objects of $\mathcal{C}'$ can also be viewed as sheaves on
$\mathcal{C}$! We omit the proof that the coverings of $\mathcal{C}'$ as
described in the lemma satisfy the conditions of
Definition \ref{definition-site}.

\medskip\noindent
Suppose that $\{\mathcal{F}_i \to \mathcal{F}\}$ is a surjective
family of morphisms of sheaves. Let $\mathcal{G}$ be another sheaf.
Part (2) of the lemma says that the equalizer of
$$
\xymatrix{
\Mor_{\Sh(\mathcal{C})}(
\coprod_{i \in I} \mathcal{F}_i, \mathcal{G})
\ar@<1ex>[r] \ar@<-1ex>[r]
&
\Mor_{\Sh(\mathcal{C})}(
\coprod_{(i_0, i_1) \in I \times I}
\mathcal{F}_{i_0} \times_\mathcal{F} \mathcal{F}_{i_1}, \mathcal{G})
}
$$
is $\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, \mathcal{G}).$
This is clear (for example use Lemma \ref{lemma-coequalizer-surjection}).

\medskip\noindent
To prove (3) we
have to check conditions (1) -- (5) of Lemma \ref{lemma-equivalence}.
The fact that $v$ is cocontinuous is
equivalent to the description of surjective maps of sheaves in
Lemma \ref{lemma-mono-epi-sheaves}.
The functor $v$ is continuous because
$U \mapsto h_U^\#$ commutes with fibre products,
and transforms coverings into coverings (see
Lemma \ref{lemma-sheafification-exact}, and
Lemma \ref{lemma-covering-surjective-after-sheafification}).
Properties (3), (4) of Lemma \ref{lemma-equivalence}
are statements about morphisms $f : h_{U'}^\# \to h_U^\#$.
Such a morphism is the same thing as an element of $h_U^\#(U')$.
Hence (3) and (4) are immediate from the construction of the sheafification.
Property (5) of Lemma \ref{lemma-equivalence} is
Lemma \ref{lemma-sheaf-coequalizer-representable}.
Denote $g : \Sh(\mathcal{C}) \to \Sh(\mathcal{C}')$ the
equivalence of topoi associated with $v$ by Lemma \ref{lemma-equivalence}.

\medskip\noindent
Let $\mathcal{F}$ be as in part (4) of the lemma.
For any $U \in \Ob(\mathcal{C})$ we have
$$
g^{-1}h_\mathcal{F}(U) = h_\mathcal{F}(v(U))
= \Mor_{\Sh(\mathcal{C})}(h_U^\#, \mathcal{F})
= \mathcal{F}(U)
$$
The first equality by
Lemma \ref{lemma-when-shriek}.
Thus part (4) holds.

\medskip\noindent
Let $\mathcal{F} \in \Ob(\mathcal{C}')$.
Let $U \in \Ob(\mathcal{C})$.
Then
\begin{align*}
g_*h_U^\#(\mathcal{F})
& =
\Mor_{\Sh(\mathcal{C}')}(h_\mathcal{F}, g_*h_U^\#) \\
& =
\Mor_{\Sh(\mathcal{C})}(g^{-1}h_\mathcal{F}, h_U^\#) \\
& =
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, h_U^\#) \\
& =
\Mor_{\mathcal{C}'}(\mathcal{F}, h_U^\#)
\end{align*}
as desired (where the third equality was shown above).
\end{proof}

\noindent
Using this we can massage any topos to live over a site having
all finite limits.

\begin{lemma}
\label{lemma-topos-good-site}
Let $\Sh(\mathcal{C})$ be a topos. Let $\{\mathcal{F}_i\}_{i \in I}$
be a set of sheaves on $\mathcal{C}$. There exists an equivalence of topoi
$g : \Sh(\mathcal{C}) \to \Sh(\mathcal{C}')$ induced by a special
cocontinuous functor $u : \mathcal{C} \to \mathcal{C}'$ of sites
such that
\begin{enumerate}
\item $\mathcal{C}'$ has a subcanonical topology,
\item a family $\{V_j \to V\}$ of morphisms of $\mathcal{C}'$
is (combinatorially equivalent to) a covering of $\mathcal{C}'$
if and only if $\coprod h_{V_j} \to h_V$ is surjective,
\item $\mathcal{C}'$ has fibre products and a final object
(i.e., $\mathcal{C}'$ has all finite limits),
\item every subsheaf of a representable sheaf on $\mathcal{C}'$
is representable, and
\item each $g_*\mathcal{F}_i$ is a representable sheaf.
\end{enumerate}
\end{lemma}

\begin{proof}
Consider the full subcategory
$\mathcal{C}_1 \subset \Sh(\mathcal{C})$ consisting of all
$h_U^\#$ for all $U \in \Ob(\mathcal{C})$, the given sheaves
$\mathcal{F}_i$ and the final sheaf $*$ (see
Example \ref{example-singleton-sheaf}). We are going to inductively
define full subcategories
$$
\mathcal{C}_1 \subset \mathcal{C}_2 \subset \mathcal{C}_2 \subset \ldots
\subset \Sh(\mathcal{C})
$$
Namely, given $\mathcal{C}_n$ let $\mathcal{C}_{n + 1}$ be the full
subcategory consisting of all fibre products and subsheaves of objects
of $\mathcal{C}_n$. (Note that $\mathcal{C}_{n + 1}$ has a set
of objects.) Set
$\mathcal{C}' = \bigcup_{n \geq 1} \mathcal{C}_n$.
A covering in $\mathcal{C}'$ is any family
$\{\mathcal{G}_j \to \mathcal{G}\}_{j \in J}$ of morphisms of objects
of $\mathcal{C}'$ such that
$\coprod \mathcal{G}_j \to \mathcal{G}$ is surjective
as a map of sheaves on $\mathcal{C}$.
The functor $v : \mathcal{C} \to \mathcal{C'}$ is given by
$U \mapsto h_U^\#$. Apply
Lemma \ref{lemma-special-equivalence}.
\end{proof}

\noindent
Here is the goal of the current section.

\begin{lemma}
\label{lemma-morphism-topoi-comes-from-morphism-sites}
\begin{reference}
This statement is closely related to
\cite[Proposition 4.9.4. Expos\'e IV]{SGA4}.
In order to get the whole result, one should also use
\cite[Remarque 4.7.4, Expos\'e IV]{SGA4}.
\end{reference}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $f : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be a
morphism of topoi.
Then there exists a site $\mathcal{C}'$ and a diagram of functors
$$
\xymatrix{
\mathcal{C} \ar[r]_v & \mathcal{C}' & \mathcal{D} \ar[l]^u
}
$$
such that
\begin{enumerate}
\item the functor $v$ is a special cocontinuous functor,
\item the functor $u$ commutes with fibre products, is
continuous and defines a morphism of sites
$\mathcal{C}' \to \mathcal{D}$, and
\item the morphism of topoi $f$ agrees with the composition
of morphisms of topoi
$$
\Sh(\mathcal{C}) \longrightarrow
\Sh(\mathcal{C}') \longrightarrow
\Sh(\mathcal{D})
$$
where the first arrow comes from $v$ via Lemma \ref{lemma-equivalence}
and the second arrow from $u$ via Lemma \ref{lemma-morphism-sites-topoi}.
\end{enumerate}
\end{lemma}

\begin{proof}
Consider the full subcategory
$\mathcal{C}_1 \subset \Sh(\mathcal{C})$ consisting of all
$h_U^\#$ and all $f^{-1}h_V^\#$ for all
$U \in \Ob(\mathcal{C})$ and all $V \in \Ob(\mathcal{D})$.
Let $\mathcal{C}_{n + 1}$ be a full subcategory consisting of all
fibre products of objects of $\mathcal{C}_n$. Set
$\mathcal{C}' = \bigcup_{n \geq 1} \mathcal{C}_n$.
A covering in $\mathcal{C}'$ is any family
$\{\mathcal{F}_i \to \mathcal{F}\}_{i \in I}$ such that
$\coprod_{i \in I} \mathcal{F}_i \to \mathcal{F}$ is surjective
as a map of sheaves on $\mathcal{C}$.
The functor $v : \mathcal{C} \to \mathcal{C'}$ is given by
$U \mapsto h_U^\#$.
The functor $u : \mathcal{D} \to \mathcal{C'}$ is given by
$V \mapsto f^{-1}h_V^\#$.

\medskip\noindent
Part (1) follows from Lemma \ref{lemma-special-equivalence}.

\medskip\noindent
Proof of (2) and (3) of the lemma. The functor $u$ commutes with fibre
products as both $V \mapsto h_V^\#$ and $f^{-1}$ do. Moreover,
since $f^{-1}$ is exact and commutes with arbitrary colimits we see
that it transforms a covering into a surjective family of morphisms of
sheaves. Hence $u$ is continuous. To see that it defines a morphism of
sites we still have to see that $u_s$ is exact. In order to do this
we will show that $g^{-1} \circ u_s = f^{-1}$. Namely, then since $g^{-1}$
is an equivalence and $f^{-1}$ is exact we will conclude.
Because $g^{-1}$ is adjoint to $g_*$, and $u_s$ is adjoint to
$u^s$, and $f^{-1}$ is adjoint to $f_*$ it also suffices to prove that
$u^s \circ g_* = f_*$.
Let $U$ be an object of $\mathcal{C}$ and let
$V$ be an object of $\mathcal{D}$. Then
\begin{align*}
(u^sg_*h_U^\#)(V)
& =
g_*h_U^\#(f^{-1}h_V^\#) \\
& =
\Mor_{\Sh(\mathcal{C})}(f^{-1}h_V^\#, h_U^\#) \\
& =
\Mor_{\Sh(\mathcal{D})}(h_V^\#, f_*h_U^\#) \\
& = f_*h_U^\#(V)
\end{align*}
The first equality because $u^s = u^p$. The second equality
by Lemma \ref{lemma-special-equivalence} (5). The third equality
by adjointness of $f_*$ and $f^{-1}$ and the final equality by
properties of sheafification and the Yoneda lemma.
We omit the verification that these identities are functorial in $U$
and $V$. Hence we see that
we have $u^s \circ g_* = f_*$ for sheaves of the form $h_U^\#$.
This implies that $u^s \circ g_* = f_*$ and we win (some details omitted).
\end{proof}

\begin{remark}
\label{remark-morphism-topoi-comes-from-morphism-sites}
Notation and assumptions
as in Lemma \ref{lemma-morphism-topoi-comes-from-morphism-sites}.
If the site $\mathcal{D}$ has a final object and fibre products
then the functor $u : \mathcal{D} \to \mathcal{C}'$ satisfies
all the assumptions of Proposition \ref{proposition-get-morphism}.
Namely, in addition to the properties mentioned in the lemma $u$
also transforms the final object of $\mathcal{D}$ into the final
object of $\mathcal{C}'$. This is clear from the construction of $u$.
Hence, if we first apply
Lemmas \ref{lemma-topos-good-site}
to $\mathcal{D}$
and then
Lemma \ref{lemma-morphism-topoi-comes-from-morphism-sites}
to the resulting morphism of topoi
$\Sh(\mathcal{C}) \to \Sh(\mathcal{D}')$
we obtain the following statement:
Any morphism of topoi
$f : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$
fits into a commutative diagram
$$
\xymatrix{
\Sh(\mathcal{C}) \ar[d]_g \ar[r]_f &
\Sh(\mathcal{D}) \ar[d]^e \\
\Sh(\mathcal{C}') \ar[r]^{f'} &
\Sh(\mathcal{D}')
}
$$
where the following properties hold:
\begin{enumerate}
\item the morphisms $e$ and $g$ are equivalences given by
special cocontinuous functors $\mathcal{C} \to \mathcal{C}'$ and
$\mathcal{D} \to \mathcal{D}'$,
\item the sites $\mathcal{C}'$ and $\mathcal{D}'$ have fibre products, final
objects and have subcanonical topologies,
\item the morphism $f' : \mathcal{C}' \to \mathcal{D}'$ comes from a
morphism of sites corresponding to a functor
$u : \mathcal{D}' \to \mathcal{C}'$ to which
Proposition \ref{proposition-get-morphism}
applies, and
\item given any set of sheaves $\mathcal{F}_i$ (resp.\ $\mathcal{G}_j$)
on $\mathcal{C}$ (resp.\ $\mathcal{D}$) we may assume each of these is
a representable sheaf on $\mathcal{C}'$ (resp.\ $\mathcal{D}'$).
\end{enumerate}
It is often useful to replace $\mathcal{C}$ and $\mathcal{D}$ by
$\mathcal{C}'$ and $\mathcal{D}'$.
\end{remark}

\begin{remark}
\label{remark-equivalence-topoi-comes-from-morphism-sites}
Notation and assumptions
as in Lemma \ref{lemma-morphism-topoi-comes-from-morphism-sites}.
Suppose that in addition the original morphism of topoi
$\Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ is an equivalence.
Then the construction in the proof of
Lemma \ref{lemma-morphism-topoi-comes-from-morphism-sites}
gives two functors
$$
\mathcal{C} \rightarrow \mathcal{C}' \leftarrow \mathcal{D}
$$
which are both special cocontinuous functors.
Hence in this case we can actually
factor the morphism of topoi as a composition
$$
\Sh(\mathcal{C}) \rightarrow
\Sh(\mathcal{C}') =
\Sh(\mathcal{D}') \leftarrow
\Sh(\mathcal{D})
$$
as in Remark \ref{remark-morphism-topoi-comes-from-morphism-sites}, but
with the middle morphism an identity.
\end{remark}









\section{Localization of topoi}
\label{section-localize-topoi}

\noindent
We repeat some of the material on localization to
the apparently more general case of topoi. In reality this is not
more general since we may always enlarge the underlying sites
to assume that we are localizing at objects of the site.

\begin{lemma}
\label{lemma-localize-topos}
Let $\mathcal{C}$ be a site.
Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$.
Then the category $\Sh(\mathcal{C})/\mathcal{F}$
is a topos. There is a canonical morphism of topoi
$$
j_\mathcal{F} :
\Sh(\mathcal{C})/\mathcal{F}
\longrightarrow
\Sh(\mathcal{C})
$$
which is a localization as in
Section \ref{section-localize}
such that
\begin{enumerate}
\item the functor $j_\mathcal{F}^{-1}$ is the functor
$\mathcal{H} \mapsto \mathcal{H} \times \mathcal{F}/\mathcal{F}$, and
\item the functor $j_{\mathcal{F}!}$ is the forgetful
functor $\mathcal{G}/\mathcal{F} \mapsto \mathcal{G}$.
\end{enumerate}
\end{lemma}

\begin{proof}
Apply
Lemma \ref{lemma-topos-good-site}.
This means we may assume $\mathcal{C}$ is a site
with subcanonical topology, and $\mathcal{F} = h_U = h_U^\#$
for some $U \in \Ob(\mathcal{C})$.
Hence the material of
Section \ref{section-localize}
applies. In particular, there is an equivalence
$\Sh(\mathcal{C}/U) = \Sh(\mathcal{C})/h_U^\#$
such that the composition
$$
\Sh(\mathcal{C}/U)
\to
\Sh(\mathcal{C})/h_U^\#
\to \Sh(\mathcal{C})
$$
is equal to $j_{U!}$, see
Lemma \ref{lemma-essential-image-j-shriek}.
Denote
$a : \Sh(\mathcal{C})/h_U^\# \to \Sh(\mathcal{C}/U)$
the inverse functor, so $j_{\mathcal{F}!} = j_{U!} \circ a$,
$j_\mathcal{F}^{-1} = a^{-1} \circ j_U^{-1}$, and
$j_{\mathcal{F}, *} = j_{U, *} \circ a$. The description of
$j_{\mathcal{F}!}$ follows from the above. The description of
$j_\mathcal{F}^{-1}$ follows from
Lemma \ref{lemma-compute-j-shriek-restrict}.
\end{proof}

\begin{lemma}
\label{lemma-localize-pushforward}
In the situation of Lemma \ref{lemma-localize-topos}, the functor
$j_{\mathcal{F}, *}$ is the one associates to
$\varphi : \mathcal{G} \to \mathcal{F}$ the sheaf
$$
U
\longmapsto
\{\alpha : \mathcal{F}|_U \to \mathcal{G}|_U
\text{ such that } \alpha \text{ is a right inverse to }\varphi|_U \}.
$$
\end{lemma}

\begin{proof}
For any $\varphi : \mathcal{G} \to \mathcal{F}$, let us use
the notation $\mathcal{G}/\mathcal{F}$ to denote the corresponding
object of $\Sh(\mathcal{C})/\mathcal{F}$. We have
$$
(j_{\mathcal{F}, *}(\mathcal{G}/\mathcal{F}))(U) =
\Mor_{\Sh(\mathcal{C})}(h_U^\#, j_{\mathcal{F}, *}(\mathcal{G}/\mathcal{F})) =
\Mor_{\Sh(\mathcal{C})/\mathcal{F}}(j_{\mathcal{F}}^{-1}h_U^{\#},
(\mathcal{G}/\mathcal{F})).
$$
By Lemma \ref{lemma-localize-topos} this set is the fiber over
the element $h_U^\# \times \mathcal{F} \to \mathcal{F}$ under the
map of sets
$$
\Mor_{\Sh(\mathcal{C})}(h_U^\# \times \mathcal{F}, \mathcal{G})
\xrightarrow{\varphi \circ}
\Mor_{\Sh(\mathcal{C})}(h_U^\# \times \mathcal{F}, \mathcal{F}).
$$
By the adjunction in Lemma \ref{lemma-internal-hom-sheaf}, we have
\begin{align*}
\Mor_{\Sh(\mathcal{C})}(h_U^{\#}\times\mathcal{F}, \mathcal{G})
& =
\Mor_{\Sh(\mathcal{C})}(h_U^{\#},\SheafHom(\mathcal{F}, \mathcal{G})) \\
& =
\Mor_{\Sh(\mathcal{C}/U)}(\mathcal{F}|_{\mathcal{C}/U},
\mathcal{G}|_{\mathcal{C}/U}), \\
\Mor_{\Sh(\mathcal{C})}(h_U^{\#} \times \mathcal{F}, \mathcal{F})
& =
\Mor_{\Sh(\mathcal{C})}(h_U^{\#},\SheafHom(\mathcal{F},\mathcal{F})) \\
& =
\Mor_{\Sh(\mathcal{C}/U)}(\mathcal{F}|_{\mathcal{C}/U},
\mathcal{F}|_{\mathcal{C}/U}),
\end{align*}
and under the adjunction, the map $\varphi\circ$ becomes the map
$$
\Mor_{\Sh(\mathcal{C}/U)}(\mathcal{F}|_{\mathcal{C}/U},
\mathcal{G}|_{\mathcal{C}/U})
\longrightarrow
\Mor_{\Sh(\mathcal{C}/U)}(\mathcal{F}|_{\mathcal{C}/U},
\mathcal{F}|_{\mathcal{C}/U}),\quad
\psi \longmapsto \varphi|_{\mathcal{C}/U} \circ \psi,
$$
the element $h_U^\# \times \mathcal{F} \to \mathcal{F}$
becomes $\text{id}_{\mathcal{F}|_{\mathcal{C}/U}}$.
Therefore $(j_{\mathcal{F}, *}\mathcal{G}/\mathcal{F})(U)$
is isomorphic to the fiber of
$\text{id}_{\mathcal{F}|_{\mathcal{C}/U}}$ under the map
$$
\Mor_{\Sh(\mathcal{C}/U)}(\mathcal{F}|_{\mathcal{C}/U},
\mathcal{G}|_{\mathcal{C}/U})
\xrightarrow{\varphi|_{\mathcal{C}/U}\circ}
\Mor_{\Sh(\mathcal{C}/U)}(\mathcal{F}|_{\mathcal{C}/U},
\mathcal{F}|_{\mathcal{C}/U}),
$$
which is $\{\alpha : \mathcal{F}|_U \to \mathcal{G}|_U
\text{ such that } \alpha \text{ is a right inverse to }\varphi|_U \}$
as desired.
\end{proof}

\begin{lemma}
\label{lemma-localize-topos-site}
Let $\mathcal{C}$ be a site. Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$.
Let $\mathcal{C}/\mathcal{F}$ be the category of pairs $(U, s)$ where
$U \in \Ob(\mathcal{C})$ and $s \in \mathcal{F}(U)$. Let a covering in
$\mathcal{C}/\mathcal{F}$ be a family $\{(U_i, s_i) \to (U, s)\}$
such that $\{U_i \to U\}$ is a covering of $\mathcal{C}$.
Then $j : \mathcal{C}/\mathcal{F} \to \mathcal{C}$ is a continuous
and cocontinuous functor of sites which induces a morphism of topoi
$j : \Sh(\mathcal{C}/\mathcal{F}) \to \Sh(\mathcal{C})$. In fact, there
is an equivalence $\Sh(\mathcal{C}/\mathcal{F}) =
\Sh(\mathcal{C})/\mathcal{F}$ which turns $j$ into $j_\mathcal{F}$.
\end{lemma}

\begin{proof}
We omit the verification that $\mathcal{C}/\mathcal{F}$ is a site and
that $j$ is continuous and cocontinuous. By
Lemma \ref{lemma-when-shriek} there exists a morphism of topoi
$j$ as indicated, with $j^{-1}\mathcal{G}(U, s) = \mathcal{G}(U)$,
and there is a left adjoint $j_!$ to $j^{-1}$. A morphism
$\varphi : * \to j^{-1}\mathcal{G}$ on $\mathcal{C}/\mathcal{F}$
is the same thing as a rule which assigns to every pair $(U, s)$ a
section $\varphi(s) \in \mathcal{G}(U)$ compatible with restriction maps.
Hence this is the same thing as a morphism
$\varphi : \mathcal{F} \to \mathcal{G}$ over $\mathcal{C}$.
We conclude that $j_!* = \mathcal{F}$. In particular, for every
$\mathcal{H} \in \Sh(\mathcal{C}/\mathcal{F})$ there is a canonical map
$$
j_!\mathcal{H} \to j_!* = \mathcal{F}
$$
i.e., we obtain a functor
$j'_! : \Sh(\mathcal{C}/\mathcal{F}) \to \Sh(\mathcal{C})/\mathcal{F}$.
An inverse to this functor is the rule which assigns to an object
$\varphi : \mathcal{G} \to \mathcal{F}$ of $\Sh(\mathcal{C})/\mathcal{F}$ the
sheaf
$$
a(\mathcal{G}/\mathcal{F}) :
(U, s) \longmapsto \{t \in \mathcal{G}(U) \mid \varphi(t) = s\}
$$
We omit the verification that $a(\mathcal{G}/\mathcal{F})$ is a sheaf
and that $a$ is inverse to $j'_!$.
\end{proof}

\begin{definition}
\label{definition-localize-topos}
Let $\mathcal{C}$ be a site.
Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$.
\begin{enumerate}
\item The topos $\Sh(\mathcal{C})/\mathcal{F}$
is called the
{\it localization of the topos $\Sh(\mathcal{C})$ at $\mathcal{F}$}.
\item The morphism of topoi
$j_\mathcal{F} :
\Sh(\mathcal{C})/\mathcal{F}
\to
\Sh(\mathcal{C})$ of
Lemma \ref{lemma-localize-topos}
is called the {\it localization morphism}.
\end{enumerate}
\end{definition}

\noindent
We are going to show that whenever the sheaf $\mathcal{F}$ is equal to
$h_U^\#$ for some object $U$ of the site, then the localization of the
topos is equal to the category of sheaves on the localization of the site
at $U$. Moreover, we are going to check that any functorialities are
compatible with this identification.

\begin{lemma}
\label{lemma-localize-compare}
Let $\mathcal{C}$ be a site. Let $\mathcal{F} = h_U^\#$ for some object $U$
of $\mathcal{C}$. Then $j_\mathcal{F} : \Sh(\mathcal{C})/\mathcal{F}
\to \Sh(\mathcal{C})$ constructed in
Lemma \ref{lemma-localize-topos}
agrees with the morphism of topoi
$j_U : \Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})$
constructed in
Section \ref{section-localize}
via the identification
$\Sh(\mathcal{C}/U) = \Sh(\mathcal{C})/h_U^\#$
of
Lemma \ref{lemma-essential-image-j-shriek}.
\end{lemma}

\begin{proof}
We have seen in
Lemma \ref{lemma-essential-image-j-shriek}
that the composition
$\Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})/h_U^\#
\to \Sh(\mathcal{C})$
is $j_{U!}$. The functor
$\Sh(\mathcal{C})/h_U^\# \to \Sh(\mathcal{C})$
is $j_{\mathcal{F}!}$ by
Lemma \ref{lemma-localize-topos}.
Hence $j_{\mathcal{F}!} = j_{U!}$ via the identification.
So $j_\mathcal{F}^{-1} = j_U^{-1}$ (by adjointness) and so
$j_{\mathcal{F}, *} = j_{U, *}$ (by adjointness again).
\end{proof}

\begin{lemma}
\label{lemma-relocalize-topos}
Let $\mathcal{C}$ be a site.
If $s : \mathcal{G} \to \mathcal{F}$ is a morphism of sheaves
on $\mathcal{C}$ then there exists a natural commutative diagram of
morphisms of topoi
$$
\xymatrix{
\Sh(\mathcal{C})/\mathcal{G} \ar[rd]_{j_\mathcal{G}} \ar[rr]_j & &
\Sh(\mathcal{C})/\mathcal{F} \ar[ld]^{j_\mathcal{F}} \\
& \Sh(\mathcal{C}) &
}
$$
where $j = j_{\mathcal{G}/\mathcal{F}}$ is the localization of the
topos $\Sh(\mathcal{C})/\mathcal{F}$ at the object
$\mathcal{G}/\mathcal{F}$. In particular we have
$$
j^{-1}(\mathcal{H} \to \mathcal{F}) =
(\mathcal{H} \times_\mathcal{F} \mathcal{G} \to \mathcal{G})
$$
and
$$
j_!(\mathcal{E} \xrightarrow{e} \mathcal{F}) =
(\mathcal{E} \xrightarrow{s \circ e} \mathcal{G}).
$$
\end{lemma}

\begin{proof}
The description of $j^{-1}$ and $j_!$ comes from the description
of those functors in
Lemma \ref{lemma-localize-topos}.
The equality of functors
$j_{\mathcal{G}!} = j_{\mathcal{F}!} \circ j_!$ is clear
from the description of these functors (as forgetful functors).
By adjointness we also obtain the equalities
$j_\mathcal{G}^{-1} = j^{-1} \circ j_\mathcal{F}^{-1}$, and
$j_{\mathcal{G}, *} = j_{\mathcal{F}, *} \circ j_*$.
\end{proof}

\begin{lemma}
\label{lemma-relocalize-compare}
Assume $\mathcal{C}$ and $s : \mathcal{G} \to \mathcal{F}$ are as in
Lemma \ref{lemma-relocalize-topos}.
If $\mathcal{G} = h_V^\#$ and $\mathcal{F} = h_U^\#$ and
$s : \mathcal{G} \to \mathcal{F}$ comes from a morphism $V \to U$
of $\mathcal{C}$ then the diagram in
Lemma \ref{lemma-relocalize-topos}
is identified with
diagram (\ref{equation-relocalize})
via the identifications
$\Sh(\mathcal{C}/V) = \Sh(\mathcal{C})/h_V^\#$
and
$\Sh(\mathcal{C}/U) = \Sh(\mathcal{C})/h_U^\#$
of
Lemma \ref{lemma-essential-image-j-shriek}.
\end{lemma}

\begin{proof}
This is true because the descriptions of $j^{-1}$ agree.
See
Lemma \ref{lemma-relocalize-explicit}
and
Lemma \ref{lemma-relocalize-topos}.
\end{proof}






\section{Localization and morphisms of topoi}
\label{section-localize-morphisms-topoi}

\noindent
This section is the analogue of
Section \ref{section-localize-morphisms}
for morphisms of topoi.

\begin{lemma}
\label{lemma-localize-morphism-topoi}
Let $f : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$
be a morphism of topoi. Let $\mathcal{G}$ be a sheaf on $\mathcal{D}$.
Set $\mathcal{F} = f^{-1}\mathcal{G}$. Then there exists
a commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{C})/\mathcal{F} \ar[r]_{j_\mathcal{F}} \ar[d]_{f'} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D})/\mathcal{G} \ar[r]^{j_\mathcal{G}} &
\Sh(\mathcal{D}).
}
$$
The morphism $f'$ is characterized by the property that
$$
(f')^{-1}(\mathcal{H} \xrightarrow{\varphi} \mathcal{G})
=
(f^{-1}\mathcal{H} \xrightarrow{f^{-1}\varphi} \mathcal{F})
$$
and we have $f'_*j_\mathcal{F}^{-1} = j_\mathcal{G}^{-1}f_*$.
\end{lemma}

\begin{proof}
Since the statement is about topoi and does not refer to the underlying
sites we may change sites at will. Hence by the discussion in
Remark \ref{remark-morphism-topoi-comes-from-morphism-sites}
we may assume that $f$ is given by a continuous functor
$u : \mathcal{D} \to \mathcal{C}$ satisfying the assumptions of
Proposition \ref{proposition-get-morphism}
between sites having all finite limits and subcanonical topologies,
and such that $\mathcal{G} = h_V$ for some object $V$ of
$\mathcal{D}$. Then $\mathcal{F} = f^{-1}h_V = h_{u(V)}$ by
Lemma \ref{lemma-pullback-representable-sheaf}.
By
Lemma \ref{lemma-localize-morphism}
we obtain a commutative diagram of morphisms of topoi
$$
\xymatrix{
\Sh(\mathcal{C}/U) \ar[r]_{j_U} \ar[d]_{f'} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D}/V) \ar[r]^{j_V} &
\Sh(\mathcal{D}),
}
$$
and we have $f'_*j_U^{-1} = j_V^{-1}f_*$. By
Lemma \ref{lemma-localize-compare}
we may identify $j_\mathcal{F}$ and $j_U$
and $j_\mathcal{G}$ and $j_V$. The description of $(f')^{-1}$
is given in
Lemma \ref{lemma-localize-morphism}.
\end{proof}

\begin{lemma}
\label{lemma-localize-morphism-compare}
Let $f : \mathcal{C} \to \mathcal{D}$ be a morphism of sites given
by the continuous functor $u : \mathcal{D} \to \mathcal{C}$.
Let $V$ be an object of $\mathcal{D}$. Set $U = u(V)$.
Set $\mathcal{G} = h_V^\#$, and
$\mathcal{F} = h_U^\# = f^{-1}h_V^\#$ (see
Lemma \ref{lemma-pullback-representable-sheaf}).
Then the diagram of morphisms of topoi of
Lemma \ref{lemma-localize-morphism-topoi}
agrees with the diagram of morphisms of topoi of
Lemma \ref{lemma-localize-morphism}
via the identifications $j_\mathcal{F}= j_U$
and $j_\mathcal{G} = j_V$ of
Lemma \ref{lemma-localize-compare}.
\end{lemma}

\begin{proof}
This is not a complete triviality as the choice of morphism of sites
giving rise to $f$ made in the proof of
Lemma \ref{lemma-localize-morphism-topoi}
may be different from the morphisms of sites given to us in the lemma.
But in both cases the functor $(f')^{-1}$ is described by the same
rule. Hence they agree and the associated morphism of topoi is the same.
Some details omitted.
\end{proof}

\begin{lemma}
\label{lemma-relocalize-morphism-topoi}
Let $f : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$
be a morphism of topoi.
Let $\mathcal{G} \in \Sh(\mathcal{D})$,
$\mathcal{F} \in \Sh(\mathcal{C})$
and $s : \mathcal{F} \to f^{-1}\mathcal{G}$ a morphism of sheaves.
There exists a commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{C})/\mathcal{F} \ar[r]_{j_\mathcal{F}} \ar[d]_{f_s} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D})/\mathcal{G} \ar[r]^{j_\mathcal{G}} &
\Sh(\mathcal{D}).
}
$$
We have $f_s = f' \circ j_{\mathcal{F}/f^{-1}\mathcal{G}}$ where
$f' :
\Sh(\mathcal{C})/f^{-1}\mathcal{G}
\to
\Sh(\mathcal{D})/\mathcal{F}$
is as in
Lemma \ref{lemma-localize-morphism-topoi}
and
$j_{\mathcal{F}/f^{-1}\mathcal{G}} :
\Sh(\mathcal{C})/\mathcal{F}
\to
\Sh(\mathcal{C})/f^{-1}\mathcal{G}$
is as in
Lemma \ref{lemma-relocalize-topos}.
The functor $(f_s)^{-1}$ is described by the rule
$$
(f_s)^{-1}(\mathcal{H} \xrightarrow{\varphi} \mathcal{G})
=
(f^{-1}\mathcal{H} \times_{f^{-1}\varphi, f^{-1}\mathcal{G}, s} \mathcal{F}
\rightarrow \mathcal{F}).
$$
Finally, given any morphisms $b : \mathcal{G}' \to \mathcal{G}$,
$a : \mathcal{F}' \to \mathcal{F}$ and
$s' : \mathcal{F}' \to f^{-1}\mathcal{G}'$ such that
$$
\xymatrix{
\mathcal{F}' \ar[r]_-{s'} \ar[d]_a & f^{-1}\mathcal{G}' \ar[d]^{f^{-1}b} \\
\mathcal{F} \ar[r]^-s & f^{-1}\mathcal{G}
}
$$
commutes, then the diagram
$$
\xymatrix{
\Sh(\mathcal{C})/\mathcal{F}'
\ar[r]_{j_{\mathcal{F}'/\mathcal{F}}} \ar[d]_{f_{s'}} &
\Sh(\mathcal{C})/\mathcal{F} \ar[d]^{f_s} \\
\Sh(\mathcal{D})/\mathcal{G}' \ar[r]^{j_{\mathcal{G}'/\mathcal{G}}} &
\Sh(\mathcal{D})/\mathcal{G}.
}
$$
commutes.
\end{lemma}

\begin{proof}
The commutativity of the first square follows from the commutativity of
the diagram in
Lemma \ref{lemma-relocalize-topos}
and the commutativity of the diagram in
Lemma \ref{lemma-localize-morphism-topoi}.
The description of $f_s^{-1}$ follows on combining the descriptions
of $(f')^{-1}$ in
Lemma \ref{lemma-localize-morphism-topoi}
with the description of
$(j_{\mathcal{F}/f^{-1}\mathcal{G}})^{-1}$ in
Lemma \ref{lemma-relocalize-topos}.
The commutativity of the last square then follows from the
equality
$$
f^{-1}\mathcal{H} \times_{f^{-1}\mathcal{G}, s} \mathcal{F}
\times_\mathcal{F} \mathcal{F}'
=
f^{-1}(\mathcal{H} \times_\mathcal{G} \mathcal{G}')
\times_{f^{-1}\mathcal{G}', s'} \mathcal{F}'
$$
which is formal.
\end{proof}

\begin{lemma}
\label{lemma-relocalize-morphism-compare}
Let $f : \mathcal{C} \to \mathcal{D}$ be a morphism of sites given
by the continuous functor $u : \mathcal{D} \to \mathcal{C}$.
Let $V$ be an object of $\mathcal{D}$. Let $c : U \to u(V)$ be a morphism.
Set $\mathcal{G} = h_V^\#$ and $\mathcal{F} = h_U^\# = f^{-1}h_V^\#$.
Let $s : \mathcal{F} \to f^{-1}\mathcal{G}$ be the map induced by $c$.
Then the diagram of morphisms of topoi of
Lemma \ref{lemma-relocalize-morphism}
agrees with the diagram of morphisms of topoi of
Lemma \ref{lemma-relocalize-morphism-topoi}
via the identifications $j_\mathcal{F} = j_U$
and $j_\mathcal{G} = j_V$ of
Lemma \ref{lemma-localize-compare}.
\end{lemma}

\begin{proof}
This follows on combining
Lemmas \ref{lemma-relocalize-compare} and
\ref{lemma-localize-morphism-compare}.
\end{proof}


















\section{Points}
\label{section-points}

\begin{definition}
\label{definition-point-topos}
Let $\mathcal{C}$ be a site.
A {\it point of the topos $\Sh(\mathcal{C})$}
is a morphism of topoi $p$ from $\Sh(pt)$ to
$\Sh(\mathcal{C})$.
\end{definition}

\noindent
We will define a point of a site in terms of a functor
$u : \mathcal{C} \to \textit{Sets}$.
It will turn out later that $u$ will define a morphism of sites
which gives rise to a point of the topos associated to $\mathcal{C}$, see
Lemma \ref{lemma-site-point-morphism}.

\medskip\noindent
Let $\mathcal{C}$ be a site. Let $p = u$ be
a functor $u : \mathcal{C} \to \textit{Sets}$.
This curious language is introduced because it
seems funny to talk about neighbourhoods of functors;
so we think of a ``point'' $p$ as a geometric thing which
is given by a categorical datum, namely the functor $u$.
The fact that $p$ is actually equal to $u$ does not matter.
A {\it neighbourhood} of $p$ is a pair $(U, x)$ with
$U \in \Ob(\mathcal{C})$ and $x \in u(U)$.
A {\it morphism of neighbourhoods} $(V, y) \to (U, x)$
is given by a morphism $\alpha :V \to U$ of $\mathcal{C}$
such that $u(\alpha)(y) = x$. Note that the category of
neighbourhoods isn't a ``big'' category.

\medskip\noindent
We define the {\it stalk} of a presheaf $\mathcal{F}$ at $p$ as
\begin{equation}
\label{equation-stalk}
\mathcal{F}_p = \colim_{\{(U, x)\}^{opp}} \mathcal{F}(U).
\end{equation}
The colimit is over the opposite of the category of
neighbourhoods of $p$. In other words, an element of
$\mathcal{F}_p$ is given by a triple $(U, x, s)$, where
$(U, x)$ is a neighbourhood of $p$ and $s \in \mathcal{F}(U)$. Equality
of triples is the equivalence relation generated by
$(U, x, s) \sim (V, y, \alpha^*s)$ when $\alpha$ is as above.

\medskip\noindent
Note that if $\varphi : \mathcal{F} \to \mathcal{G}$ is a morphism
of presheaves of sets, then we get a canonical map of stalks
$\varphi_p : \mathcal{F}_p \to \mathcal{G}_p$. Thus we obtain
a {\it stalk functor}
$$
\textit{PSh}(\mathcal{C}) \longrightarrow \textit{Sets}, \quad
\mathcal{F} \longmapsto \mathcal{F}_p.
$$
We have defined the stalk functor using any functor
$p = u : \mathcal{C} \to \textit{Sets}$. No conditions are
necessary for the definition to work\footnote{One should try to
avoid the case where $u(U) = \emptyset$ for all $U$.}. On the other hand,
it is probably better not to use this notion unless $p$
actually is a point (see definition below), since in general
the stalk functor does not have good properties.

\begin{definition}
\label{definition-point}
Let $\mathcal{C}$ be a site. A {\it point $p$ of the site
$\mathcal{C}$} is given by a functor $u : \mathcal{C}
\to \textit{Sets}$ such that
\begin{enumerate}
\item For every covering $\{U_i \to U\}$ of $\mathcal{C}$ the map
$\coprod u(U_i) \to u(U)$ is surjective.
\item For every covering $\{U_i \to U\}$ of $\mathcal{C}$ and
every morphism $V \to U$ the maps
$u(U_i \times_U V) \to u(U_i) \times_{u(U)} u(V)$ are bijective.
\item The stalk functor $\Sh(\mathcal{C}) \to \textit{Sets}$,
$\mathcal{F} \mapsto \mathcal{F}_p$ is left exact.
\end{enumerate}
\end{definition}

\noindent
The conditions should be familiar since they are modeled after those of
Definitions \ref{definition-continuous} and
\ref{definition-morphism-sites}.
Note that (3) implies that $*_p = \{*\}$, see
Example \ref{example-singleton-sheaf}. Hence $u(U) \not = \emptyset$
for at least some $U$ (because the empty colimit produces the
empty set). We will show below (Lemma \ref{lemma-point-site-topos})
that this does give rise
to a point of the topos $\Sh(\mathcal{C})$.
Before we do so, we prove some lemmas for general functors $u$.

\begin{lemma}
\label{lemma-points-recover}
Let $\mathcal{C}$ be a site.
Let $p = u : \mathcal{C} \to \textit{Sets}$ be a functor.
There are functorial isomorphisms
$(h_U)_p = u(U)$ for $U \in \Ob(\mathcal{C})$.
\end{lemma}

\begin{proof}
An element of $(h_U)_p$ is given by a triple $(V, y, f)$,
where $V \in \Ob(\mathcal{C})$, $y\in u(V)$ and
$f \in h_U(V) = \Mor_\mathcal{C}(V, U)$.
Two such $(V, y, f)$, $(V', y', f')$ determine the same object if
there exists a morphism $\phi : V \to V'$ such that
$u(\phi)(y) = y'$ and $f' \circ \phi = f$, and in general you have
to take chains of identities like this to get the correct equivalence
relation. In any case, every $(V, y, f)$ is equivalent to
the element $(U, u(f)(y), \text{id}_U)$. If $\phi$ exists as above,
then the triples $(V, y, f)$, $(V', y', f')$ determine the same triple
$(U, u(f)(y), \text{id}_U) = (U, u(f')(y'), \text{id}_U)$.
This proves that the map
$u(U) \to (h_U)_p$, $x \mapsto \text{class of }(U, x, \text{id}_U)$
is bijective.
\end{proof}

\noindent
Let $\mathcal{C}$ be a site. Let $p = u : \mathcal{C} \to \textit{Sets}$
be a functor. In analogy with the constructions in
Section \ref{section-functoriality-PSh}
given a set $E$ we define a presheaf $u^pE$ by the rule
\begin{equation}
\label{equation-skyscraper}
U
\longmapsto
u^pE(U) = \Mor_{\textit{Sets}}(u(U), E) = \text{Map}(u(U), E).
\end{equation}
This defines a functor
$u^p : \textit{Sets} \to \textit{PSh}(\mathcal{C})$, $E \mapsto u^pE$.

\begin{lemma}
\label{lemma-adjoint-point-push-stalk}
For any functor $u : \mathcal{C} \to \textit{Sets}$.
The functor $u^p$ is a right adjoint to the stalk functor
on presheaves.
\end{lemma}

\begin{proof}
Let $\mathcal{F}$ be a presheaf on $\mathcal{C}$.
Let $E$ be a set. A morphism $\mathcal{F} \to u^pE$
is given by a compatible system of maps
$\mathcal{F}(U) \to \text{Map}(u(U), E)$, i.e.,
a compatible system of maps $\mathcal{F}(U) \times u(U) \to E$.
And by definition of $\mathcal{F}_p$ a map $\mathcal{F}_p \to E$
is given by a rule associating with each triple $(U, x, \sigma)$
an element in $E$ such that equivalent triples map to the same element, see
discussion surrounding
Equation (\ref{equation-stalk}).
This also means a compatible system of maps $\mathcal{F}(U) \times u(U) \to E$.
\end{proof}

\noindent
In analogy with Section \ref{section-continuous-functors}
we have the following lemma.

\begin{lemma}
\label{lemma-point-pushforward-sheaf}
Let $\mathcal{C}$ be a site. Let $p = u : \mathcal{C} \to \textit{Sets}$
be a functor. Suppose that for every covering $\{U_i \to U\}$ of $\mathcal{C}$
\begin{enumerate}
\item the map $\coprod u(U_i) \to u(U)$ is surjective, and
\item the maps
$u(U_i \times_U U_j) \to u(U_i) \times_{u(U)} u(U_j)$ are surjective.
\end{enumerate}
Then we have
\begin{enumerate}
\item the presheaf $u^pE$ is a sheaf for all sets $E$, denote it $u^sE$,
\item the stalk functor $\Sh(\mathcal{C}) \to \textit{Sets}$
and the functor $u^s: \textit{Sets} \to \Sh(\mathcal{C})$ are
adjoint, and
\item we have $\mathcal{F}_p = \mathcal{F}^\#_p$
for every presheaf of sets $\mathcal{F}$.
\end{enumerate}
\end{lemma}

\begin{proof}
The first assertion is immediate from the definition of a sheaf, assumptions
(1) and (2), and the definition of $u^pE$. The second is a restatement of the
adjointness of $u^p$ and the stalk functor
(Lemma \ref{lemma-adjoint-point-push-stalk}) restricted to sheaves.
The third assertion follows as, for any set $E$, we have
$$
\text{Map}(\mathcal{F}_p, E) =
\Mor_{\textit{PSh}(\mathcal{C})}(\mathcal{F}, u^pE) =
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}^\#, u^sE) =
\text{Map}(\mathcal{F}^\#_p, E)
$$
by the adjointness property of sheafification.
\end{proof}

\noindent
In particular Lemma \ref{lemma-point-pushforward-sheaf}
holds when $p = u$ is a point. In this case we think of the
sheaf $u^sE$ as the ``skyscraper'' sheaf with value $E$ at $p$.

\begin{definition}
\label{definition-pushforward-point}
Let $p$ be a point of the site $\mathcal{C}$ given by the functor $u$.
For a set $E$ we define $p_*E = u^sE$ the sheaf
described in Lemma \ref{lemma-point-pushforward-sheaf} above.
We sometimes call this a {\it skyscraper sheaf}.
\end{definition}

\noindent
In particular we have the following adjointness property
of skyscraper sheaves and stalks:
$$
\Mor_{\Sh(\mathcal{C})}(\mathcal{F}, p_*E)
=
\text{Map}(\mathcal{F}_p, E)
$$
This motivates the notation $p^{-1}\mathcal{F} = \mathcal{F}_p$
which we will sometimes use.

\begin{lemma}
\label{lemma-point-site-topos}
Let $\mathcal{C}$ be a site.
\begin{enumerate}
\item Let $p$ be a point of the site $\mathcal{C}$.
Then the pair of functors $(p_*, p^{-1})$ introduced
above define a morphism of topoi
$\Sh(pt) \to \Sh(\mathcal{C})$.
\item Let $p = (p_*, p^{-1})$
be a point of the topos $\Sh(\mathcal{C})$.
Then the functor $u : U \mapsto p^{-1}(h_U^\#)$ gives
rise to a point $p'$ of the site $\mathcal{C}$
whose associated morphism of topoi $(p'_*, (p')^{-1})$
is equal to $p$.
\end{enumerate}
\end{lemma}

\begin{proof}
Proof of (1). By the above the functors $p_*$ and $p^{-1}$ are adjoint.
The functor $p^{-1}$ is required to be exact by
Definition \ref{definition-point}.
Hence the conditions imposed in
Definition \ref{definition-topos}
are all satisfied and we see that (1) holds.

\medskip\noindent
Proof of (2). Let $\{U_i \to U\}$ be a covering of $\mathcal{C}$.
Then $\coprod (h_{U_i})^\# \to h_U^\#$ is surjective, see
Lemma \ref{lemma-covering-surjective-after-sheafification}.
Since $p^{-1}$ is exact (by definition of a morphism of topoi) we conclude
that $\coprod u(U_i) \to u(U)$ is surjective.
This proves part (1) of
Definition \ref{definition-point}.
Sheafification is exact, see
Lemma \ref{lemma-sheafification-exact}.
Hence if $U \times_V W$ exists in $\mathcal{C}$, then
$$
h_{U \times_V W}^\# =  h_U^\# \times_{h_V^\#} h_W^\#
$$
and we see that $u(U \times_V W) = u(U) \times_{u(V)} u(W)$ since $p^{-1}$
is exact. This proves part (2) of
Definition \ref{definition-point}.
Let $p' = u$, and let $\mathcal{F}_{p'}$ be the stalk functor
defined by Equation (\ref{equation-stalk}) using $u$. There is
a canonical comparison map
$c : \mathcal{F}_{p'} \to \mathcal{F}_p = p^{-1}\mathcal{F}$.
Namely, given a triple $(U, x, \sigma)$ representing an element $\xi$
of $\mathcal{F}_{p'}$ we think of $\sigma$ as a map
$\sigma : h_U^\# \to \mathcal{F}$ and we can set
$c(\xi) = p^{-1}(\sigma)(x)$ since $x \in u(U) = p^{-1}(h_U^\#)$. By
Lemma \ref{lemma-points-recover}
we see that $(h_U)_{p'} = u(U)$. Since conditions (1) and (2) of
Definition \ref{definition-point}
hold for $p'$ we also have $(h_U^\#)_{p'} = (h_U)_{p'}$ by
Lemma \ref{lemma-point-pushforward-sheaf}.
Hence we have
$$
(h_U^\#)_{p'} = (h_U)_{p'} = u(U) = p^{-1}(h_U^\#)
$$
We claim this bijection equals the comparison map
$c : (h_U^\#)_{p'} \to p^{-1}(h_U^\#)$ (verification omitted).
Any sheaf on $\mathcal{C}$ is a coequalizer of maps
of coproducts of sheaves of the form $h_U^\#$, see
Lemma \ref{lemma-sheaf-coequalizer-representable}.
The stalk functor $\mathcal{F} \mapsto \mathcal{F}_{p'}$ and
the functor $p^{-1}$ commute with arbitrary colimits (as they
are both left adjoints).
We conclude $c$ is an isomorphism for every sheaf $\mathcal{F}$.
Thus the stalk functor $\mathcal{F} \mapsto \mathcal{F}_{p'}$
is isomorphic to $p^{-1}$ and we in particular see that it is exact.
This proves condition (3) of
Definition \ref{definition-point}
holds and $p'$ is a point. The final assertion has already been shown
above, since we saw that $p^{-1} = (p')^{-1}$.
\end{proof}

\noindent
Actually a point always corresponds to a morphism of sites as we
show in the following lemma.

\begin{lemma}
\label{lemma-site-point-morphism}
Let $\mathcal{C}$ be a site. Let $p$ be a point of $\mathcal{C}$ given by
$u : \mathcal{C} \to \textit{Sets}$. Let $S_0$ be an infinite set such that
$u(U) \subset S_0$ for all $U \in \Ob(\mathcal{C})$. Let $\mathcal{S}$
be the site constructed out of the powerset $S = \mathcal{P}(S_0)$ in
Remark \ref{remark-pt-topos}.
Then
\begin{enumerate}
\item there is an equivalence
$i : \Sh(pt) \to \Sh(\mathcal{S})$,
\item the functor $u : \mathcal{C} \to \mathcal{S}$ induces a morphism of
sites $f : \mathcal{S} \to \mathcal{C}$, and
\item the composition
$$
\Sh(pt) \to
\Sh(\mathcal{S}) \to
\Sh(\mathcal{C})
$$
is the morphism of topoi $(p_*, p^{-1})$ of
Lemma \ref{lemma-point-site-topos}.
\end{enumerate}
\end{lemma}

\begin{proof}
Part (1) we saw in
Remark \ref{remark-pt-topos}.
Moreover, recall that the equivalence associates to the set $E$
the sheaf $i_*E$ on $\mathcal{S}$ defined by the rule
$V \mapsto \Mor_{\textit{Sets}}(V, E)$.
Part (2) is clear from the definition of a point of $\mathcal{C}$
(Definition \ref{definition-point})
and the definition of a morphism of sites
(Definition \ref{definition-morphism-sites}).
Finally, consider $f_*i_*E$. By construction we have
$$
f_*i_*E(U) = i_*E(u(U)) = \Mor_{\textit{Sets}}(u(U), E)
$$
which is equal to $p_*E(U)$, see
Equation (\ref{equation-skyscraper}).
This proves (3).
\end{proof}

\noindent
Contrary to what happens in the topological case it is not always
true that the stalk of the skyscraper sheaf with value $E$ is $E$.
Here is what is true in general.

\begin{lemma}
\label{lemma-stalk-skyscraper}
Let $\mathcal{C}$ be a site. Let
$p : \Sh(pt) \to \Sh(\mathcal{C})$ be a point of
the topos associated to $\mathcal{C}$.
For any set $E$ there are canonical maps
$$
E \longrightarrow (p_*E)_p \longrightarrow E
$$
whose composition is $\text{id}_E$.
\end{lemma}

\begin{proof}
There is always an adjunction map $(p_*E)_p = p^{-1}p_*E \to E$.
This map is an isomorphism when $E = \{*\}$ because $p_*$
and $p^{-1}$ are both left exact, hence transform the final
object into the final object. Hence given $e \in E$ we can consider
the map $i_e : \{*\} \to E$ which gives
$$
\xymatrix{
p^{-1}p_*\{*\} \ar[rr]_{p^{-1}p_*i_e} \ar[d]_{\cong} & & p^{-1}p_*E \ar[d] \\
\{*\} \ar[rr]^{i_e} & & E
}
$$
whence the map $E \to (p_*E)_p = p^{-1}p_*E$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-skyscraper-functor-exact}
Let $\mathcal{C}$ be a site. Let
$p : \Sh(pt) \to \Sh(\mathcal{C})$ be a point of
the topos associated to $\mathcal{C}$.
The functor $p_* : \textit{Sets} \to \Sh(\mathcal{C})$
has the following properties: It commutes with arbitrary limits,
it is left exact, it is faithful, it transforms surjections into surjections,
it commutes with coequalizers, it reflects injections, it reflects
surjections, and it reflects isomorphisms.
\end{lemma}

\begin{proof}
Because $p_*$ is a right adjoint it commutes with arbitrary limits and
it is left exact. The fact that $p^{-1}p_*E \to E$ is a canonically
split surjection implies that $p_*$ is faithful, reflects injections,
reflects surjections, and reflects isomorphisms. By
Lemma \ref{lemma-point-site-topos}
we may assume that $p$ comes from a point $u : \mathcal{C} \to \textit{Sets}$
of the underlying site $\mathcal{C}$. In this case the sheaf $p_*E$ is given by
$$
p_*E(U) = \Mor_{\textit{Sets}}(u(U), E)
$$
see Equation (\ref{equation-skyscraper}) and
Definition \ref{definition-pushforward-point}.
It follows immediately from this formula that $p_*$ transforms
surjections into surjections and coequalizers into coequalizers.
\end{proof}






\section{Constructing points}
\label{section-construct-points}

\noindent
In this section we give criteria for when a functor
from a site to the category of sets defines a point of that site.

\begin{lemma}
\label{lemma-neighbourhoods-cofiltered}
Let $\mathcal{C}$ be a site. Let $p = u : \mathcal{C} \to \textit{Sets}$
be a functor. If the category of neighbourhoods of $p$ is
cofiltered, then the stalk functor (\ref{equation-stalk})
is left exact.
\end{lemma}

\begin{proof}
Let $\mathcal{I} \to \Sh(\mathcal{C})$,
$i \mapsto \mathcal{F}_i$ be a finite diagram of sheaves.
We have to show that the stalk of the limit of this
system agrees with the limit of the stalks.
Let $\mathcal{F}$ be the limit of the system as a {\it presheaf}.
According to Lemma \ref{lemma-limit-sheaf} this is a sheaf and
it is the limit in the category of sheaves.
Hence we have to show that
$\mathcal{F}_p = \lim_\mathcal{I} \mathcal{F}_{i, p}$.
Recall also that $\mathcal{F}$ has a simple description, see
Section \ref{section-limits-colimits-PSh}. Thus we have to show that
$$
\lim_i \colim_{\{(U, x)\}^{opp}} \mathcal{F}_i(U)
=
\colim_{\{(U, x)\}^{opp}} \lim_i \mathcal{F}_i(U).
$$
This holds, by Categories, Lemma \ref{categories-lemma-directed-commutes},
because the opposite of the category of neighbourhoods is filtered
by assumption.
\end{proof}

\begin{lemma}
\label{lemma-neighbourhoods-directed}
Let $\mathcal{C}$ be a site. Assume that $\mathcal{C}$ has
a final object $X$ and fibred products.
Let $p = u : \mathcal{C} \to \textit{Sets}$ be a functor such that
\begin{enumerate}
\item $u(X)$ is a singleton set, and
\item for every pair of morphisms $U \to W$ and $V \to W$ with
the same target the map
$u(U \times_W V) \to u(U) \times_{u(W)} u(V)$ is bijective.
\end{enumerate}
Then the the category of neighbourhoods of $p$ is cofiltered
and consequently the stalk functor $\Sh(\mathcal{C}) \to \textit{Sets}$,
$\mathcal{F} \to \mathcal{F}_p$ commutes with finite limits.
\end{lemma}

\begin{proof}
Please note the analogy with Lemma \ref{lemma-directed}.
The assumptions on $\mathcal{C}$ imply that $\mathcal{C}$ has finite limits.
See Categories, Lemma \ref{categories-lemma-finite-limits-exist}.
Assumption (1) implies that the category of neighbourhoods
is nonempty. Suppose $(U, x)$ and $(V, y)$ are neighbourhoods.
Then
$u(U \times V) = u(U \times_X V) =
u(U) \times_{u(X)} u(V) = u(U) \times u(V)$ by (2).
Hence there exists a neighbourhood $(U \times_X V, z)$ mapping
to both $(U, x)$ and $(V, y)$.
Let $a, b : (V, y) \to (U, x)$ be two morphisms
in the category of neighbourhoods. Let $W$ be the equalizer of
$a, b : V \to U$. As in the proof of
Categories, Lemma \ref{categories-lemma-finite-limits-exist}
we may write $W$ in terms of fibre products:
$$
W = (V \times_{a, U, b} V) \times_{(pr_1, pr_2), V \times V, \Delta} V
$$
The bijectivity in (2) guarantees there exists an element $z \in u(W)$
which maps to $((y, y), y)$.
Then $(W, z) \to (V, y)$ equalizes $a, b$ as desired.
The ``consequently'' clause is Lemma \ref{lemma-neighbourhoods-cofiltered}.
\end{proof}

\begin{proposition}
\label{proposition-point-limits}
Let $\mathcal{C}$ be a site. Assume that finite limits exist
in $\mathcal{C}$. (I.e., $\mathcal{C}$ has fibre products, and a
final object.) A point $p$ of such a site $\mathcal{C}$
is given by a functor $u : \mathcal{C} \to \textit{Sets}$ such that
\begin{enumerate}
\item $u$ commutes with finite limits, and
\item if $\{U_i \to U\}$ is a covering, then
$\coprod_i u(U_i) \to u(U)$ is surjective.
\end{enumerate}
\end{proposition}

\begin{proof}
Suppose first that $p$ is a point (Definition \ref{definition-point})
given by a functor $u$. Condition (2) is satisfied directly from
the definition of a point. By Lemma \ref{lemma-points-recover}
we have $(h_U)_p = u(U)$. By Lemma \ref{lemma-point-pushforward-sheaf}
we have $(h_U^\#)_p = (h_U)_p$. Thus we see that $u$
is equal to the composition of functors
$$
\mathcal{C} \xrightarrow{h}
\textit{PSh}(\mathcal{C}) \xrightarrow{{}^\#}
\Sh(\mathcal{C}) \xrightarrow{()_p}
\textit{Sets}
$$
Each of these functors is left exact, and hence we see $u$ satisfies (1).

\medskip\noindent
Conversely, suppose that $u$ satisfies (1) and (2).
In this case we immediately see that $u$ satisfies the first two
conditions of Definition \ref{definition-point}. And its
stalk functor is exact, because it is a left adjoint by
Lemma \ref{lemma-point-pushforward-sheaf} and it commutes
with finite limits by Lemma \ref{lemma-neighbourhoods-directed}.
\end{proof}

\begin{remark}
\label{remark-improve-proposition-points-limits}
In fact, let $\mathcal{C}$ be a site. Assume $\mathcal{C}$ has a final object
$X$  and fibre products. Let $p = u: \mathcal{C} \to \textit{Sets}$ be a
functor such that
\begin{enumerate}
\item $u(X) = \{*\}$ a singleton, and
\item for every pair of morphisms $U \to W$ and $V \to W$ with
the same target the map
$u(U \times_W V) \to u(U) \times_{u(W)} u(V)$ is surjective.
\item for every covering $\{U_i \to U\}$ the map
$\coprod u(U_i) \to u(U)$ is surjective.
\end{enumerate}
Then, in general, $p$ is {\bf not} a point of $\mathcal{C}$.
An example is the category $\mathcal{C}$ with two objects $\{U, X\}$
and exactly one non-identity arrow, namely $U \to X$. We endow $\mathcal{C}$
with the trivial topology, i.e., the only coverings are $\{U \to U\}$ and
$\{X \to X\}$. A sheaf $\mathcal{F}$ is the same thing as a presheaf and
consists of a triple $(A, B, A \to B)$: namely $A = \mathcal{F}(X)$,
$B = \mathcal{F}(U)$ and $A \to B$ is the restriction mapping corresponding
to $U \to X$. Note that $U \times_X U = U$ so fibre products exist.
Consider the functor $u = p$ with $u(X) = \{*\}$ and $u(U) = \{*_1, *_2\}$.
This satisfies (1), (2), and (3), but the corresponding stalk functor
(\ref{equation-stalk}) is the functor
$$
(A, B, A \to B) \longmapsto B \amalg_A B
$$
which isn't exact. Namely, consider
$(\emptyset, \{1\}, \emptyset \to \{1\}) \to (\{1\}, \{1\}, \{1\} \to \{1\})$
which is an injective map of sheaves, but is transformed into the noninjective
map of sets
$$
\{1\} \amalg \{1\} \longrightarrow \{1\} \amalg_{\{1\}} \{1\}
$$
by the stalk functor.
\end{remark}

\begin{example}
\label{example-point-topological}
Let $X$ be a topological space. Let $X_{Zar}$ be the site of
Example \ref{example-site-topological}.
Let $x \in X$ be a point. Consider the functor
$$
u : X_{Zar} \longrightarrow \textit{Sets}, \quad
U \mapsto
\left\{
\begin{matrix}
\emptyset & \text{if} & x \not \in U \\
\{*\} & \text{if} & x \in U
\end{matrix}
\right.
$$
This functor commutes with product and fibred products,
and turns coverings into surjective families of maps.
Hence we obtain a point $p$ of the site $X_{Zar}$.
It is immediately verified that the stalk functor
agrees with the stalk at $x$ defined in
Sheaves, Section
\ref{sheaves-section-stalks}.
\end{example}

\begin{example}
\label{example-point-topology}
Let $X$ be a topological space. What are the points of the topos
$\Sh(X)$? To see this, let $X_{Zar}$ be the site of
Example \ref{example-site-topological}.
By
Lemma \ref{lemma-point-site-topos}
a point of $\Sh(X)$ corresponds to a point of this site.
Let $p$ be a point of the site $X_{Zar}$ given by the functor
$u : X_{Zar} \to \textit{Sets}$. We are going to use the
characterization of such a $u$ in
Proposition \ref{proposition-point-limits}.
This implies immediately that $u(\emptyset) = \emptyset$ and
$u(U \cap V) = u(U) \times u(V)$. In particular we have
$u(U) = u(U) \times u(U)$ via the diagonal map which implies that $u(U)$
is either a singleton or empty. Moreover, if $U = \bigcup U_i$ is an
open covering then
$$
u(U) = \emptyset \Rightarrow \forall i, \ u(U_i) = \emptyset
\quad\text{and}\quad
u(U) \not = \emptyset \Rightarrow \exists i, \ u(U_i) \not = \emptyset.
$$
We conclude that there is a unique largest open $W \subset X$ with
$u(W) = \emptyset$, namely the union of all the opens $U$ with
$u(U) = \emptyset$. Let $Z = X \setminus W$. If $Z = Z_1 \cup Z_2$ with
$Z_i \subset Z$ closed, then $W = (X \setminus Z_1) \cap (X \setminus Z_2)$
so $\emptyset = u(W) = u(X \setminus Z_1) \times u(X \setminus Z_2)$
and we conclude that $u(X \setminus Z_1) = \emptyset$ or that
$u(X \setminus Z_2) = \emptyset$. This means that $X \setminus Z_1 = W$
or that $X \setminus Z_2 = W$. In other words, $Z$ is irreducible.
Now we see that $u$ is described by the rule
$$
u : X_{Zar} \longrightarrow \textit{Sets}, \quad
U \mapsto
\left\{
\begin{matrix}
\emptyset & \text{if} & Z \cap U = \emptyset \\
\{*\} & \text{if} & Z \cap U \not = \emptyset
\end{matrix}
\right.
$$
Note that for any irreducible closed $Z \subset X$ this
functor satisfies assumptions (1), (2) of
Proposition \ref{proposition-point-limits}
and hence defines a point. In other words we see that points of
the site $X_{Zar}$ are in one-to-one correspondence with
irreducible closed subsets of $X$. In particular, if $X$ is
a sober topological space, then points of $X_{Zar}$ and
points of $X$ are in one to one correspondence, see
Example \ref{example-point-topological}.
\end{example}

\begin{example}
\label{example-point-G-sets}
Consider the site $\mathcal{T}_G$ described in
Example \ref{example-site-on-group} and
Section \ref{section-example-sheaf-G-sets}.
The forgetful functor $u : \mathcal{T}_G \to \textit{Sets}$
commutes with products and fibred products and turns
coverings into surjective families. Hence it defines a point
of $\mathcal{T}_G$. We identify $\Sh(\mathcal{T}_G)$
and $G\textit{-Sets}$. The stalk functor
$$
p^{-1} :
\Sh(\mathcal{T}_G) = G\textit{-Sets}
\longrightarrow
\textit{Sets}
$$
is the forgetful functor. The pushforward $p_*$ is the
functor
$$
\textit{Sets}
\longrightarrow
\Sh(\mathcal{T}_G) = G\textit{-Sets}
$$
which maps a set $S$ to the $G$-set $\text{Map}(G, S)$ with
action $g \cdot \psi = \psi \circ R_g$ where $R_g$ is right
multiplication. In particular we have
$p^{-1}p_*S = \text{Map}(G, S)$ as a set and the maps
$S \to \text{Map}(G, S) \to S$ of
Lemma \ref{lemma-stalk-skyscraper}
are the obvious ones.
\end{example}

\begin{example}
\label{example-indiscrete-points}
Let $\mathcal{C}$ be a category endowed with the chaotic topology
(Example \ref{example-indiscrete}). For every object $U_0$ of $\mathcal{C}$
the functor $u : U \mapsto \Mor_\mathcal{C}(U_0, U)$ defines a point
$p$ of $\mathcal{C}$. Namely, conditions (1) and (2) of
Definition \ref{definition-point} are immediate as the only coverings
are given by identity maps. Condition (2) holds because
$\mathcal{F}_p = \mathcal{F}(U_0)$ and since the topology is discrete
taking sections over $U_0$ is an exact functor.
\end{example}





\section{Points and morphisms of topoi}
\label{section-functorial-points}

\noindent
In this section we make a few remarks about points and morphisms
of topoi.

\begin{lemma}
\label{lemma-point-functor}
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor. Let
$v : \mathcal{D} \to \textit{Sets}$ be a functor and set
$w = v \circ u$. Denote $q$, resp., $p$ the stalk functor
(\ref{equation-stalk}) associated to $v$, resp.\ $w$.
Then $(u_p\mathcal{F})_q = \mathcal{F}_p$ functorially in the
presheaf $\mathcal{F}$ on $\mathcal{C}$.
\end{lemma}

\begin{proof}
This is a simple categorical fact. We have
\begin{align*}
(u_p\mathcal{F})_q
& =
\colim_{(V, y)} \colim_{U, \phi : V \to u(U)} \mathcal{F}(U) \\
& = \colim_{(V, y, U, \phi : V \to u(U))} \mathcal{F}(U) \\
& = \colim_{(U, x)} \mathcal{F}(U) \\
& = \mathcal{F}_p
\end{align*}
The first equality holds by the definition of $u_p$ and the
definition of the stalk functor. Observe that $y \in v(V)$.
In the second equality we simply combine colimits.
To see the third equality we apply
Categories, Lemma \ref{categories-lemma-colimit-constant-connected-fibers}
to the functor $F$ of diagram categories defined by the rule
$$
F((V, y, U, \phi : V \to u(U))) = (U, v(\phi)(y)).
$$
This makes sense because $w(U) = v(u(U))$. Let us check the hypotheses of
Categories, Lemma \ref{categories-lemma-colimit-constant-connected-fibers}.
Observe that $F$ has a right inverse, namely
$(U, x) \mapsto (u(U), x, U, \text{id} : u(U) \to u(U))$.
Again this makes sense because $x \in w(U) = v(u(U))$. On the other hand,
there is always a morphism
$$
(V, y, U, \phi : V \to u(U))
\longrightarrow
(u(U), v(\phi)(y), U, \text{id} : u(U) \to u(U))
$$
in the fibre category over $(U, x)$ which shows the fibre categories
are connected. The fourth and final equality is clear.
\end{proof}

\begin{lemma}
\label{lemma-point-morphism-sites}
\begin{slogan}
A map of sites defines a map on points, and pullback respects stalks.
\end{slogan}
Let $f : \mathcal{D} \to \mathcal{C}$ be a morphism of sites
given by a continuous functor $u : \mathcal{C} \to \mathcal{D}$.
Let $q$ be a point of $\mathcal{D}$ given by the functor
$v : \mathcal{D} \to \textit{Sets}$, see
Definition \ref{definition-point}.
Then the functor $v \circ u : \mathcal{C} \to \textit{Sets}$
defines a point $p$ of $\mathcal{C}$ and moreover there is
a canonical identification
$$
(f^{-1}\mathcal{F})_q = \mathcal{F}_p
$$
for any sheaf $\mathcal{F}$ on $\mathcal{C}$.
\end{lemma}

\begin{proof}[First proof Lemma \ref{lemma-point-morphism-sites}]
Note that since $u$ is continuous and since $v$ defines a point,
it is immediate that $v \circ u$ satisfies conditions (1) and (2) of
Definition \ref{definition-point}. Let us prove the displayed equality.
Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$. Then
$$
(f^{-1}\mathcal{F})_q = (u_s\mathcal{F})_q =
(u_p \mathcal{F})_q = \mathcal{F}_p
$$
The first equality since $f^{-1} = u_s$, the second equality
by Lemma \ref{lemma-point-pushforward-sheaf}, and the third
by Lemma \ref{lemma-point-functor}.
Hence now we see that $p$ also satisfies condition (3) of
Definition \ref{definition-point}
because it is a composition of exact functors. This finishes the proof.
\end{proof}

\begin{proof}[Second proof Lemma \ref{lemma-point-morphism-sites}]
By
Lemma \ref{lemma-site-point-morphism}
we may factor $(q_*, q^{-1})$ as
$$
\Sh(pt) \xrightarrow{i} \Sh(\mathcal{S})
\xrightarrow{h} \Sh(\mathcal{D})
$$
where the second morphism of topoi comes from a morphism of sites
$h : \mathcal{S} \to \mathcal{D}$ induced by the functor
$v : \mathcal{D} \to \mathcal{S}$ (which makes sense as
$\mathcal{S} \subset \textit{Sets}$ is a full subcategory containing
every object in the image of $v$). By
Lemma \ref{lemma-composition-morphisms-sites}
the composition $v \circ u : \mathcal{C} \to \mathcal{S}$
defines a morphism of sites $g : \mathcal{S} \to \mathcal{C}$.
In particular, the functor
$v \circ u : \mathcal{C} \to \mathcal{S}$
is continuous which by the definition of the coverings
in $\mathcal{S}$, see
Remark \ref{remark-pt-topos},
means that $v \circ u$ satisfies conditions (1) and (2) of
Definition \ref{definition-point}.
On the other hand, we see that
$$
g_*i_*E(U) = i_*E(v(u(U)) = \Mor_{\textit{Sets}}(v(u(U)), E)
$$
by the construction of $i$ in
Remark \ref{remark-pt-topos}.
Note that this is the same as the formula for
which is equal to $(v \circ u)^pE$, see
Equation (\ref{equation-skyscraper}).
By
Lemma \ref{lemma-point-pushforward-sheaf}
the functor $g_*i_* = (v \circ u)^p = (v \circ u)^s$
is right adjoint to the stalk functor
$\mathcal{F} \mapsto \mathcal{F}_q$.
Hence we see that the stalk functor $p^{-1}$ is canonically
isomorphic to $i^{-1} \circ g^{-1}$. Hence it is exact and
we conclude that $p$ is a point. Finally, as we have
$g = f \circ h$ by construction we see that
$p^{-1} = i^{-1} \circ h^{-1} \circ f^{-1} = q^{-1} \circ f^{-1}$,
i.e., we have the displayed formula of the lemma.
\end{proof}

\begin{lemma}
\label{lemma-point-morphism-topoi}
Let $f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$
be a morphism of topoi. Let $q : \Sh(pt) \to \Sh(\mathcal{D})$
be a point. Then $p = f \circ q$ is a point of the topos
$\Sh(\mathcal{C})$ and we have
a canonical identification
$$
(f^{-1}\mathcal{F})_q = \mathcal{F}_p
$$
for any sheaf $\mathcal{F}$ on $\mathcal{C}$.
\end{lemma}

\begin{proof}
This is immediate from the definitions and the fact that we can
compose morphisms of topoi.
\end{proof}





\section{Localization and points}
\label{section-localize-points}

\noindent
In this section we show that points of a localization $\mathcal{C}/U$
are constructed in a simple manner from the points of $\mathcal{C}$.

\begin{lemma}
\label{lemma-point-localize}
Let $\mathcal{C}$ be a site. Let $p$ be a point of $\mathcal{C}$ given by
$u : \mathcal{C} \to \textit{Sets}$. Let $U$ be an object of $\mathcal{C}$
and let $x \in u(U)$. The functor
$$
v : \mathcal{C}/U \longrightarrow \textit{Sets}, \quad
(\varphi : V \to U) \longmapsto \{y \in u(V) \mid u(\varphi)(y) = x\}
$$
defines a point $q$ of the site $\mathcal{C}/U$ such that the diagram
$$
\xymatrix{
& \Sh(pt) \ar[d]^p \ar[ld]_q \\
\Sh(\mathcal{C}/U) \ar[r]^{j_U} &
\Sh(\mathcal{C})
}
$$
commutes. In other words
$\mathcal{F}_p = (j_U^{-1}\mathcal{F})_q$ for any
sheaf on $\mathcal{C}$.
\end{lemma}

\begin{proof}
Choose $S$ and $\mathcal{S}$ as in
Lemma \ref{lemma-site-point-morphism}.
We may identify $\Sh(pt) = \Sh(\mathcal{S})$
as in that lemma, and we may write
$p = f : \Sh(\mathcal{S}) \to \Sh(\mathcal{C})$
for the morphism of topoi induced by $u$.
By
Lemma \ref{lemma-localize-morphism}
we get a commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{S}/u(U)) \ar[r]_-{j_{u(U)}} \ar[d]_{p'} &
\Sh(\mathcal{S}) \ar[d]^p \\
\Sh(\mathcal{C}/U) \ar[r]^{j_U} &
\Sh(\mathcal{C}),
}
$$
where $p'$ is given by the functor $u' : \mathcal{C}/U \to \mathcal{S}/u(U)$,
$V/U \mapsto u(V)/u(U)$.
Consider the functor $j_x : \mathcal{S} \cong \mathcal{S}/x$ obtained
by assigning to a set $E$ the set $E$ endowed with the constant map
$E \to u(U)$ with value $x$.
Then $j_x$ is a fully faithful cocontinuous functor which has a
continuous right adjoint
$v_x : (\psi : E \to u(U)) \mapsto \psi^{-1}(\{x\})$.
Note that $j_{u(U)} \circ j_x = \text{id}_\mathcal{S}$, and
$v_x \circ u' = v$.
These observations imply that we have the following commutative
diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{S}) \ar[rd]^a \ar[rdd]_q
\ar `r[rrr] `d[dd]^p [rrdd] & & & \\
& \Sh(\mathcal{S}/u(U)) \ar[r]_-{j_{u(U)}} \ar[d]^{p'} &
\Sh(\mathcal{S}) \ar[d]^p & \\
& \Sh(\mathcal{C}/U) \ar[r]^{j_U} &
\Sh(\mathcal{C}) &
}
$$
Namely:
\begin{enumerate}
\item The morphism
$a : \Sh(\mathcal{S}) \to \Sh(\mathcal{S}/u(U))$
is the morphism of topoi associated to the cocontinuous functor
$j_x$, which equals the morphism associated to the continuous
functor $v_x$, see
Lemma \ref{lemma-cocontinuous-morphism-topoi}
and
Section \ref{section-cocontinuous-adjoint}.
\item The composition $p \circ j_{u(U)} \circ a = p$ since
$j_{u(U)} \circ j_x = \text{id}_\mathcal{S}$.
\item The composition $p' \circ a$ gives a morphism of topoi.
Moreover, it is the morphism of topoi associated to the continuous
functor $v_x \circ u' = v$. Hence $v$ does indeed define a point $q$ of
$\mathcal{C}/U$ which fits into the diagram above by construction.
\end{enumerate}
This ends the proof of the lemma.
\end{proof}

\begin{lemma}
\label{lemma-points-above-point}
Let $\mathcal{C}$, $p$, $u$, $U$ be as in
Lemma \ref{lemma-point-localize}.
The construction of
Lemma \ref{lemma-point-localize}
gives a one to one correspondence between points $q$
of $\mathcal{C}/U$ lying over $p$ and elements $x$ of $u(U)$.
\end{lemma}

\begin{proof}
Let $q$ be a point of $\mathcal{C}/U$ given by the functor
$v : \mathcal{C}/U \to \textit{Sets}$ such that $j_U \circ q = p$
as morphisms of topoi. Recall that $u(V) = p^{-1}(h_V^\#)$ for any
object $V$ of $\mathcal{C}$, see
Lemma \ref{lemma-point-site-topos}.
Similarly $v(V/U) = q^{-1}(h_{V/U}^\#)$ for any object
$V/U$ of $\mathcal{C}/U$.
Consider the following two diagrams
$$
\vcenter{
\xymatrix{
\Mor_{\mathcal{C}/U}(W/U, V/U) \ar[r] \ar[d] &
\Mor_\mathcal{C}(W, V) \ar[d] \\
\Mor_{\mathcal{C}/U}(W/U, U/U) \ar[r] &
\Mor_\mathcal{C}(W, U)
}
}
\quad
\vcenter{
\xymatrix{
h_{V/U}^\# \ar[r] \ar[d] & j_U^{-1}(h_V^\#) \ar[d] \\
h_{U/U}^\# \ar[r] & j_U^{-1}(h_U^\#)
}
}
$$
The right hand diagram is the sheafification of the diagram of
presheaves on $\mathcal{C}/U$ which maps $W/U$ to the left hand
diagram of sets. (There is a small technical point to make here, namely, that
we have $(j_U^{-1}h_V)^\# = j_U^{-1}(h_V^\#)$ and similarly for $h_U$, see
Lemma \ref{lemma-technical-pu}.)
Note that the left hand diagram of sets is cartesian.
Since sheafification is exact
(Lemma \ref{lemma-sheafification-exact})
we conclude that the right hand diagram is cartesian.

\medskip\noindent
Apply the exact functor $q^{-1}$ to the right
hand diagram to get a cartesian diagram
$$
\xymatrix{
v(V/U) \ar[r] \ar[d] & u(V) \ar[d] \\
v(U/U) \ar[r] & u(U)
}
$$
of sets. Here we have used that
$q^{-1} \circ j^{-1} = p^{-1}$. Since $U/U$ is a final object of
$\mathcal{C}/U$ we see that $v(U/U)$ is a singleton. Hence the
image of $v(U/U)$ in $u(U)$ is an element $x$, and the top horizontal
map gives a bijection
$v(V/U) \to  \{y \in u(V) \mid y \mapsto x\text{ in }u(U)\}$
as desired.
\end{proof}

\begin{lemma}
\label{lemma-stalk-j-shriek}
Let $\mathcal{C}$ be a site. Let $p$ be a point of $\mathcal{C}$ given by
$u : \mathcal{C} \to \textit{Sets}$. Let $U$ be an object of $\mathcal{C}$.
For any sheaf $\mathcal{G}$ on $\mathcal{C}/U$ we have
$$
(j_{U!}\mathcal{G})_p =
\coprod\nolimits_q \mathcal{G}_q
$$
where the coproduct is over the points $q$ of $\mathcal{C}/U$
associated to elements $x \in u(U)$ as in
Lemma \ref{lemma-point-localize}.
\end{lemma}

\begin{proof}
We use the description of $j_{U!}\mathcal{G}$ as the sheaf associated
to the presheaf
$V \mapsto
\coprod\nolimits_{\varphi \in \Mor_\mathcal{C}(V, U)}
\mathcal{G}(V/_\varphi U)$
of
Lemma \ref{lemma-describe-j-shriek}.
Also, the stalk of $j_{U!}\mathcal{G}$ at $p$ is equal to the
stalk of this presheaf, see
Lemma \ref{lemma-point-pushforward-sheaf}.
Hence we see that
$$
(j_{U!}\mathcal{G})_p =
\colim_{(V, y)} \coprod\nolimits_{\varphi : V \to U} \mathcal{G}(V/_\varphi U)
$$
To each element $(V, y, \varphi, s)$ of this colimit, we can assign
$x = u(\varphi)(y) \in u(U)$. Hence we obtain
$$
(j_{U!}\mathcal{G})_p =
\coprod\nolimits_{x \in u(U)}
\colim_{(\varphi : V \to U, y), \ u(\varphi)(y) = x} \mathcal{G}(V/_\varphi U).
$$
This is equal to the expression of the lemma by our
construction of the points $q$.
\end{proof}

\begin{remark}
\label{remark-not-pushforward}
Warning: The result of
Lemma \ref{lemma-stalk-j-shriek}
has no analogue for $j_{U, *}$.
\end{remark}




\section{2-morphisms of topoi}
\label{section-2-category}

\noindent
This is a brief section concerning the notion of a $2$-morphism
of topoi.

\begin{definition}
\label{definition-2-morphism-topoi}
Let $f, g : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$
be two morphisms of topoi. A {\it 2-morphism from $f$ to $g$}
is given by a transformation of functors $t : f_* \to g_*$.
\end{definition}

\noindent
Pictorially we sometimes represent $t$ as follows:
$$
\xymatrix{
\Sh(\mathcal{C})
\rrtwocell^f_g{t}
&
&
\Sh(\mathcal{D})
}
$$
Note that since $f^{-1}$ is adjoint to $f_*$ and
$g^{-1}$ is adjoint to $g_*$ we see that $t$ induces also
a transformation of functors
$t : g^{-1} \to f^{-1}$ (usually denoted by the same symbol)
uniquely characterized by the condition that the diagram
$$
\xymatrix{
\Mor_{\Sh(\mathcal{C})}(\mathcal{G}, f_*\mathcal{F})
\ar[d]_{t \circ -} \ar@{=}[r] &
\Mor_{\Sh(\mathcal{C})}(f^{-1}\mathcal{G}, \mathcal{F})
\ar[d]^{- \circ t}
\\
\Mor_{\Sh(\mathcal{C})}(\mathcal{G}, g_*\mathcal{F})
\ar@{=}[r] &
\Mor_{\Sh(\mathcal{C})}(g^{-1}\mathcal{G}, \mathcal{F})
}
$$
commutes. Because of set theoretic difficulties (see
Remark \ref{remark-morphism-topoi-big})
we do not obtain a 2-category of topoi. But we can still define
horizontal and vertical composition and show that the axioms of a strict
2-category listed in
Categories, Section \ref{categories-section-2-categories}
hold.
Namely, vertical composition of 2-morphisms is clear (just compose
transformations of functors), composition of 1-morphisms has been
defined in
Definition \ref{definition-topos},
and horizontal composition of
$$
\xymatrix{
\Sh(\mathcal{C})
\rtwocell^f_g{t}
&
\Sh(\mathcal{D})
\rtwocell^{f'}_{g'}{s}
&
\Sh(\mathcal{E})
}
$$
is defined by the transformation of functors $s \star t$
introduced in
Categories, Definition \ref{categories-definition-horizontal-composition}.
Explicitly, $s \star t$ is given by
$$
\xymatrix{
f'_*f_*\mathcal{F}
\ar[r]^{f'_*t} &
f'_*g_*\mathcal{F}
\ar[r]^s &
g'_*g_*\mathcal{F}
}
\quad\text{or}\quad
\xymatrix{
f'_*f_*\mathcal{F}
\ar[r]^s &
g'_*f_*\mathcal{F}
\ar[r]^{g'_*t} &
g'_*g_*\mathcal{F}
}
$$
(these maps are equal). Since these definitions agree with the ones in
Categories, Section \ref{categories-section-formal-cat-cat}
it follows from
Categories, Lemma \ref{categories-lemma-properties-2-cat-cats}
that the axioms of a strict 2-category hold with these definitions.




\section{Morphisms between points}
\label{section-morphisms-points}

\begin{lemma}
\label{lemma-maps-u-points}
Let $\mathcal{C}$ be a site.
Let $u, u' : \mathcal{C} \to \textit{Sets}$ be two
functors, and let $t : u' \to u$ be a transformation of functors.
Then we obtain a canonical transformation of stalk
functors $t_{stalk} : \mathcal{F}_{p'} \to \mathcal{F}_p$
which agrees with $t$ via the identifications of
Lemma \ref{lemma-points-recover}.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-morphism-points}
Let $\mathcal{C}$ be a site. Let $p, p'$ be points of $\mathcal{C}$
given by functors $u, u' : \mathcal{C} \to \textit{Sets}$.
A {\it morphism $f : p \to p'$} is given by a transformation of
functors
$$
f_u : u' \to u.
$$
\end{definition}

\noindent
Note how the transformation of functors goes the other way.
This makes sense, as we will see later, by thinking of
the morphism $f$ as a kind of $2$-arrow pictorially as
follows:
$$
\xymatrix{
\textit{Sets}
=
\Sh(pt)
\rrtwocell^p_{p'}{f}
&
&
\Sh(\mathcal{C})
}
$$
Namely, we will see later that $f_u$ induces a canonical
transformation of functors $p_* \to p'_*$ between
the skyscraper sheaf constructions.

\medskip\noindent
This is a fairly important notion, and deserves a more complete
treatment here. List of desiderata
\begin{enumerate}
\item Describe the automorphisms of the point of $\mathcal{T}_G$
described in Example \ref{example-point-G-sets}.
\item Describe $\Mor(p, p')$ in terms of  $\Mor(p_*, p'_*)$.
\item Specialization of points in topological spaces.
Show that if $x' \in \overline{\{x\}}$ in the topological space
$X$, then there is a morphism $p \to p'$, where $p$ (resp.\ $p'$)
is the point of $X_{Zar}$ associated to $x$ (resp.\ $x'$).
\end{enumerate}




\section{Sites with enough points}
\label{section-sites-enough-points}

\begin{definition}
\label{definition-enough-points}
Let $\mathcal{C}$ be a site.
\begin{enumerate}
\item A family of points $\{p_i\}_{i\in I}$ is called {\it conservative}
if every map of sheaves $\phi : \mathcal{F} \to \mathcal{G}$
which is an isomorphism on all the fibres $\mathcal{F}_{p_i}
\to \mathcal{G}_{p_i}$ is an isomorphism.
\item  We say that $\mathcal{C}$ {\it has enough points}
if there exists a conservative family of points.
\end{enumerate}
\end{definition}

\noindent
It turns out that you can then check ``exactness'' at the stalks.

\begin{lemma}
\label{lemma-exactness-stalks}
Let $\mathcal{C}$ be a site and let $\{p_i\}_{i\in I}$ be a conservative
family of points. Then
\begin{enumerate}
\item Given any map of sheaves $\varphi : \mathcal{F} \to \mathcal{G}$
we have $\forall i, \varphi_{p_i}$ injective implies $\varphi$ injective.
\item Given any map of sheaves $\varphi : \mathcal{F} \to \mathcal{G}$
we have $\forall i, \varphi_{p_i}$ surjective implies $\varphi$ surjective.
\item Given any pair of maps of sheaves
$\varphi_1, \varphi_2 : \mathcal{F} \to \mathcal{G}$
we have $\forall i, \varphi_{1, p_i} = \varphi_{2, p_i}$
implies $\varphi_1 = \varphi_2$.
\item Given a finite diagram $\mathcal{G} : \mathcal{J}
\to \Sh(\mathcal{C})$, a sheaf $\mathcal{F}$ and morphisms
$q_j : \mathcal{F} \to \mathcal{G}_j$ then $(\mathcal{F}, q_j)$
is a limit of the diagram if and only if for each $i$ the stalk
$(\mathcal{F}_{p_i}, (q_j)_{p_i})$ is one.
\item Given a finite diagram $\mathcal{F} : \mathcal{J}
\to \Sh(\mathcal{C})$, a sheaf $\mathcal{G}$ and morphisms
$e_j : \mathcal{F}_j \to \mathcal{G}$ then $(\mathcal{G}, e_j)$
is a colimit of the diagram if and only if for each $i$ the stalk
$(\mathcal{G}_{p_i}, (e_j)_{p_i})$ is one.
\end{enumerate}
\end{lemma}

\begin{proof}
We will use over and over again that all the stalk functors commute
with any finite limits and colimits and hence with products, fibred
products, etc. We will also use that injective maps are the monomorphisms
and the surjective maps are the epimorphisms.
A map of sheaves $\varphi : \mathcal{F} \to \mathcal{G}$
is injective if and only if
$\mathcal{F} \to \mathcal{F} \times_\mathcal{G}\mathcal{F}$
is an isomorphism. Hence (1).
Similarly, $\varphi : \mathcal{F} \to \mathcal{G}$
is surjective if and only if
$\mathcal{G} \amalg_\mathcal{F} \mathcal{G} \to \mathcal{G}$
is an isomorphism. Hence (2).
The maps $a, b : \mathcal{F} \to \mathcal{G}$
are equal if and only if $\mathcal{F} \times_{a, \mathcal{G}, b}\mathcal{F}
\to \mathcal{F} \times \mathcal{F}$ is an isomorphism. Hence (3).
The assertions (4) and (5) follow immediately from the definitions
and the remarks at the start of this proof.
\end{proof}

\begin{lemma}
\label{lemma-enough}
Let $\mathcal{C}$ be a site and let $\{(p_i, u_i)\}_{i\in I}$ be a
family of points. The family is conservative if and only if for every
sheaf $\mathcal{F}$ and every $U\in \Ob(\mathcal{C})$ and every
pair of distinct sections $s, s' \in \mathcal{F}(U)$, $s \not = s'$ there
exists an $i$ and $x\in u_i(U)$ such that the triples
$(U, x, s)$ and $(U, x, s')$ define distinct elements of
$\mathcal{F}_{p_i}$.
\end{lemma}

\begin{proof}
Suppose that the family is conservative and that $\mathcal{F}$, $U$, and
$s, s'$ are as in the lemma. The sections $s$, $s'$ define maps
$a, a' : (h_U)^\# \to \mathcal{F}$ which are distinct. Hence, by Lemma
\ref{lemma-exactness-stalks} there is an $i$ such that $a_{p_i}
\not = a'_{p_i}$. Recall that $(h_U)^\#_{p_i} = u_i(U)$, by
Lemmas \ref{lemma-points-recover} and
\ref{lemma-point-pushforward-sheaf}.
Hence there exists an $x \in u_i(U)$ such that $a_{p_i}(x)
\not = a'_{p_i}(x)$ in $\mathcal{F}_{p_i}$.
Unwinding the definitions you see that $(U, x, s)$
and $(U, x, s')$ are as in the statement of the lemma.

\medskip\noindent
To prove the converse, assume the condition on the existence of
points of the lemma. Let $\phi : \mathcal{F} \to \mathcal{G}$
be a map of sheaves which is an isomorphism at all the stalks.
We have to show that $\phi$ is both
injective and surjective, see Lemma \ref{lemma-mono-epi-sheaves}.
Injectivity is an immediate consequence of the assumption.
To show surjectivity we have to show that
$\mathcal{G} \amalg_\mathcal{F} \mathcal{G} \to \mathcal{G}$
is an isomorphism
(Categories, Lemma \ref{categories-lemma-characterize-mono-epi}).
Since this map is clearly surjective, it suffices to check injectivity
which follows as $\mathcal{G} \amalg_\mathcal{F} \mathcal{G} \to \mathcal{G}$
is injective on all stalks by assumption.
\end{proof}

\noindent
In the following lemma the points $q_{i, x}$ are exactly all the points
of $\mathcal{C}/U$ lying over the point $p_i$ according to
Lemma \ref{lemma-points-above-point}.

\begin{lemma}
\label{lemma-localize-enough}
Let $\mathcal{C}$ be a site. Let $U$ be an object of $\mathcal{C}$.
let $\{(p_i, u_i)\}_{i\in I}$ be a family of points of $\mathcal{C}$.
For $x \in u_i(U)$ let $q_{i, x}$ be the point of $\mathcal{C}/U$
constructed in
Lemma \ref{lemma-point-localize}.
If $\{p_i\}$ is a conservative family of points, then
$\{q_{i, x}\}_{i \in I, x \in u_i(U)}$ is a conservative
family of points of $\mathcal{C}/U$.
In particular, if $\mathcal{C}$ has enough points, then so
does every localization $\mathcal{C}/U$.
\end{lemma}

\begin{proof}
We know that $j_{U!}$ induces an equivalence
$j_{U!} : \Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})/h_U^\#$, see
Lemma \ref{lemma-essential-image-j-shriek}.
Moreover, we know that
$(j_{U!}\mathcal{G})_{p_i} = \coprod_x \mathcal{G}_{q_{i, x}}$, see
Lemma \ref{lemma-stalk-j-shriek}.
Hence the result follows formally.
\end{proof}

\noindent
The following lemma tells us we can check the existence of points
locally on the site.

\begin{lemma}
\label{lemma-enough-points-local}
Let $\mathcal{C}$ be a site. Let $\{U_i\}_{i \in I}$ be a family of
objects of $\mathcal{C}$. Assume
\begin{enumerate}
\item $\coprod h_{U_i}^\# \to *$ is a surjective map of sheaves, and
\item each localization $\mathcal{C}/U_i$ has enough points.
\end{enumerate}
Then $\mathcal{C}$ has enough points.
\end{lemma}

\begin{proof}
For each $i \in I$ let $\{p_j\}_{j \in J_i}$ be a conservative
family of points of $\mathcal{C}/U_i$. For $j \in J_i$ denote
$q_j : \Sh(pt) \to \Sh(\mathcal{C})$ the composition
of $p_j$ with the localization morphism
$\Sh(\mathcal{C}/U_i) \to \Sh(\mathcal{C})$.
Then $q_j$ is a point, see
Lemma \ref{lemma-point-morphism-topoi}.
We claim that the family of points $\{q_j\}_{j \in \coprod J_i}$
is conservative.
Namely, let $\mathcal{F} \to \mathcal{G}$ be a map of sheaves
on $\mathcal{C}$ such that $\mathcal{F}_{q_j} \to \mathcal{G}_{q_j}$
is an isomorphism for all $j \in \coprod J_i$.
Let $W$ be an object of $\mathcal{C}$.
By assumption (1) there exists a covering $\{W_a \to W\}$ and
morphisms $W_a \to U_{i(a)}$.
Since $(\mathcal{F}|_{\mathcal{C}/U_{i(a)}})_{p_j} = \mathcal{F}_{q_j}$
and $(\mathcal{G}|_{\mathcal{C}/U_{i(a)}})_{p_j} = \mathcal{G}_{q_j}$ by
Lemma \ref{lemma-point-morphism-topoi}
we see that
$\mathcal{F}|_{U_{i(a)}} \to \mathcal{G}|_{U_{i(a)}}$ is an isomorphism
since the family of points $\{p_j\}_{j \in J_{i(a)}}$ is conservative.
Hence $\mathcal{F}(W_a) \to \mathcal{G}(W_a)$ is bijective for each $a$.
Similarly $\mathcal{F}(W_a \times_W W_b) \to \mathcal{G}(W_a \times_W W_b)$
is bijective for each $a, b$.
By the sheaf condition this shows that
$\mathcal{F}(W) \to \mathcal{G}(W)$ is bijective, i.e.,
$\mathcal{F} \to \mathcal{G}$ is an isomorphism.
\end{proof}

\begin{lemma}
\label{lemma-check-morphism-sites}
Let $u : \mathcal{C} \to \mathcal{D}$ be a continuous functor of sites.
Let $\{(q_i, v_i)\}_{i\in I}$ be a conservative family of points of
$\mathcal{D}$. If each functor $u_i = v_i \circ u$ defines
a point of $\mathcal{C}$,
then $u$ defines a morphism of sites $f : \mathcal{D} \to \mathcal{C}$.
\end{lemma}

\begin{proof}
Denote $p_i$ the stalk functor (\ref{equation-stalk}) on
$\textit{PSh}(\mathcal{C})$ corresponding to the functor $u_i$. We have
$$
(f^{-1}\mathcal{F})_{q_i} =
(u_s\mathcal{F})_{q_i} =
(u_p\mathcal{F})_{q_i} =
\mathcal{F}_{p_i}
$$
The first equality since $f^{-1} = u_s$, the second equality
by Lemma \ref{lemma-point-pushforward-sheaf}, and the third
by Lemma \ref{lemma-point-functor}.
Hence if $p_i$ is a point, then pulling back by $f$
and then taking stalks at $q_i$ is an exact functor.
Since the family of points $\{q_i\}$ is conservative, this
implies that $f^{-1}$ is an exact functor and we see
that $f$ is a morphism of sites by Definition \ref{definition-morphism-sites}.
\end{proof}





\section{Criterion for existence of points}
\label{section-criterion-points}

\noindent
This section corresponds to Deligne's appendix to \cite[Expos\'e VI]{SGA4}.
In fact it is almost literally the same.

\medskip\noindent
Let $\mathcal{C}$ be a site.
Suppose that $(I, \geq)$ is a directed set,
and that $(U_i, f_{ii'})$ is an inverse system over $I$, see
Categories, Definition \ref{categories-definition-system-over-poset}.
Given the data $(I, \geq, U_i, f_{ii'})$ we define
$$
u : \mathcal{C} \longrightarrow \textit{Sets}, \quad
u(V) = \colim_i \Mor_\mathcal{C}(U_i , V)
$$
Let $\mathcal{F} \mapsto \mathcal{F}_p$ be the stalk functor
associated to $u$ as in Section \ref{section-points}.
It is direct from the definition that actually
$$
\mathcal{F}_p = \colim_i \mathcal{F}(U_i)
$$
in this special case.
Note that $u$ commutes with all finite limits (I mean those that
are representable in $\mathcal{C}$) because
each of the functors $V \mapsto \Mor_\mathcal{C}(U_i , V)$
do, see Categories, Lemma \ref{categories-lemma-directed-commutes}.

\medskip\noindent
We say that a system $(I, \geq, U_i, f_{ii'})$
is a {\it refinement} of $(J, \geq, V_j, g_{jj'})$ if
$J \subset I$, the ordering on $J$ induced from that of $I$
and $V_j = U_j$, $g_{jj'} = f_{jj'}$ (in words, the inverse system
over $J$ is induced by that over $I$). Let $u$ be the functor
associated to $(I, \geq, U_i, f_{ii'})$ and let $u'$ be the
functor associated to $(J, \geq, V_j, g_{jj'})$.
This induces a transformation of functors
$$
u' \longrightarrow u
$$
simply because the colimits for $u'$ are over a subsystem
of the systems in the colimits for $u$.
In particular we get an associated transformation of
stalk functors $\mathcal{F}_{p'} \to \mathcal{F}_p$,
see Lemma \ref{lemma-maps-u-points}.

\begin{lemma}
\label{lemma-refine}
Let $\mathcal{C}$ be a site.
Let $(J, \geq, V_j, g_{jj'})$ be a system as above with associated
pair of functors $(u', p')$.
Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$.
Let $s, s' \in \mathcal{F}_{p'}$ be distinct elements.
Let $\{W_k \to W\}$ be a finite covering of $\mathcal{C}$.
Let $f \in u'(W)$.
There exists a refinement $(I, \geq, U_i, f_{ii'})$
of $(J, \geq, V_j, g_{jj'})$ such that $s, s'$ map
to distinct elements of $\mathcal{F}_p$ and that
the image of $f$ in $u(W)$ is in the image of one of
the $u(W_k)$.
\end{lemma}

\begin{proof}
There exists a $j_0 \in J$ such that $f$ is defined by $f' : V_{j_0} \to W$.
For $j \geq j_0$ we set $V_{j, k} = V_j \times_{f'\circ f_{j j_0}, W} W_k$.
Then $\{V_{j, k} \to V_j\}$ is a finite covering in the site
$\mathcal{C}$. Hence
$\mathcal{F}(V_j) \subset \prod_k \mathcal{F}(V_{j, k})$.
By Categories, Lemma \ref{categories-lemma-directed-commutes}
once again we see that
$$
\mathcal{F}_{p'} =
\colim_j \mathcal{F}(V_j)
\longrightarrow
\prod\nolimits_k \colim_j \mathcal{F}(V_{j, k})
$$
is injective. Hence there exists a $k$ such that $s$ and $s'$
have distinct image in $\colim_j \mathcal{F}(V_{j, k})$.
Let $J_0 = \{j \in J, j \geq j_0\}$ and $I = J \amalg J_0$.
We order $I$ so that no element of the second summand
is smaller than any element of the first, but otherwise
using the ordering on $J$. If $j \in I$ is in the first
summand then we use $V_j$ and if $j \in I$ is in the second
summand then we use $V_{j, k}$. We omit the definition
of the transition maps of the inverse system. By the above
it follows that $s, s'$ have distinct image in $\mathcal{F}_p$.
Moreover, the restriction of $f'$ to $V_{j, k}$ factors
through $W_k$ by construction.
\end{proof}

\begin{lemma}
\label{lemma-refine-all-at-once}
Let $\mathcal{C}$ be a site.
Let $(J, \geq, V_j, g_{jj'})$ be a system as above with associated
pair of functors $(u', p')$.
Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$.
Let $s, s' \in \mathcal{F}_{p'}$ be distinct elements.
There exists a refinement $(I, \geq, U_i, f_{ii'})$
of $(J, \geq, V_j, g_{jj'})$ such that $s, s'$ map
to distinct elements of $\mathcal{F}_p$ and such that
for every finite covering $\{W_k \to W\}$ of the site
$\mathcal{C}$, and any $f \in u'(W)$ the image of $f$ in $u(W)$
is in the image of one of the $u(W_k)$.
\end{lemma}

\begin{proof}
Let $E$ be the set of pairs $(\{W_k \to W\}, f\in u'(W))$.
Consider pairs $(E' \subset E, (I, \geq, U_i, f_{ii'}))$
such that
\begin{enumerate}
\item $(I, \geq, U_i, g_{ii'})$ is a refinement of $(J, \geq, V_j, g_{jj'})$,
\item $s, s'$ map to distinct elements of $\mathcal{F}_p$, and
\item for every pair $(\{W_k \to W\}, f\in u'(W)) \in E'$ we have that
the image of $f$ in $u(W)$ is in the image of one of the $u(W_k)$.
\end{enumerate}
We order such pairs by inclusion in the first factor and
by refinement in the second. Denote $\mathcal{S}$ the class
of all pairs $(E' \subset E, (I, \geq, U_i, f_{ii'}))$ as above.
We claim that the hypothesis of Zorn's lemma holds for $\mathcal{S}$. Namely,
suppose that $(E'_a, (I_a, \geq, U_i, f_{ii'}))_{a \in A}$
is a totally ordered subset of $\mathcal{S}$. Then we can define
$E' = \bigcup_{a \in A} E'_a$ and we can set $I = \bigcup_{a \in A} I_a$.
We claim that the corresponding pair
$(E' , (I, \geq, U_i, f_{ii'}))$ is an element of $\mathcal{S}$.
Conditions (1) and (3) are clear. For condition (2) you note
that
$$
u = \colim_{a \in A} u_a
\text{ and correspondingly }
\mathcal{F}_p = \colim_{a \in A} \mathcal{F}_{p_a}
$$
The distinctness of the images of $s, s'$ in this stalk follows
from the description of a directed colimit of sets, see
Categories, Section \ref{categories-section-directed-colimits}.
We will simply write
$(E', (I, \ldots)) = \bigcup_{a \in A}(E'_a, (I_a, \ldots))$
in this situation.

\medskip\noindent
OK, so Zorn's Lemma would apply if $\mathcal{S}$ was a set,
and this would, combined with Lemma \ref{lemma-refine} above easily prove
the lemma. It doesn't since $\mathcal{S}$ is a class. In order
to circumvent this we choose a well ordering on $E$.
For $e \in E$ set $E'_e = \{e' \in E \mid e' \leq e\}$.
By transfinite induction we construct pairs
$(E'_e, (I_e, \ldots)) \in \mathcal{S}$ such that
$e_1 \leq e_2 \Rightarrow (E'_{e_1}, (I_{e_1}, \ldots))
\leq (E'_{e_2}, (I_{e_2}, \ldots))$.
Let $e \in E$, say $e = (\{W_k \to W\}, f\in u'(W))$.
If $e$ has a predecessor $e - 1$, then we let
$(I_e, \ldots)$ be a refinement of $(I_{e - 1}, \ldots)$
as in Lemma \ref{lemma-refine} with respect to the system
$e = (\{W_k \to W\}, f\in u'(W))$.
If $e$ does not have a predecessor, then we let
$(I_e, \ldots)$ be a refinement of $\bigcup_{e' < e} (I_{e'}, \ldots)$
with respect to the system
$e = (\{W_k \to W\}, f\in u'(W))$.
Finally, the union $\bigcup_{e \in E} I_e$ will be a solution to
the problem posed in the lemma.
\end{proof}

\begin{proposition}
\label{proposition-criterion-points}
Let $\mathcal{C}$ be a site. Assume that
\begin{enumerate}
\item finite limits exist in $\mathcal{C}$, and
\item every covering $\{U_i \to U\}_{i \in I}$
has a refinement by a finite covering of $\mathcal{C}$.
\end{enumerate}
Then $\mathcal{C}$ has enough points.
\end{proposition}

\begin{proof}
We have to show that given any sheaf
$\mathcal{F}$ on $\mathcal{C}$, any $U \in \Ob(\mathcal{C})$,
and any distinct sections $s, s' \in \mathcal{F}(U)$, there exists
a point $p$ such that $s, s'$ have distinct image in
$\mathcal{F}_p$. See Lemma \ref{lemma-enough}.
Consider the system $(J, \geq, V_j, g_{jj'})$
with $J = \{1\}$, $V_1 = U$, $g_{11} = \text{id}_U$.
Apply Lemma \ref{lemma-refine-all-at-once}.
By the result of that lemma we get a system
$(I, \geq, U_i, f_{ii'})$ refining our system such
that $s_p \not = s'_p$ and such that moreover for every
finite covering $\{W_k \to W\}$ of the site $\mathcal{C}$ the map
$\coprod_k u(W_k) \to u(W)$ is surjective.
Since every covering of $\mathcal{C}$ can be refined by
a finite covering we conclude that
$\coprod_k u(W_k) \to u(W)$ is surjective for {\it any}
covering $\{W_k \to W\}$ of the site $\mathcal{C}$.
This implies that $u = p$ is a point, see
Proposition \ref{proposition-point-limits} (and the discussion
at the beginning of this section which guarantees that $u$
commutes with finite limits).
\end{proof}

\begin{lemma}
\label{lemma-criterion-points}
Let $\mathcal{C}$ be a site. Let $I$ be a set and for
$i \in I$ let $U_i$ be an object of $\mathcal{C}$ such that
\begin{enumerate}
\item $\coprod h_{U_i}$ surjects onto
the final object of $\Sh(\mathcal{C})$, and
\item $\mathcal{C}/U_i$ satisfies the hypotheses of
Proposition \ref{proposition-criterion-points}.
\end{enumerate}
Then $\mathcal{C}$ has enough points.
\end{lemma}

\begin{proof}
By assumption (2) and the proposition $\mathcal{C}/U_i$ has enough points.
The points of $\mathcal{C}/U_i$ give points of $\mathcal{C}$
via the procedure of Lemma \ref{lemma-point-morphism-sites}.
Thus it suffices to show: if $\phi : \mathcal{F} \to \mathcal{G}$
is a map of sheaves on $\mathcal{C}$ such that $\phi|_{\mathcal{C}/U_i}$
is an isomorphism for all $i$, then $\phi$ is an isomorphism.
By assumption (1) for every object $W$ of $\mathcal{C}$
there is a covering $\{W_j \to W\}_{j \in J}$
such that for $j \in J$ there is an $i \in I$ and a morphism
$f_j : W_j \to U_i$. Then the maps
$\mathcal{F}(W_j) \to \mathcal{G}(W_j)$
are bijective and similarly for
$\mathcal{F}(W_j \times_W W_{j'}) \to \mathcal{G}(W_j \times_W W_{j'})$.
The sheaf condition tells us that $\mathcal{F}(W) \to \mathcal{G}(W)$
is bijective as desired.
\end{proof}




\section{Weakly contractible objects}
\label{section-w-contractible}

\noindent
A {\it weakly contractible} object of a site is one that satisfies
the equivalent conditions of the following lemma.

\begin{lemma}
\label{lemma-w-contractible}
Let $\mathcal{C}$ be a site. Let $U$ be an object of $\mathcal{C}$.
The following conditions are equivalent
\begin{enumerate}
\item For every covering $\{U_i \to U\}$ there exists a map of
sheaves $h_U^\# \to \coprod h_{U_i}^\#$ right inverse to the sheafification
of $\coprod h_{U_i} \to h_U$.
\item For every surjection of sheaves of sets $\mathcal{F} \to \mathcal{G}$
the map $\mathcal{F}(U) \to \mathcal{G}(U)$ is surjective.
\end{enumerate}
\end{lemma}

\begin{proof}
Assume (1) and let $\mathcal{F} \to \mathcal{G}$ be a surjective map of
sheaves of sets. For $s \in \mathcal{G}(U)$ there exists a covering
$\{U_i \to U\}$ and $t_i \in \mathcal{F}(U_i)$ mapping to
$s|_{U_i}$, see Definition \ref{definition-sheaves-injective-surjective}.
Think of $t_i$ as a map $t_i : h_{U_i}^\# \to \mathcal{F}$ via
(\ref{equation-map-representable-into-sheaf}).
Then precomposing $\coprod t_i : \coprod h_{U_i}^\# \to \mathcal{F}$
with the map $h_U^\# \to \coprod h_{U_i}^\#$ we get from (1)
we obtain a section $t \in \mathcal{F}(U)$ mapping to $s$.
Thus (2) holds.

\medskip\noindent
Assume (2) holds. Let $\{U_i \to U\}$ be a covering.
Then $\coprod h_{U_i}^\# \to h_U^\#$ is surjective
(Lemma \ref{lemma-covering-surjective-after-sheafification}).
Hence by (2) there exists a section $s$ of $\coprod h_{U_i}^\#$ mapping
to the section $\text{id}_U$ of $h_U^\#$. This section corresponds to a map
$h_U^\# \to \coprod h_{U_i}^\#$ which is right inverse to the sheafification
of $\coprod h_{U_i} \to h_U$ which proves (1).
\end{proof}

\begin{definition}
\label{definition-w-contractible}
Let $\mathcal{C}$ be a site.
\begin{enumerate}
\item We say an object $U$ of $\mathcal{C}$ is {\it weakly contractible}
if the equivalent conditions of Lemma \ref{lemma-w-contractible} hold.
\item We say a site has {\it enough weakly contractible objects}
if every object $U$ of $\mathcal{C}$ has a covering $\{U_i \to U\}$
with $U_i$ weakly contractible for all $i$.
\item More generally, if $P$ is a property of objects of $\mathcal{C}$
we say that $\mathcal{C}$ has {\it enough $P$ objects} if every object $U$ of
$\mathcal{C}$ has a covering $\{U_i \to U\}$ such that $U_i$ has $P$
for all $i$.
\end{enumerate}
\end{definition}

\noindent
The small \'etale site of $\mathbf{A}^1_\mathbf{C}$ does not have
any weakly contractible objects. On the other hand, the small
pro-\'etale site of any scheme has enough contractible objects.







\section{Exactness properties of pushforward}
\label{section-pushforward}

\noindent
Let $f$ be a morphism of topoi. The functor $f_*$ in general is only
left exact. There are many additional conditions one can impose on this
functor to single out particular classes of morphisms of topoi.
We collect them here and note some of the logical dependencies.
Some parts of the following lemma are purely category theoretical (i.e.,
they do not depend on having a morphism of topoi, just having a pair
of adjoint functors is enough).

\begin{lemma}
\label{lemma-exactness-properties}
Let $f : \Sh(\mathcal{C}) \to \Sh(\mathcal{D})$ be
a morphism of topoi. Consider the following properties (on sheaves
of sets):
\begin{enumerate}
\item $f_*$ is faithful,
\item $f_*$ is fully faithful,
\item $f^{-1}f_*\mathcal{F} \to \mathcal{F}$ is surjective for
all $\mathcal{F}$ in $\Sh(\mathcal{C})$,
\item $f_*$ transforms surjections into surjections,
\item $f_*$ commutes with coequalizers,
\item $f_*$ commutes with pushouts,
\item $f^{-1}f_*\mathcal{F} \to \mathcal{F}$ is an isomorphism for
all $\mathcal{F}$ in $\Sh(\mathcal{C})$,
\item $f_*$ reflects injections,
\item $f_*$ reflects surjections,
\item $f_*$ reflects bijections, and
\item for any surjection $\mathcal{F} \to f^{-1}\mathcal{G}$ there
exists a surjection $\mathcal{G}' \to \mathcal{G}$ such that
$f^{-1}\mathcal{G}' \to f^{-1}\mathcal{G}$ factors through
$\mathcal{F} \to f^{-1}\mathcal{G}$.
\end{enumerate}
Then we have the following implications
\begin{enumerate}
\item[(a)] (2) $\Rightarrow$ (1),
\item[(b)] (3) $\Rightarrow$ (1),
\item[(c)] (7) $\Rightarrow$ (1), (2), (3), (8), (9), (10).
\item[(d)] (3) $\Leftrightarrow$ (9),
\item[(e)] (6) $\Rightarrow$ (4) and (5) $\Rightarrow$ (4),
\item[(f)] (4) $\Leftrightarrow$ (11),
\item[(g)] (9) $\Rightarrow$ (8), (10), and
\item[(h)] (2) $\Leftrightarrow$ (7).
\end{enumerate}
Picture
$$
\xymatrix{
(6) \ar@{=>}[rd] & & & & & (9) \ar@{=>}[r] \ar@{=>}[rd] & (8) \\
& (4) \ar@{<=>}[r] & (11) &
(2) \ar@{<=>}[r] &
(7) \ar@{=>}[ru] \ar@{=>}[rd] & & (10) \\
(5) \ar@{=>}[ur] & & & & & (3) \ar@{=>}[r] & (1)
}
$$
\end{lemma}

\begin{proof}
Proof of (a): This is immediate from the definitions.

\medskip\noindent
Proof of (b). Suppose that $a, b : \mathcal{F} \to \mathcal{F}'$ are
maps of sheaves on $\mathcal{C}$. If $f_*a = f_*b$, then
$f^{-1}f_*a = f^{-1}f_*b$. Consider the commutative diagram
$$
\xymatrix{
\mathcal{F} \ar@<-1ex>[r] \ar@<1ex>[r] & \mathcal{F}' \\
f^{-1}f_*\mathcal{F} \ar@<-1ex>[r] \ar@<1ex>[r] \ar[u] &
f^{-1}f_*\mathcal{F}' \ar[u]
}
$$
If the bottom two arrows are equal and the vertical arrows are surjective
then the top two arrows are equal. Hence (b) follows.

\medskip\noindent
Proof of (c). Suppose that $a : \mathcal{F} \to \mathcal{F}'$ is a
map of sheaves on $\mathcal{C}$. Consider the commutative diagram
$$
\xymatrix{
\mathcal{F} \ar[r] & \mathcal{F}' \\
f^{-1}f_*\mathcal{F} \ar[r] \ar[u] &
f^{-1}f_*\mathcal{F}' \ar[u]
}
$$
If (7) holds, then the vertical arrows are isomorphisms.
Hence if $f_*a$ is injective (resp.\ surjective, resp.\ bijective)
then the bottom arrow is injective (resp.\ surjective, resp.\ bijective) and
hence the top arrow is injective (resp.\ surjective, resp.\ bijective).
Thus we see that (7) implies (8), (9), (10). It is clear that (7) implies (3).
The implications (7) $\Rightarrow$ (2), (1) follow from (a) and (h) which
we will see below.

\medskip\noindent
Proof of (d). Assume (3). Suppose that $a : \mathcal{F} \to \mathcal{F}'$
is a map of sheaves on $\mathcal{C}$ such that $f_*a$ is surjective.
As $f^{-1}$ is exact this implies that
$f^{-1}f_*a : f^{-1}f_*\mathcal{F} \to f^{-1}f_*\mathcal{F}'$
is surjective. Combined with (3) this implies that $a$ is surjective.
This means that (9) holds.
Assume (9). Let $\mathcal{F}$ be a sheaf on $\mathcal{C}$.
We have to show that the map $f^{-1}f_*\mathcal{F} \to \mathcal{F}$ is
surjective. It suffices to show that
$f_*f^{-1}f_*\mathcal{F} \to f_*\mathcal{F}$ is surjective.
And this is true because there is a canonical map
$f_*\mathcal{F} \to f_*f^{-1}f_*\mathcal{F}$ which is a one-sided inverse.

\medskip\noindent
Proof of (e). We use
Categories, Lemma \ref{categories-lemma-characterize-mono-epi}
without further mention.
If $\mathcal{F} \to \mathcal{F}'$ is surjective then
$\mathcal{F}' \amalg_\mathcal{F} \mathcal{F}' \to \mathcal{F}'$
is an isomorphism. Hence (6) implies that
$$
f_*\mathcal{F}' \amalg_{f_*\mathcal{F}} f_*\mathcal{F}' =
f_*(\mathcal{F}' \amalg_\mathcal{F} \mathcal{F}')
\longrightarrow
f_*\mathcal{F}'
$$
is an isomorphism also. And this in turn implies that
$f_*\mathcal{F} \to f_*\mathcal{F}'$ is surjective.
Hence we see that (6) implies (4). If $\mathcal{F} \to \mathcal{F}'$
is surjective then $\mathcal{F}'$ is the coequalizer of the two
projections $\mathcal{F} \times_{\mathcal{F}'} \mathcal{F} \to \mathcal{F}$
by Lemma \ref{lemma-coequalizer-surjection}.
Hence if (5) holds, then $f_*\mathcal{F}'$ is the coequalizer of
the two projections
$$
f_*(\mathcal{F} \times_{\mathcal{F}'} \mathcal{F}) =
f_*\mathcal{F} \times_{f_*\mathcal{F}'} f_*\mathcal{F}
\longrightarrow
f_*\mathcal{F}
$$
which clearly means that $f_*\mathcal{F} \to f_*\mathcal{F}'$ is
surjective. Hence (5) implies (4) as well.

\medskip\noindent
Proof of (f). Assume (4). Let $\mathcal{F} \to f^{-1}\mathcal{G}$ be
a surjective map of sheaves on $\mathcal{C}$. By (4) we see that
$f_*\mathcal{F} \to f_*f^{-1}\mathcal{G}$ is surjective. Let
$\mathcal{G}'$ be the fibre product
$$
\xymatrix{
f_*\mathcal{F} \ar[r] & f_*f^{-1}\mathcal{G} \\
\mathcal{G}' \ar[u] \ar[r] & \mathcal{G} \ar[u]
}
$$
so that $\mathcal{G}' \to \mathcal{G}$ is surjective also. Consider
the commutative diagram
$$
\xymatrix{
\mathcal{F} \ar[r] & f^{-1}\mathcal{G} \\
f^{-1}f_*\mathcal{F} \ar[r] \ar[u] & f^{-1}f_*f^{-1}\mathcal{G} \ar[u] \\
f^{-1}\mathcal{G}' \ar[u] \ar[r] & f^{-1}\mathcal{G} \ar[u]
}
$$
and we see the required result. Conversely, assume (11).
Let $a : \mathcal{F} \to \mathcal{F}'$ be surjective map of sheaves
on $\mathcal{C}$. Consider the fibre product diagram
$$
\xymatrix{
\mathcal{F} \ar[r] & \mathcal{F}' \\
\mathcal{F}'' \ar[u] \ar[r] & f^{-1}f_*\mathcal{F}' \ar[u]
}
$$
Because the lower horizontal arrow is surjective and by (11) we can
find a surjection $\gamma : \mathcal{G}' \to f_*\mathcal{F}'$ such
that $f^{-1}\gamma$ factors through $\mathcal{F}'' \to f^{-1}f_*\mathcal{F}'$:
$$
\xymatrix{
& \mathcal{F} \ar[r] & \mathcal{F}' \\
f^{-1}\mathcal{G}' \ar[r] & \mathcal{F}'' \ar[u] \ar[r] &
f^{-1}f_*\mathcal{F}' \ar[u]
}
$$
Pushing this down using $f_*$ we get a commutative diagram
$$
\xymatrix{
& f_*\mathcal{F} \ar[r] & f_*\mathcal{F}' \\
f_*f^{-1}\mathcal{G}' \ar[r] & f_*\mathcal{F}'' \ar[u] \ar[r] &
f_*f^{-1}f_*\mathcal{F}' \ar[u] \\
\mathcal{G}' \ar[u] \ar[rr] & & f_*\mathcal{F}' \ar[u]
}
$$
which proves that (4) holds.

\medskip\noindent
Proof of (g). Assume (9). We use
Categories, Lemma \ref{categories-lemma-characterize-mono-epi}
without further mention. Let $a : \mathcal{F} \to \mathcal{F}'$ be a map
of sheaves on $\mathcal{C}$ such that $f_*a$ is injective. This means that
$f_*\mathcal{F} \to f_*\mathcal{F} \times_{f_*\mathcal{F}'} f_*\mathcal{F} =
f_*(\mathcal{F} \times_{\mathcal{F}'} \mathcal{F})$ is an isomorphism.
Thus by (9) we see that
$\mathcal{F} \to \mathcal{F} \times_{\mathcal{F}'} \mathcal{F}$ is
surjective, i.e., an isomorphism. Thus $a$ is injective, i.e., (8) holds.
Since (10) is trivially equivalent to (8) $+$ (9) we are done with (g).

\medskip\noindent
Proof of (h). This is
Categories, Lemma \ref{categories-lemma-adjoint-fully-faithful}.
\end{proof}

\noindent
Here is a condition on a morphism of sites which guarantees that
the functor $f_*$ transforms surjective maps into surjective maps.

\begin{lemma}
\label{lemma-weaker}
Let $f : \mathcal{D} \to \mathcal{C}$ be a morphism of sites associated to
the continuous functor $u : \mathcal{C} \to \mathcal{D}$.
Assume that for any object $U$ of $\mathcal{C}$ and any covering
$\{V_j \to u(U)\}$ in $\mathcal{D}$ there exists a covering $\{U_i \to U\}$
in $\mathcal{C}$ such that the map of sheaves
$$
\coprod h_{u(U_i)}^\# \to h_{u(U)}^\#
$$
factors through the map of sheaves
$$
\coprod h_{V_j}^\# \to h_{u(U)}^\#.
$$
Then $f_*$ transforms surjective maps of sheaves into surjective maps of
sheaves.
\end{lemma}

\begin{proof}
Let $a : \mathcal{F} \to \mathcal{G}$ be a surjective map of sheaves on
$\mathcal{D}$. Let $U$ be an object of $\mathcal{C}$ and let
$s \in f_*\mathcal{G}(U) = \mathcal{G}(u(U))$. By assumption there exists
a covering $\{V_j \to u(U)\}$ and sections $s_j \in \mathcal{F}(V_j)$
with $a(s_j) = s|_{V_j}$. Now we may think of the sections $s$,
$s_j$ and $a$ as giving a commutative diagram of maps of sheaves
$$
\xymatrix{
\coprod h_{V_j}^\# \ar[r]_-{\coprod s_j} \ar[d] & \mathcal{F} \ar[d]^a \\
h_{u(U)}^\# \ar[r]^s & \mathcal{G}
}
$$
By assumption there exists a covering $\{U_i \to U\}$ such that we can
enlarge the commutative diagram above as follows
$$
\xymatrix{
& \coprod h_{V_j}^\# \ar[r]_-{\coprod s_j} \ar[d] & \mathcal{F} \ar[d]^a \\
\coprod h_{u(U_i)}^\# \ar[r] \ar[ur] &
h_{u(U)}^\# \ar[r]^s & \mathcal{G}
}
$$
Because $\mathcal{F}$ is a sheaf the map from the left lower corner to
the right upper corner corresponds to a family of sections
$s_i \in \mathcal{F}(u(U_i))$, i.e., sections $s_i \in f_*\mathcal{F}(U_i)$.
The commutativity of the diagram implies that $a(s_i)$ is equal to the
restriction of $s$ to $U_i$. In other words we have shown that $f_*a$ is a
surjective map of sheaves.
\end{proof}

\begin{example}
\label{example-weaker-not-coequalizer}
Assume $f : \mathcal{D} \to \mathcal{C}$ satisfies the assumptions of
Lemma \ref{lemma-weaker}.
Then it is in general not the case that $f_*$ commutes with coequalizers
or pushouts. Namely, suppose that $f$ is the morphism of sites associated
to the morphism of topological spaces $X = \{1, 2\} \to Y = \{*\}$ (see
Example \ref{example-continuous-map}),
where $Y$ is a singleton space, and $X = \{1, 2\}$ is a discrete
space with two points. A sheaf $\mathcal{F}$ on $X$ is given by a pair
$(A_1, A_2)$ of sets. Then $f_*\mathcal{F}$ corresponds to the
set $A_1 \times A_2$. Hence if
$a = (a_1, a_2), b = (b_1, b_2) : (A_1, A_2) \to (B_1, B_2)$
are maps of sheaves on $X$, then the
coequalizer of $a, b$ is $(C_1, C_2)$ where $C_i$ is the coequalizer of
$a_i, b_i$, and the coequalizer of $f_*a, f_*b$ is the coequalizer of
$$
a_1 \times a_2, b_1 \times b_2 :
A_1 \times A_2 \longrightarrow B_1 \times B_2
$$
which is in general different from $C_1 \times C_2$. Namely, if
$A_2 = \emptyset$ then $A_1 \times A_2 = \emptyset$, and hence the
coequalizer of the displayed arrows is $B_1 \times B_2$, but in general
$C_1 \not = B_1$. A similar example works for pushouts.
\end{example}

\noindent
The following lemma gives a criterion for when a morphism of sites
has a functor $f_*$ which reflects injections and surjections.
Note that this also implies that $f_*$ is faithful and that the
map $f^{-1}f_*\mathcal{F} \to \mathcal{F}$ is always surjective.

\begin{lemma}
\label{lemma-cover-from-below}
Let $f : \mathcal{D} \to \mathcal{C}$ be a morphism of sites given
by the functor $u : \mathcal{C} \to \mathcal{D}$.
Assume that for every object $V$ of $\mathcal{D}$ there exist objects
$U_i$ of $\mathcal{C}$ and morphisms $u(U_i) \to V$ such that
$\{u(U_i) \to V\}$ is a covering of $\mathcal{D}$. In this case the functor
$f_* : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ reflects
injections and surjections.
\end{lemma}

\begin{proof}
Let $\alpha : \mathcal{F} \to \mathcal{G}$ be maps of sheaves
on $\mathcal{D}$. By assumption for every object $V$ of $\mathcal{D}$
we get $\mathcal{F}(V) \subset \prod \mathcal{F}(u(U_i)) =
\prod f_*\mathcal{F}(U_i)$ by the sheaf condition
for some $U_i \in \Ob(\mathcal{C})$ and similarly for $\mathcal{G}$.
Hence it is clear that if $f_*\alpha$ is injective, then
$\alpha$ is injective. In other words $f_*$ reflects injections.

\medskip\noindent
Suppose that $f_*\alpha$ is surjective. Then for $V, U_i, u(U_i) \to V$
as above and a section $s \in \mathcal{G}(V)$, there exist coverings
$\{U_{ij} \to U_i\}$ such that $s|_{u(U_{ij})}$ is in the image
of $\mathcal{F}(u(U_{ij}))$. Since $\{u(U_{ij}) \to V\}$ is a covering
(as $u$ is continuous and by the axioms of a site) we conclude that
$s$ is locally in the image. Thus $\alpha$ is surjective. In other
words $f_*$ reflects surjections.
\end{proof}

\begin{example}
\label{example-cover-from-below}
We construct a morphism $f : \mathcal{D} \to \mathcal{C}$ satisfying
the assumptions of Lemma \ref{lemma-cover-from-below}. Namely, let
$\varphi : G \to H$ be a morphism of finite groups. Consider the sites
$\mathcal{D} = \mathcal{T}_G$ and $\mathcal{C} = \mathcal{T}_H$ of countable
$G$-sets and $H$-sets and coverings countable families of jointly
surjective maps (Example \ref{example-site-on-group}).
Let $u : \mathcal{T}_H \to \mathcal{T}_G$ be the functor described
in Section \ref{section-G-sets-morphisms}
and $f : \mathcal{T}_G \to \mathcal{T}_H$ the
corresponding morphism of sites. If $\varphi$ is injective, then
every countable $G$-set is, as a $G$-set, the quotient of a countable
$H$-set (this fails if $\varphi$ isn't injective). Thus $f$ satisfies
the hypothesis of Lemma \ref{lemma-cover-from-below}.
If the sheaf $\mathcal{F}$ on $\mathcal{T}_G$ corresponds to the $G$-set
$S$, then the canonical map
$$
f^{-1}f_*\mathcal{F} \longrightarrow \mathcal{F}
$$
corresponds to the map
$$
\text{Map}_G(H, S) \longrightarrow S,\quad
a \longmapsto a(1_H)
$$
If $\varphi$ is injective but not surjective, then this map is surjective
(as it should according to Lemma \ref{lemma-cover-from-below})
but not injective in general
(for example take $G = \{1\}$, $H = \{1, \sigma\}$, and $S = \{1, 2\}$).
Moreover, the functor $f_*$ does not commute with coequalizers or
pushouts (for $G = \{1\}$ and $H = \{1, \sigma\}$).
\end{example}





\section{Almost cocontinuous functors}
\label{section-almost-cocontinuous}

\noindent
Let $\mathcal{C}$ be a site. The category $\textit{PSh}(\mathcal{C})$ has
an initial object, namely the presheaf which assigns the empty set
to each object of $\mathcal{C}$. Let us denote this presheaf by
$\emptyset$. It follows from the properties of sheafification that the
sheafification $\emptyset^\#$ of $\emptyset$ is an initial object
of the category $\Sh(\mathcal{C})$ of sheaves on $\mathcal{C}$.

\begin{definition}
\label{definition-empty}
Let $\mathcal{C}$ be a site. We say an object $U$ of $\mathcal{C}$
is {\it sheaf theoretically empty} if $\emptyset^\# \to h_U^\#$
is an isomorphism of sheaves.
\end{definition}

\noindent
The following lemma makes this notion more explicit.

\begin{lemma}
\label{lemma-characterize-empty}
Let $\mathcal{C}$ be a site. Let $U$ be an object of $\mathcal{C}$.
The following are equivalent:
\begin{enumerate}
\item $U$ is sheaf theoretically empty,
\item $\mathcal{F}(U)$ is a singleton for each sheaf $\mathcal{F}$,
\item $\emptyset^\#(U)$ is a singleton,
\item $\emptyset^\#(U)$ is nonempty, and
\item the empty family is a covering of $U$ in $\mathcal{C}$.
\end{enumerate}
Moreover, if $U$ is sheaf theoretically empty, then for any morphism
$U' \to U$ of $\mathcal{C}$ the object $U'$ is sheaf theoretically empty.
\end{lemma}

\begin{proof}
For any sheaf $\mathcal{F}$ we have
$\mathcal{F}(U) = \Mor_{\Sh(\mathcal{C})}(h_U^\#, \mathcal{F})$.
Hence, we see that (1) and (2) are equivalent.
It is clear that (2) implies (3) implies (4).
If every covering of $U$ is given by a nonempty family,
then $\emptyset^+(U)$ is empty by definition of the plus construction.
Note that $\emptyset^+ = \emptyset^\#$ as $\emptyset$ is a separated
presheaf, see
Theorem \ref{theorem-plus}.
Thus we see that (4) implies (5). If (5) holds, then
$\mathcal{F}(U)$ is a singleton for every sheaf $\mathcal{F}$
by the sheaf condition for $\mathcal{F}$, see
Remark \ref{remark-sheaf-condition-empty-covering}.
Thus (5) implies (2) and (1) -- (5) are equivalent. The final
assertion of the lemma follows from Axiom (3) of
Definition \ref{definition-site}
applied the empty covering of $U$.
\end{proof}

\begin{definition}
\label{definition-almost-cocontinuous}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
We say $u$ is {\it almost cocontinuous} if for every
object $U$ of $\mathcal{C}$ and every covering
$\{V_j \to u(U)\}_{j \in J}$ there exists a covering
$\{U_i \to U\}_{i \in I}$ in $\mathcal{C}$ such that
for each $i$ in $I$ we have at least one of the following two conditions
\begin{enumerate}
\item $u(U_i)$ is sheaf theoretically empty, or
\item the morphism $u(U_i) \to u(U)$ factors through $V_j$ for some $j \in J$.
\end{enumerate}
\end{definition}

\noindent
The motivation for this definition comes from a closed immersion
$i : Z \to X$ of topological spaces. As discussed in
Example \ref{example-closed-map-cocontinuous-false}
the continuous functor
$X_{Zar} \to Z_{Zar}$, $U \mapsto Z \cap U$ is
not cocontinuous. But it is almost cocontinuous in the sense defined above.
We know that $i_*$ while not exact on sheaves of sets, is
exact on sheaves of abelian groups, see
Sheaves, Remark \ref{sheaves-remark-i-star-not-exact}.
And this holds in general for continuous and almost cocontinuous functors.

\begin{lemma}
\label{lemma-almost-cocontinuous-sheafification}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Assume that $u$ is continuous and almost cocontinuous.
Let $\mathcal{G}$ be a presheaf on $\mathcal{D}$ such that $\mathcal{G}(V)$ is
a singleton whenever $V$ is sheaf theoretically empty.
Then $(u^p\mathcal{G})^\# = u^p(\mathcal{G}^\#)$.
\end{lemma}

\begin{proof}
Let $U \in \Ob(\mathcal{C})$. We have to show that
$(u^p\mathcal{G})^\#(U) = u^p(\mathcal{G}^\#)(U)$.
It suffices to show that
$(u^p\mathcal{G})^+(U) = u^p(\mathcal{G}^+)(U)$
since $\mathcal{G}^+$ is another presheaf for which the
assumption of the lemma holds. We have
$$
u^p(\mathcal{G}^+)(U) =
\mathcal{G}^+(u(U)) =
\colim_\mathcal{V} \check H^0(\mathcal{V}, \mathcal{G})
$$
where the colimit is over the coverings $\mathcal{V}$ of $u(U)$ in
$\mathcal{D}$. On the other hand, we see that
$$
u^p(\mathcal{G})^+(U) =
\colim_\mathcal{U} \check H^0(u(\mathcal{U}), \mathcal{G})
$$
where the colimit is over the category of coverings
$\mathcal{U} = \{U_i \to U\}_{i \in I}$ of $U$ in $\mathcal{C}$ and
$u(\mathcal{U}) = \{u(U_i) \to u(U)\}_{i \in I}$. The condition
that $u$ is continuous means that each $u(\mathcal{U})$ is a covering.
Write $I = I_1 \amalg I_2$, where
$$
I_2 = \{i \in I \mid u(U_i)\text{ is sheaf theoretically empty}\}
$$
Then $u(\mathcal{U})' = \{u(U_i) \to u(U)\}_{i \in I_1}$ is still a covering of
because each of the other pieces can be covered by the empty family
and hence can be dropped by Axiom (2) of
Definition \ref{definition-site}.
Moreover,
$\check H^0(u(\mathcal{U}), \mathcal{G}) =
\check H^0(u(\mathcal{U})', \mathcal{G})$
by our assumption on $\mathcal{G}$. Finally, the condition that $u$ is
almost cocontinuous implies that for every covering $\mathcal{V}$
of $u(U)$ there exists a covering $\mathcal{U}$ of $U$ such that
$u(\mathcal{U})'$ refines $\mathcal{V}$. It follows that the two colimits
displayed above have the same value as desired.
\end{proof}

\begin{lemma}
\label{lemma-continuous-almost-cocontinuous}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{C} \to \mathcal{D}$ be a functor.
Assume that $u$ is continuous and almost cocontinuous.
Then $u^s = u^p : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$
commutes with pushouts and coequalizers (and more generally
finite connected colimits).
\end{lemma}

\begin{proof}
Let $\mathcal{I}$ be a finite connected index category.
Let $\mathcal{I} \to \Sh(\mathcal{D})$,
$i \mapsto \mathcal{G}_i$ by a diagram. We know that the colimit of
this diagram is the sheafification of the colimit in the category of
presheaves, see
Lemma \ref{lemma-colimit-sheaves}.
Denote $\colim^{Psh}$ the colimit in the category
of presheaves. Since $\mathcal{I}$ is finite and connected
we see that $\colim^{Psh}_i \mathcal{G}_i$
is a presheaf satisfying the assumptions of
Lemma \ref{lemma-almost-cocontinuous-sheafification}
(because a finite connected colimit of singleton sets is a
singleton). Hence that lemma gives
\begin{align*}
u^s(\colim_i \mathcal{G}_i) & =
u^s((\colim^{Psh}_i \mathcal{G}_i)^\#) \\
& = (u^p(\colim^{Psh}_i \mathcal{G}_i))^\# \\
& = (\colim^{PSh}_i u^p(\mathcal{G}_i))^\# \\
& = \colim_i u^s(\mathcal{G}_i)
\end{align*}
as desired.
\end{proof}

\begin{lemma}
\label{lemma-morphism-of-sites-almost-cocontinuous}
Let $f : \mathcal{D} \to \mathcal{C}$ be a morphism of sites
associated to the continuous functor $u : \mathcal{C} \to \mathcal{D}$.
If $u$ is almost cocontinuous then $f_*$ commutes with
pushouts and coequalizers (and more generally finite connected colimits).
\end{lemma}

\begin{proof}
This is a special case of Lemma \ref{lemma-continuous-almost-cocontinuous}.
\end{proof}








\section{Subtopoi}
\label{section-subtopoi}

\noindent
Here is the definition.

\begin{definition}
\label{definition-embedding}
Let $\mathcal{C}$ and $\mathcal{D}$ be sites.
A morphism of topoi $f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$
is called an {\it embedding} if $f_*$ is fully faithful.
\end{definition}

\noindent
According to Lemma \ref{lemma-exactness-properties}
this is equivalent to asking the
adjunction map $f^{-1}f_*\mathcal{F} \to \mathcal{F}$
to be an isomorphism for every sheaf $\mathcal{F}$ on $\mathcal{D}$.

\begin{definition}
\label{definition-subtopos}
Let $\mathcal{C}$ be a site. A strictly full subcategory
$E \subset \Sh(\mathcal{C})$ is a {\it subtopos} if there
exists an embedding of topoi $f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$
such that $E$ is equal to the essential image of the functor $f_*$.
\end{definition}

\noindent
The subtopoi constructed in the following lemma will be dubbed
"open" in the definition later on.

\begin{lemma}
\label{lemma-open-subtopos}
Let $\mathcal{C}$ be a site. Let $\mathcal{F}$ be a sheaf on
$\mathcal{C}$. The following are equivalent
\begin{enumerate}
\item $\mathcal{F}$ is a subobject of the final object of
$\Sh(\mathcal{C})$, and
\item the topos $\Sh(\mathcal{C})/\mathcal{F}$ is a subtopos of
$\Sh(\mathcal{C})$.
\end{enumerate}
\end{lemma}

\begin{proof}
We have seen in Lemma \ref{lemma-localize-topos} that
$\Sh(\mathcal{C})/\mathcal{F}$ is a topos. In fact, we recall the
proof. First we apply Lemma \ref{lemma-topos-good-site}
to see that we may assume $\mathcal{C}$ is a site with a subcanonical
topology, fibre products, a final object $X$, and an object $U$ with
$\mathcal{F} = h_U$. The proof of
Lemma \ref{lemma-localize-topos}
shows that the morphism of topoi
$j_\mathcal{F} : \Sh(\mathcal{C})/\mathcal{F} \to \Sh(\mathcal{C})$
is equal (modulo certain identifications) to the localization morphism
$j_U : \Sh(\mathcal{C}/U) \to \Sh(\mathcal{C})$.

\medskip\noindent
Assume (2). This means that $j_U^{-1}j_{U, *}\mathcal{G} \to \mathcal{G}$
is an isomorphism for all sheaves $\mathcal{G}$ on $\mathcal{C}/U$.
For any object $Z/U$ of $\mathcal{C}/U$ we have
$$
(j_{U, *}h_{Z/U})(U) = \Mor_{\mathcal{C}/U}(U \times_X U/U, Z/U)
$$
by Lemma \ref{lemma-localize-given-products}.
Setting $\mathcal{G} = h_{Z/U}$ in the equality above we obtain
$$
\Mor_{\mathcal{C}/U}(U \times_X U/U, Z/U) = \Mor_{\mathcal{C}/U}(U, Z/U)
$$
for all $Z/U$. By Yoneda's lemma
(Categories, Lemma \ref{categories-lemma-yoneda})
this implies $U \times_X U = U$. By
Categories, Lemma \ref{categories-lemma-characterize-mono-epi}
$U \to X$ is a monomorphism, in other words (1) holds.

\medskip\noindent
Assume (1). Then $j_U^{-1} j_{U, *} = \text{id}$ by
Lemma \ref{lemma-restrict-back}.
\end{proof}

\begin{definition}
\label{definition-open-subtopos}
Let $\mathcal{C}$ be a site. A strictly full subcategory
$E \subset \Sh(\mathcal{C})$ is an {\it open subtopos}
if there exists a subsheaf $\mathcal{F}$ of the final object
of $\Sh(\mathcal{C})$ such that $E$ is the subtopos
$\Sh(\mathcal{C})/\mathcal{F}$ described in Lemma \ref{lemma-open-subtopos}.
\end{definition}

\noindent
This means there is a bijection between the collection of open subtopoi
of $\Sh(\mathcal{C})$ and the set of subobjects of the final object of
$\Sh(\mathcal{C})$. Given an open subtopos there is a "closed" complement.

\begin{lemma}
\label{lemma-closed-subtopos}
Let $\mathcal{C}$ be a site. Let $\mathcal{F}$ be a subsheaf of the final
object $*$ of $\Sh(\mathcal{C})$. The full subcategory of sheaves
$\mathcal{G}$ such that $\mathcal{F} \times \mathcal{G} \to \mathcal{F}$
is an isomorphism is a subtopos of $\Sh(\mathcal{C})$.
\end{lemma}

\begin{proof}
We apply Lemma \ref{lemma-topos-good-site} to see that we may assume
$\mathcal{C}$ is a site with the properties listed in that lemma.
In particular $\mathcal{C}$ has a final object $X$ (so that
$* = h_X$) and an object $U$ with $\mathcal{F} = h_U$.

\medskip\noindent
Let $\mathcal{D} = \mathcal{C}$ as a category but a covering
is a family $\{V_j \to V\}$ of morphisms such that
$\{V_i \to V\} \cup \{U \times_X V \to V\}$ is a covering.
By our choice of $\mathcal{C}$ this means exactly that
$$
h_{U \times_X V} \amalg \coprod h_{V_i} \longrightarrow h_V
$$
is surjective. We claim that $\mathcal{D}$ is a site, i.e., the coverings
satisfy the conditions (1), (2), (3) of Definition \ref{definition-site}.
Condition (1) holds. For condition (2) suppose that
$\{V_i \to V\}$ and $\{V_{ij} \to V_i\}$ are coverings of $\mathcal{D}$.
Then the composition
$$
\coprod \left(
h_{U \times_X V_i} \amalg \coprod h_{V_{ij}}
\right) \longrightarrow
h_{U \times_X V} \amalg \coprod h_{V_i} \longrightarrow h_V
$$
is surjective. Since each of the morphisms $U \times_X V_i \to V$
factors through $U \times_X V$ we see that
$$
h_{U \times_X V} \amalg \coprod h_{V_{ij}} \longrightarrow h_V
$$
is surjective, i.e., $\{V_{ij} \to V\}$ is a covering of $V$ in
$\mathcal{D}$. Condition (3) follows similarly as a base change of
a surjective map of sheaves is surjective.

\medskip\noindent
Note that the (identity) functor $u : \mathcal{C} \to \mathcal{D}$ is
continuous and commutes with fibre products and final objects. Hence
we obtain a morphism $f : \mathcal{D} \to \mathcal{C}$ of sites
(Proposition \ref{proposition-get-morphism}).
Observe that $f_*$ is the identity functor on underlying
presheaves, hence fully faithful. To finish the proof we have to
show that the essential image of $f_*$ is the full subcategory
$E \subset \Sh(\mathcal{C})$ singled out in the lemma. To do this, note
that $\mathcal{G} \in \Ob(\Sh(\mathcal{C}))$ is in $E$ if and only if
$\mathcal{G}(U \times_X V)$ is a singleton for all objects
$V$ of $\mathcal{C}$. Thus such a sheaf satisfies the
sheaf property for all coverings of $\mathcal{D}$ (argument omitted).
Conversely, if $\mathcal{G}$ satisfies the sheaf property
for all coverings of $\mathcal{D}$, then $\mathcal{G}(U \times_X V)$
is a singleton, as in $\mathcal{D}$ the object $U \times_X V$ is
covered by the empty covering.
\end{proof}

\begin{definition}
\label{definition-closed-subtopos}
Let $\mathcal{C}$ be a site. A strictly full subcategory
$E \subset \Sh(\mathcal{C})$ is an {\it closed subtopos}
if there exists a subsheaf $\mathcal{F}$ of the final object
of $\Sh(\mathcal{C})$ such that $E$ is the subtopos
described in Lemma \ref{lemma-closed-subtopos}.
\end{definition}

\noindent
All right, and now we can define what it means to have a closed immersion
and an open immersion of topoi.

\begin{definition}
\label{definition-immersion-topoi}
Let $f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ be a morphism of topoi.
\begin{enumerate}
\item We say $f$ is an {\it open immersion} if $f$ is an embedding
and the essential image of $f_*$ is an open subtopos.
\item We say $f$ is a {\it closed immersion} if $f$ is an embedding
and the essential image of $f_*$ is a closed subtopos.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-closed-immersion}
Let $i : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ be a closed immersion of
topoi. Then $i_*$ is fully faithful, transforms surjections into surjections,
commutes with coequalizers, commutes with pushouts, reflects injections,
reflects surjections, and reflects bijections.
\end{lemma}

\begin{proof}
Let $\mathcal{F}$ be a subsheaf of the final object $*$ of $\Sh(\mathcal{C})$
and let $E \subset \Sh(\mathcal{C})$ be the full subcategory consisting
of those $\mathcal{G}$ such that
$\mathcal{F} \times \mathcal{G} \to \mathcal{F}$ is an isomorphism.
By Lemma \ref{lemma-closed-subtopos}
the functor $i_*$ is isomorphic to the
inclusion functor $\iota : E \to \Sh(\mathcal{C})$.

\medskip\noindent
Let $j_{\mathcal{F}} : \Sh(\mathcal{C})/\mathcal{F} \to \Sh(\mathcal{C})$
be the localization functor (Lemma \ref{lemma-localize-topos}).
Note that $E$ can also be described as
the collection of sheaves $\mathcal{G}$ such that
$j_\mathcal{F}^{-1}\mathcal{G} = *$.

\medskip\noindent
Let $a, b : \mathcal{G}_1 \to \mathcal{G}_2$ be two morphism of $E$.
To prove $\iota$ commutes with coequalizers it suffices to show that
the coequalizer of $a$, $b$ in $\Sh(\mathcal{C})$ lies in $E$.
This is clear because
the coequalizer of two morphisms $* \to *$ is $*$ and because
$j_\mathcal{F}^{-1}$ is exact. Similarly for pushouts.

\medskip\noindent
Thus $i_*$ satisfies properties (5), (6), and (7) of
Lemma \ref{lemma-exactness-properties} and hence
the morphism $i$ satisfies all properties mentioned in that
lemma, in particular the ones mentioned in this lemma.
\end{proof}








\section{Sheaves of algebraic structures}
\label{section-sheaves-algebraic-structures}

\noindent
In Sheaves, Section \ref{sheaves-section-algebraic-structures}
we introduced a type of algebraic structure to be a pair
$(\mathcal{A}, s)$, where $\mathcal{A}$ is a category,
and $s : \mathcal{A} \to \textit{Sets}$ is a functor such
that
\begin{enumerate}
\item $s$ is faithful,
\item $\mathcal{A}$ has limits and $s$ commutes with limits,
\item $\mathcal{A}$ has filtered colimits and $s$ commutes with them, and
\item $s$ reflects isomorphisms.
\end{enumerate}
For such a type of algebraic structure we saw that a presheaf
$\mathcal{F}$ with values in $\mathcal{A}$ on a space $X$ is a sheaf if and
only if the associated presheaf of sets is a sheaf. Moreover,
we worked out the notion of stalk, and given a continuous map
$f : X \to Y$ we defined adjoint functors pushforward and pullback
on sheaves of algebraic structures which agrees with pushforward
and pullback on the underlying sheaves of sets. In addition extending
a sheaf of algebraic structures from a basis to all opens
of a space, works as expected.

\medskip\noindent
Part of this material still works in the setting of sites and sheaves.
Let $(\mathcal{A}, s)$ be a type of algebraic structure.
Let $\mathcal{C}$ be a site. Let us denote
$\textit{PSh}(\mathcal{C}, \mathcal{A})$,
resp.\ $\Sh(\mathcal{C}, \mathcal{A})$ the category
of presheaves, resp.\ sheaves with values in $\mathcal{A}$ on $\mathcal{C}$.
\begin{itemize}
\item[] ($\alpha$) A presheaf with values in $\mathcal{A}$ is
a sheaf if and only if its underlying presheaf of sets is a sheaf.
See the proof of Sheaves, Lemma \ref{sheaves-lemma-sheaves-structure}.
\item[] ($\beta$) Given a presheaf $\mathcal{F}$ with values in
$\mathcal{A}$ the presheaf ${\mathcal{F}}^\# = (\mathcal{F}^+)^+$
is a sheaf. This is true since the colimits in the sheafification process
are filtered, and even colimits over directed sets (see
Section \ref{section-sheafification}, especially the proof of
Lemma \ref{lemma-sheafification-exact})
and since $s$ commutes with filtered colimits.
\item[] ($\gamma$) We get the following commutative diagram
$$
\xymatrix{
\Sh(\mathcal{C}, \mathcal{A}) \ar@<1ex>[r] \ar[d]_s &
\textit{PSh}(\mathcal{C}, \mathcal{A}) \ar@<1ex>[l]^{{}^\#} \ar[d]^s\\
\Sh(\mathcal{C}) \ar@<1ex>[r] &
\textit{PSh}(\mathcal{C}) \ar@<1ex>[l]
}
$$
\item[] ($\delta$) We have $\mathcal{F} = \mathcal{F}^\#$ if and only if
$\mathcal{F}$ is a sheaf of algebraic structures.
\item[] ($\epsilon$) The functor ${}^\#$ is adjoint to the inclusion functor:
$$
\Mor_{\textit{PSh}(\mathcal{C}, \mathcal{A})}(\mathcal{G}, \mathcal{F})
=
\Mor_{\Sh(\mathcal{C}, \mathcal{A})}(\mathcal{G}^\#, \mathcal{F})
$$
The proof is the same as the proof of
Proposition \ref{proposition-sheafification-adjoint}.
\item[] ($\zeta$) The functor
$\mathcal{F} \mapsto \mathcal{F}^\#$ is left exact.
The proof is the same as the proof of Lemma \ref{lemma-sheafification-exact}.
\end{itemize}

\begin{definition}
\label{definition-pushforward-algebraic-structures}
Let $f : \mathcal{D} \to \mathcal{C}$ be a morphism of sites
given by a functor $u : \mathcal{C} \to \mathcal{D}$.
We define the {\it pushforward} functor for presheaves of algebraic structures
by the rule $u^p\mathcal{F}(U) = \mathcal{F}(uU)$,
and for sheaves of algebraic structures by the same rule, namely
$f_*\mathcal{F}(U) = \mathcal{F}(uU)$.
\end{definition}

\noindent
The problem comes with trying the define the pullback.
The reason is that the colimits defining
the functor $u_p$ in Section \ref{section-functoriality-PSh}
may not be filtered. Thus the axioms above are not enough in
general to define the pullback of a (pre)sheaf of algebraic
structures. Nonetheless, in almost all cases the following
lemma is sufficient to define pushforward, and pullback
of (pre)sheaves of algebraic structures.

\begin{lemma}
\label{lemma-push-pull-good-case}
Suppose the functor $u : \mathcal{C} \to \mathcal{D}$ satisfies
the hypotheses of Proposition \ref{proposition-get-morphism},
and hence gives rise to a morphism of sites
$f : \mathcal{D} \to \mathcal{C}$. In this case
the pullback functor $f^{-1}$ (resp.\ $u_p$) and the pushforward
functor $f_*$ (resp. $u^p$) extend to an adjoint pair of functors on
the categories of sheaves (resp.\ presheaves)  of algebraic structures.
Moreover, these functors commute with taking
the underlying sheaf (resp.\ presheaf) of sets.
\end{lemma}

\begin{proof}
We have defined $f_* = u^p$ above.
In the course of the proof of Proposition \ref{proposition-get-morphism}
we saw that all the colimits used to define $u_p$ are
filtered under the assumptions of the proposition.
Hence we conclude from the definition of a type of
algebraic structure that we may define $u_p$ by exactly
the same colimits as a functor on presheaves of algebraic structures.
Adjointness of $u_p$ and $u^p$ is proved in exactly the
same way as the proof of Lemma \ref{lemma-adjoints-u}.
The discussion of sheafification of presheaves of
algebraic structures above then implies that we may define
$f^{-1}(\mathcal{F}) = (u_p\mathcal{F})^\#$.
\end{proof}

\noindent
We briefly discuss a method for dealing with pullback and
pushforward for a general morphism of sites, and more generally
for any morphism of topoi.

\medskip\noindent
Let $\mathcal{C}$ be a site.
In the case $\mathcal{A} = \textit{Ab}$,
we may think of an abelian (pre)sheaf on $\mathcal{C}$
as a quadruple $(\mathcal{F}, +, 0, i)$.
Here the data are
\begin{enumerate}
\item[(D1)] $\mathcal{F}$ is a sheaf of sets,
\item[(D2)] $+ : \mathcal{F} \times \mathcal{F} \to \mathcal{F}$ is
a morphism of sheaves of sets,
\item[(D3)] $0 : * \to \mathcal{F}$ is a morphism from the
singleton sheaf (see Example \ref{example-singleton-sheaf})
to $\mathcal{F}$, and
\item[(D4)] $i : \mathcal{F} \to \mathcal{F}$ is a morphism of sheaves
of sets.
\end{enumerate}
These data have to satisfy the following axioms
\begin{enumerate}
\item[(A1)] $+$ is associative and commutative,
\item[(A2)] $0$ is a unit for $+$, and
\item[(A3)] $+ \circ (1, i) = 0 \circ (\mathcal{F} \to *)$.
\end{enumerate}
Compare Sheaves, Lemma \ref{sheaves-lemma-abelian-presheaves}.
Let $f : \mathcal{D} \to \mathcal{C}$ be a morphism of sites.
Note that since $f^{-1}$ is exact we have
$f^{-1}* = *$ and
$f^{-1}(\mathcal{F} \times \mathcal{F}) =
f^{-1}\mathcal{F} \times f^{-1}\mathcal{F}$.
Thus we can define $f^{-1}\mathcal{F}$ simply as the quadruple
$(f^{-1}\mathcal{F}, f^{-1}+, f^{-1}0, f^{-1}i)$. The axioms
are going to be preserved because $f^{-1}$ is a functor
which commutes with finite limits. Finally it is not hard
to check that $f_*$ and $f^{-1}$ are adjoint as usual.

\medskip\noindent
In \cite{SGA4} this method is used. They introduce something
called an ``{\it esp\`ece the structure alg\'ebrique $\ll$d\'efinie
par limites projectives finie$\gg$}''. For such an esp\`ece you
can use the method described above to define a pair of adjoint
functors $f^{-1}$ and $f_*$ as above. This clearly works for most
algebraic structures that one encounters in practice.
Instead of formalizing this construction we simply list those
algebraic structures for which this method works (to be
verified case by case). In fact, this method works for any
morphism of topoi.

\begin{proposition}
\label{proposition-functoriality-algebraic-structures-topoi}
\begin{slogan}
Morphisms of topoi preserve algebraic structure.
\end{slogan}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $f = (f^{-1}, f_*)$ be a morphism of topoi
from $\Sh(\mathcal{D}) \to \Sh(\mathcal{C})$.
The method introduced above gives rise to an adjoint
pair of functors $(f^{-1}, f_*)$ on sheaves of algebraic structures
compatible with taking the underlying sheaves of sets
for the following types of algebraic structures:
\begin{enumerate}
\item pointed sets,
\item abelian groups,
\item groups,
\item monoids,
\item rings,
\item modules over a fixed ring, and
\item lie algebras over a fixed field.
\end{enumerate}
Moreover, in each of these cases the results above labeled ($\alpha$),
($\beta$), ($\gamma$), ($\delta$), ($\epsilon$), and ($\zeta$) hold.
\end{proposition}

\begin{proof}
The final statement of the proposition holds simply since each of the listed
categories, endowed with the obvious forgetful functor, is indeed a type of
algebraic structure in the sense explained at the beginning of this section.
See Sheaves, Lemma \ref{sheaves-lemma-list-algebraic-structures}.

\medskip\noindent
Proof of (2). We think of a sheaf of abelian groups as
a quadruple $(\mathcal{F}, +, 0, i)$ as explained in the discussion preceding
the proposition.
If $(\mathcal{F}, +, 0, i)$ lives on $\mathcal{C}$, then its pullback
is defined as $(f^{-1}\mathcal{F}, f^{-1}+, f^{-1}0, f^{-1}i)$.
If $(\mathcal{G}, +, 0, i)$ lives on $\mathcal{D}$, then its pushforward
is defined as $(f_*\mathcal{G}, f_*+, f_*0, f_*i)$. This works because
$f_*(\mathcal{G} \times \mathcal{G}) = f_*\mathcal{G} \times f_*\mathcal{G}$.
Adjointness follows from adjointness of the set based functors,
since
$$
\Mor_{\textit{Ab}(\mathcal{C})}
((\mathcal{F}_1, +, 0, i), (\mathcal{F}_2, +, 0, i))
=
\left\{
\begin{matrix}
\varphi \in \Mor_{\Sh(\mathcal{C})}
(\mathcal{F}_1, \mathcal{F}_2) \\
\varphi \text{ is compatible with }+, 0, i
\end{matrix}
\right\}
$$
Details left to the reader.

\medskip\noindent
This method also works for sheaves of rings by thinking
of a sheaf of rings (with unit) as a sixtuple
$(\mathcal{O}, + , 0, i, \cdot, 1)$ satisfying a list
of axioms that you can find in any elementary
algebra book.

\medskip\noindent
A sheaf of pointed sets is a pair $(\mathcal{F}, p)$, where
$\mathcal{F}$ is a sheaf of sets, and $p : * \to \mathcal{F}$
is a map of sheaves of sets.

\medskip\noindent
A sheaf of groups is given by a quadruple $(\mathcal{F}, \cdot, 1, i)$
with suitable axioms.

\medskip\noindent
A sheaf of monoids is given by a pair $(\mathcal{F}, \cdot)$
with suitable axiom.

\medskip\noindent
Let $R$ be a ring. An sheaf of $R$-modules is given by
a quintuple $(\mathcal{F}, +, 0, i, \{\lambda_r\}_{r \in R})$,
where the quadruple $(\mathcal{F}, +, 0, i)$ is a sheaf of
abelian groups as above, and $\lambda_r : \mathcal{F} \to \mathcal{F}$
is a family of morphisms of sheaves of sets
such that
$\lambda_r \circ 0 = 0$,
$\lambda_r \circ + = + \circ (\lambda_r, \lambda_r)$,
$\lambda_{r + r'} =
+ \circ \lambda_r \times \lambda_{r'} \circ (\text{id}, \text{id})$,
$\lambda_{rr'} = \lambda_r \circ \lambda_{r'}$,
$\lambda_1 = \text{id}$, $\lambda_0 = 0 \circ (\mathcal{F} \to *)$.
\end{proof}

\noindent
We will discuss the category of sheaves of modules over a sheaf of rings in
Modules on Sites, Section \ref{sites-modules-section-sheaves-modules}.

\begin{remark}
\label{remark-no-pullback-presheaves}
Let $\mathcal{C}$, $\mathcal{D}$ be sites.
Let $u : \mathcal{D} \to \mathcal{C}$ be a continuous functor
which gives rise to a morphism of sites $\mathcal{C} \to \mathcal{D}$.
Note that even in the case of abelian groups we have not defined
a pullback functor for presheaves of abelian groups.
Since all colimits are representable in
the category of abelian groups, we certainly may define
a functor $u_p^{ab}$ on abelian presheaves by the same colimits
as we have used to define $u_p$ on presheaves of sets.
It will also be the case that $u_p^{ab}$ is adjoint to
$u^p$ on the categories of abelian presheaves.
However, it will not always be the case that $u_p^{ab}$
agrees with $u_p$ on the underlying presheaves of sets.
\end{remark}












\section{Pullback maps}
\label{section-pullback}

\noindent
It sometimes happens that a site $\mathcal{C}$ does
not have a final object. In this case we define the
global section functor as follows.

\begin{definition}
\label{definition-global-sections}
The {\it global sections} of a presheaf of sets $\mathcal{F}$ over a
site $\mathcal{C}$ is the set
$$
\Gamma(\mathcal{C}, \mathcal{F}) =
\Mor_{\textit{PSh}(\mathcal{C})}(*, \mathcal{F})
$$
where $*$ is the final object in the category of presheaves on
$\mathcal{C}$, i.e., the presheaf which associates to every object
a singleton.
\end{definition}

\noindent
Of course the same definition applies to sheaves as well.
Here is one way to compute global sections.

\begin{lemma}
\label{lemma-compute-global-sections}
Let $\mathcal{C}$ be a site. Let $a, b : V \to U$ be objects of $\mathcal{C}$
such that
$$
\xymatrix{
h_V^\# \ar@<1ex>[r] \ar@<-1ex>[r] & h_U^\# \ar[r] & {*}
}
$$
is a coequalizer in $\Sh(\mathcal{C})$. Then
$\Gamma(\mathcal{C}, \mathcal{F})$ is the equalizer of
$a^*, b^* : \mathcal{F}(U) \to \mathcal{F}(V)$.
\end{lemma}

\begin{proof}
Since $\Mor_{\Sh(\mathcal{C})}(h_U^\#, \mathcal{F}) = \mathcal{F}(U)$
this is clear from the definitions.
\end{proof}

\noindent
Now, let $f : \Sh(\mathcal{D}) \to \Sh(\mathcal{C})$ be a morphism of topoi.
Then for any sheaf $\mathcal{F}$ on $\mathcal{C}$ there is a pullback map
$$
f^{-1} :
\Gamma(\mathcal{C}, \mathcal{F})
\longrightarrow
\Gamma(\mathcal{D}, f^{-1}\mathcal{F})
$$
Namely, as $f^{-1}$ is exact it transforms $*$ into $*$. Hence a global
section $s$ of $\mathcal{F}$ over $\mathcal{C}$, which is a map
of sheaves $s : * \to \mathcal{F}$, can be pulled back to
$f^{-1}s : * = f^{-1}* \to f^{-1}\mathcal{F}$.

\medskip\noindent
We can generalize this a bit by considering a pair of sheaves
$\mathcal{F}$, $\mathcal{G}$ on $\mathcal{C}$, $\mathcal{D}$
together with a map $f^{-1}\mathcal{F} \to \mathcal{G}$. Then we
compose the construction above with the obvious map
$\Gamma(\mathcal{D}, f^{-1}\mathcal{F}) \to \Gamma(\mathcal{D}, \mathcal{G})$
to get a map
$$
\Gamma(\mathcal{C}, \mathcal{F})
\longrightarrow
\Gamma(\mathcal{D}, \mathcal{G})
$$
This map is sometimes also called a pullback map.

\medskip\noindent
A slightly more general construction which occurs frequently in nature
is the following. Suppose that we have a commutative diagram of
morphisms of topoi
$$
\xymatrix{
\Sh(\mathcal{D}) \ar[rd]_h \ar[rr]_f & &
\Sh(\mathcal{C}) \ar[ld]^g \\
& \Sh(\mathcal{B})
}
$$
Next, suppose that we have a sheaf $\mathcal{F}$ on $\mathcal{C}$.
Then there is a {\it pullback map}
$$
f^{-1} : g_*\mathcal{F} \longrightarrow h_*f^{-1}\mathcal{F}
$$
Namely, it is just the map coming from the identification
$g_*f_*f^{-1}\mathcal{F} = h_*f^{-1}\mathcal{F}$ together with
$g_*$ applied to the canonical map $\mathcal{F} \to f_*f^{-1}\mathcal{F}$.
If $g$ is the identity, then this map on global sections agrees 
with the pullback map above.

\medskip\noindent
In the situation of the previous paragraph, suppose
we have a pair of sheaves $\mathcal{F}$, $\mathcal{G}$
on $\mathcal{C}$, $\mathcal{D}$ together with a map
$f^{-1}\mathcal{F} \to \mathcal{G}$, then we compose
the pullback map above with $h_*$ applied to
$f^{-1}\mathcal{F} \to \mathcal{G}$
to get a map
$$
g_*\mathcal{F} \longrightarrow h_*\mathcal{G}
$$
Restricting to sections over an object of $\mathcal{B}$ one recovers
the ``pullback map'' on global sections discussed above (with suitable
choices of sites).

\medskip\noindent
An even more general situation is where we have a commutative diagram of topoi
$$
\xymatrix{
\Sh(\mathcal{D}) \ar[d]_h \ar[r]_f &
\Sh(\mathcal{C}) \ar[d]^g \\
\Sh(\mathcal{B}) \ar[r]^e & \Sh(\mathcal{A})
}
$$
and a sheaf $\mathcal{G}$ on $\mathcal{C}$. Then there is a
{\it base change map}
$$
e^{-1}g_*\mathcal{G} \longrightarrow h_*f^{-1}\mathcal{G}.
$$
Namely, this map is adjoint to a map
$g_*\mathcal{G} \to e_*h_*f^{-1}\mathcal{G} = (e \circ h)_*f^{-1}\mathcal{G}$
which is the pullback map just described.

\begin{remark}
\label{remark-compose-base-change}
Consider a commutative diagram
$$
\xymatrix{
\Sh(\mathcal{B}') \ar[r]_k \ar[d]_{f'} &
\Sh(\mathcal{B}) \ar[d]^f \\
\Sh(\mathcal{C}') \ar[r]^l \ar[d]_{g'} &
\Sh(\mathcal{C}) \ar[d]^g \\
\Sh(\mathcal{D}') \ar[r]^m &
\Sh(\mathcal{D})
}
$$
of topoi. Then the base change maps for the two squares compose to give the
base change map for the outer rectangle. More precisely, the composition
\begin{align*}
m^{-1} \circ (g \circ f)_*
& =
m^{-1} \circ g_* \circ f_* \\
& \to g'_* \circ l^{-1} \circ f_* \\
& \to g'_* \circ f'_* \circ k^{-1} \\
& = (g' \circ f')_* \circ k^{-1}
\end{align*}
is the base change map for the rectangle. We omit the verification.
\end{remark}

\begin{remark}
\label{remark-compose-base-change-horizontal}
Consider a commutative diagram
$$
\xymatrix{
\Sh(\mathcal{C}'') \ar[r]_{g'} \ar[d]_{f''} &
\Sh(\mathcal{C}') \ar[r]_g \ar[d]_{f'} &
\Sh(\mathcal{C}) \ar[d]^f \\
\Sh(\mathcal{D}'') \ar[r]^{h'} &
\Sh(\mathcal{D}') \ar[r]^h &
\Sh(\mathcal{D})
}
$$
of ringed topoi. Then the base change maps
for the two squares compose to give the base
change map for the outer rectangle. More precisely,
the composition
\begin{align*}
(h \circ h')^{-1} \circ f_*
& =
(h')^{-1} \circ h^{-1} \circ f_* \\
& \to (h')^{-1} \circ f'_* \circ g^{-1} \\
& \to f''_* \circ (g')^{-1} \circ g^{-1} \\
& = f''_* \circ (g \circ g')^{-1}
\end{align*}
is the base change map for the rectangle. We omit the verification.
\end{remark}






\section{Comparison with SGA4}
\label{section-notation-comparison}

\noindent
Our notation for the functors
$u^p$ and $u_p$ from Section \ref{section-functoriality-PSh} and
$u^s$ and $u_s$ from Section \ref{section-continuous-functors}
is taken from \cite[pages 14 and 42]{ArtinTopologies}. Having made these
choices, the notation for the functor
${}_pu$ in Section \ref{section-more-functoriality-PSh} and
${}_su$ in Section \ref{section-cocontinuous-functors}
seems reasonable.
In this section we compare our notation with that of SGA4.

\medskip\noindent
{\bf Presheaves:} Let $u : \mathcal{C} \to \mathcal{D}$ be a functor
between categories.
The functor $u^p$ is denoted $u^*$ in \cite[Exposee I, Section 5]{SGA4}.
The functor $u_p$ is denoted $u_!$ in \cite[Exposee I, Proposition 5.1]{SGA4}.
The functor ${}_pu$ is denoted $u_*$ in
\cite[Exposee I, Proposition 5.1]{SGA4}.
In other words, we have
$$
u_p, u^p, {}_pu\quad(SP)
\quad\text{versus}\quad
u_!, u^*, u_*\quad(SGA4)
$$
The reader should be cautioned that different notation is used for these
functors in different parts of SGA4.

\medskip\noindent
{\bf Sheaves and continuous functors:}
Suppose that $\mathcal{C}$ and $\mathcal{D}$ are sites and that
$u : \mathcal{C} \to \mathcal{D}$ is
a continuous functor (Definition \ref{definition-continuous}).
The functor $u^s$ is denoted $u_s$ in \cite[Exposee III, 1.11]{SGA4}.
The functor $u_s$ is denoted $u^s$ in
\cite[Exposee III, Proposition 1.2]{SGA4}.
In other words, we have
$$
u_s, u^s\quad(SP)
\quad\text{versus}\quad
u^s, u_s\quad(SGA4)
$$
When $u$ defines a morphism of sites
$f : \mathcal{D} \to \mathcal{C}$
(Definition \ref{definition-morphism-sites})
we see that the associated morphism of topoi
(Lemma \ref{lemma-morphism-sites-topoi}) is the same as that in
\cite[Exposee IV, (4.9.1.1)]{SGA4}.

\medskip\noindent
{\bf Sheaves and cocontinuous functors:}
Suppose that $\mathcal{C}$ and $\mathcal{D}$ are sites and that
$u : \mathcal{C} \to \mathcal{D}$ is
a cocontinuous functor (Definition \ref{definition-cocontinuous}).
The functor ${}_su$ (Lemma \ref{lemma-pu-sheaf}) is denoted $u_*$ in
\cite[Exposee III, Proposition 2.3]{SGA4}.
The functor $(u^p\ )^\#$ is denoted $u^*$ in
\cite[Exposee III, Proposition 2.3]{SGA4}.
In other words, we have
$$
(u^p\ )^\#, {}_su\quad(SP)
\quad\text{versus}\quad
u^*, u_*\quad(SGA4)
$$
Thus the morphism of topoi associated to $u$ in
Lemma \ref{lemma-cocontinuous-morphism-topoi}
is the same as that in \cite[Exposee IV, 4.7]{SGA4}.

\medskip\noindent
{\bf Morphisms of Topoi:} If $f$ is a morphism of topoi given
by the functors $(f^{-1}, f_*)$ then the functor $f^{-1}$
is denoted $f^*$ in \cite[Exposee IV, Definition 3.1]{SGA4}.
We will use $f^{-1}$ to denote pullback of sheaves of sets
or more generally sheaves of algebraic structure
(Section \ref{section-sheaves-algebraic-structures}).
We will use $f^*$ to denote pullback of sheaves of modules
for a morphism of ringed topoi
(Modules on Sites, Definition \ref{sites-modules-definition-pushforward}).



\section{Topologies}
\label{section-topologies}

\noindent
In this section we define what a topology on a category is as
defined in \cite{SGA4}. One can develop all of the machinery of
sheaves and topoi in this language. A modern exposition of this material
can be found in \cite{KS}. However, the case of most interest for algebraic
geometry is the topology defined by a site on its underlying category.
Thus we strongly suggest the first time reader
{\bf skip this section and all other sections of this chapter}!

\begin{definition}
\label{definition-sieve}
Let $\mathcal{C}$ be a category. Let $U \in \Ob(\mathcal{C})$.
A {\it sieve $S$ on $U$} is a subpresheaf $S \subset h_U$.
\end{definition}

\noindent
In other words, a sieve on $U$ picks out for each object
$T \in \Ob(\mathcal{C})$ a subset $S(T)$ of the set
of all morphisms $T \to U$. In fact, the only condition
on the collection of subsets
$S(T) \subset h_U(T) = \Mor_\mathcal{C}(T, U)$
is the following rule
\begin{equation}
\label{equation-property-sieve}
\left.
\begin{matrix}
(\alpha : T \to U) \in S(T) \\
g : T' \to T
\end{matrix}
\right\} \Rightarrow
(\alpha \circ g : T' \to U) \in S(T')
\end{equation}
A good mental picture to keep in mind is to think of the
map $S \to h_U$ as a ``morphism from $S$ to $U$''.

\begin{lemma}
\label{lemma-sieves-set}
Let $\mathcal{C}$ be a category. Let $U \in \Ob(\mathcal{C})$.
\begin{enumerate}
\item The collection of sieves on $U$ is a set.
\item Inclusion defines a partial ordering on this set.
\item Unions and intersections of sieves are sieves.
\item
\label{item-sieve-generated}
Given a family of morphisms $\{U_i \to U\}_{i\in I}$
of $\mathcal{C}$ with target $U$
there exists a unique smallest sieve $S$ on $U$ such that
each $U_i \to U$ belongs to $S(U_i)$.
\item The sieve $S = h_U$ is the maximal sieve.
\item The empty subpresheaf is the minimal sieve.
\end{enumerate}
\end{lemma}

\begin{proof}
By our definition of subpresheaf, the collection of
all subpresheaves of a presheaf $\mathcal{F}$ is a subset of
$\prod_{U \in \Ob(\mathcal{C})} \mathcal{P}(\mathcal{F}(U))$.
And this is a set. (Here $\mathcal{P}(A)$ denotes
the powerset of $A$.) Hence the collection of sieves on $U$
is a set.

\medskip\noindent
The partial ordering is defined by: $S \leq S'$ if and only if
$S(T) \subset S'(T)$ for all $T \to U$. Notation: $S \subset S'$.

\medskip\noindent
Given a collection of sieves $S_i$, $i \in I$ on $U$ we can
define $\bigcup S_i$ as the sieve with values
$(\bigcup S_i)(T) = \bigcup S_i(T)$ for all
$T \in \Ob(\mathcal{C})$.
We define the intersection $\bigcap S_i$ in the same way.

\medskip\noindent
Given $\{U_i \to U\}_{i\in I}$ as in the statement, consider
the morphisms of presheaves $h_{U_i} \to h_U$. We simply
define $S$ as the union of the images (Definition \ref{definition-image})
of these maps of presheaves.

\medskip\noindent
The last two statements of the lemma are obvious.
\end{proof}

\begin{definition}
\label{definition-sieve-generated}
Let $\mathcal{C}$ be a category.
Given a family of morphisms $\{f_i : U_i \to U\}_{i\in I}$
of $\mathcal{C}$ with target $U$ we say the sieve
$S$ on $U$ described in Lemma \ref{lemma-sieves-set}
part (\ref{item-sieve-generated}) is the {\it sieve  on $U$
generated by the morphisms $f_i$}.
\end{definition}

\begin{definition}
\label{definition-pullback-sieve}
Let $\mathcal{C}$ be a category.
Let $f : V \to U$ be a morphism of $\mathcal{C}$.
Let $S \subset h_U$ be a sieve. We define the
{\it pullback of $S$ by $f$} to be the sieve
$S \times_U V$ of $V$ defined by the rule
$$
(\alpha : T \to V) \in (S \times_U V)(T)
\Leftrightarrow
(f \circ \alpha : T \to U) \in S(T)
$$
\end{definition}

\noindent
We leave it to the reader to see that this is indeed a sieve
(hint: use Equation \ref{equation-property-sieve}).
We also sometimes call $S \times_U V$ the {\it base change}
of $S$ by $f : V \to U$.

\begin{lemma}
\label{lemma-pullback-sieve-section}
Let $\mathcal{C}$ be a category.
Let $U \in \Ob(\mathcal{C})$.
Let $S$ be a sieve on $U$.
If $f : V \to U$ is in $S$, then
$S \times_U V = h_V$ is maximal.
\end{lemma}

\begin{proof}
Trivial from the definitions.
\end{proof}

\begin{definition}
\label{definition-topology}
Let $\mathcal{C}$ be a category. A {\it topology on $\mathcal{C}$} is given
by a rule which assigns to every $U \in \Ob(\mathcal{C})$
a subset $J(U)$ of the set of all sieves on $U$ satisfying
the following conditions
\begin{enumerate}
\item For every morphism $f : V \to U$ in $\mathcal{C}$, and
every element $S \in J(U)$ the pullback $S \times_U V$
is an element of $J(V)$.
\item If $S$ and $S'$ are sieves on $U \in \Ob(\mathcal{C})$,
if $S \in J(U)$, and if for all $f \in S(V)$ the pullback
$S' \times_U V$ belongs to $J(V)$, then $S'$ belongs to $J(U)$.
\item For every $U \in \Ob(\mathcal{C})$ the
maximal sieve $S = h_U$ belongs to $J(U)$.
\end{enumerate}
\end{definition}

\noindent
In this case, the sieves belonging to $J(U)$ are called
the {\it covering sieves}.

\begin{lemma}
\label{lemma-topology-basic}
Let $\mathcal{C}$ be a category.
Let $J$ be a topology on $\mathcal{C}$.
Let $U \in \Ob(\mathcal{C})$.
\begin{enumerate}
\item Finite intersections of elements of $J(U)$ are in $J(U)$.
\item If $S \in J(U)$ and $S' \supset S$, then $S' \in J(U)$.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $S, S' \in J(U)$. Consider $S'' = S \cap S'$. For every
$V \to U$ in $S(U)$ we have
$$
S' \times_U V = S'' \times_U V
$$
simply because $V \to U$ already is in $S$. Hence by the second
axiom of the definition we see that $S'' \in J(U)$.

\medskip\noindent
Let $S \in J(U)$ and $S' \supset S$. For every
$V \to U$ in $S(U)$ we have $S' \times_U V = h_V$ by
Lemma \ref{lemma-pullback-sieve-section}. Thus
$S' \times_U V \in J(V)$ by the third axiom. Hence
$S' \in J(U)$ by the second axiom.
\end{proof}

\begin{definition}
\label{definition-finer}
Let $\mathcal{C}$ be a category. Let $J$, $J'$ be
two topologies on $\mathcal{C}$. We say that $J$ is
{\it finer} than $J'$ if and only if for every object
$U$ of $\mathcal{C}$ we have $J'(U) \subset J(U)$.
\end{definition}

\noindent
In other words, any covering sieve of $J'$ is a
covering sieve of $J$. There exists a finest topology
on $\mathcal{C}$, namely that topology where any sieve
is a covering sieve. This is called the
{\it discrete topology} of $\mathcal{C}$.
There also exists a coarsest topology.
Namely, the topology where $J(U) = \{h_U\}$
for all objects $U$. This is called the
{\it chaotic} or {\it indiscrete topology}.

\begin{lemma}
\label{lemma-play-with-topologies}
Let $\mathcal{C}$ be a category.
Let $\{J_i\}_{i\in I}$ be a set of topologies.
\begin{enumerate}
\item The rule $J(U) = \bigcap J_i(U)$ defines
a topology on $\mathcal{C}$.
\item There is a coarsest topology finer than
all of the topologies $J_i$.
\end{enumerate}
\end{lemma}

\begin{proof}
The first part is direct from the definitions.
The second follows by taking the intersection
of all topologies finer than all of the $J_i$.
\end{proof}

\noindent
At this point we can define
without any motivation what a sheaf is.

\begin{definition}
\label{definition-sheaf-sets-topology}
Let $\mathcal{C}$ be a category endowed with a
topology $J$. Let $\mathcal{F}$ be a presheaf of sets
on $\mathcal{C}$.
We say that $\mathcal{F}$ is a
{\it sheaf} on $\mathcal{C}$
if for every $U \in \Ob(\mathcal{C})$ and for
every covering sieve $S$ of $U$ the canonical map
$$
\Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{F})
\longrightarrow
\Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F})
$$
is bijective.
\end{definition}

\noindent
Recall that the left hand side of the displayed
formula equals $\mathcal{F}(U)$. In other words, $\mathcal{F}$
is a sheaf if and only if a section of $\mathcal{F}$
over $U$ is the same thing as a compatible collection of sections
$s_{T, \alpha} \in \mathcal{F}(T)$ parametrized by
$(\alpha : T \to U) \in S(T)$, and this for every covering sieve $S$
on $U$.

\begin{lemma}
\label{lemma-topology-presheaves-sheaves}
Let $\mathcal{C}$ be a category. Let $\{ \mathcal{F}_i \}_{i\in I}$ be a
collection of presheaves of sets on $\mathcal{C}$. For each
$U \in \Ob(\mathcal{C})$ denote
$J(U)$ the set of sieves $S$ with the following property:
For every morphism $V \to U$, the maps
$$
\Mor_{\textit{PSh}(\mathcal{C})}(h_V, \mathcal{F}_i)
\longrightarrow
\Mor_{\textit{PSh}(\mathcal{C})}(S \times_U V, \mathcal{F}_i)
$$
are bijective for all $i \in I$. Then $J$ defines a
topology on $\mathcal{C}$. This topology is the finest
topology in which all of the $\mathcal{F}_i$ are sheaves.
\end{lemma}

\begin{proof}
If we show that $J$ is a topology, then the last statement of
the lemma immediately follows. The first and third axioms of
a topology are immediately verified. Thus, assume that
we have an object $U$, and sieves $S, S'$ of $U$
such that $S \in J(U)$, and for all $V \to U$ in $S(V)$
we have $S' \times_U V \in J(V)$. We have to show that
$S' \in J(U)$. In other words, we have to show that for
any $f : W \to U$, the maps
$$
\mathcal{F}_i(W) =
\Mor_{\textit{PSh}(\mathcal{C})}(h_W, \mathcal{F}_i)
\longrightarrow
\Mor_{\textit{PSh}(\mathcal{C})}(S' \times_U W, \mathcal{F}_i)
$$
are bijective for all $i \in I$. Pick an element
$i \in I$ and pick an element
$\varphi \in
\Mor_{\textit{PSh}(\mathcal{C})}(S' \times_U W, \mathcal{F}_i)$.
We will construct a section $s \in \mathcal{F}_i(W)$
mapping to $\varphi$.

\medskip\noindent
Suppose $\alpha : V \to W$ is an element of $S \times_U W$.
According to the definition of pullbacks we see that
the composition $f \circ\alpha : V \to W  \to U$ is in $S$. Hence
$S' \times_U V$ is in $J(W)$ by assumption on the pair
of sieves $S, S'$. Now we have a commutative diagram
of presheaves
$$
\xymatrix{
S' \times_U V \ar[r] \ar[d] & h_V \ar[d] \\
S' \times_U W \ar[r] & h_W
}
$$
The restriction of $\varphi$ to $S' \times_U V$
corresponds to an element $s_{V, \alpha} \in \mathcal{F}_i(V)$.
This we see from the definition of $J$,
and because $S' \times_U V$ is in $J(W)$.
We leave it to the reader to check
that the rule $(V, \alpha) \mapsto s_{V, \alpha}$ defines
an element
$\psi \in
\Mor_{\textit{PSh}(\mathcal{C})}(S \times_U W, \mathcal{F}_i)$.
Since $S \in J(U)$ we see immediately from the definition of $J$
that $\psi$ corresponds to an element $s$ of $\mathcal{F}_i(W)$.

\medskip\noindent
We leave it to the reader to verify that the construction
$\varphi \mapsto s$ is inverse to the natural map displayed above.
\end{proof}

\begin{definition}
\label{definition-canonical-topology}
Let $\mathcal{C}$ be a category.
The finest topology on $\mathcal{C}$ such that
all representable presheaves are sheaves, see
Lemma \ref{lemma-topology-presheaves-sheaves},
is called the {\it canonical topology} of $\mathcal{C}$.
\end{definition}














\section{The topology defined by a site}
\label{section-topology-site}

\noindent
Suppose that $\mathcal{C}$ is a category, and suppose that
$\text{Cov}_1(\mathcal{C})$ and $\text{Cov}_2(\mathcal{C})$
are sets of coverings that define the structure of a site
on $\mathcal{C}$. In this situation it can happen that
the categories of sheaves (of sets) for $\text{Cov}_1(\mathcal{C})$
and $\text{Cov}_2(\mathcal{C})$ are the same, see for example
Lemma \ref{lemma-refine-same-topology}.

\medskip\noindent
It turns out that the category of sheaves on $\mathcal{C}$
with respect to some topology $J$
determines and is determined by the topology $J$.
This is a nontrivial statement which we will address later,
see Theorem \ref{theorem-topology-and-topos}.

\medskip\noindent
Accepting this for the moment it makes sense to study the
topology determined by a site.

\begin{lemma}
\label{lemma-site-gives-topology}
Let $\mathcal{C}$ be a site with coverings $\text{Cov}(\mathcal{C})$.
For every object $U$ of $\mathcal{C}$, let $J(U)$ denote
the set of sieves $S$ on $U$ with the following property:
there exists a covering
$\{f_i : U_i \to U\}_{i\in I} \in \text{Cov}(\mathcal{C})$
so that the sieve $S'$ generated by the $f_i$ (see Definition
\ref{definition-sieve-generated}) is contained in $S$.
\begin{enumerate}
\item This $J$ is a topology on $\mathcal{C}$.
\item A presheaf $\mathcal{F}$ is a sheaf for this topology
(see Definition \ref{definition-sheaf-sets-topology})
if and only if it is a sheaf on the site (see
Definition \ref{definition-sheaf-sets}).
\end{enumerate}
\end{lemma}

\begin{proof}
To prove the first assertion we just note that axioms
(1), (2) and (3) of the definition of a site
(Definition \ref{definition-site})
directly imply the axioms
(3), (2) and (1) of the definition of a topology
(Definition \ref{definition-topology}). As an example we
prove $J$ has property (2). Namely, let $U$ be an object
of $\mathcal{C}$, let $S, S'$ be sieves on $U$ such that
$S \in J(U)$, and such that for every $V \to U$ in $S(V)$
we have $S' \times_U V \in J(V)$. By definition of $J(U)$
we can find a covering $\{f_i : U_i \to U\}$ of the site
such that $S$ the image of $h_{U_i} \to h_U$ is contained
in $S$. Since each $S'\times_U U_i$ is in $J(U_i)$ we
see that there are coverings $\{U_{ij} \to U_i\}$ of the
site such that $h_{U_{ij}} \to h_{U_i}$ is contained
in $S' \times_U U_i$. By definition of the base change
this means that $h_{U_{ij}} \to h_U$ is contained
in the subpresheaf $S' \subset h_U$. By axiom (2) for
sites we see that $\{U_{ij} \to U\}$ is a covering of
$U$ and we conclude that $S' \in J(U)$ by definition of $J$.

\medskip\noindent
Let $\mathcal{F}$ be a presheaf. Suppose that $\mathcal{F}$
is a sheaf in the topology $J$. We will show that $\mathcal{F}$
is a sheaf on the site as well. Let $\{f_i : U_i \to U\}_{i\in I}$
be a covering of the site. Let $s_i \in \mathcal{F}(U_i)$ be a
family of sections such that
$s_i|_{U_i \times_U U_j} = s_j|_{U_i \times_U U_j}$ for all
$i, j$. We have to show that there exists a unique section
$s \in \mathcal{F}(U)$ restricting back to the $s_i$ on the $U_i$.
Let $S \subset h_U$ be the sieve generated by the $f_i$.
Note that $S \in J(U)$ by definition. In stead of constructing
$s$, by the sheaf condition in the topology, it suffices
to construct an element
$$
\varphi \in \Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F}).
$$
Take $\alpha \in S(T)$ for some object $T \in \mathcal{U}$.
This means exactly that $\alpha : T \to U$ is a morphism
which factors through $f_i$ for some $i\in I$ (and maybe more than $1$).
Pick such an index $i$ and a factorization $\alpha = f_i \circ \alpha_i$.
Define $\varphi(\alpha) = \alpha_i^* s_i$. If $i'$, $\alpha
= f_i \circ \alpha_{i'}'$ is a second choice, then
$\alpha_i^* s_i = (\alpha_{i'}')^* s_{i'}$ exactly because of our
condition $s_i|_{U_i \times_U U_j} = s_j|_{U_i \times_U U_j}$ for all
$i, j$. Thus $\varphi(\alpha)$ is well defined. We leave it to the reader
to verify that $\varphi$, which in turn determines $s$ is correct
in the sense that $s$ restricts back to $s_i$.

\medskip\noindent
Let $\mathcal{F}$ be a presheaf. Suppose that $\mathcal{F}$
is a sheaf on the site $(\mathcal{C}, \text{Cov}(\mathcal{C}))$.
We will show that $\mathcal{F}$ is a sheaf for the topology $J$
as well. Let $U$ be an object of $\mathcal{C}$. Let
$S$ be a covering sieve on $U$ with respect to the topology $J$.
Let
$$
\varphi \in \Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F}).
$$
We have to show there is a unique element in
$\mathcal{F}(U) = \Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{F})$
which restricts back to $\varphi$. By definition there exists
a covering $\{f_i : U_i \to U\}_{i\in I} \in \text{Cov}(\mathcal{C})$
such that $f_i : U_i \in U$ belongs to $S(U_i)$.  Hence
we can set $s_i = \varphi(f_i) \in \mathcal{F}(U_i)$.
Then it is a pleasant exercise to see that
$s_i|_{U_i \times_U U_j} = s_j|_{U_i \times_U U_j}$ for all
$i, j$. Thus we obtain the desired section $s$ by the sheaf
condition for $\mathcal{F}$ on the site
$(\mathcal{C}, \text{Cov}(\mathcal{C}))$.
Details left to the reader.
\end{proof}

\begin{definition}
\label{definition-topology-associated-site}
Let $\mathcal{C}$ be a site with coverings $\text{Cov}(\mathcal{C})$.
The {\it topology associated to $\mathcal{C}$} is the topology
$J$ constructed in Lemma \ref{lemma-site-gives-topology} above.
\end{definition}

\noindent
Let $\mathcal{C}$ be a category.
Let $\text{Cov}_1(\mathcal{C})$ and $\text{Cov}_2(\mathcal{C})$
be two coverings defining the structure of a site on $\mathcal{C}$.
It may very well happen that the topologies defined
by these are the same. If this happens
then we say $\text{Cov}_1(\mathcal{C})$ and
$\text{Cov}_2(\mathcal{C})$ {\it define the same topology} on
$\mathcal{C}$. And if this happens then the categories of sheaves
are the same, by Lemma \ref{lemma-site-gives-topology}.

\medskip\noindent
It is usually the case that we only care about the topology defined
by a collection of coverings, and we view the possibility of choosing
different sets of coverings as a tool to study the topology.

\begin{remark}
\label{remark-enlarge-coverings}
Enlarging the class of coverings.
Clearly, if $\text{Cov}(\mathcal{C})$
defines the structure of a site on $\mathcal{C}$ then we may
add to $\mathcal{C}$ any set of families of morphisms with fixed target
tautologically equivalent
(see Definition \ref{definition-combinatorial-tautological})
to elements of $\text{Cov}(\mathcal{C})$ without changing the topology.
\end{remark}

\begin{remark}
\label{remark-shrink-coverings}
Shrinking the class of coverings. Let $\mathcal{C}$ be a site.
Consider the set
$$
\mathcal{S} = P(\text{Arrows}(\mathcal{C})) \times \Ob(\mathcal{C})
$$
where $P(\text{Arrows}(\mathcal{C}))$ is the power set of the set of morphisms,
i.e., the set of all sets of morphisms.
Let $\mathcal{S}_\tau \subset \mathcal{S}$
be the subset consisting of those $(T, U) \in \mathcal{S}$ such that
(a) all $\varphi \in T$ have target $U$,
(b) the collection $\{\varphi\}_{\varphi \in T}$ is tautologically
equivalent (see Definition \ref{definition-combinatorial-tautological})
to some covering in $\text{Cov}(\mathcal{C})$.
Clearly, considering the elements of $\mathcal{S}_\tau$ as
the coverings, we do not get exactly the notion of a site
as defined in Definition \ref{definition-site}.
The structure $(\mathcal{C}, \mathcal{S}_\tau)$
we get satisfies slightly modified conditions. The modified
conditions are:
\begin{enumerate}
\item[(0')] $\text{Cov}(\mathcal{C}) \subset
P(\text{Arrows}(\mathcal{C})) \times \Ob(\mathcal{C})$,
\item[(1')] If $V \to U$ is an isomorphism then
$(\{V \to U\}, U) \in \text{Cov}(\mathcal{C})$.
\item[(2')] If $(T, U) \in \text{Cov}(\mathcal{C})$
and for $f : U' \to U$ in $T$ we are given
$(T_f, U') \in \text{Cov}(\mathcal{C})$,
then setting $T' = \{f \circ f' \mid f \in T,\ f' \in T_f\}$,
we get $(T', U) \in \text{Cov}(\mathcal{C})$.
\item[(3')] If $(T, U) \in \text{Cov}(\mathcal{C})$ and $g : V \to U$
is a morphism of $\mathcal{C}$ then
\begin{enumerate}
\item $U' \times_{f, U, g} V$ exists for $f : U' \to U$ in $T$, and
\item setting
$T' = \{\text{pr}_2 : U' \times_{f, U, g} V \to V \mid f : U' \to U \in T\}$
for some choice of fibre products we get $(T', V) \in \text{Cov}(\mathcal{C})$.
\end{enumerate}
\end{enumerate}
And it is easy to verify that, given a structure satisfying
(0') -- (3') above, then after suitably enlarging
$\text{Cov}(\mathcal{C})$ (compare Sets,
Section \ref{sets-section-coverings-site}) we get a site.
Obviously there is little difference between this notion and the
actual notion of a site, at least from the point of view of the
topology. There are two benefits:
because of condition (0') above the coverings automatically
form a set, and because of (0') the totality of all structures
of this type forms a set as well.
The price you pay for this is that you have to keep writing
``tautologically equivalent'' everywhere.
\end{remark}

















\section{Sheafification in a topology}
\label{section-sheafification-topology}

\noindent
In this section we explain the analogue of the
sheafification construction in a topology.

\medskip\noindent
Let $\mathcal{C}$ be a category.
Let $J$ be a topology on $\mathcal{C}$.
Let $\mathcal{F}$ be a presheaf of sets.
For every $U \in \Ob(\mathcal{C})$ we
define
$$
L\mathcal{F}(U)
=
\colim_{S \in J(U)^{opp}}
\Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F})
$$
as a colimit. Here we think of $J(U)$ as a partially ordered set,
ordered by inclusion, see Lemma \ref{lemma-sieves-set}. The transition
maps in the system are defined as follows.
If $S \subset S'$ are in $J(U)$, then $S \to S'$ is
a morphism of presheaves. Hence there is a natural restriction
mapping
$$
\Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F})
\longrightarrow
\Mor_{\textit{PSh}(\mathcal{C})}(S', \mathcal{F}).
$$
Thus we see that
$S \mapsto \Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F})$
is a directed system as in Categories,
Definition \ref{categories-definition-system-over-poset}
provided we reverse the ordering
on $J(U)$ (which is what the superscript ${}^{opp}$ is supposed to
indicate). In particular, since $h_U \in J(U)$
there is a canonical map
$$
\ell : \mathcal{F}(U) \longrightarrow L\mathcal{F}(U)
$$
coming from the identification
$\mathcal{F}(U) = \Mor_{\textit{PSh}(\mathcal{C})}(h_U, \mathcal{F})$.
In addition, the colimit defining $L\mathcal{F}(U)$ is directed
since for any pair of covering sieves $S, S'$ on $U$ the
sieve $S \cap S'$ is a covering sieve too, see Lemma \ref{lemma-sieves-set}.

\medskip\noindent
Let $f : V \to U$ be a morphism in $\mathcal{C}$.
Let $S \in J(U)$. There is a commutative diagram
$$
\xymatrix{
S \times_U V \ar[r] \ar[d] & h_V \ar[d] \\
S \ar[r] & h_U
}
$$
We can use the left vertical map to get canonical restriction maps
$$
\Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F})
\to \Mor_{\textit{PSh}(\mathcal{C})}(S \times_U V, \mathcal{F}).
$$
Base change $S \mapsto S \times_U V$ induces an order
preserving map $J(U) \to J(V)$. And the restriction maps
define a transformation of functors as in
Categories, Lemma {categories-lemma-functorial-colimit}.
Hence we get a natural restriction map
$$
L\mathcal{F}(U) \longrightarrow L\mathcal{F}(V).
$$

\begin{lemma}
\label{lemma-L-presheaf}
In the situation above.
\begin{enumerate}
\item The assignment $U \mapsto L\mathcal{F}(U)$ combined with the
restriction mappings defined above is a presheaf.
\item The maps $\ell$ glue to give a morphism of presheaves
$\ell : \mathcal{F} \to L\mathcal{F}$.
\item The rule $\mathcal{F} \mapsto (\mathcal{F} \xrightarrow{\ell}
L\mathcal{F})$ is a functor.
\item If $\mathcal{F}$ is a subpresheaf of $\mathcal{G}$, then
$L\mathcal{F}$ is a subpresheaf of $L\mathcal{G}$.
\item The map $\ell : \mathcal{F} \to L\mathcal{F}$ has the
following property: For every section $s \in L\mathcal{F}(U)$
there exists a covering sieve $S$ on $U$ and an element
$\varphi \in \Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F})$
such that $\ell(\varphi)$ equals the restriction of
$s$ to $S$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-presheaf-separated-topology}
Let $\mathcal{C}$ be a category.
Let $J$ be a topology on $\mathcal{C}$.
We say that a presheaf of sets $\mathcal{F}$
is {\it separated} if for every object $U$ and
every covering sieve $S$ on $U$ the canonical map
$\mathcal{F}(U) \to \Mor_{\textit{PSh}(\mathcal{C})}(S, \mathcal{F})$
is injective.
\end{definition}

\begin{theorem}
\label{theorem-L-topology}
Let $\mathcal{C}$ be a category.
Let $J$ be a topology on $\mathcal{C}$.
Let $\mathcal{F}$ be a presheaf of sets.
\begin{enumerate}
\item The presheaf $L\mathcal{F}$ is separated.
\item If $\mathcal{F}$ is separated, then $L\mathcal{F}$ is a sheaf
and the map of presheaves $\mathcal{F} \to L\mathcal{F}$ is injective.
\item If $\mathcal{F}$ is a sheaf, then $\mathcal{F} \to L\mathcal{F}$
is an isomorphism.
\item The presheaf $LL\mathcal{F}$ is always a sheaf.
\end{enumerate}
\end{theorem}

\begin{proof}
Part (3) is trivial from the definition of $L$ and
the definition of a sheaf (Definition \ref{definition-sheaf-sets-topology}).
Part (4) follows formally from the others.

\medskip\noindent
We sketch the proof of (1). Suppose $S$ is a covering sieve
of the object $U$. Suppose that $\varphi_i \in L\mathcal{F}(U)$,
$i = 1, 2$ map to the same element in
$\Mor_{\textit{PSh}(\mathcal{C})}(S, L\mathcal{F})$.
We may find a single covering sieve $S'$ on $U$ such
that both $\varphi_i$ are represented by elements
$\varphi_i \in \Mor_{\textit{PSh}(\mathcal{C})}(S', \mathcal{F})$.
We may assume that $S' = S$ by replacing both $S$ and $S'$ by
$S' \cap S$ which is also a covering sieve, see Lemma \ref{lemma-sieves-set}.
Suppose $V\in \Ob(\mathcal{C})$, and
$\alpha : V \to U$ in $S(V)$.
Then we have $S \times_U V = h_V$,
see Lemma \ref{lemma-pullback-sieve-section}. Thus the restrictions
of $\varphi_i$ via $V \to U$ correspond to sections $s_{i, V, \alpha}$
of $\mathcal{F}$ over $V$. The assumption is that there exist
a covering sieve $S_{V, \alpha}$ of $V$ such that
$s_{i, V, \alpha}$ restrict to the same element of
$\Mor_{\textit{PSh}(\mathcal{C})}(S_{V, \alpha}, \mathcal{F})$.
Consider the sieve $S''$ on $U$ defined by the rule
\begin{eqnarray}
\label{equation-S-prime-prime}
(f : T \to U) \in S''(T)
& \Leftrightarrow &
\exists\ V , \ \alpha : V \to U, \ \alpha \in S(V), \nonumber \\
& &
\exists\ g : T \to V, \ g \in S_{V, \alpha}(T), \\
& &
f = \alpha \circ g \nonumber
\end{eqnarray}
By axiom (2) of a topology we see that $S''$ is a covering
sieve on $U$. By construction we see that $\varphi_1$
and $\varphi_2$ restrict to the same element of
$\Mor_{\textit{PSh}(\mathcal{C})}(S'', L\mathcal{F})$
as desired.

\medskip\noindent
We sketch the proof of (2). Assume that $\mathcal{F}$ is a
separated presheaf of sets on $\mathcal{C}$ with respect to
the topology $J$.
Let $S$ be a covering sieve of the object $U$ of $\mathcal{C}$.
Suppose that $\varphi \in \Mor_\mathcal{C}(S, L\mathcal{F})$.
We have to find an element $s \in L\mathcal{F}(U)$ restricting
to $\varphi$. Suppose $V\in \Ob(\mathcal{C})$, and
$\alpha : V \to U$ in $S(V)$. The value $\varphi(\alpha)
\in L\mathcal{F}(V)$ is given by a covering sieve
$S_{V, \alpha}$ of $V$ and a morphism of presheaves
$\varphi_{V, \alpha} : S_{V, \alpha} \to \mathcal{F}$.
As in the proof above, define a covering sieve $S''$ on $U$ by
Equation (\ref{equation-S-prime-prime}). We define
$$
\varphi'' : S'' \longrightarrow \mathcal{F}
$$
by the following simple rule: For every $f : T \to U$,
$f \in S''(T)$ choose $V, \alpha, g$ as in
Equation (\ref{equation-S-prime-prime}). Then set
$$
\varphi''(f) = \varphi_{V, \alpha}(g).
$$
We claim this is independent of the
choice of $V, \alpha, g$.
Consider a second such choice$ V', \alpha', g'$.
The restrictions of $\varphi_{V, \alpha}$ and
$\varphi_{V', \alpha'}$ to the intersection
of the following covering sieves on $T$
$$
(S_{V, \alpha} \times_{V, g} T) \cap (S_{V', \alpha'} \times_{V', g'} T)
$$
agree. Namely, these restrictions both correspond to the
restriction of $\varphi$ to $T$ (via $f$) and the desired
equality follows because $\mathcal{F}$ is separated.
Denote the common restriction $\psi$.
The independence of choice follows because
$\varphi_{V, \alpha}(g) = \psi(\text{id}_T) =
\varphi_{V', \alpha'}(g')$. OK, so now $\varphi''$
gives an element $s \in L\mathcal{F}(U)$. We leave it to
the reader to check that $s$ restricts to $\varphi$.
\end{proof}

\begin{definition}
\label{definition-associated-sheaf-topology}
Let $\mathcal{C}$ be a category endowed with a topology $J$.
Let $\mathcal{F}$ be a presheaf of sets on $\mathcal{C}$.
The sheaf $\mathcal{F}^\# := LL\mathcal{F}$
together with the canonical map $\mathcal{F} \to \mathcal{F}^\#$
is called the {\it sheaf associated to $\mathcal{F}$}.
\end{definition}

\begin{proposition}
\label{proposition-sheafification-adjoint-topology}
Let $\mathcal{C}$ be a category endowed with a topology.
Let $\mathcal{F}$ be a presheaf of sets on $\mathcal{C}$.
The canonical map $\mathcal{F} \to \mathcal{F}^\#$ has the
following universal property: For any map
$\mathcal{F} \to \mathcal{G}$,
where $\mathcal{G}$ is a sheaf of sets, there is a unique map
$\mathcal{F}^\# \to \mathcal{G}$ such that $\mathcal{F} \to \mathcal{F}^\#
\to \mathcal{G}$ equals the given map.
\end{proposition}

\begin{proof}
Same as the proof of Proposition \ref{proposition-sheafification-adjoint}.
\end{proof}














\section{Topologies and sheaves}
\label{section-topology-and-sheaves}

\begin{lemma}
\label{lemma-sieve-sheafification}
Let $\mathcal{C}$ be a category endowed with a topology $J$.
Let $U$ be an object of $\mathcal{C}$.
Let $S$ be a sieve on $U$. The following are equivalent
\begin{enumerate}
\item The sieve $S$ is a covering sieve.
\item The sheafification $S^\# \to h_U^\#$
of the map $S \to h_U$ is an isomorphism.
\end{enumerate}
\end{lemma}

\begin{proof}
First we make a couple of general remarks.
We will use that $S^\# = LLS$, and $h_U^\# = LLh_U$.
In particular, by Lemma \ref{lemma-L-presheaf}, we see that
$S^\# \to h_U^\#$ is injective. Note that
$\text{id}_U \in h_U(U)$. Hence it gives rise to
sections of $Lh_U$ and $h_U^\# = LLh_U$ over $U$ which
we will also denote $\text{id}_U$.

\medskip\noindent
Suppose $S$ is a covering sieve. It clearly suffices to
find a morphism $h_U \to S^\#$ such that the composition
$h_U \to h_U^\#$ is the canonical map. To find such a map
it suffices to find a section $s \in S^\#(U)$ wich restricts
to $\text{id}_U$. But since $S$ is a
covering sieve, the element
$\text{id}_S \in \Mor_{\textit{PSh}(\mathcal{C})}(S, S)$
gives rise to a section of $LS$ over $U$ which restricts to
$\text{id}_U$ in $Lh_U$. Hence we win.

\medskip\noindent
Suppose that $S^\# \to h_U^\#$ is an isomorphism.
Let $1 \in S^\#(U)$ be the element corresponding to
$\text{id}_U$ in $h_U^\#(U)$. Because $S^\# = LLS$
there exists a covering sieve $S'$ on $U$ such that
$1$ comes from a
$$
\varphi \in \Mor_{\textit{PSh}(\mathcal{C})}(S', LS).
$$
This in turn means that for every $\alpha : V \to U$,
$\alpha\in S'(V)$ there exists a covering sieve $S_{V, \alpha}$
on $V$ such that $\varphi(\text{id}_V)$ corresponds to
a morphism of presheaves $S_{V, \alpha} \to S$. In other words
$S_{V, \alpha}$ is contained in $S \times_U V$. By the second
axiom of a topology we see that $S$ is a covering sieve.
\end{proof}

\begin{theorem}
\label{theorem-topology-and-topos}
Let $\mathcal{C}$ be a category.
Let $J$, $J'$ be topologies on $\mathcal{C}$.
The following are equivalent
\begin{enumerate}
\item $J = J'$,
\item sheaves for the topology $J$ are the same as
sheaves for the topology $J'$.
\end{enumerate}
\end{theorem}

\begin{proof}
It is a tautology that if $J = J'$ then the notions of sheaves
are the same. Conversely, Lemma \ref{lemma-sieve-sheafification}
characterizes covering sieves in terms of the sheafification
functor. But the sheafification functor
$\textit{PSh}(\mathcal{C}) \to \Sh(\mathcal{C}, J)$
is the right adjoint of the inclusion functor
$\Sh(\mathcal{C}, J) \to \textit{PSh}(\mathcal{C})$.
Hence if the subcategories
$\Sh(\mathcal{C}, J)$ and
$\Sh(\mathcal{C}, J')$ are the same, then the sheafification
functors are the same and hence the collections of covering
sieves are the same.
\end{proof}

\begin{lemma}
\label{lemma-finer-topology}
Assumption and notation as in Theorem \ref{theorem-topology-and-topos}.
Then $J \subset J'$ if and only if every sheaf for the
topology $J'$ is a sheaf for the topology $J$.
\end{lemma}

\begin{proof}
One direction is clear. For the other direction suppose that
$\Sh(\mathcal{C}, J') \subset \Sh(\mathcal{C}, J)$.
By formal nonsense this implies
that if $\mathcal{F}$ is a presheaf of sets,
and $\mathcal{F} \to \mathcal{F}^\#$,
resp.\ $\mathcal{F} \to \mathcal{F}^{\#, \prime}$
is the sheafification wrt $J$, resp.\ $J'$ then there
is a canonical map $\mathcal{F}^\# \to \mathcal{F}^{\#, \prime}$
such that
$\mathcal{F} \to \mathcal{F}^\# \to \mathcal{F}^{\#, \prime}$
equals the canonical map $\mathcal{F} \to \mathcal{F}^{\#, \prime}$.
Of course, $\mathcal{F}^\# \to \mathcal{F}^{\#, \prime}$
identifies the second sheaf as the sheafification of the first
with respect to the topology $J'$.
Apply this to the map $S \to h_U$ of
Lemma \ref{lemma-sieve-sheafification}. We get a commutative
diagram
$$
\xymatrix{
S \ar[r] \ar[d] &
S^\# \ar[r] \ar[d] &
S^{\#, \prime} \ar[d] \\
h_U \ar[r] &
h_U^\# \ar[r] &
h_U^{\#, \prime}
}
$$
And clearly, if $S$ is a covering sieve for the topology $J$
then the middle vertical map is an isomorphism (by the lemma)
and we conclude that the right vertical map is an isomorphism as
it is the sheafification of the one in the middle wrt $J'$.
By the lemma again we conclude that $S$ is a covering sieve
for $J'$ as well.
\end{proof}




\section{Topologies and continuous functors}
\label{section-topologies-continuous-functors}

\noindent
Explain how a continuous functor gives an adjoint
pair of functors on sheaves.





\section{Points and topologies}
\label{section-points-topologies}

\noindent
Recall from Section \ref{section-points} that given a functor
$p = u : \mathcal{C} \to \textit{Sets}$ we can define
a stalk functor
$$
\textit{PSh}(\mathcal{C}) \longrightarrow \textit{Sets},
\mathcal{F} \longmapsto \mathcal{F}_p.
$$

\begin{definition}
\label{definition-point-topology}
Let $\mathcal{C}$ be a category.
Let $J$ be a topology on $\mathcal{C}$.
A {\it point $p$} of the topology is given by a functor
$u : \mathcal{C} \to \textit{Sets}$ such that
\begin{enumerate}
\item For every covering sieve $S$ on $U$ the map
$S_p \to (h_U)_p$ is surjective.
\item The stalk functor $\Sh(\mathcal{C}) \to \textit{Sets}$,
$\mathcal{F} \to \mathcal{F}_p$ is exact.
\end{enumerate}
\end{definition}












\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
