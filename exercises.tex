\input{preamble}

% OK, start here.
%
\begin{document}

\title{Exercises}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents


\section{Algebra}
\label{section-algebra}

\noindent
This first section just contains some assorted questions.

\begin{exercise}
\label{exercise-isomorphism-localizations}
Let $A$ be a ring, and ${\mathfrak m}$ a maximal ideal. In $A[X]$
let $\tilde {\mathfrak m}_1 = ({\mathfrak m}, X)$ and
$\tilde {\mathfrak m}_2 = ({\mathfrak m}, X-1)$. Show
that
$$
A[X]_{\tilde {\mathfrak m}_1} \cong A[X]_{\tilde {\mathfrak m}_2}.
$$
\end{exercise}

\begin{exercise}
\label{exercise-coherent}
Find an example of a non Noetherian ring $R$ such that every
finitely generated ideal of $R$ is finitely presented as an $R$-module.
(A ring is said to be {\it coherent} if the last property holds.)
\end{exercise}

\begin{exercise}
\label{exercise-flat-ideals-pid}
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring. For any
finite $A$-module $M$ define $r(M)$ to be the minimum number
of generators of $M$ as an $A$-module. This number equals
$\dim_k M/{\mathfrak m} M = \dim_k M \otimes_A k$ by NAK.
\begin{enumerate}
\item Show that $r(M \otimes_A N) = r(M)r(N)$.
\item Let $I\subset A $ be an ideal with $r(I) > 1$. Show that
$r(I^2) < r(I)^2$.
\item Conclude that if every ideal in $A$ is a flat module, then
$A$ is a PID (or a field).
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-not-isomorphic}
Let $k$ be a field. Show that the following pairs of
$k$-algebras are not isomorphic:
\begin{enumerate}
\item $k[x_1, \ldots, x_n]$ and $k[x_1, \ldots, x_{n + 1}]$ for any
$n\geq 1$.
\item $k[a, b, c, d, e, f]/(ab + cd + ef)$ and $k[x_1, \ldots, x_n]$
for $n = 5$.
\item $k[a, b, c, d, e, f]/(ab + cd + ef)$ and $k[x_1, \ldots, x_n]$
for $n = 6$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-simple-geometric}
Of course the idea of this exercise is to find
a simple argument in each case rather than applying a ``big'' theorem.
Nonetheless it is good to be guided by general principles.
\end{remark}

\begin{exercise}
\label{exercise-silly}
Algebra. (Silly and should be easy.)
\begin{enumerate}
\item Give an example of a ring $A$ and a nonsplit
short exact sequence of $A$-modules
$$
0 \to M_1 \to M_2 \to M_3 \to 0.
$$
\item Give an example of a nonsplit sequence of $A$-modules
as above and a faithfully flat $A \to B$ such that
$$
0 \to M_1\otimes_A B \to M_2\otimes_A B \to M_3\otimes_A B \to 0.
$$
is split as a sequence of $B$-modules.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-field-kummer}
Suppose that $k$ is a field having a primitive $n$th root
of unity $\zeta$. This means that $\zeta^n = 1$, but $\zeta^m\not = 1$ for
$0 < m < n$.
\begin{enumerate}
\item Show that the characteristic of $k$ is prime to $n$.
\item Suppose that $a \in k$ is an element of $k$ which is not
an $d$th power in $k$ for any divisor $d$ of $n$ for $n \geq d > 1$. Show that
$k[x]/(x^n-a)$ is a field. (Hint: Consider a splitting field for
$x^n-a$ and use Galois theory.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-valuation}
Let $\nu : k[x]\setminus \{0\}  \to {\mathbf Z}$ be a map
with the following properties: $\nu(fg) = \nu(f) + \nu(g)$ whenever
$f$, $g$ not zero, and  $\nu(f + g) \geq min(\nu(f), \nu(g))$ whenever
$f$, $g$, $f + g$ are not zero, and $\nu(c) = 0$ for all $c\in k^*$.
\begin{enumerate}
\item Show that if $f$, $g$, and $f + g$ are nonzero and
$\nu(f) \not = \nu(g)$ then we have equality $\nu(f + g) = min(\nu(f), \nu(g))$.
\item Show that if $f = \sum a_i x^i$, $f\not = 0$, then
$\nu(f) \geq min(\{i\nu(x)\}_{a_i\not = 0})$. When does equality hold?
\item Show that if $\nu$ attains a negative value then
$\nu(f) = -n \deg(f)$ for some $n\in {\mathbf N}$.
\item Suppose $\nu(x) \geq 0$. Show that
$\{f \mid f = 0, \ or\ \nu(f) > 0\}$ is a prime ideal of $k[x]$.
\item Describe all possible $\nu$.
\end{enumerate}
\end{exercise}


\noindent
Let $A$ be a ring. An {\it idempotent} is an element $e \in A$
such that $e^2 = e$. The elements $1$ and $0$ are always idempotent.
A {\it nontrivial idempotent} is an idempotent which is not
equal to zero. Two idempotents $e, e' \in A$ are called {\it orthogonal}
if $ee' = 0$.

\begin{exercise}
\label{exercise-product}
Let $A$ be a ring. Show that $A$ is a product of two nonzero rings if
and only if $A$ has a nontrivial idempotent.
\end{exercise}

\begin{exercise}
\label{exercise-lift-idempotents}
Let $A$ be a ring and let $I \subset A$ be a locally nilpotent ideal.
Show that the map $A \to A/I$ induces a bijection on idempotents.
(Hint: It may be easier to prove this when $I$ is nilpotent. Do this first.
Then use ``absolute Noetherian reduction'' to reduce to the nilpotent case.)
\end{exercise}








\section{Colimits}
\label{section-colimits}


\begin{definition}
\label{definition-directed-poset}
A {\it directed set} is a nonempty set $I$ endowed with a preorder $\leq$
such that given any pair $i, j \in I$ there exists a $k \in I$ such that
$i \leq k$ and $j \leq k$. A {\it system of rings} over $I$ is given by a
ring $A_i$ for each $i \in I$ and a map of rings $\varphi_{ij} : A_i \to A_j$
whenever $i \leq j$ such that the composition $A_i \to A_j \to A_k$ is equal to
$A_i \to A_k$ whenever $i \leq j \leq k$.
\end{definition}

\noindent
One similarly defines systems of groups, modules over a fixed ring,
vector spaces over a field, etc.

\begin{exercise}
\label{exercise-directed-colimit}
Let $I$ be a directed set and let
$(A_i, \varphi_{ij})$ be a system of rings over $I$.
Show that there exists a ring $A$ and maps $\varphi_i : A_i \to A$
such that $\varphi_j \circ \varphi_{ij} = \varphi_i$ for all $i \leq j$
with the following universal property: Given any ring $B$
and maps $\psi_i : A_i \to B$ such that
$\psi_j \circ \varphi_{ij} = \psi_i$ for all $i \leq j$, then
there exists a unique ring map $\psi : A \to B$ such that
$\psi_i = \psi \circ \varphi_i$.
\end{exercise}

\begin{definition}
\label{definition-colimit}
The ring $A$ constructed in Exercise \ref{exercise-directed-colimit}
is called the {\it colimit} of the system. Notation $\colim A_i$.
\end{definition}

\begin{exercise}
\label{exercise-prime-in-colimit}
Let $(I, \geq)$ be a directed set and let
$(A_i, \varphi_{ij})$ be a system of rings over $I$ with colimit
$A$. Prove that there is a bijection
$$
\Spec(A) = \{(\mathfrak p_i)_{i \in I} \mid
\mathfrak p_i \subset A_i \text{ and }
\mathfrak p_i = \varphi_{ij}^{-1}(\mathfrak p_j)\ \forall i \leq j\}
\subset \prod\nolimits_{i \in I} \Spec(A_i)
$$
The set on the right hand side of the equality is the limit of the sets
$\Spec(A_i)$. Notation $\lim \Spec(A_i)$.
\end{exercise}

\begin{exercise}
\label{exercise-colimit-surjective}
Let $(I, \geq)$ be a directed set and let
$(A_i, \varphi_{ij})$ be a system of rings over $I$ with colimit
$A$. Suppose that $\Spec(A_j) \to \Spec(A_i)$ is
surjective for all $i \leq j$. Show that
$\Spec(A) \to \Spec(A_i)$ is surjective for all $i$.
(Hint: You can try to use Tychonoff, but there is also a basically trivial
direct algebraic proof based on
Algebra, Lemma \ref{algebra-lemma-in-image}.)
\end{exercise}

\begin{exercise}
\label{exercise-integral-colimit-finite}
Let $A \subset B$ be an integral ring extension. Prove that
$\Spec(B) \to \Spec(A)$ is surjective.
Use the exercises above, the fact that this holds for a finite ring
extension (proved in the lectures), and by proving that
$B = \colim B_i$ is a directed colimit of finite extensions $A \subset B_i$.
\end{exercise}

\begin{exercise}
\label{exercise-colimit-tensor}
Let $(I, \geq)$ be a directed set.
Let $A$ be a ring and let $(N_i, \varphi_{i, i'})$ be a directed system of
$A$-modules indexed by $I$. Suppose that $M$ is another $A$-module. Prove
that
$$
\colim_{i\in I} M \otimes_A N_i\cong
M \otimes_A \Big( \colim_{i\in I} N_i\Big).
$$
\end{exercise}

\begin{definition}
\label{definition-finite-presentation}
A module $M$ over $R$ is said to be of {\it finite presentation} over
$R$ if it  is isomorphic to the cokernel of a map of finite free modules
$ R^{\oplus n} \to R^{\oplus m}$.
\end{definition}

\begin{exercise}
\label{exercise-colimit-modules}
Prove that any module over any ring is
\begin{enumerate}
\item the colimit of its finitely generated submodules, and
\item in some way a colimit of finitely presented modules.
\end{enumerate}
\end{exercise}





\section{Additive and abelian categories}
\label{section-additive}

\begin{exercise}
\label{exercise-filtered-vector-spaces}
Let $k$ be a field. Let $\mathcal{C}$ be the category of filtered vector
spaces over $k$, see
Homology, Definition \ref{homology-definition-filtered}
for the definition of a filtered object of any category.
\begin{enumerate}
\item Show that this is an additive category (explain carefuly what the
direct sum of two objects is).
\item Let $f : (V, F) \to (W, F)$ be a morphism of $\mathcal{C}$.
Show that $f$ has a kernel and cokernel (explain precisely
what the kernel and cokernel of $f$ are).
\item Give an example of a map of $\mathcal{C}$ such that
the canonical map $\Coim(f) \to \Im(f)$ is not an isomorphism.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-torsion-free}
Let $R$ be a Noetherian domain. Let $\mathcal{C}$ be the category of
finitely generated torsion free $R$-modules.
\begin{enumerate}
\item Show that this is an additive category.
\item Let $f : N \to M$ be a morphism of $\mathcal{C}$.
Show that $f$ has a kernel and cokernel (make sure you define precisely
what the kernel and cokernel of $f$ are).
\item Give an example of a Noetherian domain $R$ and a map of
$\mathcal{C}$ such that the canonical map $\Coim(f) \to \Im(f)$
is not an isomorphism.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-other}
Give an example of a category which is additive and has kernels
and cokernels but which is not as in
Exercises \ref{exercise-filtered-vector-spaces} and
\ref{exercise-torsion-free}.
\end{exercise}





\section{Tensor product}
\label{section-tensor-product}

\noindent
Tensor products are introduced in Algebra, Section
\ref{algebra-section-tensor-product}.
Let $R$ be a ring. Let $\text{Mod}_R$ be the category of $R$-modules.
We will say that a functor $F : \text{Mod}_R \to \text{Mod}_R$
\begin{enumerate}
\item is additive if
$F : \Hom_R(M, N) \to \Hom_R(F(M), F(N))$
is a homomorphism of abelian groups
for any $R$-modules $M, N$, see
Homology, Definition \ref{homology-definition-preadditive}.
\item $R$-linear if $F : \Hom_R(M, N) \to \Hom_R(F(M), F(N))$ is $R$-linear
for any $R$-modules $M, N$,
\item right exact if for any short exact sequence
$0 \to M_1 \to M_2 \to M_3 \to 0$ the sequence
$F(M_1) \to F(M_2) \to F(M_3) \to 0$ is exact,
\item left exact if for any short exact sequence
$0 \to M_1 \to M_2 \to M_3 \to 0$ the sequence
$0 \to F(M_1) \to F(M_2) \to F(M_3)$ is exact,
\item commutes with direct sums, if given a set
$I$ and $R$-modules $M_i$ the maps
$F(M_i) \to F(\bigoplus M_i)$ induce an isomorphism
$\bigoplus F(M_i) = F(\bigoplus M_i)$.
\end{enumerate}

\begin{exercise}
\label{exercise-characterize-tensor-functor}
Let $R$ be a ring. With notation as above.
\begin{enumerate}
\item Give an example of a ring $R$ and an additive functor
$F : \text{Mod}_R \to \text{Mod}_R$ which is not $R$-linear.
\item Let $N$ be an $R$-module. Show that the functor
$F(M) = M \otimes_R N$ is $R$-linear,
right exact, and commutes with direct sums,
\item Conversely, show that any functor $F : \text{Mod}_R \to \text{Mod}_R$
which is $R$-linear,
right exact, and commutes with direct sums is of the
form $F(M) = M \otimes_R N$ for some $R$-module $N$.
\item Show that if in (3) we drop the assumption
that $F$ commutes with direct sums, then the conclusion no
longer holds.
\end{enumerate}
\end{exercise}





\section{Flat ring maps}
\label{section-flat}

\begin{exercise}
\label{exercise-localization-flat}
Let $S$ be a multiplicative subset of the ring $A$.
\begin{enumerate}
\item For an $A$-module $M$ show that $S^{-1}M = S^{-1}A \otimes_A M$.
\item Show that $S^{-1}A$ is flat over $A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-examples-not-flat}
Find an injection $M_1 \to M_2$ of $A$-modules such that
$M_1\otimes N \to M_2 \otimes N$ is not injective in the following
cases:
\begin{enumerate}
\item $A = k[x, y]$ and $N = (x, y) \subset A$. (Here and below $k$ is a field.)
\item $A = k[x, y]$ and $N = A/(x, y)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-flat-not-projective}
Give an example of a ring $A$ and a finite $A$-module $M$
which is a flat but not a projective $A$-module.
\end{exercise}

\begin{remark}
\label{remark-flat-not-projective}
If $M$ is of finite presentation and flat over $A$,
then $M$ is projective over $A$. Thus your example will have to
involve a ring $A$ which is not Noetherian. I know of an example
where $A$ is the ring of ${\mathcal C}^\infty$-functions on ${\mathbf R}$.
\end{remark}

\begin{exercise}
\label{exercise-flat-not-free-dvr}
Find a flat but not free module over ${\mathbf Z}_{(2)}$.
\end{exercise}

\begin{exercise}
\label{exercise-flat-deformations}
Flat deformations.
\begin{enumerate}
\item Suppose that $k$ is a field and $k[\epsilon]$ is the ring of
dual numbers $k[\epsilon] = k[x]/(x^2)$ and $\epsilon = \bar x$. Show that for
any $k$-algebra $A$ there is a flat $k[\epsilon]$-algebra $B$ such that
$A$ is isomorphic to $B/\epsilon B$.
\item Suppose that $k = {\mathbf F}_p = {\mathbf Z}/p{\mathbf Z}$ and
$$
A = k[x_1, x_2, x_3, x_4, x_5, x_6]/
(x_1^p, x_2^p, x_3^p, x_4^p, x_5^p, x_6^p).
$$
Show that there exists a flat ${\mathbf Z}/p^2{\mathbf Z}$-algebra $B$ such
that $B/pB$ is isomorphic to $A$. (So here $p$ plays the role of $\epsilon$.)
\item Now let $p = 2$ and consider the same question for
$k = {\mathbf F}_2 = {\mathbf Z}/2{\mathbf Z}$ and
$$
A = k[x_1, x_2, x_3, x_4, x_5, x_6]/
(x_1^2, x_2^2, x_3^2, x_4^2, x_5^2, x_6^2, x_1x_2 + x_3x_4 + x_5x_6).
$$
However, in this case show that there does {\it not} exist a flat
${\mathbf Z}/4{\mathbf Z}$-algebra $B$ such that $B/2B$ is isomorphic to
$A$. (Find the trick! The same example works in arbitrary characteristic
$p > 0$, except that the computation is more difficult.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-flat-given-residue-field-extension}
Let $(A, {\mathfrak m}, k)$ be a local ring and let $k \subset k'$ be
a finite field extension. Show there exists a flat, local map of
local rings $A \to B$ such that ${\mathfrak m}_B = {\mathfrak m} B$ and
$B/{\mathfrak m} B$ is
isomorphic to $k'$ as $k$-algebra. (Hint: first do the case where
$k \subset k'$ is generated by a single element.)
\end{exercise}

\begin{remark}
\label{remark-flat-given-residue-field-extension-general}
The same result holds for arbitrary field extensions $k \subset K$.
\end{remark}










\section{The Spectrum of a ring}
\label{section-spectrum-ring}

\begin{exercise}
\label{exercise-spec-Z}
Compute $\Spec(\mathbf{Z})$ as a set and describe its topology.
\end{exercise}

\begin{exercise}
\label{exercise-basis-opens-standard}
Let $A$ be any ring. For $f\in A$ we define
$D(f):= \{\mathfrak p \subset A \mid f \not \in \mathfrak p\}$.
Prove that the open subsets $D(f)$ form a basis of the topology of
$\Spec(A)$.
\end{exercise}

\begin{exercise}
\label{exercise-radical-ideals-closed}
Prove that the map $I\mapsto V(I)$
defines a natural bijection
$$
\{I\subset A\text{ with }I = \sqrt{I}\}
\longrightarrow
\{T\subset \Spec(A)\text{ closed}\}
$$
\end{exercise}

\begin{definition}
\label{definition-quasi-compact}
A topological space $X$ is called {\it quasi-compact}
if for any open covering $X = \bigcup_{i\in I} U_i$ there is a finite
subset $\{i_1, \ldots, i_n\}\subset I$ such that $X = U_{i_1}\cup\ldots
U_{i_n}$.
\end{definition}

\begin{exercise}
\label{exercise-spec-quasi-compact}
Prove that $\Spec(A)$ is quasi-compact for any ring $A$.
\end{exercise}

\begin{definition}
\label{definition-Hausdorff}
A topological space $X$ is said to verify the separation axiom $T_0$
if for any pair of points $x, y\in X$, $x\not = y$ there is an open
subset of $X$ containing one but not the other.
We say that $X$ is {\it Hausdorff} if for any pair $x, y\in X$, $x\not = y$
there are disjoint open subsets $U, V$ such that $x\in U$
and $y\in V$.
\end{definition}

\begin{exercise}
\label{exercise-not-hausdorff}
Show that $\Spec(A)$ is {\bf not} Hausdorff in general.
Prove that $\Spec(A)$ is $T_0$. Give an example of a topological
space $X$ that is not $T_0$.
\end{exercise}

\begin{remark}
\label{remark-not-hausdorff}
Usually the word compact is reserved for quasi-compact and
Hausdorff spaces.
\end{remark}

\begin{definition}
\label{definition-irreducible}
A topological space $X$ is called {\it irreducible} if $X$ is not empty
and if $X = Z_1\cup Z_2$ with $Z_1, Z_2\subset X$ closed, then either
$Z_1 = X$ or $Z_2 = X$. A subset $T\subset X$ of a topological space
is called {\it irreducible} if it is an irreducible
topological space with the topology induced from $X$.
This definition implies $T$ is irreducible if and only
if the closure $\bar T$ of $T$ in $X$ is irreducible.
\end{definition}

\begin{exercise}
\label{exercise-irreducible-spec}
Prove that $\Spec(A)$ is irreducible if and only if
$Nil(A)$ is a prime ideal and that in this case it is the unique
minimal prime ideal of $A$.
\end{exercise}

\begin{exercise}
\label{exercise-irreducible-prime}
Prove that a closed subset $T\subset \Spec(A)$
is irreducible if and only if it is of the form $T = V({\mathfrak p})$ for
some prime ideal ${\mathfrak p}\subset A$.
\end{exercise}

\begin{definition}
\label{definition-generic-point}
A point $x$ of an irreducible topological space $X$ is called
a {\it generic point} of $X$ if $X$ is equal to the closure of
the subset $\{x\}$.
\end{definition}

\begin{exercise}
\label{exercise-irreducible-T0-at-most-one-generic}
Show that in a $T_0$ space $X$ every irreducible closed
subset has at most one generic point.
\end{exercise}

\begin{exercise}
\label{exercise-spec-sober}
Prove that in $\Spec(A)$ every
irreducible closed subset {\it does} have a generic point.
In fact show that the map
${\mathfrak p} \mapsto \overline{\{{\mathfrak p}\}}$ is
a bijection of $\Spec(A)$ with the set of irreducible closed
subsets of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-irreducible-subset-not-generic}
Give an example to show that an irreducible
subset of $\Spec(\mathbf{Z})$ does not necessarily have a generic point.
\end{exercise}

\begin{definition}
\label{definition-Noetherian-space}
A topological space $X$ is called {\it Noetherian} if any
decreasing sequence $Z_1\supset Z_2 \supset Z_3\supset \ldots$
of closed subsets of $X$ stabilizes.
(It is called {\it Artinian} if any increasing sequence of closed
subsets stabilizes.)
\end{definition}

\begin{exercise}
\label{exercise-Noetherian-spec}
Show that if the ring $A$ is Noetherian then
the topological space $\Spec(A)$ is Noetherian. Give an
example to show that the converse is false. (The same for
Artinian if you like.)
\end{exercise}

\begin{definition}
\label{definition-irreducible-component}
A maximal irreducible subset $T\subset X$ is called an
{\it irreducible component} of the space $X$. Such an irreducible
component of $X$ is automatically a closed subset of $X$.
\end{definition}

\begin{exercise}
\label{exercise-irreducible-in-irreducible}
Prove that any irreducible subset
of $X$ is contained in an irreducible component of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-Noetherian-finite-nr-irreducible}
Prove that a Noetherian topological space $X$
has only finitely many irreducible components, say $X_1, \ldots, X_n$,
and that $X = X_1\cup X_2\cup\ldots\cup X_n$. (Note that
any $X$ is always the union of its irreducible components, but that
if $X = {\mathbf R}$ with its usual topology for instance then the irreducible
components of $X$ are the one point subsets. This is not
terribly interesting.)
\end{exercise}

\begin{exercise}
\label{exercise-irreducible-components-minimal-primes}
Show that irreducible components of $\Spec(A)$
correspond to minimal primes of $A$.
\end{exercise}

\begin{definition}
\label{definition-closed}
A point $x\in X$ is called {\it closed} if $\overline{\{x\}} = \{ x\}$.
Let $x, y$ be points of $X$. We say that $x$ is a {\it specialization}
of $y$, or that $y$ is a {\it generalization} of $x$ if
$x\in \overline{\{y\}}$.
\end{definition}

\begin{exercise}
\label{exercise-closed-maximal}
Show that closed points of $\Spec(A)$
correspond to maximal ideals of $A$.
\end{exercise}

\begin{exercise}
\label{exercise-generalization}
Show that ${\mathfrak p}$ is a generalization of ${\mathfrak q}$
in $\Spec(A)$ if and only if ${\mathfrak p}\subset {\mathfrak q}$.
Characterize closed points,
maximal ideals, generic points and minimal prime ideals in terms of
generalization and specialization. (Here we use the terminology that a point
of a possibly reducible topological space $X$ is called a generic point
if it is a generic points of one of the irreducible components of $X$.)
\end{exercise}

\begin{exercise}
\label{exercise-disjoint-closed-spec}
Let $I$ and $J$ be ideals of $A$.
What is the condition for $V(I)$ and $V(J)$ to be disjoint?
\end{exercise}

\begin{definition}
\label{definition-connected-component}
A topological space $X$ is called {\it connected} if it is nonempty and not the
union of two nonempty disjoint open subsets. A {\it connected component}
of $X$ is a maximal connected subset. Any point of $X$ is contained
in a connected component of $X$ and any connected component of $X$ is
closed in $X$. (But in general a connected component need not be open in $X$.)
\end{definition}

\begin{exercise}
\label{exercise-disconnected-spec}
Let $A$ be a nonzero ring.
Show that $\Spec(A)$ is disconnected
iff $A\cong B \times C$ for certain nonzero rings $B, C$.
\end{exercise}

\begin{exercise}
\label{exercise-connected-component-stable-generalization}
Let $T$ be a connected component
of $\Spec(A)$. Prove that $T$ is stable under generalization.
Prove that $T$ is an open subset of $\Spec(A)$ if $A$ is Noetherian.
(Remark: This is wrong when $A$ is an infinite product of copies of
${\mathbf F}_2$ for example. The spectrum of this ring consists of infinitely
many closed points.)
\end{exercise}

\begin{exercise}
\label{exercise-primes-kx}
Compute $\Spec(k[x])$, i.e., describe
the prime ideals in this ring, describe the possible specializations, and
describe the topology. (Work this out when $k$ is algebraically closed but
also when $k$ is not.)
\end{exercise}

\begin{exercise}
\label{exercise-primes-kxy}
 Compute $\Spec(k[x, y])$, where $k$ is algebraically
closed.
[Hint: use the morphism
$\varphi : \Spec(k[x, y]) \to \Spec(k[x])$; if
$\varphi({\mathfrak p}) = (0)$ then localize with respect to
$S = \{f\in k[x] \mid f \not = 0\}$ and use result of lecture
on localization and $\Spec$.]
(Why do you think algebraic geometers call this affine 2-space?)
\end{exercise}

\begin{exercise}
\label{exercise-primes-Zy}
Compute $\Spec(\mathbf{Z}[y])$.
[Hint: as above.] (Affine 1-space over $\mathbf{Z}$.)
\end{exercise}






\section{Localization}
\label{section-localization}


\begin{exercise}
\label{exercise-submodule-localization}
Let $A$ be a ring. Let $S \subset A$ be a multiplicative subset.
Let $M$ be an $A$-module. Let $N \subset S^{-1}M$ be an $S^{-1}A$-submodule.
Show that there exists an $A$-submodule $N' \subset M$ such that
$N = S^{-1}N'$. (This useful result applies in particular to ideals
of $S^{-1}A$.)
\end{exercise}

\begin{exercise}
\label{exercise-localize-zero}
Let $A$ be a ring. Let $M$ be an $A$-module. Let $m \in M$.
\begin{enumerate}
\item Show that $I = \{a \in A \mid am = 0\}$ is an ideal of $A$.
\item For a prime $\mathfrak p$ of $A$ show that the image of $m$
in $M_\mathfrak p$ is zero if and only if $I \not \subset \mathfrak p$.
\item Show that $m$ is zero if and only if the image of $m$ is zero
in $M_\mathfrak p$ for all primes $\mathfrak p$ of $A$.
\item Show that $m$ is zero if and only if the image of $m$ is zero
in $M_\mathfrak m$ for all maximal ideals $\mathfrak m$ of $A$.
\item Show that $M = 0$ if and only if $M_{\mathfrak m}$ is zero
for all maximal ideals $\mathfrak m$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-localization-is-field}
Find a pair $(A, f)$ where $A$ is a domain with three or more pairwise
distinct primes and $f \in A$ is an element such that the principal
localization $A_f = \{1, f, f^2, \ldots \}^{-1}A$ is a field.
\end{exercise}

\begin{exercise}
\label{exercise-localize-finite-module-zero}
Let $A$ be a ring. Let $M$ be a finite $A$-module. Let $S \subset A$
be a multiplicative set. Assume that $S^{-1}M = 0$. Show that there
exists an $f \in S$ such that the principal localization
$M_f = \{1, f, f^2, \ldots \}^{-1}M$ is zero.
\end{exercise}

\begin{exercise}
\label{exercise-localization-is-quotient}
Give an example of a triple $(A, I, S)$ where $A$ is a ring,
$0 \not = I \not = A$ is a proper nonzero ideal, and $S \subset A$
is a multiplicative subset
such that $A/I \cong S^{-1}A$ as $A$-algebras.
\end{exercise}




\section{Nakayama's Lemma}
\label{section-nakayama}

\begin{exercise}
\label{exercise-nakayama}
Let $A$ be a ring.
Let $I$ be an ideal of $A$.
Let $M$ be an $A$-module.
Let $x_1, \ldots, x_n \in M$.
Assume that
\begin{enumerate}
\item $M/IM$ is generated by $x_1, \ldots, x_n$,
\item $M$ is a finite $A$-module,
\item $I$ is contained in every maximal ideal of $A$.
\end{enumerate}
Show that $x_1, \ldots, x_n$ generate $M$. (Suggested solution:
Reduce to a localization at a maximal ideal of $A$ using
Exercise \ref{exercise-localize-zero} and exactness of localization.
Then reduce to the statement of Nakayama's lemma in the lectures
by looking at the quotient of $M$ by the submodule generated by
$x_1, \ldots, x_n$.)
\end{exercise}






\section{Length}
\label{section-length}

\begin{definition}
\label{definition-length}
Let $A$ be a ring. Let $M$ be an $A$-module. The
{\it length} of $M$ as an $R$-module is
$$
\text{length}_A(M)
=
\sup
\{
n
\mid
\exists\ 0 = M_0 \subset M_1 \subset \ldots \subset M_n = M,
\text{ }M_i \not = M_{i + 1}
\}.
$$
In other words, the supremum of the lengths of chains of submodules.
\end{definition}

\begin{exercise}
\label{exercise-length-is-one}
Show that a module $M$ over a ring $A$ has length $1$ if and only if
it is isomorphic to $A/\mathfrak m$ for some maximal ideal $\mathfrak m$
in $A$.
\end{exercise}

\begin{exercise}
\label{exercise-length-easy}
Compute the length of the following modules over the following rings.
Briefly(!) explain your answer. (Please feel free to use additivity of
the length function in short exact sequences, see
Algebra, Lemma \ref{algebra-lemma-length-additive}).
\begin{enumerate}
\item The length of $\mathbf{Z}/120\mathbf{Z}$ over $\mathbf{Z}$.
\item The length of $\mathbf{C}[x]/(x^{100} + x + 1)$ over $\mathbf{C}[x]$.
\item The length of $\mathbf{R}[x]/(x^4 + 2x^2 + 1)$ over $\mathbf{R}[x]$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-compute-length}
Let $A = k[x, y]_{(x, y)}$ be the local ring of the affine plane at
the origin. Make any assumption you like about the field $k$. Suppose
that $f = x^3 + x^2y^2 + y^{100}$ and $g = y^3 - x^{999}$. What is the length
of $A/(f, g)$ as an $A$-module? (Possible way to proceed: think about the
ideal that $f$ and $g$ generate in quotients of the form $A/{\mathfrak m}_A^n=
k[x, y]/(x, y)^n$ for varying $n$. Try to find $n$ such that
$A/(f, g)+{\mathfrak m}_A^n \cong A/(f, g)+{\mathfrak m}_A^{n + 1}$
and use NAK.)
\end{exercise}






\section{Associated primes}
\label{section-ass}

\noindent
Associated primes are discussed in
Algebra, Section \ref{algebra-section-ass}

\begin{exercise}
\label{exercise-compute-ass}
Compute the set of associated primes for each of the following modules.
\begin{enumerate}
\item $R = k[x, y]$ and $M = R/(xy(x + y))$,
\item $R = \mathbf{Z}[x]$ and $M = R/(300x + 75)$, and
\item $R = k[x, y, z]$ and $M = R/(x^3, x^2y, xz)$.
\end{enumerate}
Here as usual $k$ is a field.
\end{exercise}

\begin{exercise}
\label{exercise-prime-power-not-primary}
Give an example of a Noetherian ring $R$ and a prime ideal $\mathfrak p$
such that $\mathfrak p$ is not the only associated prime of $R/\mathfrak p^2$.
\end{exercise}

\begin{exercise}
\label{exercise-product-primes-not-only-associated}
Let $R$ be a Noetherian ring with incomparable prime ideals
$\mathfrak p$, $\mathfrak q$, i.e., $\mathfrak p \not \subset \mathfrak q$
and $\mathfrak q \not \subset \mathfrak p$.
\begin{enumerate}
\item Show that for $N = R/(\mathfrak p \cap \mathfrak q)$
we have $\text{Ass}(N) = \{\mathfrak p, \mathfrak q\}$.
\item Show by an example that the module
$M = R/\mathfrak p \mathfrak q$ can
have an associated prime not equal to $\mathfrak p$ or $\mathfrak q$.
\end{enumerate}
\end{exercise}





\section{Ext groups}
\label{section-ext}

\noindent
Ext groups are defined in Algebra, Section \ref{algebra-section-ext}.

\begin{exercise}
\label{exercise-compute-ext-abelian-groups}
Compute all the Ext groups $\Ext^i(M, N)$ of the given modules
in the category of $\mathbf{Z}$-modules
(also known as the category of abelian groups).
\begin{enumerate}
\item $M = \mathbf{Z}$ and $N = \mathbf{Z}$,
\item $M = \mathbf{Z}/4\mathbf{Z}$ and $N = \mathbf{Z}/8\mathbf{Z}$,
\item $M = \mathbf{Q}$ and $N = \mathbf{Z}/2\mathbf{Z}$, and
\item $M = \mathbf{Z}/2\mathbf{Z}$ and $N = \mathbf{Q}/\mathbf{Z}$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-compute-in-regular}
Let $R = k[x, y]$ where $k$ is a field.
\begin{enumerate}
\item Show by hand that the Koszul complex
$$
0 \to R
\xrightarrow{
\left(
\begin{matrix}
y \\
-x
\end{matrix}
\right)
}
R^{\oplus 2} \xrightarrow{(x, y)} R \xrightarrow{f \mapsto f(0, 0)} k \to 0
$$
is exact.
\item Compute $\Ext^i_R(k, k)$ where $k = R/(x, y)$ as an $R$-module.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-infinitely-many-nonzero-ext}
Give an example of a Noetherian ring $R$ and finite modules $M$, $N$
such that $\Ext^i_R(M, N)$ is nonzero for all $i \geq 0$.
\end{exercise}

\begin{exercise}
\label{exercise-infinite-ext}
Give an example of a ring $R$ and ideal $I$ such that
$\Ext^1_R(R/I, R/I)$ is not a finite $R$-module.
(We know this cannot happen if $R$ is Noetherian by
Algebra, Lemma \ref{algebra-lemma-ext-noetherian}.)
\end{exercise}







\section{Depth}
\label{section-depth}

\noindent
Depth is defined in Algebra, Section \ref{algebra-section-depth}
and further studied in
Dualizing Complexes, Section \ref{dualizing-section-depth}.

\begin{exercise}
\label{exercise-compute-depth}
Let $R$ be a ring, $I \subset R$ an ideal, and $M$ an $R$-module.
Compute $\text{depth}_I(M)$ in the following cases.
\begin{enumerate}
\item $R = \mathbf{Z}$, $I = (30)$, $M = \mathbf{Z}$,
\item $R = \mathbf{Z}$, $I = (30)$, $M = \mathbf{Z}/(300)$,
\item $R = \mathbf{Z}$, $I = (30)$, $M = \mathbf{Z}/(7)$,
\item $R = k[x, y, z]/(x^2 + y^2 + z^2)$, $I = (x, y, z)$, $M = R$,
\item $R = k[x, y, z, w]/(xz, xw, yz, yw)$, $I = (x, y, z, w)$,
$M = R$.
\end{enumerate}
Here $k$ is a field. In the last two cases feel free to localize
at the maximal ideal $I$.
\end{exercise}

\begin{exercise}
\label{exercise-depth-not-inherited-localization}
Give an example of a Noetherian local ring $(R, \mathfrak m, \kappa)$
of depth $\geq 1$ and a prime ideal $\mathfrak p$ such that
\begin{enumerate}
\item $\text{depth}_\mathfrak m(R) \geq 1$,
\item $\text{depth}_\mathfrak p(R_\mathfrak p) = 0$, and
\item $\dim(R_\mathfrak p) \geq 1$.
\end{enumerate}
If we don't ask for (3) then the exercise is too easy. Why?
\end{exercise}

\begin{exercise}
\label{exercise-depth-torsion-free}
Let $(R, \mathfrak m)$ be a local Noetherian domain.
Let $M$ be a finite $R$-module.
\begin{enumerate}
\item If $M$ is torsion free, show that $M$ has depth at least $1$ over $R$.
\item Give an example with depth equal to $1$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-depth-examples}
For every $m \geq n \geq 0$ give an example of a Noetherian local
ring $R$ with $\dim(R) = m$ and $\text{depth}(R) = n$.
\end{exercise}

\begin{exercise}
\label{exercise-make-depth-1}
Let $(R, \mathfrak m)$ be a Noetherian local ring.
Let $M$ be a finite $R$-module.
Show that there exists a canonical short exact sequence
$$
0 \to K \to M \to Q \to 0
$$
such that the following are true
\begin{enumerate}
\item $\text{depth}(Q) \geq 1$,
\item $K$ is zero or $\text{Supp}(K) = \{\mathfrak m\}$, and
\item $\text{length}_R(K) < \infty$.
\end{enumerate}
Hint: using the Noetherian property show that
there exists a maximal submodule $K$ as in (2)
and then show that $Q = M/K$ satisfies (1) and $K$ satisfies (3).
\end{exercise}

\begin{exercise}
\label{exercise-make-depth-2}
Let $(R, \mathfrak m)$ be a Noetherian local ring.
Let $M$ be a finite $R$-module of depth $\geq 2$.
Let $N \subset M$ be a nonzero submodule.
\begin{enumerate}
\item Show that $\text{depth}(N) \geq 1$.
\item Show that $\text{depth}(N) = 1$ if and only if the
quotient module $M/N$ has $\text{depth}(M/N) = 0$.
\item Show there exists a submodule $N' \subset M$ with
$N \subset N'$ of finite colength, i.e.,
$\text{length}_R(N'/N) < \infty$, such that $N'$ has
depth $\geq 2$. Hint: Apply Exercise \ref{exercise-make-depth-1} to $M/N$
and choose $N'$ to be the inverse image of $K$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-Hartshorne-reduced}
Let $(R, \mathfrak m)$ be a Noetherian local ring.
Assume that $R$ is reduced, i.e., $R$ has no nonzero
nilpotent elements. Assume moreover that $R$ has two
distinct minimal primes $\mathfrak p$ and $\mathfrak q$.
\begin{enumerate}
\item Show that the sequence of $R$-modules
$$
0 \to R \to R/\mathfrak p \oplus R/\mathfrak q \to
R/\mathfrak p + \mathfrak q \to 0
$$
is exact (check at all the spots). The maps are
$x \mapsto (x \bmod \mathfrak p, x \bmod \mathfrak q)$
and $(y \bmod \mathfrak p, z \bmod \mathfrak q) \mapsto
(y - z \bmod \mathfrak p + \mathfrak q)$.
\item Show that if $\text{depth}(R) \geq 2$, then
$\dim(R/\mathfrak p + \mathfrak q) \geq 1$.
\item Show that if $\text{depth}(R) \geq 2$, then
$U = \Spec(R) \setminus \{\mathfrak m\}$ is a connected
topological space.
\end{enumerate}
This proves a very special case of Hartshorne's connectedness
theorem which says that the punctured spectrum $U$ of a local
Noetherian ring of $\text{depth} \geq 2$ is connected.
\end{exercise}

\begin{exercise}
\label{exercise-depth-2}
Let $(R, \mathfrak m)$ be a Noetherian local ring.
Let $x, y \in \mathfrak m$ be a regular sequence of length $2$.
For any $n \geq 2$ show that there do not exist $a, b \in R$ with
$$
x^{n - 1}y^{n - 1} = a x^n + b y^n
$$
Suggestion: First try for $n = 2$ to see how to argue.
Remark: There is a vast generalization of this result
called the monomial conjecture.
\end{exercise}







\section{Cohen-Macaulay modules and rings}
\label{section-CM}

\noindent
Cohen-Macaulay modules are studied in
Algebra, Section \ref{algebra-section-CM}
and Cohen-Macaulay rings are studied in
Algebra, Section \ref{algebra-section-CM-ring}.

\begin{exercise}
\label{exercise-examples-CM}
In the following cases, please answer yes or no.
No explanation or proof necessary.
\begin{enumerate}
\item Let $p$ be a prime number.
Is the local ring $\mathbf{Z}_{(p)}$ a Cohen-Macaulay local ring?
\item Let $p$ be a prime number.
Is the local ring $\mathbf{Z}_{(p)}$ a regular local ring?
\item Let $k$ be a field.
Is the local ring $k[x]_{(x)}$ a Cohen-Macaulay local ring?
\item Let $k$ be a field.
Is the local ring $k[x]_{(x)}$ a regular local ring?
\item Let $k$ be a field.
Is the local ring $(k[x, y]/(y^2 - x^3))_{(x, y)} =
k[x, y]_{(x, y)}/(y^2 - x^3)$ a Cohen-Macaulay local ring?
\item Let $k$ be a field.
Is the local ring $(k[x, y]/(y^2, xy))_{(x, y)} =
k[x, y]_{(x, y)}/(y^2, xy)$ a Cohen-Macaulay local ring?
\end{enumerate}
\end{exercise}













\section{Singularities}
\label{section-singularities}

\begin{exercise}
\label{exercise-singularities}
Let $k$ be any field. Suppose that $A = k[[x, y]]/(f)$ and
$B = k[[u, v]]/(g)$, where $f = xy$ and $g = uv + \delta$ with
$\delta \in (u, v)^3$. Show that $A$ and $B$ are isomorphic rings.
\end{exercise}

\begin{remark}
\label{remark-singularities}
A singularity on a curve over a field $k$ is called an
ordinary double point if the complete local ring of the curve at the
point is of the form $k'[[x, y]]/(f)$, where (a) $k'$ is a finite separable
extension of $k$, (b) the initial term of $f$ has degree two, i.e., it
looks like $q = ax^2 + bxy + cy^2$ for some $a, b, c\in k'$ not all zero, and
(c) $q$ is a nondegenerate quadratic form over $k'$ (in char 2 this means that
$b$ is not zero). In general there is one isomorphism class of such rings for
each isomorphism class of pairs $(k', q)$.
\end{remark}

\begin{exercise}
\label{exercise-periodic-resolution}
Let $R$ be a ring. Let $n \geq 1$. Let $A$, $B$ be $n \times n$ matrices with
coefficients in $R$ such that $AB = f 1_{n \times n}$
for some nonzerodivisor $f$ in $R$. Set $S = R/(f)$. Show that
$$
\ldots \to
S^{\oplus n} \xrightarrow{B}
S^{\oplus n} \xrightarrow{A}
S^{\oplus n} \xrightarrow{B}
S^{\oplus n} \to \ldots
$$
is exact.
\end{exercise}







\section{Constructible sets}
\label{section-constructible}

\noindent
Let $k$ be an algebraically closed field, for example the field $\mathbf{C}$
of complex numbers. Let $n \geq 0$. A polynomial $f \in k[x_1, \ldots, x_n]$
gives a function $f : k^n \to k$ by evaluation. A subset $Z \subset k^n$
is called an {\it algebraic set} if it is the common vanishing set of a
collection of polynomials.

\begin{exercise}
\label{exercise-finite-nr-equations}
Prove that an algebraic set can always be written as the zero locus
of finitely many polynomials.
\end{exercise}

\noindent
With notation as above a subset $E \subset k^n$ is called
{\it constructible} if it is a finite union of sets of the form
$Z \cap \{f \not = 0\}$ where $f$ is a polynomial.

\begin{exercise}
\label{exercise-constructible-classical}
Show the following
\begin{enumerate}
\item the complement of a constructible set is a constructible set,
\item a finite union of constructible sets is a constructible set,
\item a finite intersection of constructible sets is a constructible set, and
\item any constructible set $E$ can be written as a finite disjoint union
$E = \coprod E_i$ with each $E_i$ of the form $Z \cap \{f \not = 0\}$
where $Z$ is an algebraic set and $f$ is a polynomial.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-division-with-remainder}
Let $R$ be a ring. Let
$f = a_d x^d + a_{d - 1} x^{d - 1} + \ldots + a_0 \in R[x]$.
(As usual this notation means $a_0, \ldots, a_d \in R$.) Let $g \in R[x]$.
Prove that we can find $N \geq 0$ and $r, q \in R[x]$ such that
$$
a_d^N g = q f + r
$$
with $\deg(r) < d$, i.e., for some $c_i \in R$ we have
$r = c_0 + c_1 x + \ldots + c_{d - 1}x^{d - 1}$.
\end{exercise}







\section{Hilbert Nullstellensatz}
\label{section-Hilbert-Nullstellensatz}


\begin{exercise}
\label{exercise-uncountable}
{\it A silly argument using the complex numbers!}
Let ${\mathbf C}$ be the complex number field. Let $V$ be a vector
space over ${\mathbf C}$. The spectrum of a linear operator
$T : V \to V$ is the set of complex numbers $\lambda \in {\mathbf C}$
such that the operator $T - \lambda \text{id}_V$ is not invertible.
\begin{enumerate}
\item Show that $\mathbf{C}(X)$
has uncountable dimension over ${\mathbf C}$.
\item Show that any linear operator on $V$ has a
nonempty spectrum if the dimension of $V$ is finite or
countable.
\item Show that if a finitely generated ${\mathbf C}$-algebra
$R$ is a field, then the map ${\mathbf C}\to R$ is an isomorphism.
\item Show that any maximal ideal ${\mathfrak m}$ of
${\mathbf C}[x_1, \ldots, x_n]$ is of the form
$(x_1-\alpha_1, \ldots, x_n-\alpha_n)$ for some $\alpha_i \in {\mathbf C}$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-HNSS}
Let $k$ be a field. Then for every integer $n\in {\mathbf N}$ and
every maximal ideal ${\mathfrak m} \subset k[x_1, \ldots, x_n]$
the quotient $k[x_1, \ldots, x_n]/{\mathfrak m}$ is a finite field
extension of $k$. This will be shown later in the course. Of course
(please check this) it implies a similar statement for maximal ideals
of finitely generated $k$-algebras. The exercise above proves
it in the case $k = {\mathbf C}$.
\end{remark}

\begin{exercise}
\label{exercise-Hilbert-Nullstellensatz}
Let $k$ be a field. Please use Remark \ref{remark-HNSS}.
\begin{enumerate}
\item Let $R$ be a $k$-algebra. Suppose that $\dim_k R < \infty$
and that $R$ is a domain. Show that $R$ is a field.
\item Suppose that $R$ is a finitely generated $k$-algebra, and
$f\in R$ not nilpotent. Show that there exists a maximal ideal
${\mathfrak m} \subset R$ with $f\not\in {\mathfrak m}$.
\item Show by an example that this statement fails when $R$
is not of finite type over a field.
\item Show that any radical ideal $I \subset {\mathbf C}[x_1, \ldots, x_n]$
is the intersection of the maximal ideals containing it.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-Hilbert-Nullstellensatz}
This is the Hilbert Nullstellensatz. Namely it says
that the closed subsets of $\Spec(k[x_1, \ldots, x_n])$
(which correspond to radical ideals by a previous exercise)
are determined by the closed points contained in them.
\end{remark}

\begin{exercise}
\label{exercise-product-matrices-ring}
Let $A =
{\mathbf C}[x_{11}, x_{12}, x_{21}, x_{22}, y_{11}, y_{12}, y_{21}, y_{22}]$.
Let $I$ be the ideal of $A$ generated by the entries of the
matrix $XY$, with
$$
X = \left(
\begin{matrix}
x_{11} & x_{12}\\
x_{21} & x_{22}
\end{matrix}
\right)
\quad\text{and}\quad
Y = \left(
\begin{matrix}
y_{11} & y_{12}\\
y_{21} & y_{22}
\end{matrix}
\right).
$$
Find the irreducible components of the closed subset $V(I)$ of
$\Spec(A)$.
(I mean describe them and give equations for each of them. You do not have
to prove that the equations you write down define prime ideals.) Hints:
\begin{enumerate}
\item You may use the Hilbert Nullstellensatz, and it suffices to find
irreducible locally closed subsets which cover the set of closed points of
$V(I)$.
\item There are two easy components.
\item An image of an irreducible set under a continuous map is
irreducible.
\end{enumerate}
\end{exercise}




\section{Dimension}
\label{section-dimension}

\begin{exercise}
\label{exercise-dimension-bigger-one-finite-nr-primes}
Construct a ring $A$ with finitely many prime ideals having dimension $> 1$.
\end{exercise}

\begin{exercise}
\label{exercise-hypersurface-in-A2-dimension-one}
Let $f \in \mathbf{C}[x, y]$ be a nonconstant polynomial.
Show that $\mathbf{C}[x, y]/(f)$ has dimension $1$.
\end{exercise}

\begin{exercise}
\label{exercise-dimension-polynomial-ring}
Let $(R, \mathfrak m)$ be a Noetherian local ring.
Let $n \geq 1$. Let $\mathfrak m' = (\mathfrak m, x_1, \ldots, x_n)$
in the polynomial ring $R[x_1, \ldots, x_n]$.
Show that
$$
\dim(R[x_1, \ldots, x_n]_{\mathfrak m'}) = \dim(R) + n.
$$
\end{exercise}





\section{Catenary rings}
\label{section-catenary}

\begin{definition}
\label{definition-catenary}
A Noetherian ring $A$ is said to be {\it catenary}
if for any triple of prime ideals
${\mathfrak p}_1 \subset {\mathfrak p}_2 \subset {\mathfrak p}_3$
we have
$$
ht({\mathfrak p}_3 / {\mathfrak p}_1) = ht({\mathfrak p}_3/{\mathfrak p}_2) +
ht({\mathfrak p}_2/{\mathfrak p}_1).
$$
Here $ht(\mathfrak p/\mathfrak q)$ means the height of
$\mathfrak p/\mathfrak q$ in the ring $A/\mathfrak q$.
In a formula
$$
ht(\mathfrak p/\mathfrak q) =
\dim(A_\mathfrak p/\mathfrak qA_\mathfrak p) =
\dim((A/\mathfrak q)_\mathfrak p) =
\dim((A/\mathfrak q)_{\mathfrak p/\mathfrak q})
$$
A topological space $X$ is {\it catenary}, if given $T \subset T' \subset X$
with $T$ and $T'$ closed and irreducible, then there exists a maximal chain
of irreducible closed subsets
$$
T = T_0 \subset T_1 \subset \ldots \subset T_n = T'
$$
and every such chain has the same (finite) length.
\end{definition}

\begin{exercise}
\label{exercise-catenary-the-same}
Show that the notion of catenary defined in
Algebra, Definition \ref{algebra-definition-catenary}
agrees with the notion of Definition \ref{definition-catenary}
for Noetherian rings.
\end{exercise}

\begin{exercise}
\label{exercise-Noetherian-local-domain-dim-2-catenary}
Show that a Noetherian local domain of dimension $2$ is catenary.
\end{exercise}

\begin{exercise}
\label{exercise-finite-type-over-field-catenary}
Let $k$ be a field.
Show that a finite type $k$-algebra is catenary.
\end{exercise}

\begin{exercise}
\label{exercise-example-no-dim-function}
Give an example of a finite, sober, catenary topological space
$X$ which does not have a dimension function $\delta : X \to \mathbf{Z}$.
Here $\delta : X \to \mathbf{Z}$ is a dimension function if
for $x, y \in X$ we have
\begin{enumerate}
\item $x \leadsto y$ and $x \not = y$ implies $\delta(x) > \delta(y)$,
\item $x \leadsto y$ and $\delta(x) \geq \delta(y) + 2$ implies
there exists a $z \in X$ with $x \leadsto z \leadsto y$ and
$\delta(x) > \delta(z) > \delta(y)$.
\end{enumerate}
Describe your space clearly and succintly explain why there
cannot be a dimension function.
\end{exercise}




\section{Fraction fields}
\label{section-fraction-fields}

\begin{exercise}
\label{exercise-find-fraction-field}
Consider the domain
$$
{\mathbf Q}[r, s, t]/(s^2-(r-1)(r-2)(r-3), t^2-(r + 1)(r + 2)(r + 3)).
$$
Find a domain of the form ${\mathbf Q}[x, y]/(f)$ with isomorphic
field of fractions.
\end{exercise}



\section{Transcendence degree}
\label{section-transcendence}

\begin{exercise}
\label{exercise-algebraic-extension}
Let $k \subset K \subset K'$ be field extensions with $K'$
algebraic over $K$. Prove that $\text{trdeg}_k(K) = \text{trdeg}_k(K')$.
(Hint: Show that if $x_1, \ldots, x_d \in K$ are algebraically independent
over $k$ and $d < \text{trdeg}_k(K')$ then $k(x_1, \ldots, x_d) \subset K$
cannot be algebraic.)
\end{exercise}

\begin{exercise}
\label{exercise-growth-powers-subvector-space}
Let $k$ be a field. Let $K/k$ be a finitely generated extension
of transcendence degree $d$.
If $V, W \subset K$ are finite dimensional $k$-subvector spaces
denote
$$
VW = \{f \in K \mid f = \sum\nolimits_{i = 1, \ldots, n} v_i w_i
\text{ for some }n\text{ and }v_i \in V, w_i \in W\}
$$
This is a finite dimensional $k$-subvector space.
Set $V^2 = VV$, $V^3 = V V^2$, etc.
\begin{enumerate}
\item Show you can find $V \subset K$ and $\epsilon > 0$ such that
$\dim V^n \geq \epsilon n^d$ for all $n \geq 1$.
\item Conversely, show that for every finite dimensional $V \subset K$
there exists a $C > 0$ such that $\dim V^n \leq C n^d$ for all $n \geq 1$.
(One possible way to proceed:
First do this for subvector spaces of $k[x_1, \ldots, x_d]$.
Then do this for subvector spaces of $k(x_1, \ldots, x_d)$.
Finally, if $K/k(x_1, \ldots, x_d)$ is a finite extension
choose a basis of $K$ over $k(x_1, \ldots, x_d)$ and
argue using expansion in terms of this basis.)
\item Conclude that you can redefine the transcendence degree in terms
of growth of powers of finite dimensional subvector spaces of $K$.
\end{enumerate}
This is related to Gelfand-Kirillov dimension of (noncommutative)
algebras over $k$.
\end{exercise}








\section{Dimension of fibres}
\label{section-dimension-fibres}

\noindent
Some questions related to the dimension formula, see
Algebra, Section \ref{algebra-section-dimension-formula}.

\begin{exercise}
\label{exercise-nr-components-fibre}
Let $k$ be your favorite algebraically closed field.
Below $k[x]$ and $k[x, y]$ denote the polynomial rings.
\begin{enumerate}
\item For every integer $n \geq 0$ find a finite type extension
$k[x] \subset A$ of domains such that the spectrum of $A/xA$
has exactly $n$ irreducible components.
\item Make an example of a finite type extension $k[x] \subset A$
of domains such that the spectrum of $A/(x - \alpha)A$
is nonempty and reducible for every $\alpha \in k$.
\item Make an example of a finite type extension $k[x, y] \subset A$
of domains such that the spectrum of $A/(x - \alpha, y - \beta)A$
is irreducible\footnote{Recall that irreducible implies nonempty.}
for all $(\alpha, \beta) \in k^2 \setminus \{(0, 0)\}$
and the spectrum of $A/(x, y)A$ is nonempty and reducible.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-codim-1}
Let $k$ be your favorite algebraically closed field.
Let $n \geq 1$.
Let $k[x_1, \ldots, x_n]$ be the polynomial ring.
Set $\mathfrak m = (x_1, \ldots, x_n)$.
Let $k[x_1, \ldots, x_n] \subset A$ be a finite type extension of
domains. Set $d = \dim(A)$.
\begin{enumerate}
\item Show that $d - 1 \geq \dim(A/\mathfrak m A) \geq d - n$
if $A/\mathfrak mA \not = 0$.
\item Show by example that every value can occur.
\item Show by example that $\Spec(A/\mathfrak m A)$ can
have irreducible components of different dimensions.
\end{enumerate}
\end{exercise}




\section{Finite locally free modules}
\label{section-finite-locally-free}

\begin{definition}
\label{definition-finite-locally-free}
Let $A$ be a ring. Recall that a {\it finite locally free} $A$-module
$M$ is a module such that for every ${\mathfrak p} \in \Spec(A)$
there exists an
$f\in A$, $f \not \in {\mathfrak p}$ such that $M_f$ is a finite free
$A_f$-module. We say $M$ is an {\it invertible module} if
$M$ is finite locally free of rank $1$, i.e., for every
${\mathfrak p} \in \Spec(A)$ there exists an
$f\in A$, $f \not \in \mathfrak p$ such that $M_f \cong A_f$
as an $A_f$-module.
\end{definition}

\begin{exercise}
\label{exercise-tensor-finite-locally-free}
Prove that the tensor product of finite locally free modules
is finite locally free. Prove that the tensor product of two
invertible modules is invertible.
\end{exercise}

\begin{definition}
\label{definition-class-group}
Let $A$ be a ring. The {\it class group of $A$}, sometimes called
the {\it Picard group of $A$} is the set $\Pic(A)$
of isomorphism classes of invertible $A$-modules endowed with
a group operation defined by tensor product (see
Exercise \ref{exercise-tensor-finite-locally-free}).
\end{definition}

\noindent
Note that the class group of $A$ is trivial exactly when every invertible
module is isomorphic to a free module of rank 1.

\begin{exercise}
\label{exercise-class-group-trivial}
Show that the class groups of the following rings are trivial
\begin{enumerate}
\item a polynomial ring $A = k[x]$ where $k$ is a field,
\item the integers $A = \mathbf{Z}$,
\item a polynomial ring $A = k[x, y]$ where $k$ is a field, and
\item the quotient $k[x, y]/(xy)$ where $k$ is a field.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-class-group-not-trivial}
Show that the class group of the ring
$A = k[x, y]/(y^2 - f(x))$ where $k$ is a field of characteristic not $2$
and where $f(x) = (x - t_1) \ldots (x - t_n)$ with $t_1, \ldots, t_n \in k$
distinct and $n \geq 3$ an odd integer is not trivial. (Hint: Show that the
ideal $(y, x - t_1)$ defines a nontrivial element of $\Pic(A)$.)
\end{exercise}

\begin{exercise}
\label{exercise-trace-det}
Let $A$ be a ring.
\begin{enumerate}
\item Suppose that $M$ is a finite locally free $A$-module, and
suppose that $\varphi : M \to M$ is an endomorphism. Define/construct
the {\it trace}  and {\it determinant} of $\varphi$ and prove that your
construction is ``functorial in the triple $(A, M, \varphi)$''.
\item Show that if $M, N$ are finite locally free $A$-modules,
and if $\varphi : M \to N$ and $\psi : N \to M$ then
$\text{Trace}(\varphi \circ \psi) = \text{Trace}(\psi \circ \varphi)$ and
$\det(\varphi \circ \psi) = \det(\psi \circ \varphi)$.
\item In case $M$ is finite locally free show that
$\text{Trace}$ defines an $A$-linear map $\text{End}_A(M) \to A$ and
$\det$ defines a multiplicative map $\text{End}_A(M) \to A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-trace-det-rings}
Now suppose that $B$ is an $A$-algebra which is finite
locally free as an $A$-module, in other words $B$ is a finite locally
free $A$-algebra.
\begin{enumerate}
\item Define $\text{Trace}_{B/A}$ and $\text{Norm}_{B/A}$ using
$\text{Trace}$ and $\det$ from Exercise \ref{exercise-trace-det}.
\item Let $b\in B$ and let $\pi : \Spec(B) \to \Spec(A)$ be
the induced morphism. Show that $\pi(V(b)) = V(\text{Norm}_{B/A}(b))$.
(Recall that $V(f) = \{ {\mathfrak p} \mid f \in {\mathfrak p}\}$.)
\item (Base change.) Suppose that $i : A \to A'$ is a ring map. Set
$B' = B \otimes_A A'$. Indicate why $i(\text{Norm}_{B/A}(b))$ equals
$\text{Norm}_{B'/A'}(b \otimes 1)$.
\item Compute $\text{Norm}_{B/A}(b)$ when
$B = A \times A \times A \times \ldots \times A$
and $b = (a_1, \ldots, a_n)$.
\item Compute the norm of $y-y^3$ under the finite flat
map ${\mathbf Q}[x] \to {\mathbf Q}[y]$, $x \to y^n$. (Hint: use
the ``base change''
$A = {\mathbf Q}[x] \subset A' = {\mathbf Q}(\zeta_n)(x^{1/n})$.)
\end{enumerate}
\end{exercise}



\section{Glueing}
\label{section-glueing}

\begin{exercise}
\label{exercise-cover}
Suppose that $A$ is a ring and $M$ is an $A$-module.
Let $f_i$, $i \in I$ be a collection of elements of $A$ such that
$$
\Spec(A) = \bigcup D(f_i).
$$
\begin{enumerate}
\item Show that if $M_{f_i}$ is a finite $A_{f_i}$-module,
then $M$ is a finite $A$-module.
\item Show that if $M_{f_i}$ is a flat $A_{f_i}$-module,
then $M$ is a flat $A$-module.
(This is kind of silly if you think about it right.)
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-cover}
In algebraic geometric language this means that the property
of ``being finitely generated'' or ``being flat'' is local for the Zariski
topology (in a suitable sense). You can also show this for the property
``being of finite presentation''.
\end{remark}

\begin{exercise}
\label{exercise-cover-ring-map}
Suppose that $A \to B$ is a ring map.
Let $f_i \in A$, $i \in I$ and $g_j \in B$, $j \in J$ be collections of
elements such that
$$
\Spec(A) = \bigcup D(f_i)
\quad\text{and}\quad
\Spec(B) = \bigcup D(g_j).
$$
Show that if $A_{f_i} \to B_{f_ig_j}$ is of finite type for all $i, j$
then $A \to B$ is of finite type.
\end{exercise}




\section{Going up and going down}
\label{section-going-up}


\begin{definition}
\label{definition-GU-GD}
Let $\phi : A \to B$ be a homomorphism of rings. We say
that the {\it going-up theorem} holds for $\phi$ if the
following condition is satisfied:
\begin{itemize}
\item[(GU)] for any ${\mathfrak p}, {\mathfrak p}' \in \Spec(A)$ such that
${\mathfrak p} \subset {\mathfrak p}'$, and for any $P \in \Spec(B)$ lying
over ${\mathfrak p}$, there exists $P'\in \Spec(B)$ lying
over ${\mathfrak p}'$ such that $P \subset P'$.
\end{itemize}
Similarly, we say that the {\it going-down theorem} holds for $\phi$
if the following condition is satisfied:
\begin{itemize}
\item[(GD)] for any ${\mathfrak p}, {\mathfrak p}' \in \Spec(A)$ such that
${\mathfrak p} \subset {\mathfrak p}'$, and for any
$P' \in \Spec(B)$ lying
over ${\mathfrak p}'$, there exists $P\in \Spec(B)$ lying
over ${\mathfrak p}$ such that $P \subset P'$.
\end{itemize}
\end{definition}

\begin{exercise}
\label{exercise-GU-GD}
In each of the following cases determine whether
(GU), (GD) holds, and explain why. (Use any Prop/Thm/Lemma you can find,
but check the hypotheses in each case.)
\begin{enumerate}
\item $k$ is a field, $A = k$, $B = k[x]$.
\item $k$ is a field, $A = k[x]$, $B = k[x, y]$.
\item $A = {\mathbf Z}$, $B = {\mathbf Z}[1/11]$.
\item $k$ is an algebraically closed field, $A = k[x, y]$,
$B = k[x, y, z]/(x^2-y, z^2-x)$.
\item $A = {\mathbf Z}$, $B = {\mathbf Z}[i, 1/(2 + i)]$.
\item $A = {\mathbf Z}$, $B = {\mathbf Z}[i, 1/(14 + 7i)]$.
\item $k$ is an algebraically closed field, $A = k[x]$,
$B = k[x, y, 1/(xy-1)]/(y^2-y)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-image}
Let $A$ be a ring. Let $B = A[x]$ be the polynomial algebra in
one variable over $A$. Let $f = a_0 + a_1 x + \ldots + a_r x^r \in B = A[x]$.
Prove carefully that the image of $D(f)$ in $\Spec(A)$ is equal to
$D(a_0) \cup \ldots \cup D(a_r)$.
\end{exercise}

\begin{exercise}
\label{exercise-images}
Let $k$ be an algebraically closed field. Compute the image in
$\Spec(k[x, y])$
of the following maps:
\begin{enumerate}
\item $\Spec(k[x, yx^{-1}]) \to \Spec(k[x, y])$, where
$k[x, y] \subset k[x, yx^{-1}] \subset k[x, y, x^{-1}]$.
(Hint: To avoid confusion, give the element $yx^{-1}$ another name.)
\item $\Spec(k[x, y, a, b]/(ax-by-1))\to \Spec(k[x, y])$.
\item $\Spec(k[t, 1/(t-1)]) \to \Spec(k[x, y])$, induced by $x
\mapsto t^2$,
and $y \mapsto t^3$.
\item $k = {\mathbf C}$ (complex numbers),
$\Spec(k[s, t]/(s^3 + t^3-1)) \to \Spec(k[x, y])$, where
$x\mapsto s^2$, $y \mapsto t^2$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-elimination-theory}
Finding the image as above usually is done by using elimination theory.
\end{remark}




\section{Fitting ideals}
\label{section-fitting-ideals}

\begin{exercise}
\label{exercise-fitting}
Let $R$ be a ring and let $M$ be a finite $R$-module.
Choose a presentation
$$
\bigoplus\nolimits_{j \in J} R \longrightarrow R^{\oplus n}
\longrightarrow M \longrightarrow 0.
$$
of $M$. Note that the map $R^{\oplus n} \to M$ is given by a sequence
of elements $x_1, \ldots, x_n$ of $M$. The elements $x_i$
are {\it generators} of $M$. The map $\bigoplus_{j \in J} R \to R^{\oplus n}$
is given by a $n \times J$ matrix $A$ with coefficients in $R$.
In other words, $A = (a_{ij})_{i = 1, \ldots, n, j \in J}$.
The columns $(a_{1j}, \ldots, a_{nj})$, $j \in J$ of $A$
are said to be the {\it relations}. Any vector $(r_i) \in R^{\oplus n}$
such that $\sum r_i x_i = 0$ is a linear combination of the columns of $A$.
Of course any finite $R$-module has a lot of different presentations.
\begin{enumerate}
\item Show that the ideal generated by the $(n - k) \times (n - k)$ minors of
$A$ is independent of the choice of the presentation.
This ideal is the {\it $k$th Fitting ideal of $M$}. Notation $Fit_k(M)$.
\item Show that
$Fit_0(M) \subset Fit_1(M) \subset Fit_2(M) \subset \ldots$.
(Hint: Use that a determinant can be computed by expanding along a column.)
\item Show that the following are equivalent:
\begin{enumerate}
\item $Fit_{r - 1}(M) = (0)$ and $Fit_r(M) = R$, and
\item $M$ is locally free of rank $r$.
\end{enumerate}
\end{enumerate}
\end{exercise}




\section{Hilbert functions}
\label{section-hilbert}

\begin{definition}
\label{definition-numerical-polynomial}
A {\it numerical polynomial} is a polynomial $f(x) \in {\mathbf Q}[x]$
such that $f(n) \in {\mathbf Z}$ for every integer $n$.
\end{definition}

\begin{definition}
\label{definition-graded-module}
A {\it graded module} $M$ over a ring $A$ is an $A$-module $M$
endowed with a direct sum decomposition
$
\bigoplus\nolimits_{n \in {\mathbf Z}} M_n
$
into $A$-submodules. We will say that $M$ is {\it locally finite} if all of
the $M_n$ are finite $A$-modules. Suppose that $A$ is a Noetherian ring and
that $\varphi$ is a {\it Euler-Poincar\'e function} on finite $A$-modules.
This means that for every finitely generated $A$-module $M$ we are given an
integer $\varphi(M) \in {\mathbf Z}$ and for every short exact sequence
$$
0
\longrightarrow
M'
\longrightarrow
M
\longrightarrow
M''
\longrightarrow
0
$$
we have $\varphi(M) = \varphi(M') + \varphi(M')$. The {\it Hilbert function}
of a locally finite graded module $M$ (with respect to $\varphi$) is the
function $\chi_\varphi(M, n) = \varphi(M_n)$. We say that $M$ has a
{\it Hilbert polynomial} if there is some numerical polynomial
$P_\varphi$ such that $\chi_\varphi(M, n) = P_\varphi(n)$ for all sufficiently
large integers $n$.
\end{definition}

\begin{definition}
\label{definition-graded-algebra}
A {\it graded $A$-algebra} is a graded $A$-module
$B = \bigoplus_{n \geq 0} B_n$ together with an $A$-bilinear map
$$
B \times B \longrightarrow B, \ (b, b') \longmapsto bb'
$$
that turns $B$ into an $A$-algebra so that $B_n \cdot B_m \subset B_{n + m}$.
Finally, a {\it graded module $M$ over a graded $A$-algebra $B$} is given
by a graded $A$-module $M$ together with a (compatible) $B$-module structure
such that $B_n \cdot M_d \subset M_{n + d}$. Now you can define
{\it homomorphisms of graded modules/rings}, {\it graded submodules},
{\it graded ideals}, {\it exact sequences of graded modules}, etc, etc.
\end{definition}

\begin{exercise}
\label{exercise-Euler-Poincare-field}
Let $A = k$ a field. What are all possible Euler-Poincar\'e functions
on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
\label{exercise-Euler-Poincare-Z}
Let $A ={\mathbf Z}$. What are all possible Euler-Poincar\'e functions
on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
\label{exercise-Euler-Poincare-node}
Let $A = k[x, y]/(xy)$ with $k$ algebraically closed. What are all
possible Euler-Poincar\'e functions on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
\label{exercise-kernel-locally-finite}
Suppose that $A$ is Noetherian. Show that the kernel of a map
of locally finite graded $A$-modules is locally finite.
\end{exercise}

\begin{exercise}
\label{exercise-no-hilbert}
Let $k$ be a field and let $A = k$ and $B = k[x, y]$ with grading
determined by $\deg(x) = 2$ and $\deg(y) = 3$. Let $\varphi(M) = \dim_k(M)$.
Compute the Hilbert function of $B$ as a graded $k$-module. Is there
a Hilbert polynomial in this case?
\end{exercise}

\begin{exercise}
\label{exercise-no-hilbert-or-is-there}
Let $k$ be a field and let $A = k$ and $B = k[x, y]/(x^2, xy)$ with grading
determined by $\deg(x) = 2$ and $\deg(y) = 3$. Let $\varphi(M) = \dim_k(M)$.
Compute the Hilbert function of $B$ as a graded $k$-module. Is there
a Hilbert polynomial in this case?
\end{exercise}

\begin{exercise}
\label{exercise-hilbert-to-compute}
Let $k$ be a field and let $A = k$.  Let $\varphi(M) = \dim_k(M)$.
Fix $d\in {\mathbf N}$. Consider the graded $A$-algebra
$B = k[x, y, z]/(x^d + y^d + z^d)$, where  $x, y, z$ each have degree $1$.
Compute the Hilbert function of $B$. Is there a Hilbert polynomial
in this case?
\end{exercise}



\section{Proj of a ring}
\label{section-proj-ring}

\begin{definition}
\label{definition-homogeneous-ideal}
Let $R$ be a graded ring. A {\it homogeneous} ideal is simply an ideal
$I \subset R$ which is also a graded submodule of $R$. Equivalently,
it is an ideal generated by homogeneous elements. Equivalently, if
$f \in I$ and
$$
f = f_0 + f_1 + \ldots + f_n
$$
is the decomposition of $f$ into homogeneous pieces in $R$ then $f_i \in I$
for each $i$.
\end{definition}

\begin{definition}
\label{definition-Proj-R}
We define the {\it homogeneous spectrum $\text{Proj}(R)$}
of the graded ring $R$ to be the set of homogeneous, prime ideals
${\mathfrak p}$ of $R$ such that $R_{+} \not \subset {\mathfrak p}$.
Note that $\text{Proj}(R)$ is a subset of $\Spec(R)$ and hence has a
natural induced topology.
\end{definition}

\begin{definition}
\label{definition-Dplus-Vplus}
Let $R = \oplus_{d \geq 0} R_d$ be a graded ring, let $f\in R_d$ and
assume that $d \geq 1$. We define {\it $R_{(f)}$} to be the subring of
$R_f$ consisting of elements of the form $r/f^n$ with $r$ homogeneous and
$\deg(r) = nd$. Furthermore, we define
$$
D_{+}(f) = \{ {\mathfrak p} \in \text{Proj}(R) | f \not\in {\mathfrak p} \}.
$$
Finally, for a homogeneous ideal $I \subset R$ we define
$V_{+}(I) = V(I) \cap \text{Proj}(R)$.
\end{definition}

\begin{exercise}
\label{exercise-topology-proj}
On the topology on $\text{Proj}(R)$. With definitions and notation as
above prove the following statements.
\begin{enumerate}
\item Show that $D_{+}(f)$ is open in $\text{Proj}(R)$.
\item Show that $D_{+}(ff') = D_{+}(f) \cap D_{+}(f')$.
\item Let $g = g_0 + \ldots + g_m$ be an element
of $R$ with $g_i \in R_i$. Express $D(g) \cap \text{Proj}(R)$
in terms of $D_{+}(g_i)$, $i \geq 1$ and $D(g_0) \cap \text{Proj}(R)$.
No proof necessary.
\item Let $g\in R_0$ be a homogeneous element of degree $0$.
Express $D(g) \cap \text{Proj}(R)$ in terms of $D_{+}(f_\alpha)$
for a suitable family $f_\alpha \in R$ of homogeneous elements of
positive degree.
\item Show that the collection $\{D_{+}(f)\}$ of opens forms a
basis for the topology of $\text{Proj}(R)$.
\item
\label{item-bijection}
Show that there is a canonical bijection $D_{+}(f) \to \Spec(R_{(f)})$.
(Hint: Imitate the proof for $\Spec$ but at some point thrown in the
radical of an ideal.)
\item Show that the map from (\ref{item-bijection}) is a homeomorphism.
\item Give an example of an $R$ such that $\text{Proj}(R)$ is not
quasi-compact. No proof necessary.
\item Show that any closed subset $T \subset \text{Proj}(R)$ is of
the form $V_{+}(I)$ for some homogeneous ideal $I \subset R$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-continuous-proj-spec}
There is a continuous map $ \text{Proj}(R) \longrightarrow \Spec(R_0) $.
\end{remark}

\begin{exercise}
\label{exercise-iso-polynomial-ring-one-variable}
If $R = A[X]$ with $\deg(X) = 1$, show that the natural map
$\text{Proj}(R) \to \Spec(A)$ is a bijection and in fact
a homeomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-blowing-up-I}
Blowing up: part I.
In this exercise $R = Bl_I(A) = A \oplus I \oplus I^2 \oplus \ldots$.
Consider the natural map $b : \text{Proj}(R) \to \Spec(A)$.
Set $U = \Spec(A) - V(I)$. Show that
$$
b : b^{-1}(U) \longrightarrow U
$$
is a homeomorphism.
Thus we may think of $U$ as an open subset of $\text{Proj}(R)$.
Let $Z \subset \Spec(A)$ be an irreducible closed subscheme
with generic point $\xi \in Z$. Assume that $\xi \not\in V(I)$,
in other words $Z \not\subset V(I)$, in other words
$\xi \in U$, in other words $Z\cap U \not = \emptyset$. We define
the {\it strict transform} $Z'$ of $Z$ to be the closure of the unique
point $\xi'$ lying above $\xi$. Another way to say this is that
$Z'$ is the closure in $\text{Proj}(R)$ of the locally closed subset
$Z\cap U \subset U \subset \text{Proj}(R)$.
\end{exercise}

\begin{exercise}
\label{exercise-blowing-up-II}
Blowing up: Part II.
Let $A = k[x, y]$ where $k$ is a field, and let $I = (x, y)$.
Let $R$ be the blowup algebra for $A$ and $I$.
\begin{enumerate}
\item Show that the strict transforms of $Z_1 = V(\{x\})$ and
$Z_2 = V(\{y\})$ are disjoint.
\item Show that the strict transforms of $Z_1 = V(\{x\})$ and
$Z_2 = V(\{x-y^2\})$ are not disjoint.
\item Find an ideal $J \subset A$ such that $V(J) = V(I)$
and such that the strict transforms of $Z_1 = V(\{x\})$ and
$Z_2 = V(\{x-y^2\})$ in the blowup along $J$ are disjoint.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-proj-when-empty}
Let $R$ be a graded ring.
\begin{enumerate}
\item Show that $\text{Proj}(R)$ is empty if $R_n = (0)$ for all $n >> 0$.
\item Show that $\text{Proj}(R)$ is an irreducible topological space
if $R$ is a domain and $R_{+}$ is not zero. (Recall that the empty
topological space is not irreducible.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-blowing-up-III}
Blowing up: Part III.
Consider $A$, $I$ and $U$, $Z$ as in the definition of strict transform.
Let $Z = V({\mathfrak p})$ for some prime ideal ${\mathfrak p}$. Let $\bar A =
A/{\mathfrak p}$ and let
$\bar I$ be the image of $I$ in $\bar A$.
\begin{enumerate}
\item Show that there exists a surjective ring map
$R: = Bl_I(A) \to \bar R: = Bl_{\bar I}(\bar A)$.
\item Show that the ring map above induces a bijective map
from $\text{Proj}(\bar R)$ onto the strict transform $Z'$ of $Z$. (This
is not so easy. Hint: Use 5(b) above.)
\item Conclude that the strict transform $Z' = V_{+}(P)$ where
$P \subset R$ is the homogeneous ideal defined by
$P_d = I^d \cap {\mathfrak p}$.
\item Suppose that $Z_1 = V({\mathfrak p})$ and
$Z_2 = V({\mathfrak q})$ are irreducible
closed subsets defined by prime ideals such that  $Z_1 \not \subset Z_2$,
and $Z_2 \not \subset Z_1$. Show that blowing up the ideal
$I = {\mathfrak p} + {\mathfrak q}$ separates the
strict transforms of $Z_1$ and $Z_2$,
i.e., $Z_1' \cap Z_2' = \emptyset$. (Hint: Consider the homogeneous
ideal $P$ and $Q$ from part (c) and consider $V(P + Q)$.)
\end{enumerate}
\end{exercise}


\section{Cohen-Macaulay rings of dimension 1}
\label{section-CM-dim-1}

\begin{definition}
\label{definition-CM}
A Noetherian local ring $A$ is said to be {\it Cohen-Macaulay}
of dimension $d$ if it has dimension $d$ and there exists a system
of parameters $x_1, \ldots, x_d$ for $A$ such that $x_i$ is a nonzerodivisor
in $A/(x_1, \ldots, x_{i-1})$ for $i = 1, \ldots, d$.
\end{definition}

\begin{exercise}
\label{exercise-CM-dim-1-I}
Cohen-Macaulay rings of dimension 1. Part I: Theory.
\begin{enumerate}
\item Let $(A, {\mathfrak m})$ be a local Noetherian with $\dim A = 1$.
Show that if $x\in {\mathfrak m}$ is not a zerodivisor then
\begin{enumerate}
\item $\dim A/xA = 0$, in other words $A/xA$ is Artinian,
in other words $\{x\}$ is a system of parameters for $A$.
\item $A$ is has no embedded prime.
\end{enumerate}
\item Conversely, let $(A, {\mathfrak m})$ be a local Noetherian ring of
dimension $1$. Show that if $A$ has no embedded prime then there exists
a nonzerodivisor in ${\mathfrak m}$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-CM-dim-1-II}
Cohen-Macaulay rings of dimension 1. Part II: Examples.
\begin{enumerate}
\item Let $A$ be the local ring at $(x, y)$ of $k[x, y]/(x^2, xy)$.
\begin{enumerate}
\item Show that $A$ has dimension 1.
\item Prove that every element of ${\mathfrak m}\subset A$ is a
zerodivisor.
\item Find $z\in {\mathfrak m}$ such that $\dim A/zA = 0$
(no proof required).
\end{enumerate}
\item Let $A$ be the local ring at $(x, y)$ of $k[x, y]/(x^2)$.
Find a nonzerodivisor in ${\mathfrak m}$ (no proof required).
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-embedding-dim-1}
Local rings of embedding dimension $1$.
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring
of embedding dimension $1$, i.e.,
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 1.
$$
Show that the function $f(n) = \dim_k {\mathfrak m}^n/{\mathfrak m}^{n + 1}$
is either constant with value $1$, or its values are
$$
1, 1, \ldots, 1, 0, 0, 0, 0, 0, \ldots
$$
\end{exercise}

\begin{exercise}
\label{exercise-regular-local-dim-1}
Regular local rings of dimension $1$.
Suppose that $(A, {\mathfrak m}, k)$ is a regular Noetherian local ring of
dimension $1$. Recall that this means that $A$ has dimension $1$
and embedding dimension $1$, i.e.,
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 1.
$$
Let $x\in{\mathfrak m}$ be any element whose class in ${\mathfrak m}/{\mathfrak
m}^2$ is not zero.
\begin{enumerate}
\item Show that for every element $y$
of ${\mathfrak m}$ there exists an integer $n$ such that $y$ can be written as
$y = ux^n$ with $u\in A^\ast$ a unit.
\item Show that $x$ is a nonzerodivisor in $A$.
\item Conclude that $A$ is a domain.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-nonzerodivisor-graded}
Let $(A, {\mathfrak m}, k)$ be a Noetherian local ring with associated
graded $Gr_{\mathfrak m}(A)$.
\begin{enumerate}
\item Suppose that $x\in {\mathfrak m}^d$ maps to a nonzerodivisor
$\bar x \in {\mathfrak m}^d/{\mathfrak m}^{d + 1}$ in degree $d$ of
$Gr_{\mathfrak m}(A)$.
Show that $x$ is a nonzerodivisor.
\item Suppose the depth of $A$ is at least $1$.
Namely, suppose that there exists a nonzerodivisor $y \in {\mathfrak m}$.
In this case we can do better: assume just that $x\in {\mathfrak m}^d$ maps to
the element $\bar x \in {\mathfrak m}^d/{\mathfrak m}^{d + 1}$ in degree $d$
of $Gr_{\mathfrak m}(A)$ which is a nonzerodivisor on sufficiently
high degrees: $\exists N$ such that for all $n \geq N$ the map
of multiplication by $\bar x$
$$
{\mathfrak m}^n/{\mathfrak m}^{n + 1} \longrightarrow
{\mathfrak m}^{n + d}/{\mathfrak m}^{n + d + 1}
$$
is injective. Then show that $x$ is a nonzerodivisor.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-embedding-2-dim-1}
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring of
dimension $1$. Assume also that the embedding dimension of $A$ is
$2$, i.e., assume that
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 2.
$$
Notation: $f(n) = \dim_k {\mathfrak m}^n/{\mathfrak m}^{n + 1}$.
Pick generators $x, y \in {\mathfrak m}$
and write $Gr_{\mathfrak m}(A) = k[\bar x, \bar y]/I$ for some
homogeneous ideal $I$.
\begin{enumerate}
\item Show that there exists a homogeneous element
$F\in k[\bar x, \bar y]$ such that $I \subset (F)$ with equality
in all sufficiently high degrees.
\item Show that $f(n) \leq n + 1$.
\item Show that if $f(n) < n + 1$ then $n \geq \deg(F)$.
\item Show that if $f(n) < n + 1$, then $f(n + 1) \leq f(n)$.
\item Show that $f(n) = \deg(F)$ for all $n >> 0$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-CM-dim-1-embedding-dim-2}
Cohen-Macaulay rings of dimension 1 and embedding dimension 2.
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring which is
Cohen-Macaulay
of dimension $1$. Assume also that the embedding dimension of $A$ is
$2$, i.e., assume that
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 2.
$$
Notations: $f$, $F$, $x, y\in {\mathfrak m}$, $I$ as in Ex.\ 6 above. Please
use any results from the problems above.
\begin{enumerate}
\item Suppose that $z\in {\mathfrak m}$ is an element whose class
in ${\mathfrak m}/{\mathfrak m}^2$ is a linear form
$\alpha \bar x + \beta \bar y \in k[\bar x, \bar y]$
which is coprime with $f$.
\begin{enumerate}
\item Show that $z$ is a nonzerodivisor on $A$.
\item Let $d = \deg(F)$.
Show that ${\mathfrak m}^n = z^{n + 1-d}{\mathfrak m}^{d-1}$
for all sufficiently large $n$. (Hint: First show
$z^{n + 1-d}{\mathfrak m}^{d-1} \to {\mathfrak m}^n/{\mathfrak m}^{n + 1}$
is surjective by what you know about $Gr_{\mathfrak m}(A)$. Then use NAK.)
\end{enumerate}
\item What condition on $k$ guarantees the existence of
such a $z$? (No proof required; it's too easy.)

\noindent
Now we are going to assume there exists a $z$ as above. This turns out
to be a harmless assumption (in the sense that you can reduce to
the situation where it holds in order to obtain the results in
parts (d) and (e) below).
\item Now show that ${\mathfrak m}^\ell = z^{\ell - d + 1} {\mathfrak m}^{d-1}$
for all $\ell \geq d$.
\item Conclude that $I = (F)$.
\item Conclude that the function $f$ has values
$$
2, 3, 4, \ldots, d-1, d, d, d, d, d, d, d, \ldots
$$
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-CM-dim-1-embedding-dim-2}
This suggests that a local Noetherian Cohen-Macaulay ring of dimension 1
and embedding dimension 2 is of the form $B/FB$, where $B$ is a 2-dimensional
regular local ring. This is more or less true (under suitable ``niceness''
properties of the ring).
\end{remark}






\section{Infinitely many primes}
\label{section-many-primes}

\noindent
A section with a collection of strange questions on rings where
infinitely many primes are not invertible.

\begin{exercise}
\label{exercise-not-in-Q}
Give an example of a finite type ${\mathbf Z}$-algebra $R$
with the following two properties:
\begin{enumerate}
\item There is no ring map $R \to {\mathbf Q}$.
\item For every prime $p$ there exists a maximal ideal
${\mathfrak m} \subset R$ such that $R/{\mathfrak m} \cong {\mathbf F}_p$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-strange-fp-1}
For $f \in {\mathbf Z}[x, u]$ we define $f_p(x)
= f(x, x^p) \bmod p \in {\mathbf F}_p[x]$. Give an example
of an $f \in {\mathbf Z}[x, u]$ such that the following two
properties hold:
\begin{enumerate}
\item There exist infinitely many $p$ such that $f_p$
does not have a zero in ${\mathbf F}_p$.
\item For all $p >> 0$ the polynomial $f_p$ either has
a linear or a quadratic factor.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-strange-fp-2}
For $f \in {\mathbf Z}[x, y, u, v]$ we define $f_p(x, y)
= f(x, y, x^p, y^p) \bmod p \in {\mathbf F}_p[x, y]$. Give an ``interesting''
example of an $f$ such that $f_p$ is reducible for all $p >> 0$.
For example, $f = xv-yu$ with $f_p = xy^p-x^py = xy(x^{p-1}-y^{p-1})$ is
``uninteresting''; any $f$ depending only on $x, u$ is ``uninteresting'',
etc.
\end{exercise}

\begin{remark}
\label{remark-strange-fp}
Let $h \in {\mathbf Z}[y]$ be a monic polynomial of degree $d$.
Then:
\begin{enumerate}
\item The map $A = {\mathbf Z}[x] \to B ={\mathbf Z}[y]$,
$x \mapsto h$ is finite locally free of rank $d$.
\item For all primes $p$ the map
$A_p = {\mathbf F}_p[x]\to B_p = {\mathbf F}_p[y]$,
$y \mapsto h(y) \bmod p$ is finite locally free of rank $d$.
\end{enumerate}
\end{remark}

\begin{exercise}
\label{exercise-strange-fp-3}
Let $h, A, B, A_p, B_p$ be as in the remark. For $f \in {\mathbf Z}[x, u]$ we
define $f_p(x) = f(x, x^p) \bmod p \in {\mathbf F}_p[x]$. For
$g \in {\mathbf Z}[y, v]$ we define
$g_p(y) = g(y, y^p) \bmod p \in {\mathbf F}_p[y]$.
\begin{enumerate}
\item Give an example of a $h$ and $g$ such that
there does not exist a $f$ with the property
$$
f_p  =  Norm_{B_p/A_p}(g_p).
$$
\item Show that for any choice of $h$ and $g$ as above
there exists a nonzero $f$ such that for all $p$ we have
$$
Norm_{B_p/A_p}(g_p)\quad\text{divides}\quad f_p .
$$
If you want you can restrict to the case $h = y^n$, even with $n = 2$,
but it is true in general.
\item Discuss the relevance of this to Exercises 6 and 7 of the previous
set.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-strange-fp-unsolved}
Unsolved problems. They may be really hard or they may be easy.
I don't know.
\begin{enumerate}
\item Is there any $f \in {\mathbf Z}[x, u]$ such that $f_p$ is
irreducible for an infinite number of $p$? (Hint: Yes, this happens for
$f(x, u) = u - x - 1$ and also for $f(x, u) = u^2 - x^2 + 1$.)
\item Let $f \in {\mathbf Z}[x, u]$ nonzero, and suppose
$\deg_x(f_p) = dp + d'$ for all large $p$. (In other words $\deg_u(f) = d$
and the coefficient $c$ of $u^d$ in $f$ has $\deg_x(c) = d'$.) Suppose we
can write $d = d_1 + d_2$ and $d' = d'_1 + d'_2$ with $d_1, d_2 > 0$
and $d'_1, d'_2 \geq 0$ such that for all sufficiently large $p$
there exists a factorization
$$
f_p = f_{1, p} f_{2, p}
$$
with $\deg_x(f_{1, p}) = d_1p + d'_1$. Is it true that $f$ comes about via a
norm construction as in Exercise 4? (More precisely, are there a $h$ and
$g$ such that $Norm_{B_p/A_p}(g_p)$ divides $f_p$ for all $p >> 0$.)
\item Analogous question to the one in (b) but now with
$f \in {\mathbf Z}[x_1, x_2, u_1, u_2]$ irreducible and just assuming that
$f_p(x_1, x_2) = f(x_1, x_2, x_1^p, x_2^p) \bmod p$ factors for all
$p >> 0$.
\end{enumerate}
\end{exercise}


















\section{Filtered derived category}
\label{section-filtered-derived}

\noindent
In order to do the exercises in this section, please read the material
in Homology, Section \ref{homology-section-filtrations}. We will say
$A$ is a filtered object of $\mathcal{A}$, to mean that $A$ comes endowed
with a filtration $F$ which we omit from the notation.

\begin{exercise}
\label{exercise-split-injective}
Let $\mathcal{A}$ be an abelian category.
Let $I$ be a filtered object of $\mathcal{A}$.
Assume that the filtration on $I$ is finite
and that each $\text{gr}^p(I)$ is an injective object of $\mathcal{A}$.
Show that there exists an isomorphism
$I \cong \bigoplus \text{gr}^p(I)$ with filtration
$F^p(I)$ corresponding to $\bigoplus_{p' \geq p} \text{gr}^p(I)$.
\end{exercise}

\begin{exercise}
\label{exercise-filtered-injective}
Let $\mathcal{A}$ be an abelian category.
Let $I$ be a filtered object of $\mathcal{A}$.
Assume that the filtration on $I$ is finite.
Show the following are equivalent:
\begin{enumerate}
\item For any solid diagram
$$
\xymatrix{
A \ar[r]_\alpha \ar[d] & B \ar@{-->}[ld] \\
I &
}
$$
of filtered objects with
(\romannumeral1) the filtrations on $A$ and $B$ are finite,
and (\romannumeral2) $\text{gr}(\alpha)$ injective the
dotted arrow exists making the diagram commute.
\item Each $\text{gr}^p I$ is injective.
\end{enumerate}
\end{exercise}

\noindent
Note that given a morphism $\alpha : A \to B$ of filtered objects
with finite filtrations to say that $\text{gr}(\alpha)$ injective
is the same thing as saying that $\alpha$ is a {\it strict monomorphism}
in the category $\text{Fil}(\mathcal{A})$. Namely,
being a monomorphism means $\Ker(\alpha) = 0$ and strict means that
this also implies $\Ker(\text{gr}(\alpha)) = 0$.
See Homology, Lemma \ref{homology-lemma-characterize-strict}.
(We only use the term ``injective'' for a morphism in an abelian category,
although it makes sense in any additive category having kernels.)
The exercises above justifies the following definition.

\begin{definition}
\label{definition-injective-filtered}
Let $\mathcal{A}$ be an abelian category.
Let $I$ be a filtered object of $\mathcal{A}$.
Assume the filtration on $I$ is finite.
We say $I$ is {\it filtered injective} if each $\text{gr}^p(I)$ is
an injective object of $\mathcal{A}$.
\end{definition}

\noindent
We make the following definition to avoid having to keep saying
``with a finite filtration'' everywhere.

\begin{definition}
\label{definition-finite-filtration-category}
Let $\mathcal{A}$ be an abelian category.
We denote {\it $\text{Fil}^f(\mathcal{A})$} the full subcategory
of $\text{Fil}(\mathcal{A})$ whose objects consist of
those $A \in \Ob(\text{Fil}(\mathcal{A}))$
whose filtration is finite.
\end{definition}

\begin{exercise}
\label{exercise-inject-into-injective}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
Let $A$ be an object of $\text{Fil}^f(\mathcal{A})$.
Show that there exists a strict monomorphism $\alpha : A \to I$
of $A$ into a filtered injective object $I$ of $\text{Fil}^f(\mathcal{A})$.
\end{exercise}

\begin{definition}
\label{definition-filtered-quasi-isomorphism}
Let $\mathcal{A}$ be an abelian category.
Let $\alpha : K^\bullet \to L^\bullet$ be a morphism of
complexes of $\text{Fil}(\mathcal{A})$. We say that
$\alpha$ is a {\it filtered quasi-isomorphism} if
for each $p \in \mathbf{Z}$ the morphism
$\text{gr}^p(K^\bullet) \to \text{gr}^p(L^\bullet)$ is
a quasi-isomorphism.
\end{definition}

\begin{definition}
\label{definition-filtered-acyclic}
Let $\mathcal{A}$ be an abelian category.
Let $K^\bullet$ be a complex of $\text{Fil}^f(\mathcal{A})$.
We say that $K^\bullet$ is {\it filtered acyclic} if
for each $p \in \mathbf{Z}$ the complex $\text{gr}^p(K^\bullet)$ is
acyclic.
\end{definition}

\begin{exercise}
\label{exercise-filtered-quasi-isomorphism}
Let $\mathcal{A}$ be an abelian category.
Let $\alpha : K^\bullet \to L^\bullet$ be a morphism of bounded below
complexes of $\text{Fil}^f(\mathcal{A})$. (Note the superscript $f$.)
Show that the following are equivalent:
\begin{enumerate}
\item $\alpha$ is a filtered quasi-isomorphism,
\item for each $p \in \mathbf{Z}$ the map
$\alpha : F^pK^\bullet \to F^pL^\bullet$ is a quasi-isomorphism,
\item for each $p \in \mathbf{Z}$ the map
$\alpha : K^\bullet/F^pK^\bullet \to L^\bullet/F^pL^\bullet$
is a quasi-isomorphism, and
\item the cone of $\alpha$ (see
Derived Categories, Definition \ref{derived-definition-cone})
is a filtered acyclic complex.
\end{enumerate}
Moreover, show that if $\alpha$ is a filtered quasi-isomorphism
then $\alpha$ is also a usual quasi-isomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-injective-resolution}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
Let $A$ be an object of $\text{Fil}^f(\mathcal{A})$.
Show there exists a complex
$I^\bullet$ of $\text{Fil}^f(\mathcal{A})$,
and a morphism $A[0] \to I^\bullet$ such that
\begin{enumerate}
\item each $I^p$ is filtered injective,
\item $I^p = 0$ for $p < 0$, and
\item $A[0] \to I^\bullet$ is a filtered quasi-isomorphism.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-injective-resolution-complex}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
Let $K^\bullet$ be a bounded below complex of objects of
$\text{Fil}^f(\mathcal{A})$. Show there exists a
filtered quasi-isomorphism $\alpha : K^\bullet \to I^\bullet$
with $I^\bullet$ a complex of $\text{Fil}^f(\mathcal{A})$
having filtered injective terms $I^n$, and bounded below.
In fact, we may choose $\alpha$ such that each $\alpha^n$ is
a strict monomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-morphisms-lift}
Let $\mathcal{A}$ be an abelian category.
Consider a solid diagram
$$
\xymatrix{
K^\bullet \ar[r]_\alpha \ar[d]_\gamma & L^\bullet \ar@{-->}[dl]^\beta \\
I^\bullet
}
$$
of complexes of $\text{Fil}^f(\mathcal{A})$. Assume
$K^\bullet$, $L^\bullet$ and $I^\bullet$ are bounded below and
assume each $I^n$ is a filtered injective object.
Also assume that $\alpha$ is a filtered quasi-isomorphism.
\begin{enumerate}
\item There exists a map of complexes $\beta$ making the diagram
commute up to homotopy.
\item If $\alpha$ is a strict monomorphism in every degree
then we can find a $\beta$ which makes the diagram commute.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-acyclic-is-zero}
Let $\mathcal{A}$ be an abelian category.
Let $K^\bullet$, $K^\bullet$ be complexes of $\text{Fil}^f(\mathcal{A})$.
Assume
\begin{enumerate}
\item $K^\bullet$ bounded below and filtered acyclic, and
\item $I^\bullet$ bounded below and consisting of filtered injective objects.
\end{enumerate}
Then any morphism $K^\bullet \to I^\bullet$ is homotopic to zero.
\end{exercise}

\begin{exercise}
\label{exercise-morphisms-equal-up-to-homotopy}
Let $\mathcal{A}$ be an abelian category.
Consider a solid diagram
$$
\xymatrix{
K^\bullet \ar[r]_\alpha \ar[d]_\gamma & L^\bullet \ar@{-->}[dl]^{\beta_i} \\
I^\bullet
}
$$
of complexes of $\text{Fil}^f(\mathcal{A})$.
Assume $K^\bullet$, $L^\bullet$ and $I^\bullet$ bounded below and
each $I^n$ a filtered injective
object. Also assume $\alpha$ a filtered quasi-isomorphism.
Any two morphisms $\beta_1, \beta_2$ making the diagram commute
up to homotopy are homotopic.
\end{exercise}







\section{Regular functions}
\label{section-regular-functions}

\begin{exercise}
\label{exercise-extra-function}
Consider the affine curve $X$ given by the equation
$t^2 = s^5 + 8$ in $\mathbf{C}^2$ with coordinates $s, t$.
Let $x \in X$ be the point with coordinates $(1, 3)$.
Let $U = X \setminus \{x\}$. Prove that there is a
regular function on $U$ which is not the restriction
of a regular function on $\mathbf{C}^2$, i.e., is not
the restriction of a polynomial in $s$ and $t$ to $U$.
\end{exercise}

\begin{exercise}
\label{exercise-no-extra-function}
Let $n \geq 2$. Let $E \subset \mathbf{C}^n$ be a finite subset.
Show that any regular function on $\mathbf{C}^n \setminus E$
is a polynomial.
\end{exercise}

\begin{exercise}
\label{exercise-cone}
Let $X \subset \mathbf{C}^n$ be an affine variety. Let us say $X$ is a
{\it cone} if $x = (a_1, \ldots, a_n) \in X$ and $\lambda \in \mathbf{C}$
implies $(\lambda a_1, \ldots, \lambda a_n) \in X$.
Of course, if $\mathfrak p \subset \mathbf{C}[x_1, \ldots, x_n]$
is a prime ideal generated by homogeneous polynomials in $x_1, \ldots, x_n$,
then the affine variety $X = V(\mathfrak p) \subset \mathbf{C}^n$ is a cone.
Show that conversely the prime ideal
$\mathfrak p \subset \mathbf{C}[x_1, \ldots, x_n]$
corresponding to a cone can be generated by homogeneous polynomials
in $x_1, \ldots, x_n$.
\end{exercise}

\begin{exercise}
\label{exercise-extra-function-cone}
Give an example of an affine variety $X \subset \mathbf{C}^n$
which is a cone (see Exercise \ref{exercise-cone})
and a regular function $f$ on $U = X \setminus \{(0, \ldots, 0)\}$
which is not the restriction of a polynomial
function on $\mathbf{C}^n$.
\end{exercise}

\begin{exercise}
\label{exercise-regular-functions}
In this exercise we try to see what happens with regular functions
over non-algebraically closed fields. Let $k$ be a field.
Let $Z \subset k^n$ be a Zariski locally closed subset, i.e., there
exist ideals $I \subset J \subset k[x_1, \ldots, x_n]$ such that
$$
Z = \{a \in k^n \mid
f(a) = 0\ \forall\ f \in I,\ \exists\ g \in J,\ g(a) \not = 0\}.
$$
A function $\varphi : Z \to k$ is said to be {\it regular} if for every
$z \in Z$ there exists a Zariski open neighbourhood $z \in U \subset Z$
and polynomials $f, g \in k[x_1, \ldots, x_n]$ such that
$g(u) \not = 0$ for all $u \in U$ and such that
$\varphi(u) = f(u)/g(u)$ for all $u \in U$.
\begin{enumerate}
\item If $k = \bar k$ and $Z = k^n$ show that regular functions are
given by polynomials. (Only do this if you haven't seen this argument
before.)
\item If $k$ is finite show that (a) every function $\varphi$ is regular,
(b) the ring of regular functions is finite dimensional over $k$.
(If you like you can take $Z = k^n$ and even $n = 1$.)
\item If $k = \mathbf{R}$ give an example of a regular function on
$Z = \mathbf{R}$ which is not given by a polynomial.
\item If $k = \mathbf{Q}_p$ give an example of a regular function on
$Z = \mathbf{Q}_p$ which is not given by a polynomial.
\end{enumerate}
\end{exercise}






\section{Sheaves}
\label{section-sheaves}

\noindent
A morphism $f : X \to Y$ of a category $\mathcal{C}$ is an {\it monomorphism}
if for every pair of morphisms $a, b : W \to X$ we have
$f \circ a = f \circ b \Rightarrow a = b$. A monomorphism in the category
of sets is an injective map of sets.

\begin{exercise}
\label{exercise-mono-sheaves-sets}
Carefully prove that a map of sheaves of sets is an monomorphism
(in the category of sheaves of sets) if and only if the induced maps on
all the stalks are injective.
\end{exercise}

\noindent
A morphism $f : X \to Y$ of a category $\mathcal{C}$ is an {\it isomorphism}
if there exists a morphism $g : Y \to X$ such that $f \circ g = \text{id}_Y$
and $g \circ f = \text{id}_X$. An isomorphism in the category of sets
is a bijective map of sets.

\begin{exercise}
\label{exercise-isomorphism-sheaves-sets}
Carefully prove that a map of sheaves of sets is an isomorphism
(in the category of sheaves of sets) if and only if the induced maps on
all the stalks are bijective.
\end{exercise}

\noindent
A morphism $f : X \to Y$ of a category $\mathcal{C}$ is an {\it epimorphism}
if for every pair of morphisms $a, b : Y \to Z$ we have
$a \circ f = b \circ f \Rightarrow a = b$. An epimorphism in the
category of sets is a surjective map of sets.

\begin{exercise}
\label{exercise-epi-sheaves-sets}
Carefully prove that a map of sheaves of sets is an epimorphism
(in the category of sheaves of sets) if and only if the induced maps on
all the stalks are surjective.
\end{exercise}

\begin{exercise}
\label{exercise-adjoint-push-pull}
Let $f : X \to Y$ be a map of topological spaces.
Prove pushforward $f_\ast$ and pullback $f^{-1}$ for sheaves of {\bf sets}
form an adjoint pair of functors.
\end{exercise}

\begin{exercise}
\label{exercise-j-shriek}
Let $j : U \to X$ be an open immersion. Show that
\begin{enumerate}
\item Pullback $j^{-1} : \Sh(X) \to \Sh(U)$ has a left adjoint
$j_{!} : \Sh(U) \to \Sh(X)$ called {\it extension by the empty set}.
\item Characterize the stalks of $j_{!}({\mathcal G})$ for
$\mathcal{G} \in \Sh(U)$.
\item Pullback $j^{-1} : \textit{Ab}(X) \to \textit{Ab}(U)$ has a left adjoint
$j_{!} : \textit{Ab}(U) \to \textit{Ab}(X)$ called {\it extension by zero}.
\item Characterize the stalks of $j_{!}({\mathcal G})$ for
$\mathcal{G} \in \textit{Ab}(U)$.
\end{enumerate}
Observe that extension by zero differs from extension by the
empty set!
\end{exercise}

\begin{exercise}
\label{exercise-not-locally-generated-by-sections}
Let $X = \mathbf{R}$ with the usual topology.
Let $\mathcal{O}_X = \underline{\mathbf{Z}/2\mathbf{Z}}_X$.
Let $i : Z = \{0\} \to X$ be the inclusion and let
$\mathcal{O}_Z = \underline{\mathbf{Z}/2\mathbf{Z}}_Z$.
Prove the following (the first three follow from the definitions but if you
are not clear on the definitions you should elucidate them):
\begin{enumerate}
\item $i_*\mathcal{O}_Z$ is a skyscraper sheaf.
\item There is a canonical surjective map from
$\underline{\mathbf{Z}/2\mathbf{Z}}_X \to
i_*\underline{\mathbf{Z}/2\mathbf{Z}}_Z$.
Denote the kernel $\mathcal{I} \subset \mathcal{O}_X$.
\item $\mathcal{I}$ is an ideal sheaf of $\mathcal{O}_X$.
\item The sheaf $\mathcal{I}$ on $X$ cannot be locally generated
by sections (as in
Modules, Definition \ref{modules-definition-locally-generated}.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-quotient-j-shriek-Z}
Let $X$ be a topological space.
Let ${\mathcal F}$ be an abelian sheaf on $X$. Show
that ${\mathcal F}$ is the quotient of a (possibly very large) direct sum
of sheaves all of whose terms are of the form
$$
j_{!}(\underline{{\mathbf Z}}_U)
$$
where $U \subset X$ is open and $\underline{{\mathbf Z}}_U$ denotes the
constant sheaf with value ${\mathbf Z}$ on $U$.
\end{exercise}

\begin{remark}
\label{remark-direct-sum-stalk-abelian}
Let $X$ be a topological space.
In the category of abelian sheaves the direct sum of
a family of sheaves $\{{\mathcal F}_i\}_{i\in I}$ is the sheaf associated to
the presheaf $U \mapsto \oplus {\mathcal F}_i(U)$. Consequently the stalk of
the direct sum at a point $x$ is the direct sum of the stalks of the
${\mathcal F}_i$ at $x$.
\end{remark}

\begin{exercise}
\label{exercise-product-over-points}
Let $X$ be a topological space. Suppose we are given a collection of
abelian groups $A_x$ indexed by $x \in X$. Show that the rule
$U \mapsto \prod_{x \in U} A_x$ with obvious restriction mappings
defines a sheaf $\mathcal{G}$ of abelian groups. Show, by an example,
that usually it is not the case that $\mathcal{G}_x = A_x$ for $x \in X$.
\end{exercise}

\begin{exercise}
\label{exercise-modified-product-over-points}
Let $X$, $A_x$, $\mathcal{G}$ be as in
Exercise \ref{exercise-product-over-points}.
Let $\mathcal{B}$ be a basis for the topology of $X$, see
Topology, Definition \ref{topology-definition-base}.
For $U \in \mathcal{B}$ let $A_U$ be a subgroup
$A_U \subset \mathcal{G}(U) = \prod_{x \in U} A_x$. Assume that for
$U \subset V$ with $U, V \in \mathcal{B}$ the restriction
maps $A_V$ into $A_U$. For $U \subset X$ open set
$$
\mathcal{F}(U) =
\left\{
(s_x)_{x \in U}
\middle|
\begin{matrix}
\text{ for every }x\text{ in }U\text{ there exists } V \in \mathcal{B} \\
x \in V \subset U\text{ such that } (s_y)_{y \in V} \in A_V
\end{matrix}
\right\}
$$
Show that $\mathcal{F}$ defines a sheaf of abelian groups on $X$.
Show, by an example, that it is usually not the case that
$\mathcal{F}(U) = A_U$ for $U \in \mathcal{B}$.
\end{exercise}

\begin{exercise}
\label{exercise-exact-but-not-a-stalk-functor}
Give an example of a topological space $X$ and a functor
$$
F : \Sh(X) \longrightarrow \textit{Sets}
$$
which is exact (commutes with finite products and equalizers and commutes
with finite coproducts and coequalizers, see Categories, Section
\ref{categories-section-exact-functor}), but there is no point $x \in X$
such that $F$ is isomorphic to the stalk functor
$\mathcal{F} \mapsto \mathcal{F}_x$.
\end{exercise}




\section{Schemes}
\label{section-schemes}

\noindent
Let $LRS$ be the category of locally ringed spaces.
An affine scheme is an object in $LRS$ isomorphic in $LRS$ to
a pair of the form $(\Spec(A), {\mathcal O}_{\Spec(A)})$.
A scheme is an
object $(X, {\mathcal O}_X)$ of $LRS$ such that every point $x\in X$
has an open neighbourhood $U \subset X$ such that the pair
$(U, {\mathcal O}_X|_U)$ is an affine scheme.

\begin{exercise}
\label{exercise-one-point}
Find a $1$-point locally ringed space which is not a scheme.
\end{exercise}

\begin{exercise}
\label{exercise-two-points}
Suppose that $X$ is a scheme whose underlying
topological space has 2 points. Show that $X$ is an affine scheme.
\end{exercise}

\begin{exercise}
\label{exercise-discrete-finite-set-points}
Suppose that $X$ is a scheme whose underlying topological space is a
finite discrete set. Show that $X$ is an affine scheme.
\end{exercise}

\begin{exercise}
\label{exercise-three-points}
Show that there exists a non-affine scheme having three points.
\end{exercise}

\begin{exercise}
\label{exercise-quasi-compact-closed-point}
Suppose that $X$ is a quasi-compact scheme.
Show that $X$ has a closed point.
\end{exercise}

\begin{remark}
\label{remark-open-immersion}
When $(X, {\mathcal O}_X)$ is a ringed space and $U \subset X$
is an open subset then $(U, {\mathcal O}_X|_U)$ is a ringed space. Notation:
${\mathcal O}_U = {\mathcal O}_X|_U$. There is a canonical morphisms
of ringed spaces
$$
j : (U, {\mathcal O}_U) \longrightarrow (X, {\mathcal O}_X).
$$
If $(X, {\mathcal O}_X)$ is a locally ringed space, so is
$(U, {\mathcal O}_U)$ and
$j$ is a morphism of locally ringed spaces. If $(X, {\mathcal O}_X)$
is a scheme
so is $(U, {\mathcal O}_U)$ and $j$ is a morphism of schemes. We say
that
$(U, {\mathcal O}_U)$ is an {\it open subscheme} of $(X, {\mathcal O}_X)$
and that
$j$ is an {\it open immersion}. More generally, any morphism
$j' : (V, {\mathcal O}_V) \to (X, {\mathcal O}_X)$ that is {\it isomorphic}
to a
morphism $j : (U, {\mathcal O}_U) \to (X, {\mathcal O}_X)$ as above is
called an
open immersion.
\end{remark}

\begin{exercise}
\label{exercise-open-affine-not-affine}
Give an example of an affine scheme $(X, {\mathcal O}_X)$
and an open $U \subset X$ such that $(U, {\mathcal O}_X|U)$ is not an affine
scheme.
\end{exercise}

\begin{exercise}
\label{exercise-morphism-does-not-extend}
Given an example of a pair of affine schemes
$(X, {\mathcal O}_X)$, $(Y, {\mathcal O}_Y)$,
an open subscheme $(U, {\mathcal O}_X|_U)$
of $X$ and a morphism of schemes
$(U, {\mathcal O}_X|_U) \to (Y, {\mathcal O}_Y)$
that does not extend to a morphism of schemes
$(X, {\mathcal O}_X) \to (Y, {\mathcal O}_Y)$.
\end{exercise}

\begin{exercise}
\label{exercise-closed-subscheme-does-not-extend}
(This is pretty hard.)
Given an example of a scheme $X$, and open subscheme $U \subset X$
and a closed subscheme $Z \subset U$ such that $Z$ does not extend
to a closed subscheme of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-not-morphism-schemes}
Give an example of a scheme $X$, a field $K$, and a
morphism of ringed spaces $\Spec(K) \to X$ which
is NOT a morphism of schemes.
\end{exercise}

\begin{exercise}
\label{exercise-just-kidding}
Do all the exercises in \cite[Chapter II]{H},
Sections 1 and 2...\ \ Just kidding!
\end{exercise}

\begin{definition}
\label{definition-integral}
A scheme $X$ is called {\it integral} if $X$ is nonempty and
for every nonempty affine open $U \subset X$ the ring
$\Gamma(U, \mathcal{O}_X) = \mathcal{O}_X(U)$ is a domain.
\end{definition}

\begin{exercise}
\label{exercise-morphism-integral-schemes-surjective-stalks-not-closed}
Give an example of a morphism of {\it integral}
schemes $f : X \to Y$ such that the induced maps ${\mathcal O}_{Y, f(x)}
\to {\mathcal O}_{X, x}$ are surjective for all $x\in X$, but $f$
is not a closed immersion.
\end{exercise}

\begin{exercise}
\label{exercise-fibre-product-affines-not-affine}
Give an example of a fibre product $X \times_S Y$ such that $X$ and $Y$
are affine but $X \times_S Y$ is not.
\end{exercise}

\begin{remark}
\label{remark-separated-base-fibre-product-affines-affine}
It turns out this cannot happen with $S$ separated. Do you know why?
\end{remark}

\begin{exercise}
\label{exercise-not-geometrically-integral}
Give an example of a scheme
$V$ which is integral 1-dimensional scheme of finite type
over ${\mathbf Q}$ such that
$\Spec({\mathbf C}) \times_{\Spec({\mathbf Q})} V$
is not integral.
\end{exercise}

\begin{exercise}
\label{exercise-not-geometrically-reduced}
Give an example of a scheme
$V$ which is integral 1-dimensional scheme of finite type
over a field $k$ such that $\Spec(k') \times_{\Spec(k)} V$
is not reduced for some finite field extension $k \subset k'$.
\end{exercise}

\begin{remark}
\label{remark-affine-dimension}
If your scheme is affine then dimension is the
same as the Krull dimension of the underlying ring. So you can
use last semesters results to compute dimension.
\end{remark}






\section{Morphisms}
\label{section-morphisms}

\noindent
An important question is, given a morphism $\pi : X \to S$,
whether the morphism has a section or a rational section.
Here are some example exercises.

\begin{exercise}
\label{exercise-no-section}
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, t, 1/xt])
\longrightarrow
S = \Spec(\mathbf{C}[t]).
$$
\begin{enumerate}
\item Show there does not exist a morphism $\sigma : S \to X$
such that $\pi \circ \sigma = \text{id}_S$.
\item Show there does exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-no-rational-section}
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, t]/(x^2 + t))
\longrightarrow
S = \Spec(\mathbf{C}[t]).
$$
Show there does not exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{exercise}

\begin{exercise}
\label{exercise-has-rational-section}
Let $A, B, C \in \mathbf{C}[t]$ be nonzero polynomials.
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, y, t]/(A + Bx^2 + Cy^2))
\longrightarrow
S = \Spec(\mathbf{C}[t]).
$$
Show there does exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
(Hint: Symbolically, write $x = X/Z$, $y = Y/Z$ for some
$X, Y, Z \in \mathbf{C}[t]$ of degree $\leq d$ for some $d$,
and work out the condition that this solves the equation.
Then show, using dimension theory, that if $d >> 0$ you can find
nonzero $X, Y, Z$ solving the equation.)
\end{exercise}

\begin{remark}
\label{remark-tsen}
Exercise \ref{exercise-has-rational-section}
is a special case of ``Tsen's theorem''.
Exercise \ref{exercise-no-section-curve} shows that the
method is limited to low degree equations (conics when the base and
fibre have dimension 1).
\end{remark}

\begin{exercise}
\label{exercise-no-section-curve}
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, y, t]
/(1 + t x^3 + t^2 y^3))
\longrightarrow
S = \Spec(\mathbf{C}[t])
$$
Show there does not exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{exercise}

\begin{exercise}
\label{exercise-no-section-surface}
Consider the schemes
$$
X = \Spec(\mathbf{C}[\{x_i\}_{i = 1}^{8}, s, t]
/(1 + s x_1^3 + s^2 x_2^3 +
t x_3^3 + st x_4^3 + s^2t x_5^3 +
t^2 x_6^3 + st^2 x_7^3 + s^2t^2 x_8^3))
$$
and
$$
S = \Spec(\mathbf{C}[s, t])
$$
and the morphism of schemes
$$
\pi : X \longrightarrow S
$$
Show there does not exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{exercise}

\begin{exercise}
\label{exercise-for-number-theorists}
(For the number theorists.) Give an example of a closed subscheme
$$
Z \subset \Spec\left({\mathbf Z}[x, \frac{1 }{ x(x-1)(2x-1)}]\right)
$$
such that the morphism $Z \to \Spec({\mathbf Z})$ is finite
and surjective.
\end{exercise}

\begin{exercise}
\label{exercise-quasi-section}
If you do not like number theory, you can try the
variant where you look at
$$
\Spec\left({\mathbf F}_p[t, x, \frac{1 }{ x(x-t)(tx-1)}]\right)
\longrightarrow
\Spec({\mathbf F}_p[t])
$$
and you try to find a closed subscheme of the top scheme
which maps finite surjectively to the bottom one. (There is a
theoretical reason for having a finite ground field here; although
it may not be necessary in this particular case.)
\end{exercise}

\begin{remark}
\label{remark-interpretation-skolem-noether}
The interpretation of the results of
Exercise \ref{exercise-for-number-theorists} and \ref{exercise-quasi-section}
is that given the morphism $X \to S$ all of whose fibres are nonempty,
there exists a finite surjective morphism $S' \to S$ such that
the base change $X_{S'} \to S'$ does have a section.
This is not a general fact, but it holds if the base is the spectrum of a
dedekind ring with finite residue fields at closed points, and
the morphism $X \to S$ is flat with geometrically irreducible generic
fibre. See Exercise \ref{exercise-no-quasi-section} below for an example
where it doesn't work.
\end{remark}

\begin{exercise}
\label{exercise-no-quasi-section}
Prove there exist a $f \in \mathbf{C}[x, t]$ which is not divisible
by $t - \alpha$ for any $\alpha \in \mathbf{C}$ such that
there does not exist any $Z \subset \Spec(\mathbf{C}[x, t, 1/f])$
which maps finite surjectively to $\Spec(\mathbf{C}[t])$.
(I think that $f(x, t) = (xt - 2)(x - t + 3)$ works. To show any candidate
has the required property is not so easy I think.)
\end{exercise}

\begin{exercise}
\label{exercise-finite}
Let $A \to B$ be a finite type ring map. Suppose that
$\Spec(B) \to \Spec(A)$ factors through a closed
immersion $\Spec(B) \to \mathbf{P}^n_A$ for some $n$.
Prove that $A \to B$ is a finite ring map, i.e., that
$B$ is finite as an $A$-module.
Hint: if $A$ is Noetherian (please just assume this)
you can argue using that $H^i(Z, \mathcal{O}_Z)$ for $i \in \mathbf{Z}$
is a finite $A$-module for every closed subscheme
$Z \subset \mathbf{P}^n_A$.
\end{exercise}

\begin{exercise}
\label{exercise-projective-finite}
Let $k$ be an algebraically closed field.
Let $f : X \to Y$ be a morphism of projective
varieties such that $f^{-1}(\{y\})$ is finite for
every closed point $y \in Y$.
Prove that $f$ is finite as a morphism of schemes.
Hints: (a) being finite is a local property,
(b) try to reduce to Exercise \ref{exercise-finite}, and
(c) use a closed immersion $X \to \mathbf{P}^n_k$ to get
a closed immersion $X \to \mathbf{P}^n_Y$ over $Y$.
\end{exercise}






\section{Tangent Spaces}
\label{section-tangent-space}

\begin{definition}
\label{definition-dual-numbers}
For any ring $R$ we denote $R[\epsilon]$ the ring
of {\it dual numbers}. As an $R$-module it is free with
basis $1$, $\epsilon$. The ring structure comes from setting
$\epsilon^2 = 0$.
\end{definition}

\begin{exercise}
\label{exercise-tangent-space-Zariski}
Let $f : X \to S$ be a morphism of schemes.
Let $x \in X$ be a point, let $s = f(x)$.
Consider the solid commutative diagram
$$
\xymatrix{
\Spec(\kappa(x)) \ar[r] \ar[dr] \ar@/^1pc/[rr] &
\Spec(\kappa(x)[\epsilon]) \ar@{.>}[r] \ar[d]&
X \ar[d] \\
&
\Spec(\kappa(s)) \ar[r] &
S
}
$$
with the curved arrow being the canonical morphism of
$\Spec(\kappa(x))$ into $X$.
If $\kappa(x) = \kappa(s)$ show that the set of dotted
arrows which make the diagram commute are in one to one correspondence
with the set of linear maps
$$
\Hom_{\kappa(x)}(
\frac{\mathfrak m_x}{\mathfrak m_x^2 + \mathfrak m_s\mathcal{O}_{X, x}},
\kappa(x))
$$
In other words: describe such a bijection.
(This works more generally if $\kappa(x) \supset \kappa(s)$ is a
separable algebraic extension.)
\end{exercise}

\begin{definition}
\label{definition-tangent-space}
Let $f : X \to S$ be a morphism of schemes.
Let $x \in X$. We dub the set of dotted arrows
of Exercise \ref{exercise-tangent-space-Zariski}
the {\it tangent space of $X$ over $S$}
and we denote it $T_{X/S, x}$. An element of this
space is called a {\it tangent vector} of $X/S$ at $x$.
\end{definition}

\begin{exercise}
\label{exercise-simple-push-out}
For any field $K$ prove that the diagram
$$
\xymatrix{
\Spec(K) \ar[r] \ar[d] & \Spec(K[\epsilon_1]) \ar[d] \\
\Spec(K[\epsilon_2]) \ar[r] &
\Spec(K[\epsilon_1, \epsilon_2]/(\epsilon_1\epsilon_2))
}
$$
is a pushout diagram in the category of schemes.
(Here $\epsilon_i^2 = 0$ as before.)
\end{exercise}

\begin{exercise}
\label{exercise-tangent-space-vectors-space}
Let $f : X \to S$ be a morphism of schemes.
Let $x \in X$. Define addition of tangent vectors,
using Exercise \ref{exercise-simple-push-out}
and a suitable morphism
$$
\Spec(K[\epsilon])
\longrightarrow
\Spec(K[\epsilon_1, \epsilon_2]/(\epsilon_1\epsilon_2)).
$$
Similarly, define scalar multiplication of tangent vectors (this is easier).
Show that $T_{X/S, x}$ becomes a $\kappa(x)$-vector space with your
constructions.
\end{exercise}

\begin{exercise}
\label{exercise-compute-TS}
Let $k$ be a field. Consider
the structure morphism $f : X = \mathbf{A}^1_k \to \Spec(k) = S$.
\begin{enumerate}
\item Let $x \in X$ be a closed point. What is the dimension of
$T_{X/S, x}$?
\item Let $\eta \in X$ be the generic point. What is the dimension
of $T_{X/S, \eta}$?
\item Consider now $X$ as a scheme over $\Spec(\mathbf{Z})$.
What are the dimensions of $T_{X/\mathbf{Z}, x}$ and
$T_{X/\mathbf{Z}, \eta}$?
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-tangent-space-relative}
Exercise \ref{exercise-compute-TS} explains why it is necessary
to consider the tangent space of $X$ over $S$ to get a good notion.
\end{remark}

\begin{exercise}
\label{exercise-compute-TS-field}
Consider the morphism of schemes
$$
f : X = \Spec(\mathbf{F}_p(t))
\longrightarrow
\Spec(\mathbf{F}_p(t^p)) = S
$$
Compute the tangent space of $X/S$ at the unique point of $X$.
Isn't that weird? What do you think happens if you take the morphism
of schemes corresponding to $\mathbf{F}_p[t^p] \to \mathbf{F}_p[t]$?
\end{exercise}

\begin{exercise}
\label{exercise-compute-TS-cusp}
Let $k$ be a field.
Compute the tangent space of $X/k$ at the point $x = (0, 0)$
where $X = \Spec(k[x, y]/(x^2 - y^3))$.
\end{exercise}

\begin{exercise}
\label{exercise-map-tangent-spaces}
Let $f : X \to Y$ be a morphism of schemes over $S$.
Let $x \in X$ be a point. Set $y = f(x)$.
Assume that the natural map $\kappa(y) \to \kappa(x)$ is
bijective. Show, using the definition,
that $f$ induces a natural linear map
$$
\text{d}f : T_{X/S, x} \longrightarrow T_{Y/S, y}.
$$
Match it with what happens on local rings via
Exercise \ref{exercise-tangent-space-Zariski} in case $\kappa(x) = \kappa(s)$.
\end{exercise}

\begin{exercise}
\label{exercise-Jacobian}
Let $k$ be an algebraically closed field.
Let
\begin{eqnarray*}
f : \mathbf{A}_k^n & \longrightarrow & \mathbf{A}^m_k \\
(x_1, \ldots, x_n) & \longmapsto & (f_1(x_i), \ldots, f_m(x_i))
\end{eqnarray*}
be a morphism of schemes over $k$. This is given by
$m$ polynomials $f_1, \ldots, f_m$ in $n$ variables.
Consider the matrix
$$
A = \left( \frac{\partial f_j}{\partial x_i} \right)
$$
Let $x \in \mathbf{A}^n_k$ be a closed point.
Set $y =  f(x)$. Show that the map on tangent spaces
$T_{\mathbf{A}^n_k/k, x} \to T_{\mathbf{A}^m_k/k, y}$
is given by the value of the matrix $A$ at the point $x$.
\end{exercise}














\section{Quasi-coherent Sheaves}
\label{section-quasi-coherent}

\begin{definition}
\label{definition-quasi-coherent}
Let $X$ be a scheme.
A sheaf $\mathcal{F}$ of $\mathcal{O}_X$-modules is {\it quasi-coherent}
if for every affine open $\Spec(R) = U \subset X$ the restriction
$\mathcal{F}|_U$ is of the form $\widetilde M$ for some $R$-module
$M$.
\end{definition}

\noindent
It is enough to check this conditions on the members of an
affine open covering of $X$.
See Schemes, Section \ref{schemes-section-quasi-coherent}
for more results.

\begin{definition}
\label{definition-specialization}
Let $X$ be a topological space. Let $x, x' \in X$.
We say $x$ is a {\it specialization} of $x'$
if and only if $x \in \overline{\{x'\}}$.
\end{definition}

\begin{exercise}
\label{exercise-quasi-coherent-specialization-points}
Let $X$ be a scheme. Let $x, x' \in X$. Let $\mathcal{F}$ be
a quasi-coherent sheaf of $\mathcal{O}_X$-modules.
Suppose that (a) $x$ is a specialization of $x'$ and (b)
$\mathcal{F}_{x'} \not = 0$. Show that $\mathcal{F}_x \not = 0$.
\end{exercise}

\begin{exercise}
\label{exercise-O-module-specialization-points}
Find an example of a scheme $X$, points $x, x' \in X$,
a sheaf of $\mathcal{O}_X$-modules
$\mathcal{F}$ such that (a) $x$ is a specialization of $x'$ and (b)
$\mathcal{F}_{x'} \not = 0$ and $\mathcal{F}_x = 0$.
\end{exercise}

\begin{definition}
\label{definition-Noetherian-scheme}
A scheme $X$ is called {\it locally Noetherian} if and only if
for every point $x \in X$ there exists an affine open
$\Spec(R) = U \subset X$ such that $R$ is Noetherian.
A scheme is {\it Noetherian} if it is locally Noetherian and quasi-compact.
\end{definition}

\noindent
If $X$ is locally Noetherian then any affine open of $X$
is the spectrum of a Noetherian ring, see
Properties, Lemma \ref{properties-lemma-locally-Noetherian}.

\begin{definition}
\label{definition-coherent}
Let $X$ be a locally Noetherian scheme.
Let $\mathcal{F}$ be a quasi-coherent sheaf of
$\mathcal{O}_X$-modules. We say $\mathcal{F}$ is {\it coherent}
if for every point $x \in X$ there exists an affine open
$\Spec(R) = U \subset X$ such that $\mathcal{F}|_U$
is isomorphic to $\widetilde M$ for some finite $R$-module $M$.
\end{definition}

\begin{exercise}
\label{exercise-extend-quasi-coherent}
Let $X = \Spec(R)$ be an affine scheme.
\begin{enumerate}
\item Let $f \in R$. Let $\mathcal{G}$ be a
quasi-coherent sheaf of $\mathcal{O}_{D(f)}$-modules
on the open subscheme $D(f)$.
Show that $\mathcal{G} = \mathcal{F}|_{D(f)}$ for some
quasi-coherent sheaf of $\mathcal{O}_X$-modules
$\mathcal{F}$.
\item Let $I \subset R$ be an ideal.
Let $i : Z \to X$ be the closed subscheme of $X$ corresponding
to $I$. Let $\mathcal{G}$ be a
quasi-coherent sheaf of $\mathcal{O}_Z$-modules
on the closed subscheme $Z$.
Show that $\mathcal{G} = i^*\mathcal{F}$ for some
quasi-coherent sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$.
(Why is this silly?)
\item Assume that $R$ is Noetherian.
Let $f \in R$. Let $\mathcal{G}$ be a
coherent sheaf of $\mathcal{O}_{D(f)}$-modules
on the open subscheme $D(f)$.
Show that $\mathcal{G} = \mathcal{F}|_{D(f)}$ for some
coherent sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-extend-off-open}
If $U \to X$ is a quasi-compact immersion then any
quasi-coherent sheaf on $U$ is the restriction of a
quasi-coherent sheaf on $X$.
If $X$ is a Noetherian scheme, and $U \subset X$ is open,
then any coherent sheaf on $U$ is the restriction of a
coherent sheaf on $X$.
Of course the exercise above is easier, and shouldn't use these general facts.
\end{remark}
















\section{Proj and projective schemes}
\label{section-proj}

\begin{exercise}
\label{exercise-graded-ring-specified-result}
Give examples of graded rings $S$ such that
\begin{enumerate}
\item $\text{Proj}(S)$ is affine and nonempty, and
\item $\text{Proj}(S)$ is integral, nonempty but not isomorphic
to ${\mathbf P}^n_A$ for any $n\geq 0$, any ring $A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-nonconstant-morphism-proj}
Give an example of a nonconstant morphism
of schemes ${\mathbf P}^1_{\mathbf C} \to {\mathbf P}^5_{\mathbf C}$ over
$\Spec({\mathbf C})$.
\end{exercise}

\begin{exercise}
\label{exercise-isomorphism-P1-conic}
Give an example of an isomorphism of schemes
$$
{\mathbf P}^1_{\mathbf C} \to
\text{Proj}({\mathbf C}[X_0, X_1, X_2]/(X_0^2 + X_1^2 + X_2^2))
$$
\end{exercise}

\begin{exercise}
\label{exercise-family-special-fibre-different}
Give an example of a morphism of schemes
$f : X \to {\mathbf A}^1_{\mathbf C} = \Spec({\mathbf C}[T])$
such that the (scheme theoretic) fibre $X_t$ of $f$ over
$t \in {\mathbf A}^1_{\mathbf C}$ is
(a) isomorphic to ${\mathbf P}^1_{\mathbf C}$ when $t$
is a closed point not equal to $0$, and
(b) not isomorphic to ${\mathbf P}^1_{\mathbf C}$ when $t = 0$.
We will call $X_0$ the {\it special fibre} of the morphism.
This can be done in many, many ways. Try to give examples that
satisfy (each of) the following additional restraints (unless
it isn't possible):
\begin{enumerate}
\item Can you do it with special fibre projective?
\item Can you do it with special fibre irreducible and projective?
\item Can you do it with special fibre integral and projective?
\item Can you do it with special fibre smooth and projective?
\item Can you do it with $f$ a flat morphism?
This just means that for every affine open $\Spec(A) \subset X$ the
induced ring map $\mathbf{C}[t] \to A$ is flat, which in this case means
that any nonzero polynomial in $t$ is a nonzerodivisor on $A$.
\item Can you do it with $f$ a flat and projective morphism?
\item Can you do it with $f$ flat, projective and special fibre reduced?
\item Can you do it with $f$ flat, projective and special fibre irreducible?
\item Can you do it with $f$ flat, projective and special fibre integral?
\end{enumerate}
What do you think happens when you replace
${\mathbf P}^1_{\mathbf C}$ with another variety over ${\mathbf C}$?
(This can get very hard depending on which of the variants above you
ask for.)
\end{exercise}

\begin{exercise}
\label{exercise-affine-onto-projective-space}
Let $n \geq 1$ be any positive integer.
Give an example of a surjective morphism
$X \to {\mathbf P}^n_{\mathbf C}$ with $X$ affine.
\end{exercise}

\begin{exercise}
\label{exercise-morphism-proj}
Maps of $\text{Proj}$. Let $R$ and $S$ be graded rings.
Suppose we have a ring map
$$
\psi : R \to S
$$
and an integer $e \geq 1$ such that $\psi(R_d) \subset S_{de}$
for all $d \geq 0$. (By our conventions this is not a homomorphism
of graded rings, unless $e = 1$.)
\begin{enumerate}
\item For which elements $\mathfrak p \in \text{Proj}(S)$ is
there a well-defined corresponding point in $\text{Proj}(R)$? In other words,
find a suitable open $U \subset \text{Proj}(S)$ such that $\psi$ defines
a continuous map $r_\psi : U \to \text{Proj}(R)$.
\item Give an example where $U \not = \text{Proj}(S)$.
\item Give an example where $U = \text{Proj}(S)$.
\item (Do not write this down.) Convince yourself that
the continuous map $U \to \text{Proj}(R)$ comes canonically with
a map on sheaves so that $r_\psi$ is a morphism of schemes:
$$
\text{Proj}(S) \supset U \longrightarrow \text{Proj}(R).
$$
\item What can you say about this map if
$R = \bigoplus_{d \geq 0} S_{de}$ (as a graded ring with
$S_e$, $S_{2e}$, etc in degree $1$, $2$, etc) and $\psi$
is the inclusion mapping?
\end{enumerate}
\end{exercise}

\noindent
{\bf Notation.} Let $R$ be a graded ring as above and
let $n \geq 0$ be an integer. Let $X = \text{Proj}(R)$. Then there is a unique
quasi-coherent ${\mathcal O}_X$-module ${\mathcal O}_X(n)$ on $X$ such that
for every homogeneous element $f \in R$ of positive degree we have
${\mathcal O}_X |_{D_{+}(f)}$ is the quasi-coherent sheaf associated to the
$R_{(f)} = (R_f)_0$-module $(R_f)_n$ ($ = $elements homogeneous of degree
$n$ in $R_f = R[1/f]$). See \cite[page 116+]{H}. Note that there are
natural maps
$$
{\mathcal O}_X(n_1) \otimes_{{\mathcal O}_X} {\mathcal O}_X(n_2)
\longrightarrow
{\mathcal O}_X(n_1 + n_2)
$$

\begin{exercise}
\label{exercise-pathologies-proj}
Pathologies in $\text{Proj}$.
Give examples of $R$ as above such that
\begin{enumerate}
\item ${\mathcal O}_X(1)$ is not an invertible ${\mathcal O}_X$-module.
\item ${\mathcal O}_X(1)$ is invertible, but the
natural map ${\mathcal O}_X(1) \otimes_{{\mathcal O}_X} {\mathcal O}_X(1) \to
{\mathcal O}_X(2)$ is NOT an isomorphism.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-finitely-many-points-in-affine}
Let $S$ be a graded ring.
Let $X = \text{Proj}(S)$.
Show that any finite set of points of $X$ is contained in a standard
affine open.
\end{exercise}

\begin{exercise}
\label{exercise-prepare-glueing}
Let $S$ be a graded ring.
Let $X = \text{Proj}(S)$.
Let $Z, Z' \subset X$ be two closed subschemes.
Let $\varphi : Z \to Z'$ be an isomorphism.
Assume $Z \cap Z' = \emptyset$.
Show that for any $z \in Z$ there exists an affine
open $U \subset X$ such that $z \in U$, $\varphi(z) \in U$ and
$\varphi(Z \cap U) = Z' \cap U$.
(Hint: Use Exercise \ref{exercise-finitely-many-points-in-affine}
and something akin to
Schemes, Lemma \ref{schemes-lemma-standard-open-two-affines}.)
\end{exercise}







\section{Morphisms from the projective line}
\label{section-from-P1}

\noindent
In this section we study morphisms from $\mathbf{P}^1$
to projective schemes.

\begin{exercise}
\label{exercise-from-generic-point}
Let $k$ be a field. Let $k[t] \subset k(t)$ be the
inclusion of the polynomial ring into its fraction field.
Let $X$ be a finite type scheme over $k$.
Show that for any morphism
$$
\varphi : \Spec(k(t)) \longrightarrow X
$$
over $k$, there exist a nonzero $f \in k[t]$ and a morphism
$\psi : \Spec(k[t, 1/f]) \to X$ over $k$
such that $\varphi$ is the composition
$$
\Spec(k(t)) \longrightarrow \Spec(k[t, 1/f]) \longrightarrow X
$$
\end{exercise}

\begin{exercise}
\label{exercise-from-generic-point-Pn}
Let $k$ be a field. Let $k[t] \subset k(t)$ be the
inclusion of the polynomial ring into its fraction field.
Show that for any morphism
$$
\varphi : \Spec(k(t)) \longrightarrow \mathbf{P}^n_k
$$
over $k$, there exists a morphism $\psi : \Spec(k[t]) \to \mathbf{P}^n_k$
over $k$ such that $\varphi$ is the composition
$$
\Spec(k(t)) \longrightarrow \Spec(k[t]) \longrightarrow \mathbf{P}^n_k
$$
Hint: the image of $\varphi$ is in a standard open $D_+(T_i)$
for some $i$; then show that you can ``clear denominators''.
\end{exercise}

\begin{exercise}
\label{exercise-from-generic-point-projective}
Let $k$ be a field. Let $k[t] \subset k(t)$ be the
inclusion of the polynomial ring into its fraction field.
Let $X$ be a projective scheme over $k$.
Show that for any morphism
$$
\varphi : \Spec(k(t)) \longrightarrow X
$$
over $k$, there exists a morphism $\psi : \Spec(k[t]) \to X$
over $k$ such that $\varphi$ is the composition
$$
\Spec(k(t)) \longrightarrow \Spec(k[t]) \longrightarrow X
$$
Hint: use Exercise \ref{exercise-from-generic-point-Pn}.
\end{exercise}

\begin{exercise}
\label{exercise-from-generic-point-P1-to-projective}
Let $k$ be a field. Let $X$ be a projective scheme over $k$.
Let $K$ be the function field of $\mathbf{P}^1_k$ (see hint below).
Show that for any morphism
$$
\varphi : \Spec(K) \longrightarrow X
$$
over $k$, there exists a morphism $\psi : \mathbf{P}^1_k \to X$
over $k$ such that $\varphi$ is the composition
$$
\Spec(k(t)) \longrightarrow \mathbf{P}^1_k \longrightarrow X
$$
Hint: use Exercise \ref{exercise-from-generic-point-projective}
for each of the two pieces of the affine open covering
$\mathbf{P}^1_k = D_+(T_0) \cup D_+(T_1)$, use that
$D_+(T_0)$ is the spectrum of a polynomial ring and that
$K$ is the fraction field of this polynomial ring.
\end{exercise}







\section{Morphisms from surfaces to curves}
\label{section-from-surfaces-to-curves}

\begin{exercise}
\label{exercise-points-projective-space}
Let $R$ be a ring.
Let $R \to k$ be a map from $R$ to a field.
Let $n \geq 0$.
Show that
$$
\Mor_{\Spec(R)}(\Spec(k), \mathbf{P}^n_R)
=
(k^{n + 1} \setminus \{0\})/k^*
$$
where $k^*$ acts via scalar multiplication on $k^{n + 1}$.
From now on we denote $(x_0 : \ldots : x_n)$ the
morphism $\Spec(k) \to \mathbf{P}^n_k$ corresponding
to the equivalence class of the element
$(x_0, \ldots, x_n) \in k^{n + 1} \setminus \{0\}$.
\end{exercise}

\begin{exercise}
\label{exercise-curve-projective-plane}
Let $k$ be a field. Let $Z \subset \mathbf{P}^2_k$ be an
irreducible and reduced closed subscheme.
Show that either (a) $Z$ is a closed point, or (b) there exists
an homogeneous irreducible $F \in k[X_0, X_1, X_2]$ of degree $> 0$
such that $Z = V_{+}(F)$, or (c) $Z = \mathbf{P}^2_k$.
(Hint: Look on a standard affine open.)
\end{exercise}

\begin{exercise}
\label{exercise-bezout}
Let $k$ be a field. Let $Z_1, Z_2 \subset \mathbf{P}^2_k$ be
irreducible closed subschemes of the form $V_{+}(F)$
for some homogeneous irreducible $F_i \in k[X_0, X_1, X_2]$ of degree $> 0$.
Show that $Z_1 \cap Z_2$ is not empty.
(Hint: Use dimension theory to estimate the dimension of
the local ring of $k[X_0, X_1, X_2]/(F_1, F_2)$ at $0$.)
\end{exercise}

\begin{exercise}
\label{exercise-no-nonconstant-morphism-proj}
Show there does not exist a nonconstant morphism of schemes
$\mathbf{P}^2_{\mathbf{C}} \to \mathbf{P}^1_{\mathbf{C}}$
over $\Spec(\mathbf{C})$. Here a {\it constant morphism} is
one whose image is a single point.
(Hint: If the morphism is not constant consider the fibres over
$0$ and $\infty$ and argue that they have to meet to get a contradiction.)
\end{exercise}

\begin{exercise}
\label{exercise-nonconstant-morphism}
Let $k$ be a field.
Suppose that $X \subset \mathbf{P}^3_k$ is a closed subscheme
given by a single homogeneous equation $F \in k[X_0, X_1, X_2, X_3]$.
In other words,
$$
X = \text{Proj}(k[X_0, X_1, X_2, X_3]/(F)) \subset \mathbf{P}^3_k
$$
as explained in the course. Assume that
$$
F = X_0 G + X_1 H
$$
for some homogeneous polynomials $G, H \in k[X_0, X_1, X_2, X_3]$
of positive degree. Show that if $X_0, X_1, G, H$ have no common zeros
then there exists a nonconstant morphism
$$
X \longrightarrow \mathbf{P}^1_k
$$
of schemes over $\Spec(k)$
which on field points (see Exercise \ref{exercise-points-projective-space})
looks like $(x_0 : x_1 : x_2 : x_3) \mapsto (x_0 : x_1)$ whenever
$x_0$ or $x_1$ is not zero.
\end{exercise}





\section{Invertible sheaves}
\label{section-invertible-sheaves}

\begin{definition}
\label{definition-invertible-sheaf}
Let $X$ be a locally ringed space.
An {\it invertible ${\mathcal O}_X$-module} on $X$
is a sheaf of ${\mathcal O}_X$-modules ${\mathcal L}$ such that every point
has an open neighbourhood $U \subset X$ such that ${\mathcal L}|_U$
is isomorphic to ${\mathcal O}_U$ as ${\mathcal O}_U$-module.
We say that ${\mathcal L}$ is trivial if it is isomorphic to
${\mathcal O}_X$ as a ${\mathcal O}_X$-module.
\end{definition}

\begin{exercise}
\label{exercise-general-facts-invertible}
General facts.
\begin{enumerate}
\item Show that an invertible ${\mathcal O}_X$-module on
a scheme $X$ is quasi-coherent.
\item Suppose $X\to Y$ is a morphism of locally ringed spaces,
and ${\mathcal L}$ an invertible ${\mathcal O}_Y$-module.
Show that $f^\ast {\mathcal L}$ is an invertible ${\mathcal O}_X$ module.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-invertible-algebra}
Algebra.
\begin{enumerate}
\item Show that an invertible ${\mathcal O}_X$-module on
an affine scheme $\Spec(A)$ corresponds to an $A$-module $M$ which is
(i) finite, (ii) projective, (iii) locally free of rank 1,
and hence (iv) flat, and (v) finitely presented. (Feel free to
quote things from last semesters course; or from algebra books.)
\item Suppose that $A$ is a domain and that $M$ is
a module as in (a). Show that $M$ is isomorphic as an $A$-module
to an ideal $I \subset A$ such that $IA_{\mathfrak p}$ is principal for
every prime ${\mathfrak p}$.
\end{enumerate}
\end{exercise}

\begin{definition}
\label{definition-invertible-module}
Let $R$ be a ring. An {\it invertible module $M$} is an $R$-module
$M$ such that $\widetilde M$ is an invertible sheaf on the
spectrum of $R$. We say $M$ is {\it trivial} if $M \cong R$ as
an $R$-module.
\end{definition}

\noindent
In other words, $M$ is invertible if and only if
it satisfies all of the following conditions:
it is flat, of finite presentation, projective, and
locally free of rank 1. (Of course it suffices for it
to be locally free of rank 1).

\begin{exercise}
\label{exercise-simple-examples-invertible}
Simple examples.
\begin{enumerate}
\item
\label{item-affine-line}
Let $k$ be a field. Let $A = k[x]$.
Show that $X = \Spec(A)$ has only trivial invertible
${\mathcal O}_X$-modules. In other words, show that every
invertible $A$-module is free of rank 1.
\item
\label{item-affine-line-with-0-and-1-identified}
Let $A$ be the ring
$$
A = \{ f\in k[x] \mid f(0) = f(1) \}.
$$
Show there exists a nontrivial invertible $A$-module, unless
$k = {\mathbf F}_2$. (Hint: Think about $\Spec(A)$ as identifying
$0$ and $1$ in ${\mathbf A}^1_k = \Spec(k[x])$.)
\item
\label{item-affine-line-with-cusp}
Same question as in (\ref{item-affine-line-with-0-and-1-identified})
for the ring $A = k[x^2, x^3] \subset k[x]$
(except now $k = {\mathbf F}_2$ works as well).
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-higher-dimension-invertible}
Higher dimensions.
\begin{enumerate}
\item Prove that every invertible sheaf on two dimensional
affine space is trivial. More precisely, let
${\mathbf A}^2_k = \Spec(k[x, y])$ where $k$ is a field.
Show that every invertible sheaf on ${\mathbf A}^2_k$ is trivial.
(Hint: One way to do this is to consider the corresponding
module $M$, to look at $M \otimes_{k[x, y]} k(x)[y]$, and
then use
Exercise \ref{exercise-simple-examples-invertible} (\ref{item-affine-line})
to find a generator for this; then you still have to think.
Another way to is to use
Exercise \ref{exercise-invertible-algebra}
and use what we know about ideals of the
polynomial ring: primes of height one are generated by an irreducible
polynomial; then you still have to think.)
\item Prove that every invertible sheaf on any open
subscheme of two dimensional affine space is trivial. More precisely, let
$U \subset {\mathbf A}^2_k$ be an open subscheme where $k$ is a field.
Show that every invertible sheaf on $U$ is trivial. Hint: Show that every
invertible sheaf on $U$ extends to one on ${\mathbf A}^2_k$. Not easy;
but you can find it in \cite{H}.
\item Find an example of a nontrivial
invertible sheaf on a punctured cone over a field. More
precisely, let $k$ be a field and let $C = \Spec(k[x, y, z]/(xy-z^2))$.
Let $U = C \setminus \{ (x, y, z) \}$. Find a nontrivial
invertible sheaf on $U$. Hint: It may be easier to compute the
group of isomorphism classes of invertible sheaves on $U$ than to
just find one. Note that $U$ is covered by the opens
$\Spec(k[x, y, z, 1/x]/(xy-z^2))$ and
$\Spec(k[x, y, z, 1/y]/(xy-z^2))$
which are ``easy'' to deal with.
\end{enumerate}
\end{exercise}

\begin{definition}
\label{definition-picard-group}
Let $X$ be a locally ringed space.
The {\it Picard group of $X$} is the set $\Pic(X)$
of isomorphism classes of invertible $\mathcal{O}_X$-modules
with addition given by tensor product.
See Modules, Definition \ref{modules-definition-pic}.
For a ring $R$ we set $\Pic(R) = \Pic(\Spec(R))$.
\end{definition}

\begin{exercise}
\label{exercise-traverso}
Let $R$ be a ring.
\begin{enumerate}
\item Show that if $R$ is a Noetherian normal domain, then
$\Pic(R) = \Pic(R[t])$. [Hint: There is a map
$R[t] \to R$, $t \mapsto 0$ which is a left inverse to the map
$R \to R[t]$. Hence it suffices to show that any invertible
$R[t]$-module $M$ such that $M/tM \cong R$ is free of rank $1$.
Let $K$ be the fraction field of $R$.
Pick a trivialization $K[t] \to M \otimes_{R[t]} K[t]$ which is possible by
Exercise \ref{exercise-simple-examples-invertible} (\ref{item-affine-line}).
Adjust it so it agrees with the trivialization
of $M/tM$ above. Show that it is in fact a trivialization of
$M$ over $R[t]$ (this is where normality comes in).]
\item Let $k$ be a field. Show that
$\Pic(k[x^2, x^3, t]) \not = \Pic(k[x^2, x^3])$.
\end{enumerate}
\end{exercise}













\section{{\v C}ech Cohomology}
\label{section-cech-cohomology}

\begin{exercise}
\label{exercise-cech-cohomology}
{\v C}ech cohomology. Here $k$ is a field.
\begin{enumerate}
\item Let $X$ be a scheme with an open covering
${\mathcal U} : X = U_1 \cup U_2$, with $U_1 = \Spec(k[x])$,
$U_2 =  \Spec(k[y])$
with $U_1 \cap U_2 = \Spec(k[z, 1/z])$ and with open immersions
$U_1 \cap U_2 \to U_1$ resp.\ $U_1 \cap U_2 \to U_2$ determined
by $x \mapsto z$ resp.\ $y \mapsto z$ (and I really mean this).
(We've seen in the lectures that such an $X$ exists; it is the affine
line with zero doubled.) Compute ${\check H}^1({\mathcal U}, {\mathcal
O})$;
eg.\ give a basis for it as a $k$-vectorspace.
\item For each element in
${\check H}^1({\mathcal U}, {\mathcal O})$
construct an exact sequence of sheaves of ${\mathcal O}_X$-modules
$$
0 \to {\mathcal O}_X \to E \to {\mathcal O}_X \to 0
$$
such that the boundary $\delta(1) \in {\check H}^1({\mathcal U},
{\mathcal O})$
equals the given element. (Part of the problem is to make sense of this.
See also below.
It is also OK to show abstractly such a thing has to exist.)
\end{enumerate}
\end{exercise}

\begin{definition}
\label{definition-delta}
(Definition of delta.) Suppose that
$$
0 \to {\mathcal F}_1 \to {\mathcal F}_2 \to {\mathcal F}_3 \to 0
$$
is a short exact sequence of abelian sheaves on any topological space $X$.
The boundary map
$\delta : H^0(X, {\mathcal F}_3) \to {\check H}^1(X, {\mathcal F}_1)$
is defined as follows. Take an element $\tau \in H^0(X, {\mathcal F}_3)$.
Choose an open covering ${\mathcal U} : X = \bigcup_{i\in I} U_i$ such
that for each $i$ there exists a section $\tilde \tau_i \in {\mathcal F}_2$
lifting the restriction of $\tau$ to $U_i$. Then consider the assignment
$$
(i_0, i_1) \longmapsto
\tilde \tau_{i_0}|_{U_{i_0i_1}} - \tilde \tau_{i_1}|_{U_{i_0i_1}}.
$$
This is clearly a 1-coboundary in the {\v C}ech complex
${\check C}^\ast({\mathcal U}, {\mathcal F}_2)$. But we observe that
(thinking of ${\mathcal F}_1$ as a subsheaf of ${\mathcal F}_2$) the RHS
always is a section of ${\mathcal F}_1$ over $U_{i_0i_1}$. Hence we
see that the assignment defines a 1-cochain in the complex
${\check C}^\ast({\mathcal U}, {\mathcal F}_2)$. The cohomology
class of this 1-cochain is by definition {\it $\delta(\tau)$}.
\end{definition}



\section{Cohomology}
\label{section-cohomology}

\begin{exercise}
\label{exercise-cohomology-not-zero}
Let $X = \mathbf{R}$ with the usual Euclidean topology.
Using only formal properties of cohomology (functoriality
and the long exact cohomology sequence) show that there
exists a sheaf $\mathcal{F}$ on $X$ with nonzero $H^1(X, \mathcal{F})$.
\end{exercise}

\begin{exercise}
\label{exercise-mayer-vietoris}
Let $X = U \cup V$ be a topological space written as the
union of two opens. Then we have a long exact
Mayer-Vietoris sequence
$$
0 \to
H^0(X, \mathcal{F}) \to
H^0(U, \mathcal{F}) \oplus H^0(V, \mathcal{F}) \to
H^0(U \cap V, \mathcal{F}) \to
H^1(X, \mathcal{F}) \to \ldots
$$
What property of injective sheaves is essential for the construction
of the Mayer-Vietoris long exact sequence? Why does it hold?
\end{exercise}

\begin{exercise}
\label{exercise-cohomology-two-point-space}
Let $X$ be a topological space.
\begin{enumerate}
\item Show that $H^i(X, \mathcal{F})$ is zero for $i > 0$
if $X$ has $2$ or fewer points.
\item What if $X$ has $3$ points?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-cohomology-spec-local-ring}
Let $X$ be the spectrum of a local ring. Show that
$H^i(X, \mathcal{F})$ is zero for $i > 0$ and any
sheaf of abelian groups $\mathcal{F}$.
\end{exercise}

\begin{exercise}
\label{exercise-affine-morphism}
Let $f : X \to Y$ be an affine morphism of schemes.
Prove that $H^i(X, \mathcal{F}) = H^i(Y, f_*\mathcal{F})$
for any quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$.
Feel free to impose some further conditions on $X$ and $Y$
and use the agreement of {\v C}ech cohomology with cohomology
for quasi-coherent sheaves and affine open coverings of separated schemes.
\end{exercise}

\begin{exercise}
\label{exercise-affine-morphism-to-Pn}
Let $A$ be a ring. Let $\mathbf{P}^n_A = \text{Proj}(A[T_0, \ldots, T_n])$
be projective space over $A$. Let
$\mathbf{A}^{n + 1}_A = \Spec(A[T_0, \ldots, T_n])$ and let
$$
U = \bigcup\nolimits_{i = 0, \ldots, n} D(T_i) \subset \mathbf{A}^{n + 1}_A
$$
be the complement of the image of the closed immersion
$0 : \Spec(A) \to \mathbf{A}^{n + 1}_A$.
Construct an affine surjective morphism
$$
f : U \longrightarrow \mathbf{P}^n_A
$$
and prove that $f_*\mathcal{O}_U =
\bigoplus_{d \in \mathbf{Z}} \mathcal{O}_{\mathbf{P}^n_A}(d)$.
More generally, show that for a graded $A[T_0, \ldots, T_n]$-module $M$
one has
$$
f_*(\widetilde{M}|_U) =
\bigoplus\nolimits_{d \in \mathbf{Z}} \widetilde{M(d)}
$$
where on the left hand side we have the quasi-coherent sheaf
$\widetilde{M}$ associated to $M$ on $\mathbf{A}^{n + 1}_A$
and on the right we have the quasi-coherent sheaves
$\widetilde{M(d)}$ associated to the graded module $M(d)$.
\end{exercise}

\begin{exercise}
\label{exercise-compute-Pn}
Let $A$ be a ring and let $\mathbf{P}^n_A = \text{Proj}(A[T_0, \ldots, T_n])$
be projective space over $A$.
Carefully compute the cohomology of the Serre twists
$\mathcal{O}_{\mathbf{P}^n_A}(d)$ of the structure
sheaf on $\mathbf{P}^n_A$. Feel free to use {\v C}ech cohomology
and the agreement of {\v C}ech cohomology with cohomology
for quasi-coherent sheaves and affine open coverings of separated schemes.
\end{exercise}

\begin{exercise}
\label{exercise-cohomology-hypersurface}
Let $A$ be a ring and let $\mathbf{P}^n_A = \text{Proj}(A[T_0, \ldots, T_n])$
be projective space over $A$. Let
$F \in A[T_0, \ldots, T_n]$ be homogeneous of degree $d$.
Let $X \subset \mathbf{P}^n_A$ be the closed subscheme
corresponding to the graded ideal $(F)$ of $A[T_0, \ldots, T_n]$.
What can you say about $H^i(X, \mathcal{O}_X)$?
\end{exercise}

\begin{exercise}
\label{exercise-characterize-finite-product-fields}
Let $R$ be a ring such that for any left exact functor
$F : \text{Mod}_R \to \textit{Ab}$ we have
$R^iF = 0$ for $i > 0$. Show that $R$ is a finite product
of fields.
\end{exercise}






\section{More cohomology}
\label{section-more-cohomology}

\begin{exercise}
\label{exercise-cohomology-coordinate-axes}
Let $k$ be a field. Let $X \subset \mathbf{P}^n_k$
be the ``coordinate cross''. Namely, let $X$ be
defined by the homogeneous equations
$$
T_i T_j = 0\text{ for }i > j > 0
$$
where as usual we write $\mathbf{P}^n_k = \text{Proj}(k[T_0, \ldots, T_n])$.
In other words,  $X$ is the closed subscheme corresponding to the quotient
$k[T_0, \ldots, T_n]/(T_iT_j; i > j > 0)$ of the polynomial ring.
Compute $H^i(X, \mathcal{O}_X)$ for all $i$. Hint: use {\v C}ech cohomology.
\end{exercise}

\begin{exercise}
\label{exercise-compute-cohomology-punctured}
Let $A$ be a ring. Let $I = (f_1, \ldots, f_t)$
be a finitely generated ideal of $A$.
Let $U \subset \Spec(A)$ be the complement of $V(I)$.
For any $A$-module $M$ write down a complex
of $A$-modules (in terms of $A$, $f_1, \ldots, f_t$, $M$)
whose cohomology groups give $H^n(U, \widetilde{M})$.
\end{exercise}

\begin{exercise}
\label{exercise-compute-cohomology-affine-space-punctured}
Let $k$ be a field. Let $U \subset \mathbf{A}^d_k$ be the
complement of the closed point $0$ of $\mathbf{A}^d_k$.
Compute $H^n(U, \mathcal{O}_U)$ for all $n$.
\end{exercise}

\begin{exercise}
\label{exercise-find-curve-genus-one-hundred}
Let $k$ be a field. Find explicitly a scheme $X$ projective over $k$
of dimension $1$ with $H^0(X, \mathcal{O}_X) = k$ and
$\dim_k H^1(X, \mathcal{O}_X) = 100$.
\end{exercise}

\begin{exercise}
\label{exercise-degree-2-cover}
Let $f : X \to Y$ be a finite locally free morphism of degree $2$.
Assume that $X$ and $Y$ are integral schemes and that $2$ is invertible
in the structure sheaf of $Y$, i.e., $2 \in \Gamma(Y, \mathcal{O}_Y)$
is invertible. Show that the $\mathcal{O}_Y$-module map
$$
f^\sharp : \mathcal{O}_Y \longrightarrow f_*\mathcal{O}_X
$$
has a left inverse, i.e., there is an $\mathcal{O}_Y$-module map
$\tau : f_*\mathcal{O}_X \to \mathcal{O}_Y$
with $\tau \circ f^\sharp = \text{id}$.
Conclude that $H^n(Y, \mathcal{O}_Y) \to H^n(X, \mathcal{O}_X)$
is injective\footnote{There does exist a finite locally free morphism
$X \to Y$ between integral schemes of degree $2$ where the map
$H^1(Y, \mathcal{O}_Y) \to H^1(X, \mathcal{O}_X)$ is not injective.}.
\end{exercise}

\begin{exercise}
\label{exercise-pic}
Let $X$ be a scheme (or a locally ringed space). The rule
$U \mapsto \mathcal{O}_X(U)^*$ defines a sheaf of groups
denoted $\mathcal{O}_X^*$.
Briefly explain why the Picard group of $X$
(Definition \ref{definition-picard-group}) is
equal to $H^1(X, \mathcal{O}_X^*)$.
\end{exercise}

\begin{exercise}
\label{exercise-pic-nontrivial}
Give an example of an affine scheme $X$ with nontrivial $\Pic(X)$.
Conclude using Exercise \ref{exercise-pic} that $H^1(X, -)$ is not the
zero functor for any such $X$.
\end{exercise}

\begin{exercise}
\label{exercise-kill-cohomology-complement}
Let $A$ be a ring. Let $I = (f_1, \ldots, f_t)$ be a finitely generated ideal
of $A$. Let $U \subset \Spec(A)$ be the complement of $V(I)$.
Given a quasi-coherent $\mathcal{O}_{\Spec(A)}$-module $\mathcal{F}$
and $\xi \in H^p(U, \mathcal{F})$ with $p > 0$, show that there exists
$n > 0$ such that $f_i^n \xi = 0$ for $i = 1, \ldots, t$.
Hint: One possible way to proceed is to use the complex
you found in Exercise \ref{exercise-compute-cohomology-punctured}.
\end{exercise}

\begin{exercise}
\label{exercise-h0-complement}
Let $A$ be a ring. Let $I = (f_1, \ldots, f_t)$ be a
finitely generated ideal of $A$. Let $U \subset \Spec(A)$
be the complement of $V(I)$. Let $M$ be an $A$-module
whose $I$-torsion is zero, i.e.,
$0 = \Ker((f_1, \ldots, f_t) : M \to M^{\oplus t})$.
Show that there is a canonical isomorphism
$$
H^0(U, \widetilde{M}) = \colim \Hom_A(I^n, M).
$$
Warning: this is not trivial.
\end{exercise}

\begin{exercise}
\label{exercise-Noetherian}
Let $A$ be a Noetherian ring. Let $I$ be an ideal of $A$.
Let $M$ be an $A$-module. Let $M[I^\infty]$ be the set of
$I$-power torsion elements defined by
$$
M[I^\infty] = \{x \in M \mid
\text{ there exists an }n \geq 1\text{ such that }I^nx = 0\}
$$
Set $M' = M/M[I^\infty]$. Then the $I$-power torsion of $M'$ is zero.
Show that
$$
\colim \Hom_A(I^n, M) = \colim \Hom_A(I^n, M').
$$
Warning: this is not trivial. Hints: (1) try to reduce to $M$ finite,
(2) show any element of $\Ext^1_A(I^n, N)$
maps to zero in $\Ext^1_A(I^{n + m}, N)$ for some $m > 0$
if $N = M[I^\infty]$ and $M$ finite, (3) show the same thing
as in (2) for $\Hom_A(I^n, N)$, (3) consider the long exact
sequence
$$
0 \to \Hom_A(I^n, M[I^\infty]) \to \Hom_A(I^n, M) \to \Hom_A(I^n, M')
\to \Ext^1_A(I^n, M[I^\infty])
$$
for $M$ finite and compare with the sequence for $I^{n + m}$ to conclude.
\end{exercise}








\section{Cohomology revisited}
\label{section-more-more-cohomology}


\begin{exercise}
\label{exercise-nonkillable}
Make an example of a field $k$, a curve $X$ over $k$,
an invertible $\mathcal{O}_X$-module $\mathcal{L}$ and
a cohomology class $\xi \in H^1(X, \mathcal{L})$ with
the following property: for every surjective
finite morphism $\pi : Y \to X$ of schemes the element $\xi$
pulls back to a nonzero element of $H^1(Y, \pi^*\mathcal{L})$.
Hint: construct $X$, $k$, $\mathcal{L}$ such that
there is a short exact sequence
$0 \to \mathcal{L} \to \mathcal{O}_X \to i_*\mathcal{O}_Z \to 0$
where $Z \subset X$ is a closed subscheme consisting of
more than $1$ closed point. Then look at what happens when you
pullback.
\end{exercise}

\begin{exercise}
\label{exercise-cohomology-cycle-curves}
Let $k$ be an algebraically closed field.
Let $X$ be a projective $1$-dimensional scheme.
Suppose that $X$ contains a cycle of curves, i.e., suppose
there exist an $n \geq 2$ and pairwise distinct
$1$-dimensional integral closed subschemes
$C_1, \ldots, C_n$ and pairwise distinct closed points
$x_1, \ldots, x_n \in X$ such that $x_n \in C_n \cap C_1$
and $x_i \in C_i \cap C_{i + 1}$
for $i = 1, \ldots, n - 1$.
Prove that $H^1(X, \mathcal{O}_X)$ is nonzero.
Hint: Let $\mathcal{F}$ be the image of the map
$\mathcal{O}_X \to \bigoplus \mathcal{O}_{C_i}$,
and show $H^1(X, \mathcal{F})$ is nonzero
using that $\kappa(x_i) = k$ and $H^0(C_i, \mathcal{O}_{C_i}) = k$.
Also use that $H^2(X, -) = 0$ by Grothendieck's theorem.
\end{exercise}

\begin{exercise}
\label{exercise-surface}
Let $X$ be a projective surface over an algebraically closed field $k$.
Prove there exists a proper closed subscheme $Z \subset X$ such that
$H^1(Z, \mathcal{O}_Z)$ is nonzero. Hint: Use
Exercise \ref{exercise-cohomology-cycle-curves}.
\end{exercise}

\begin{exercise}
\label{exercise-surface-better}
Let $X$ be a projective surface over an algebraically closed field $k$.
Show that for every $n \geq 0$
there exists a proper closed subscheme $Z \subset X$ such that
$\dim_k H^1(Z, \mathcal{O}_Z) > n$.
Only explain how to do this by modifying the arguments
in Exercise \ref{exercise-surface} and
\ref{exercise-cohomology-cycle-curves}; don't give all the details.
\end{exercise}

\begin{exercise}
\label{exercise-surface-h2-nonzero}
Let $X$ be a projective surface over an algebraically closed field $k$.
Prove there exists a coherent $\mathcal{O}_X$-module $\mathcal{F}$
such that $H^2(X, \mathcal{F})$ is nonzero. Hint: Use the result
of Exercise \ref{exercise-surface-better} and a cleverly chosen
exact sequence.
\end{exercise}

\begin{exercise}
\label{exercise-kunneth}
Let $X$ and $Y$ be schemes over a field $k$ (feel free to assume
$X$ and $Y$ are nice, for example qcqs or projective over $k$).
Set $X \times Y = X \times_{\Spec(k)} Y$ with projections
$p : X \times Y \to X$ and $q : X \times Y \to Y$. For
a quasi-coherent $\mathcal{O}_X$-module $\mathcal{F}$ and
a quasi-coherent $\mathcal{O}_Y$-module $\mathcal{G}$ prove that
$$
H^n(X \times Y,
p^*\mathcal{F} \otimes_{\mathcal{O}_{X \times Y}} q^*\mathcal{G}) =
\bigoplus\nolimits_{a + b = n}
H^a(X, \mathcal{F}) \otimes_k H^b(Y, \mathcal{G})
$$
or just show that this holds when one takes dimensions.
Extra points for ``clean'' solutions.
\end{exercise}

\begin{exercise}
\label{exercise-Oab}
Let $k$ be a field. Let $X = \mathbf{P}|^1 \times \mathbf{P}^1$
be the product of the projective line over $k$ with itself
with projections $p : X \to \mathbf{P}^1_k$ and $q : X \to \mathbf{P}^1_k$.
Let
$$
\mathcal{O}(a, b) = p^*\mathcal{O}_{\mathbf{P}^1_k}(a)
\otimes_{\mathcal{O}_X} q^*\mathcal{O}_{\mathbf{P}^1_k}(b)
$$
Compute the dimensions of $H^i(X, \mathcal{O}(a, b))$
for all $i, a, b$. Hint: Use Exercise \ref{exercise-kunneth}.
\end{exercise}










\section{Cohomology and Hilbert polynomials}
\label{section-cohomology-hilbert-polynomials}

\begin{situation}
\label{situation-hilbert-polynomial}
Let $k$ be a field. Let $X = \mathbf{P}^n_k$ be
$n$-dimensional projective space. Let $\mathcal{F}$
be a coherent $\mathcal{O}_X$-module. Recall that
$$
\chi(X, \mathcal{F}) =
\sum\nolimits_{i = 0}^n (-1)^i \dim_k H^i(X, \mathcal{F})
$$
Recall that the {\it Hilbert polynomial} of $\mathcal{F}$ is the function
$$
t \longmapsto \chi(X, \mathcal{F}(t))
$$
We also recall that
$\mathcal{F}(t) = \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{O}_X(t)$
where $\mathcal{O}_X(t)$ is the $t$th twist of the structure sheaf
as in Constructions, Definition \ref{constructions-definition-twist}.
In Varieties, Subsection \ref{varieties-subsection-hilbert} we have
proved the Hilbert polynomial is a polynomial in $t$.
\end{situation}

\begin{exercise}
\label{exercise-hilbert-pol-easy}
In Situation \ref{situation-hilbert-polynomial}.
\begin{enumerate}
\item If $P(t)$ is the Hilbert polynomial of $\mathcal{F}$,
what is the Hilbert polynomial of $\mathcal{F}(-13)$.
\item If $P_i$ is the Hilbert polynomial of $\mathcal{F}_i$,
what is the Hilbert polynomial of $\mathcal{F}_1 \oplus \mathcal{F}_2$.
\item If $P_i$ is the Hilbert polynomial of $\mathcal{F}_i$ and
$\mathcal{F}$ is the kernel of a surjective map
$\mathcal{F}_1 \to \mathcal{F}_2$, what is the Hilbert polynomial of
$\mathcal{F}$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-find-given-hilbert-pol-dim-1}
In Situation \ref{situation-hilbert-polynomial} assume $n \geq 1$.
Find a coherent sheaf whose Hilbert polynomial is $t - 101$.
\end{exercise}

\begin{exercise}
\label{exercise-find-given-hilbert-pol-dim-2}
In Situation \ref{situation-hilbert-polynomial} assume $n \geq 2$.
Find a coherent sheaf whose Hilbert polynomial is
$t^2/2 + t/2 - 1$. (This is a bit tricky; it suffices
if you just show there is such a coherent sheaf.)
\end{exercise}

\begin{exercise}
\label{exercise-bound-genus-in-degree}
In Situation \ref{situation-hilbert-polynomial} assume $n \geq 2$
and $k$ algebraically closed.
Let $C \subset X$ be an integral closed subscheme of dimension $1$.
In other words, $C$ is a projective curve.
Let $d t + e$ be the Hilbert polynomial of $\mathcal{O}_C$
viewed as a coherent sheaf on $X$.
\begin{enumerate}
\item Give an upper bound on $e$. (Hints: Use that
$\mathcal{O}_C(t)$ only has cohomology in degrees $0$ and $1$
and study $H^0(C, \mathcal{O}_C)$.)
\item Pick a global section $s$ of $\mathcal{O}_X(1)$
which intersects $C$ transversally, i.e., such that there
are pairwise distinct closed points $c_1, \ldots, c_r \in C$ and
a short exact sequence
$$
0 \to \mathcal{O}_C \xrightarrow{s} \mathcal{O}_C(1) \to
\bigoplus\nolimits_{i = 1, \ldots, r} k_{c_i} \to 0
$$
where $k_{c_i}$ is the skyscraper sheaf with value $k$ in $c_i$.
(Such an $s$ exists; please just use this.)
Show that $r = d$. (Hint: twist the sequence and see what you get.)
\item Twisting the short exact sequence gives a $k$-linear map
$\varphi_t : \Gamma(C, \mathcal{O}_C(t)) \to \bigoplus_{i = 1, \ldots, d} k$
for any $t$. Show that if this map is surjective for $t \geq d - 1$.
\item Give a lower bound on $e$ in terms of $d$. (Hint: show that
$H^1(C, \mathcal{O}_C(d - 2)) = 0$ using the result of (3) and use
vanishing.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-three-quadrics-in-plane}
In Situation \ref{situation-hilbert-polynomial} assume $n = 2$.
Let $s_1, s_2, s_3 \in \Gamma(X, \mathcal{O}_X(2))$ be three
quadric equations. Consider the coherent sheaf
$$
\mathcal{F} = \Coker\left(\mathcal{O}_X(-2)^{\oplus 3}
\xrightarrow{s_1, s_2, s_3} \mathcal{O}_X\right)
$$
List the possible Hilbert polynomials of such $\mathcal{F}$.
(Try to visualize intersections of quadrics in the projective plane.)
\end{exercise}





\section{Curves}
\label{section-curves}

\begin{exercise}
\label{exercise-closed-subset-vanshing}
Let $k$ be an algebraically closed field. Let $X$ be a projective curve
over $k$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $s_0, \ldots, s_n \in H^0(X, \mathcal{L})$
be global sections of $\mathcal{L}$.
Prove there is a natural closed subscheme
$$
Z \subset
\mathbf{P}^n \times X
$$
such that the closed point
$((\lambda_0 : \ldots : \lambda_n), x)$
is in $Z$ if and only if the section
$\lambda_0 s_0 + \ldots + \lambda_n s_n$
vanishes at $x$. (Hint: describe $Z$ affine locally.)
\end{exercise}

\begin{exercise}
\label{exercise-diagonal-cartier}
Let $k$ be an algebraically closed field. Let $X$ be a smooth curve over $k$.
Let $r \geq 1$. Show that the closed subset
$$
D \subset X \times X^r = X^{r + 1}
$$
whose closed points are the tuples $(x, x_1, \ldots, x_r)$ with
$x = x_i$ for some $i$, has an invertible ideal sheaf. In other words,
show that
$D$ is an effective Cartier divisor. Hints: reduce to $r = 1$ and
use that $X$ is a smooth curves to say something about the diagonal
(look in books for this).
\end{exercise}

\begin{exercise}
\label{exercise-one-divisor-in-another}
Let $k$ be an algebraically closed field. Let $X$ be a smooth projective curve
over $k$. Let $T$ be a scheme of finite type over $k$ and let
$$
D_1 \subset X \times T
\quad\text{and}\quad
D_2 \subset X \times T
$$
be two effective Cartier divisors such that for $t \in T$ the
fibres $D_{i, t} \subset X_t$ are not dense (i.e., do not contain
the generic point of the curve $X_t$).
Prove that there is a canonical closed subscheme
$Z \subset T$ such that a closed point $t \in T$ is in $Z$
if and only if for the scheme theoretic fibres $D_{1, t}$, $D_{2, t}$
of $D_1$, $D_2$ we have
$$
D_{1, t} \subset D_{2, t}
$$
as closed subschemes of $X_t$.
Hints: Show that, possibly after shrinking $T$, you may
assume $T = \Spec(A)$ is affine and there is an affine open $U \subset X$
such that $D_i \subset U \times T$. Then show that
$M_1 = \Gamma(D_1, \mathcal{O}_{D_1})$ is a finite locally free $A$-module
(here you will need some nontrivial algebra --- ask your friends).
After shrinking $T$ you may assume $M_1$ is a free $A$-module.
Then look at
$$
\Gamma(U \times T, \mathcal{I}_{D_2}) \to M_1 = A^{\oplus N}
$$
and you define $Z$ as the closed subscheme cut out by the ideal generated
by coefficients of vectors in the image of this map. Explain why this works
(this will require perhaps a bit more commutative algebra).
\end{exercise}

\begin{exercise}
\label{exercise-closed-subset-vanshing-r}
Let $k$ be an algebraically closed field. Let $X$ be a smooth projective curve
over $k$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $s_0, \ldots, s_n \in H^0(X, \mathcal{L})$
be global sections of $\mathcal{L}$. Let $r \geq 1$.
Prove there is a natural closed subscheme
$$
Z \subset
\mathbf{P}^n \times X \times \ldots \times X = \mathbf{P}^n \times X^r
$$
such that the closed point
$((\lambda_0 : \ldots : \lambda_n), x_1, \ldots, x_r)$
is in $Z$ if and only if the section
$s_\lambda = \lambda_0 s_0 + \ldots + \lambda_n s_n$
vanishes on the divisor $D = x_1 + \ldots + x_r$, i.e.,
the section $s_\lambda$ is in $\mathcal{L}(-D)$.
Hint: explain how this follows by combining then results of
Exercises \ref{exercise-diagonal-cartier} and
\ref{exercise-one-divisor-in-another}.
\end{exercise}

\begin{exercise}
\label{exercise-effective}
Let $k$ be an algebraically closed field. Let $X$ be a smooth projective curve
over $k$. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Show that there is a natural closed subset
$$
Z \subset X^r
$$
such that a closed point $(x_1, \ldots, x_r)$ of $X^r$ is in $Z$
if and only if $\mathcal{L}(-x_1 - \ldots -x_r)$ has a nonzero
global section. Hint: use Exercise \ref{exercise-closed-subset-vanshing-r}.
\end{exercise}

\begin{exercise}
\label{exercise-difference-effective}
Let $k$ be an algebraically closed field. Let $X$ be a smooth projective curve
over $k$. Let $r \geq s$ be integers. Show that there is a natural closed
subset
$$
Z \subset X^r \times X^s
$$
such that a closed point $(x_1, \ldots, x_r, y_1, \ldots, y_s)$ of
$X^r \times X^s$ is in $Z$
if and only if $x_1 + \ldots + x_r - y_1 - \ldots - y_s$
is linearly equivalent to an effective divisor.
Hint: Choose an auxilliary invertible module $\mathcal{L}$
of very high degree so that $\mathcal{L}(-D)$ has a nonvanshing
section for any effective divisor $D$ of degree $r$.
Then use the result of Exercise \ref{exercise-effective} twice.
\end{exercise}

\begin{exercise}
\label{exercise-genus-7}
Choose your favorite algebraically closed field $k$.
As best as you can determine all possible $\mathfrak g^r_d$
that can exist on some curve of genus $7$.
While doing this also try to
\begin{enumerate}
\item determine in which cases the $\mathfrak g^r_d$ is base point free, and
\item determine in which cases the $\mathfrak g^r_d$ gives a closed
embedding in $\mathbf{P}^r$.
\end{enumerate}
Do the same thing if you assume your curve is ``general'' (make
up your own notion of general -- this may be easier than the question above).
Do the same thing if you assume your curve is hyperelliptic.
Do the same thing if you assume your curve is trigonal
(and not hyperelliptic). Etc.
\end{exercise}





\section{Moduli}
\label{section-moduli}

\noindent
In this section we consider some naive approaches to moduli of
algebraic geometric objects.

\medskip\noindent
Let $k$ be an algebraically closed field. Suppose that $M$ is a
moduli problem over $k$. We won't define exactly what this means
here, but in each exercise it should be clear what we mean.
To understand the following it suffices to know
what the objects of $M$ over $k$ are, what the isomorphisms between
objects of $M$ over $k$ are, and what the families of object of $M$
over a variety are. Then we say the {\it number of moduli of $M$}
is $d \geq 0$ if the following are true
\begin{enumerate}
\item there is a finite number of families $X_i \to V_i$, $i = 1, \ldots, n$
such that every object of $M$ over $k$ is isomorphic to a fibre of one
of these and such that $\max \dim(V_i) = d$, and
\item there is no way to do this with a smaller $d$.
\end{enumerate}
This is really just a very rough approximation of better notions in
the literature.

\begin{exercise}
\label{exercise-number-moduli-lines-conics}
Let $k$ be an algebraically closed field. Let $d \geq 1$ and $n \geq 1$.
Let us say the moduli of hypersurfaces of degree $d$ in $P^n$ is given by
\begin{enumerate}
\item an object is a hypersurface $X \subset \mathbf{P}^n_k$
of degree $d$,
\item an isomorphism between two objects $X \subset \mathbf{P}^n_k$
and $Y \subset \mathbf{P}^n_k$ is an element $g \in \mathbf{PGL}_n(k)$
such that $g(X) = Y$, and
\item a family of hypersurfaces over a variety $V$ is a closed
subscheme $X \subset \mathbf{P}^n_V$ such that for all $v \in V$
the scheme theoretic fibre $X_v$ of $X \to V$ is
a hypersurfaces in $\mathbf{P}^n_v$.
\end{enumerate}
Compute (if you can -- these get progressively harder)
\begin{enumerate}
\item the number of moduli when $n = 1$ and $d$ arbitrary,
\item the number of moduli when $n = 2$ and $d = 1$,
\item the number of moduli when $n = 2$ and $d = 2$,
\item the number of moduli when $n \geq 1$ and $d = 2$,
\item the number of moduli when $n = 2$ and $d = 3$,
\item the number of moduli when $n = 3$ and $d = 3$, and
\item the number of moduli when $n = 2$ and $d = 4$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-number-moduli-hyperelliptic}
Let $k$ be an algebraically closed field. Let $g \geq 2$.
Let us say the moduli of hyperelliptic curves of genus $g$ is given by
\begin{enumerate}
\item an object is a smooth projective hyperelliptic curve $X$
of genus $g$,
\item an isomorphism between two objects $X$ and $Y$ is an
isomorphism $X \to Y$ of schemes over $k$, and
\item a family of hyperelliptic curves of genus $g$ over a variety $V$ is a
proper flat\footnote{You can drop this assumption without changing
the answer to the question.} morphism $X \to Y$ such that all scheme
theoretic fibres of $X \to V$ are smooth projective hyperelliptic curves
of genus $g$.
\end{enumerate}
Show that the number of moduli is $2g - 1$.
\end{exercise}





\section{Global Exts}
\label{section-global-exts}

\begin{exercise}
\label{exercise-ext-line-plane-p3}
Let $k$ be a field. Let $X = \mathbf{P}^3_k$. Let $L \subset X$
and $P \subset X$ be a line and a plane, viewed as closed subschemes
cut out by $1$, resp., $2$ linear equations. Compute
the dimensions of
$$
\Ext^i_X(\mathcal{O}_L, \mathcal{O}_P)
$$
for all $i$.
Make sure to do both the case where $L$ is contained in $P$ and the
case where $L$ is not contained in $P$.
\end{exercise}

\begin{exercise}
\label{exercise-ext-point}
Let $k$ be a field. Let $X = \mathbf{P}^n_k$. Let $Z \subset X$
be a closed $k$-rational point viewed as a closed subscheme.
For example the point with homogeneous coordinates
$(1 : 0 : \ldots : 0)$. Compute the dimensions of
$$
\Ext^i_X(\mathcal{O}_Z, \mathcal{O}_Z)
$$
for all $i$.
\end{exercise}

\begin{exercise}
\label{exercise-ext-pairings}
Let $X$ be a ringed space. Define cup-product maps
$$
\Ext^i_X(\mathcal{G}, \mathcal{H})
\times
\Ext^j_X(\mathcal{F}, \mathcal{G})
\longrightarrow
\Ext^{i + j}_X(\mathcal{F}, \mathcal{H})
$$
for $\mathcal{O}_X$-modules $\mathcal{F}, \mathcal{G}, \mathcal{H}$.
(Hint: this is a super general thing.)
\end{exercise}

\begin{exercise}
\label{exercise-move-out-locally-free}
Let $X$ be a ringed space. Let $\mathcal{E}$ be a finite locally free
$\mathcal{O}_X$-module with dual
$\mathcal{E}^\vee = \SheafHom_{\mathcal{O}_X}(\mathcal{E}, \mathcal{O}_X)$.
Prove the following statements
\begin{enumerate}
\item $\SheafExt^i_{\mathcal{O}_X}(
\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{E}, \mathcal{G}) =
\SheafExt^i_{\mathcal{O}_X}(
\mathcal{F},
\mathcal{E}^\vee \otimes_{\mathcal{O}_X} \mathcal{G}) =
\SheafExt^i_{\mathcal{O}_X}(
\mathcal{F}, \mathcal{G}) \otimes_{\mathcal{O}_X} \mathcal{E}^\vee$, and
\item $\Ext^i_X(
\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{E}, \mathcal{G}) =
\Ext^i_X(\mathcal{F},
\mathcal{E}^\vee \otimes_{\mathcal{O}_X} \mathcal{G})$.
\end{enumerate}
Here $\mathcal{F}$ and $\mathcal{G}$ are $\mathcal{O}_X$-modules. Conclude
that
$$
\Ext^i_X(\mathcal{E}, \mathcal{G}) =
H^i(X, \mathcal{E}^\vee \otimes_{\mathcal{O}_X} \mathcal{G})
$$
\end{exercise}

\begin{exercise}
\label{exercise-trace-on-ext}
Let $X$ be a ringed space. Let $\mathcal{E}$ be a finite locally free
$\mathcal{O}_X$-module. Construct a trace map
$$
\Ext^i_X(\mathcal{E}, \mathcal{E}) \to H^i(X, \mathcal{O}_X)
$$
for all $i$. Generalize to a trace map
$$
\Ext^i_X(\mathcal{E}, \mathcal{E} \otimes_{\mathcal{O}_X} \mathcal{F})
\to H^i(X, \mathcal{F})
$$
for any $\mathcal{O}_X$-module $\mathcal{F}$.
\end{exercise}

\begin{exercise}
\label{exercise-duality}
Let $k$ be a field. Let $X = \mathbf{P}^d_k$. Set
$\omega_{X/k} = \mathcal{O}_X(-d - 1)$.
Prove that for finite locally free modules
$\mathcal{E}$, $\mathcal{F}$ the cup product on Ext
combined with the trace map on Ext
$$
\Ext^i_X(\mathcal{E}, \mathcal{F} \otimes_{\mathcal{O}_X} \omega_{X/k})
\times
\Ext^{d - i}_X(\mathcal{F}, \mathcal{E})
\to
\Ext_X^d(\mathcal{F}, \mathcal{F} \otimes_{\mathcal{O}_X} \omega_{X/k})
\to
H^d(X, \omega_{X/k}) = k
$$
produces a nondegenerate pairing. Hint: you can either reprove duality
in this setting or you can reduce to cohomology of sheaves and apply the
Serre duality theorem as proved in the lectures.
\end{exercise}







\section{Divisors}
\label{section-divisors}

\noindent
We collect all relevant definitions here in one spot for convenience.

\begin{definition}
\label{definition-divisor}
Throughout, let $S$ be any scheme and let
$X$ be a Noetherian, integral scheme.
\begin{enumerate}
\item A {\it Weil divisor} on $X$ is a formal linear combination
$\Sigma n_i[Z_i]$ of prime divisors $Z_i$ with integer coefficients.
\item A {\it prime divisor} is a closed subscheme $Z \subset X$,
which is integral with generic point $\xi \in Z$ such that
${\mathcal O}_{X, \xi}$ has dimension $1$. We will use the notation
${\mathcal O}_{X, Z} = {\mathcal O}_{X, \xi}$
when $\xi \in Z \subset X$ is as above. Note that ${\mathcal O}_{X, Z} \subset
K(X)$ is a subring of the function field of $X$.
\item The {\it Weil divisor associated to a rational function
$f \in K(X)^\ast$} is the sum $\Sigma v_Z(f)[Z]$. Here $v_Z(f)$ is
defined as follows
\begin{enumerate}
\item If $f \in {\mathcal O}_{X, Z}^\ast$ then $v_Z(f) = 0$.
\item If $f \in {\mathcal O}_{X, Z}$ then
$$
v_Z(f) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(f)).
$$
\item If $f = \frac{a}{b}$ with $a, b \in {\mathcal O}_{X, Z}$
then
$$
v_Z(f) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(a)) -
\text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(b)).
$$
\end{enumerate}
\item An {\it effective Cartier divisor} on a scheme $S$
is a closed subscheme $D \subset S$ such that every point $d\in D$
has an affine open neighbourhood $\Spec(A) = U \subset S$ in $S$
so that $D \cap U = \Spec(A/(f))$ with $f \in A$ a nonzerodivisor.
\item The {\it Weil divisor $[D]$ associated to an effective
Cartier divisor $D \subset X$} of our Noetherian integral
scheme $X$ is defined as the sum $\Sigma v_Z(D)[Z]$ where
$v_Z(D)$ is defined as follows
\begin{enumerate}
\item If the generic point $\xi$ of $Z$ is not in $D$
then $v_Z(D) = 0$.
\item If the generic point $\xi$ of $Z$ is in $D$
then
$$
v_Z(D) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(f))
$$
where $f \in {\mathcal O}_{X, Z} = {\mathcal O}_{X, \xi}$ is the nonzerodivisor
which defines $D$ in an affine neighbourhood of $\xi$ (as in (4) above).
\end{enumerate}
\item Let $S$ be a scheme. The {\it sheaf of total quotient
rings ${\mathcal K}_S$} is the sheaf of ${\mathcal O}_S$-algebras which is
the sheafification of the pre-sheaf ${\mathcal K}'$ defined as follows.
For $U \subset S$ open we set ${\mathcal K}'(U) = S_U^{-1}{\mathcal O}_S(U)$
where $S_U \subset {\mathcal O}_S(U)$ is the multiplicative subset
consisting of sections $f \in {\mathcal O}_S(U)$ such that the germ
of $f$ in ${\mathcal O}_{S, u}$ is a nonzerodivisor for every $u\in U$.
In particular the elements of $S_U$ are all nonzerodivisors.
Thus ${\mathcal O}_S$ is a subsheaf of ${\mathcal K}_S$, and we get a
short exact sequence
$$
0 \to {\mathcal O}_S^\ast \to {\mathcal K}_S^\ast \to
{\mathcal K}_S^\ast/{\mathcal O}_S^\ast \to 0.
$$
\item A {\it Cartier divisor} on a scheme $S$ is a global
section of the quotient sheaf ${\mathcal K}_S^\ast/{\mathcal O}_S^\ast$.
\item The {\it Weil divisor associated to a Cartier divisor}
$\tau \in \Gamma(X, {\mathcal K}_X^\ast/{\mathcal O}_X^\ast)$ over our
Noetherian integral scheme
$X$ is the sum $\Sigma v_Z(\tau)[Z]$ where $v_Z(\tau)$ is defined
as by the following recipe
\begin{enumerate}
\item If the germ of $\tau$ at the generic point $\xi$
of $Z$ is zero -- in other words the image of $\tau$ in the stalk
$({\mathcal K}^\ast/{\mathcal O}^\ast)_\xi$ is ``zero'' -- then $v_Z(\tau) = 0$.
\item Find an affine open neighbourhood $\Spec(A) = U \subset X$
so that $\tau|_U$ is the image of a section $f \in {\mathcal K}(U)$
and moreover $f = a/b$ with $a, b \in A$. Then we set
$$
v_Z(f) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(a)) -
\text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(b)).
$$
\end{enumerate}
\end{enumerate}
\end{definition}

\begin{remarks}
\label{remarks-divisors}
Here are some trivial remarks.
\begin{enumerate}
\item On a Noetherian integral scheme $X$ the
sheaf ${\mathcal K}_X$ is constant with value the function field $K(X)$.
\item To make sense out of the definitions above one needs
to show that
$$
\text{length}_{\mathcal O}({\mathcal O}/(ab)) =
\text{length}_{\mathcal O}({\mathcal O}/(a)) +
\text{length}_{\mathcal O}({\mathcal O}/(b))
$$
for any pair $(a, b)$ of nonzero elements of a Noetherian 1-dimensional
local domain ${\mathcal O}$. This will be done in the lectures.
\end{enumerate}
\end{remarks}

\begin{exercise}
\label{exercise-effective-cartier-cartier}
(On any scheme.)
Describe how to assign a Cartier divisor to an effective Cartier divisor.
\end{exercise}

\begin{exercise}
\label{exercise-rational-function-cartier}
(On an integral scheme.)
Describe how to assign a Cartier divisor $D$ to a rational function
$f$ such that the Weil divisor associated to $D$ and to $f$ agree.
(This is silly.)
\end{exercise}

\begin{exercise}
\label{exercise-weil-not-cartier}
Give an example of a Weil divisor on a variety which is not
the Weil divisor associated to any Cartier divisor.
\end{exercise}

\begin{exercise}
\label{exercise-weil-Q-cartier}
Give an example of a Weil divisor $D$ on a variety which is not
the Weil divisor associated to any Cartier divisor but
such that $nD$ is the Weil divisor associated to a Cartier
divisor for some $n > 1$.
\end{exercise}

\begin{exercise}
\label{exercise-weil-not-Q-cartier}
Give an example of a Weil divisor $D$ on a variety which is not
the Weil divisor associated to any Cartier divisor and
such that $nD$ is NOT the Weil divisor associated to a Cartier
divisor for any $n > 1$.
(Hint: Consider a cone, for example $X : xy - zw = 0$ in
$\mathbf{A}^4_k$. Try to show that $D = [x = 0, z = 0]$ works.)
\end{exercise}

\begin{exercise}
\label{exercise-cartier-not-difference-effective-cartier}
On a separated scheme $X$ of finite type over a field:
Give an example of a Cartier divisor which is not the difference of
two effective Cartier divisors.
Hint: Find some $X$ which does not have any nonempty effective Cartier
divisors for example the scheme constructed in
\cite[III Exercise 5.9]{H}. There is even an example
with $X$ a variety -- namely the variety of
Exercise \ref{exercise-nonprojective}.
\end{exercise}

\begin{exercise}
\label{exercise-nonprojective}
Example of a nonprojective proper variety.
Let $k$ be a field. Let $L \subset \mathbf{P}^3_k$ be a line and
let $C \subset \mathbf{P}^3_k$ be a nonsingular conic. Assume that
$C \cap L = \emptyset$. Choose an
isomorphism $\varphi : L \to C$. Let $X$ be the $k$-variety obtained
by glueing $C$ to $L$ via $\varphi$. In other words there is
a surjective proper birational morphism
$$
\pi : \mathbf{P}^3_k \longrightarrow X
$$
and an open $U \subset X$ such that $\pi : \pi^{-1}(U) \to U$ is
an isomorphism, $\pi^{-1}(U) = \mathbf{P}^3_k \setminus (L \cup C)$
and such that $\pi|_L = \pi|_C \circ \varphi$. (These conditions do not
yet uniquely define $X$. In order to do this you need to specify the
structure sheaf of $X$ along points of $Z = X \setminus U$.)
Show $X$ exists, is a proper variety, but is not projective.
(Hint: For existence use the result of
Exercise \ref{exercise-prepare-glueing}. For non-projectivity use that
$\Pic(\mathbf{P}^3_k) = \mathbf{Z}$ to show that $X$ cannot have
an ample invertible sheaf.)
\end{exercise}



\section{Differentials}
\label{section-differentials}

\noindent
{\bf Definitions and results.} K\"ahler differentials.
\begin{enumerate}
\item Let $R \to A$ be a ring map. The {\it module of K\"ahler
differentials of $A$ over $R$} is denoted $\Omega_{A/R}$.
It is generated by the elements $\text{d}a$, $a \in A$
subject to the relations:
$$
\text{d}(a_1 + a_2) = \text{d}a_1 + \text{d}a_2,\quad
\text{d}(a_1a_2) = a_1\text{d}a_2 + a_2\text{d}a_1,\quad
\text{d}r = 0
$$
The canonical universal $R$-derivation $\text{d} : A \to \Omega_{A/R}$
maps $a\mapsto \text{d}a$.
\item Consider the short exact sequence
$$
0 \to I \to A \otimes_R A \to A \to 0
$$
which defines the ideal $I$. There is a canonical derivation
$\text{d} : A \to I/I^2$ which maps $a$ to the class of
$a \otimes 1 - 1 \otimes a$. This is another presentation of
the module of derivations of $A$ over $R$, in other words
$$
(I/I^2, \text{d}) \cong (\Omega_{A/R}, \text{d}).
$$
\item For multiplicative subsets $S_R \subset R$ and
$S_A \subset A$ such that $S_R$ maps into $S_A$ we have
$$
\Omega_{S_A^{-1}A / S_R^{-1}R} =
S_A^{-1}\Omega_{A/R}.
$$
\item If $A$ is a finitely presented $R$-algebra then
$\Omega_{A/R}$ is a finitely presented $A$-module. Hence in
this case the {\it fitting} ideals of $\Omega_{A/R}$ are defined.
\item Let $f : X \to S$ be a morphism of schemes. There is
a quasi-coherent sheaf of ${\mathcal O}_X$-modules $\Omega_{X/S}$
and a ${\mathcal O}_S$-linear derivation
$$
\text{d} : {\mathcal O}_X \longrightarrow \Omega_{X/S}
$$
such that for any affine opens $\Spec(A) = U \subset X$,
$\Spec(R) = V \subset S$
with $f(U) \subset V$ we have
$$
\Gamma(\Spec(A), \Omega_{X/S}) = \Omega_{A/R}
$$
compatibly with $\text{d}$.
\end{enumerate}

\begin{exercise}
\label{exercise-dual-numbers}
Let $k[\epsilon]$ be the ring of dual numbers
over the field $k$, i.e., $\epsilon^2 = 0$.
\begin{enumerate}
\item Consider the ring map
$$
R = k[\epsilon] \to A = k[x, \epsilon]/(\epsilon x)
$$
Show that the Fitting ideals of $\Omega_{A/R}$ are (starting with the
zeroth Fitting ideal)
$$
(\epsilon), A, A, \ldots
$$
\item Consider the map $R = k[t] \to
A = k[x, y, t]/(x(y-t)(y-1), x(x-t))$. Show that the Fitting ideals of
$\Omega_{A/R}$ in $A$ are (assume characteristic $k$ is zero
for simplicity)
$$
x(2x-t)(2y-t-1)A, \ (x, y, t)\cap (x, y-1, t), \ A, \ A, \ldots
$$
So the $0$-the Fitting ideal is cut out by a single element of $A$,
the $1$st Fitting ideal defines two closed points of $\Spec(A)$, and
the others are all trivial.
\item Consider the map $R = k[t] \to A = k[x, y, t]/(xy-t^n)$.
Compute the Fitting ideals of $\Omega_{A/R}$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-fitting-omega-not-sings}
The $k$th Fitting ideal of $\Omega_{X/S}$ is commonly used
to define the singular scheme of the morphism $X \to S$ when $X$ has relative
dimension $k$ over $S$. But as part (a) shows, you have to be careful doing
this when your family does not have ``constant'' fibre dimension, e.g., when
it is not flat. As part (b) shows, flatness doesn't guarantee it works either
(and yes this is a flat family). In ``good cases'' -- such as in (c) -- for
families of curves you expect the $0$-th Fitting ideal to be zero and
the $1$st Fitting ideal to define (scheme-theoretically) the singular locus.
\end{remark}

\begin{exercise}
\label{exercise-formally-smooth}
Suppose that $R$ is a ring and
$$
A = R[x_1, \ldots, x_n]/(f_1, \ldots, f_n).
$$
Note that we are assuming that $A$ is presented by the same
number of equations as variables. Thus the matrix of partial
derivatives
$$
( \partial f_i / \partial x_j )
$$
is $n \times n$, i.e., a square matrix. Assume that
its determinant is invertible as an element in $A$. Note that
this is exactly the condition that says that $\Omega_{A/R} = (0)$
in this case of $n$-generators and $n$ relations.
Let $\pi : B' \to B$ be a surjection of $R$-algebras
whose kernel $J$ has square zero (as an ideal in $B'$).
Let $\varphi : A \to B$ be a homomorphism of $R$-algebras.
Show there exists a unique homomorphism of $R$-algebras
$\varphi' : A \to B'$ such that $\varphi = \pi \circ \varphi'$.
\end{exercise}

\begin{exercise}
\label{exercise-formally-smooth-one-equation}
Find a generalization of the result of Exercise \ref{exercise-formally-smooth}
to the case where $A = R[x, y]/(f)$.
\end{exercise}

\begin{exercise}
\label{exercise-Jacobian-criterion}
Let $k$ be a field, let $f_1, \ldots, f_c \in k[x_1, \ldots, x_n]$, and
let $A = k[x_1, \ldots, x_n]/(f_1, \ldots, f_c)$.
Assume that $f_j(0, \ldots, 0) = 0$. This means that
$\mathfrak m = (x_1, \ldots, x_n)A$ is a maximal ideal.
Prove that the local ring $A_\mathfrak m$ is regular
if the rank of the matrix
$$
(\partial f_j/ \partial x_i)|_{(x_1, \ldots, x_n) = (0, \ldots, 0)}
$$
is $c$. What is the dimension of $A_\mathfrak m$ in this case?
Show that the converse is false by giving an example where
$A_\mathfrak m$ is regular but the rank is less than $c$;
what is the dimension of $A_\mathfrak m$ in your example?
\end{exercise}




\section{Schemes, Final Exam, Fall 2007}
\label{section-final-exam-fall-2007}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Spring of 2007 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions}
Provide definitions of the following concepts.
\begin{enumerate}
\item $X$ is a {\it scheme}
\item the morphism of schemes $f : X \to Y$ is {\it finite}
\item the morphisms of schemes $f : X \to Y$ is {\it of finite type}
\item the scheme $X$ is {\it Noetherian}
\item the ${\mathcal O}_X$-module ${\mathcal L}$ on
the scheme $X$ is {\it invertible}
\item the {\it genus} of a nonsingular
projective curve over an algebraically closed field
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-kill-global-sections}
Let $X = \Spec({\mathbf Z}[x, y])$, and let ${\mathcal F}$ be a
quasi-coherent
${\mathcal O}_X$-module. Suppose that ${\mathcal F}$ is zero when restricted to
the
standard affine open $D(x)$.
\begin{enumerate}
\item Show that every global section $s$ of ${\mathcal F}$ is killed by some
power of $x$, i.e., $x^ns = 0$ for some $n\in {\mathbf N}$.
\item Do you think the same is true if we do not assume that ${\mathcal F}$
is quasi-coherent?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-empty-fibre-empty}
Suppose that $X \to \Spec(R)$ is a proper morphism and that
$R$ is a discrete valuation ring with residue field $k$. Suppose that
$X \times_{\Spec(R)} \Spec(k)$ is the empty scheme. Show that
$X$ is the empty scheme.
\end{exercise}

\begin{exercise}
\label{exercise-curve-p1-p1}
Consider the
projective\footnote{The projective embedding is
$((X_0, X_1), (Y_0, Y_1))\mapsto (X_0Y_0, X_0Y_1, X_1Y_0, X_1Y_1)$
in other words $(x, y)\mapsto (1, y, x, xy)$.} variety
$$
{\mathbf P}^1 \times {\mathbf P}^1 = {\mathbf P}^1_{{\mathbf C}}
\times_{\Spec({\mathbf C})} {\mathbf P}^1_{\mathbf C}
$$
over the field of complex numbers ${\mathbf C}$. It is covered by four affine
pieces,
corresponding to pairs of standard affine pieces of ${\mathbf P}^1_{\mathbf
C}$. For example,
suppose we use homogeneous coordinates $X_0, X_1$ on the first factor and
$Y_0, Y_1$ on the second. Set $x = X_1/X_0$, and $y = Y_1/Y_0$. Then the 4
affine open pieces are the spectra of the  rings
$$
{\mathbf C}[x, y], \quad
{\mathbf C}[x^{-1}, y], \quad
{\mathbf C}[x, y^{-1}], \quad
{\mathbf C}[x^{-1}, y^{-1}].
$$
Let $X \subset {\mathbf P}^1 \times {\mathbf P}^1$ be the closed subscheme
which is the
closure of the closed subset of the first affine piece given by the equation
$$
y^3(x^4 + 1) = x^4 -1.
$$
\begin{enumerate}
\item Show that $X$ is contained in the union of the first and
the last of the 4 affine open pieces.
\item Show that $X$ is a nonsingular projective curve.
\item Consider the morphism $pr_2 : X \to {\mathbf P}^1$ (projection onto
the first factor). On the first affine piece it is the map $(x, y) \mapsto x$.
Briefly explain why it has degree $3$.
\item Compute the ramification points and ramification indices
for the map $pr_2 : X \to {\mathbf P}^1$.
\item Compute the genus of $X$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-finite-type-over-Z}
Let $X \to \Spec({\mathbf Z})$ be a morphism of finite type.
Suppose that there is an infinite number of primes $p$ such that
$X \times_{\Spec({\mathbf Z})} \Spec({\mathbf F}_p)$ is not empty.
\begin{enumerate}
\item Show that $X \times_{\Spec({\mathbf Z})}\Spec(\mathbf{Q})$
is not empty.
\item Do you think the same is true if we replace the condition
``finite type'' by the condition ``locally of finite type''?
\end{enumerate}
\end{exercise}




\section{Schemes, Final Exam, Spring 2009}
\label{section-final-exam-spring-2009}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Spring of 2009 at Columbia University.

\begin{exercise}
\label{exercise-Noetherian-coherent}
Let $X$ be a Noetherian scheme.
Let $\mathcal{F}$ be a coherent sheaf on $X$.
Let $x \in X$ be a point.
Assume that $\text{Supp}(\mathcal{F}) = \{ x \}$.
\begin{enumerate}
\item Show that $x$ is a closed point of $X$.
\item Show that $H^0(X, \mathcal{F})$ is not zero.
\item Show that $\mathcal{F}$ is generated by global sections.
\item Show that $H^p(X, \mathcal{F}) = 0$ for $p > 0$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-invertible-projective-space}
Let $k$ be a field.
Let $\mathbf{P}^2_k = \text{Proj}(k[X_0, X_1, X_2])$.
Any invertible sheaf on $\mathbf{P}^2_k$ is isomorphic to
$\mathcal{O}_{\mathbf{P}^2_k}(n)$ for some $n \in \mathbf{Z}$.
Recall that
$$
\Gamma(\mathbf{P}^2_k, \mathcal{O}_{\mathbf{P}^2_k}(n)) =
k[X_0, X_1, X_2]_n
$$
is the degree $n$ part of the polynomial ring.
For a quasi-coherent sheaf $\mathcal{F}$ on $\mathbf{P}^2_k$ set
$\mathcal{F}(n) =
\mathcal{F}
\otimes_{\mathcal{O}_{\mathbf{P}^2_k}}
\mathcal{O}_{\mathbf{P}^2_k}(n)$
as usual.
\end{remark}

\begin{exercise}
\label{exercise-nonsplit-vectorbundle}
Let $k$ be a field.
Let $\mathcal{E}$ be a vector bundle on $\mathbf{P}^2_k$, i.e., a finite locally
free $\mathcal{O}_{\mathbf{P}^2_k}$-module.
We say $\mathcal{E}$ is {\it split} if $\mathcal{E}$ is isomorphic to
a direct sum invertible $\mathcal{O}_{\mathbf{P}^2_k}$-modules.
\begin{enumerate}
\item Show that $\mathcal{E}$ is split if and only if $\mathcal{E}(n)$
is split.
\item Show that if $\mathcal{E}$ is split then
$H^1({\mathbf{P}^2_k}, \mathcal{E}(n)) = 0$
for all $n \in \mathbf{Z}$.
\item Let
$$
\varphi :
\mathcal{O}_{\mathbf{P}^2_k}
\longrightarrow
\mathcal{O}_{\mathbf{P}^2_k}(1) \oplus
\mathcal{O}_{\mathbf{P}^2_k}(1) \oplus
\mathcal{O}_{\mathbf{P}^2_k}(1)
$$
be given by linear forms
$L_0, L_1, L_2 \in \Gamma(\mathbf{P}^2_k, \mathcal{O}_{\mathbf{P}^2_k}(1))$.
Assume $L_i \not = 0$ for some $i$.
What is the condition on $L_0, L_1, L_2$ such that
the cokernel of $\varphi$ is a vector bundle?
Why?
\item Given an example of such a $\varphi$.
\item Show that $\Coker(\varphi)$ is not split (if it is
a vector bundle).
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-recall-dimension-theory}
Freely use the following facts on dimension theory
(and add more if you need more).
\begin{enumerate}
\item The dimension of a scheme is the supremum of the length of chains
of irreducible closed subsets.
\item The dimension of a finite type scheme over a field is the maximum
of the dimensions of its affine opens.
\item The dimension of a Noetherian scheme is the maximum of the dimensions
of its irreducible components.
\item The dimension of an affine scheme
coincides with the dimension of the corresponding ring.
\item Let $k$ be a field and let $A$ be a finite type $k$-algebra.
If $A$ is a domain, and $x \not = 0$, then $\dim(A) = \dim(A/xA) + 1$.
\end{enumerate}
\end{remark}

\begin{exercise}
\label{exercise-irreducible-fibres-same-dimension-irreducible}
Let $k$ be a field.
Let $X$ be a projective, reduced scheme over $k$.
Let $f : X \to \mathbf{P}^1_k$ be a morphism of schemes over $k$.
Assume there exists an integer $d \geq 0$ such that
for every point $t \in \mathbf{P}^1_k$ the fibre $X_t = f^{-1}(t)$
is irreducible of dimension $d$. (Recall that an irreducible space is
not empty.)
\begin{enumerate}
\item Show that $\dim(X) = d + 1$.
\item Let $X_0 \subset X$ be an irreducible component of $X$ of dimension
$d + 1$. Prove that for every $t \in \mathbf{P}^1_k$ the fibre
$X_{0, t}$ has dimension $d$.
\item What can you conclude about $X_t$ and $X_{0, t}$ from the above?
\item Show that $X$ is irreducible.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-chi}
Given a projective scheme $X$ over a field $k$ and
a coherent sheaf $\mathcal{F}$ on $X$ we set
$$
\chi(X, \mathcal{F}) =
\sum\nolimits_{i \geq 0} (-1)^i\dim_k H^i(X, \mathcal{F}).
$$
\end{remark}

\begin{exercise}
\label{exercise-complete-intersection}
Let $k$ be a field.
Write $\mathbf{P}^3_k = \text{Proj}(k[X_0, X_1, X_2, X_3])$.
Let $C \subset \mathbf{P}^3_k$ be a
{\it type $(5, 6)$ complete intersection curve}.
This means that there exist $F \in k[X_0, X_1, X_2, X_3]_5$ and
$G \in k[X_0, X_1, X_2, X_3]_6$ such that
$$
C = \text{Proj}(k[X_0, X_1, X_2, X_3]/(F, G))
$$
is a variety of dimension $1$. (Variety implies reduced and irreducible,
but feel free to assume $C$ is nonsingular if you like.)
Let $i : C \to \mathbf{P}^3_k$ be the corresponding closed immersion.
Being a complete intersection also implies that
$$
\xymatrix{
0 \ar[r] &
\mathcal{O}_{\mathbf{P}^3_k}(-11)
\ar[r]^-{
\left(
\begin{matrix}
-G \\
F
\end{matrix}
\right)
} &
\mathcal{O}_{\mathbf{P}^3_k}(-5) \oplus \mathcal{O}_{\mathbf{P}^3_k}(-6)
\ar[r]^-{(F, G)} &
\mathcal{O}_{\mathbf{P}^3_k} \ar[r] &
i_*\mathcal{O}_C \ar[r] &
0
}
$$
is an exact sequence of sheaves. Please use these facts to:
\begin{enumerate}
\item compute $\chi(C, i^*\mathcal{O}_{\mathbf{P}^3_k}(n))$ for
any $n \in \mathbf{Z}$, and
\item compute the dimension of $H^1(C, \mathcal{O}_C)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-glueing}
Let $k$ be a field.
Consider the rings
\begin{align*}
A & = k[x, y]/(xy) \\
B & = k[u, v]/(uv) \\
C & = k[t, t^{-1}] \times k[s, s^{-1}]
\end{align*}
and the $k$-algebra maps
$$
\begin{matrix}
A \longrightarrow C, &
x \mapsto (t, 0), &
y \mapsto (0, s) \\
B \longrightarrow C, &
u \mapsto (t^{-1}, 0), &
v \mapsto (0, s^{-1})
\end{matrix}
$$
It is a true fact that these maps induce isomorphisms
$A_{x + y} \to C$ and $B_{u + v} \to C$. Hence the maps $A \to C$
and $B \to C$ identify $\Spec(C)$ with open subsets of
$\Spec(A)$ and $\Spec(B)$. Let $X$ be the scheme obtained
by glueing $\Spec(A)$ and $\Spec(B)$ along $\Spec(C)$:
$$
X = \Spec(A) \amalg_{\Spec(C)} \Spec(B).
$$
As we saw in the course such a scheme exists and there are affine
opens $\Spec(A) \subset X$ and $\Spec(B) \subset X$
whose overlap is exactly $\Spec(C)$ identified with an open of
each of these using the maps above.
\begin{enumerate}
\item Why is $X$ separated?
\item Why is $X$ of finite type over $k$?
\item Compute $H^1(X, \mathcal{O}_X)$, or what is its dimension?
\item What is a more geometric way to describe $X$?
\end{enumerate}
\end{exercise}





\section{Schemes, Final Exam, Fall 2010}
\label{section-final-exam-fall-2010}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Fall of 2010 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-fall-2010}
Provide definitions of the following concepts.
\begin{enumerate}
\item a separated scheme,
\item a quasi-compact morphism of schemes,
\item an affine morphism of schemes,
\item a multiplicative subset of a ring,
\item a Noetherian scheme,
\item a variety.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-prime-avoidance}
Prime avoidance.
\begin{enumerate}
\item Let $A$ be a ring. Let $I \subset A$ be an ideal and
let $\mathfrak q_1$, $\mathfrak q_2$ be prime ideals such that
$I \not \subset \mathfrak q_i$. Show that
$I \not \subset \mathfrak q_1 \cup \mathfrak q_2$.
\item What is a geometric interpretation of (1)?
\item Let $X = \text{Proj}(S)$ for some graded ring $S$.
Let $x_1, x_2 \in X$. Show that there exists a standard open
$D_{+}(F)$ which contains both $x_1$ and $x_2$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-compose-affine}
Why is a composition of affine morphisms affine?
\end{exercise}

\begin{exercise}[Examples]
\label{exercise-examples}
Give examples of the following:
\begin{enumerate}
\item A reducible projective scheme over a field $k$.
\item A scheme with 100 points.
\item A non-affine morphism of schemes.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-chevalley-hilbert-nullstellensatz}
Chevalley's theorem and the Hilbert Nullstellensatz.
\begin{enumerate}
\item Let $\mathfrak p \subset \mathbf{Z}[x_1, \ldots, x_n]$
be a maximal ideal. What does Chevalley's theorem imply about
$\mathfrak p \cap \mathbf{Z}$?
\item In turn, what does the Hilbert Nullstellensatz imply about
$\kappa(\mathfrak p)$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-P0}
Let $A$ be a ring. Let $S = A[X]$ as a graded $A$-algebra
where $X$ has degree $1$. Show that $\text{Proj}(S) \cong \Spec(A)$
as schemes over $A$.
\end{exercise}

\begin{exercise}
\label{exercise-finite-is-projective}
Let $A \to B$ be a finite ring map. Show that
$\Spec(B)$ is a H-projective scheme over $\Spec(A)$.
\end{exercise}

\begin{exercise}
\label{exercise-not-geometrically-irreducible}
Give an example of a scheme $X$ over a field $k$ such that
$X$ is irreducible and such that for some finite extension $k \subset k$
the base change $X_{k'} = X \times_{\Spec(k)} \Spec(k')$
is connected but reducible.
\end{exercise}





\section{Schemes, Final Exam, Spring 2011}
\label{section-final-exam-spring-2011}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Spring of 2011 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-spring-2011}
Provide definitions of the italicized concepts.
\begin{enumerate}
\item a {\it separated} scheme,
\item a {\it universally closed} morphism of schemes,
\item {\it $A$ dominates $B$} for local rings $A, B$ contained in a
common field,
\item the {\it dimension} of a scheme $X$,
\item the {\it codimension} of an irreducible closed subscheme $Y$
of a scheme $X$,
\end{enumerate}
\end{exercise}

\begin{exercise}[Results]
\label{exercise-results-spring-2011}
State something formally equivalent to the fact discussed
in the course.
\begin{enumerate}
\item The valuative criterion of properness for a morphism
$X \to Y$ of varieties for example.
\item The relationship between $\dim(X)$ and the function field
$k(X)$ of $X$ for a variety $X$ over a field $k$.
\item Fill in the blank: The category of nonsingular projective curves over
$k$ and nonconstant morphisms is anti-equivalent to $\ldots\ldots\ldots$.
\item Noether normalization.
\item Jacobian criterion.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-genus-plane-curve}
Let $k$ be a field.
Let $F \in k[X_0, X_1, X_2]$ be a homogeneous form of degree $d$.
Assume that $C = V_{+}(F) \subset \mathbf{P}^2_k$ is a smooth curve over $k$.
Denote $i : C \to \mathbf{P}^2_k$ the corresponding closed immersion.
\begin{enumerate}
\item Show that there is a short exact sequence
$$
0 \to \mathcal{O}_{\mathbf{P}^2_k}(-d)
\to \mathcal{O}_{\mathbf{P}^2_k} \to i_*\mathcal{O}_C \to 0
$$
of coherent sheaves on $\mathbf{P}^2_k$: tell me what the maps are
and briefly why it is exact.
\item Conclude that $H^0(C, \mathcal{O}_C) = k$.
\item Compute the genus of $C$.
\item Assume now that $P = (0 : 0 : 1)$ is not on $C$. Prove that
$\pi : C \to \mathbf{P}^1_k$ given by $(a_0 : a_1 : a_2) \mapsto (a_0 : a_1)$
has degree $d$.
\item Assume $k$ is algebraically closed, assume all ramification indices
(the ``$e_i$'') are $1$ or $2$, and assume the characteristic of $k$
is not equal to $2$. How many ramification
points does $\pi : C \to \mathbf{P}^1_k$ have?
\item In terms of $F$, what do you think is a set of equations of
the set of ramification points of $\pi$?
\item Can you guess $K_C$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-Pic-triangle}
Let $k$ be a field. Let $X$ be a ``triangle'' over $k$, i.e.,
you get $X$ by glueing three copies of $\mathbf{A}^1_k$ to each other by
identifying $0$ on the first copy to $1$ on the second copy, $0$ on the
second copy to $1$ on the third copy, and $0$ on the third copy to $1$ on
the first copy. It turns out that $X$ is isomorphic to
$\Spec(k[x, y]/(xy(x + y + 1)))$; feel free to use this.
Compute the Picard group of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-birational-morphism-curves-ample}
Let $k$ be a field. Let $\pi : X \to Y$ be a finite birational
morphism of curves with $X$ a projective nonsingular curve over $k$.
It follows from the material in the course that $Y$ is a proper curve and
that $\pi$ is the normalization morphism of $Y$.
We have also seen in the course that there exists a dense open $V \subset Y$
such that $U = \pi^{-1}(V)$ is a dense open in $X$ and $\pi : U \to V$
is an isomorphism.
\begin{enumerate}
\item Show that there exists an effective Cartier divisor $D \subset X$
such that $D \subset U$ and such that $\mathcal{O}_X(D)$ is ample on $X$.
\item Let $D$ be as in (1). Show that $E = \pi(D)$ is an effective Cartier
divisor on $Y$.
\item Briefly indicate why
\begin{enumerate}
\item the map $\mathcal{O}_Y \to \pi_*\mathcal{O}_X$ has a coherent cokernel
$Q$ which is supported in $Y \setminus V$, and
\item for every $n$ there is a corresponding map
$\mathcal{O}_Y(nE) \to \pi_*\mathcal{O}_X(nD)$
whose cokernel is isomorphic to $Q$.
\end{enumerate}
\item Show that
$\dim_k H^0(X, \mathcal{O}_X(nD)) - \dim_k H^0(Y, \mathcal{O}_Y(nE))$
is bounded (by what?) and conclude that the invertible sheaf
$\mathcal{O}_Y(nE)$ has lots of sections for large $n$ (why?).
\end{enumerate}
\end{exercise}





\section{Schemes, Final Exam, Fall 2011}
\label{section-final-exam-fall-2011}

\noindent
These were the questions in the final exam of a course on
Commutative Algebra, in the Fall of 2011 at Columbia University.


\begin{exercise}[Definitions]
\label{exercise-definitions-fall-2011}
Provide definitions of the italicized concepts.
\begin{enumerate}
\item a {\it Noetherian} ring,
\item a {\it Noetherian} scheme,
\item a {\it finite} ring homomorphism,
\item a {\it finite} morphism of schemes,
\item the {\it dimension} of a ring.
\end{enumerate}
\end{exercise}

\begin{exercise}[Results]
\label{exercise-results-fall-2011}
State something formally equivalent to the fact discussed
in the course.
\begin{enumerate}
\item Zariski's Main Theorem.
\item Noether normalization.
\item Chinese remainder theorem.
\item Going up for finite ring maps.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-dimension-of-ring}
Let $(A, \mathfrak m, \kappa)$ be a Noetherian local ring
whose residue field has characteristic not $2$.
Suppose that $\mathfrak m$ is generated by three elements
$x, y, z$ and that $x^2 + y^2 + z^2 = 0$ in $A$.
\begin{enumerate}
\item What are the possible values of $\dim(A)$?
\item Give an example to show that each value is possible.
\item Show that $A$ is a domain if $\dim(A) = 2$.
(Hint: look at
$\bigoplus_{n \geq 0} \mathfrak m^n/\mathfrak m^{n + 1}$.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-localization}
Let $A$ be a ring.
Let $S \subset T \subset A$ be multiplicative subsets.
Assume that
$$
\{\mathfrak q \mid \mathfrak q \cap S = \emptyset\} =
\{\mathfrak q \mid \mathfrak q \cap T = \emptyset\}.
$$
Show that $S^{-1}A \to T^{-1}A$ is an isomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-locus-of-rank-1}
Let $k$ be an algebraically closed field. Let
$$
V_0 = \{ A \in \text{Mat}(3 \times 3, k) \mid \text{rank}(A) = 1\}
\subset \text{Mat}(3 \times 3, k) = k^9.
$$
\begin{enumerate}
\item Show that $V_0$ is the set of closed points of a
(Zariski) locally closed subset $V \subset \mathbf{A}^9_k$.
\item Is $V$ irreducible?
\item What is $\dim(V)$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-not-complete-intersection}
Prove that the ideal $(x^2, xy, y^2)$ in $\mathbf{C}[x, y]$
cannot be generated by $2$ elements.
\end{exercise}

\begin{exercise}
\label{exercise-finite-projection}
Let $f \in \mathbf{C}[x, y]$ be a nonconstant polynomial.
Show that for some $\alpha, \beta \in \mathbf{C}$ the
$\mathbf{C}$-algebra map
$$
\mathbf{C}[t] \longrightarrow \mathbf{C}[x, y]/(f),\quad
t \longmapsto \alpha x + \beta y
$$
is finite.
\end{exercise}

\begin{exercise}
\label{exercise-union-of-two-affines}
Show that given finitely many points $p_1, \ldots, p_n \in \mathbf{C}^2$
the scheme $\mathbf{A}^2_\mathbf{C} \setminus \{p_1, \ldots, p_n\}$
is a union of two affine opens.
\end{exercise}

\begin{exercise}
\label{exercise-surjection-A1-P1}
Show that there exists a surjective morphism of schemes
$\mathbf{A}^1_\mathbf{C} \to \mathbf{P}^1_\mathbf{C}$.
(Surjective just means surjective on underlying sets of points.)
\end{exercise}

\begin{exercise}
\label{exercise-almost-surjective}
Let $k$ be an algebraically closed field. Let $A \subset B$ be an
extension of domains which are both finite type $k$-algebras.
Prove that the image of $\Spec(B) \to \Spec(A)$
contains a nonempty open subset of $\Spec(A)$ using the following steps:
\begin{enumerate}
\item Prove it if $A \to B$ is also finite.
\item Prove it in case the fraction field of $B$ is a finite extension
of the fraction field of $A$.
\item Reduce the statement to the previous case.
\end{enumerate}
\end{exercise}





\section{Schemes, Final Exam, Fall 2013}
\label{section-final-exam-fall-2013}

\noindent
These were the questions in the final exam of a course on
Commutative Algebra, in the Fall of 2013 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-fall-2013}
Provide definitions of the italicized concepts.
\begin{enumerate}
\item a {\it radical ideal} of a ring,
\item a {\it finite type} ring homomorphism,
\item a {\it differential a la Weil},
\item a {\it scheme}.
\end{enumerate}
\end{exercise}

\begin{exercise}[Results]
\label{exercise-results-fall-2013}
State something formally equivalent to the fact discussed
in the course.
\begin{enumerate}
\item result on hilbert polynomials of graded modules.
\item dimension of a Noetherian local ring $(R, \mathfrak m)$ and
$\bigoplus_{n \geq 0} \mathfrak m^n/\mathfrak m^{n + 1}$.
\item Riemann-Roch.
\item Clifford's theorem.
\item Chevalley's theorem.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-surjective-after-localization}
Let $A \to B$ be a ring map. Let $S \subset A$ be a multiplicative subset.
Assume that $A \to B$ is of finite type and $S^{-1}A \to S^{-1}B$ is
surjective. Show that there exists an $f \in S$ such that $A_f \to B_f$
is surjective.
\end{exercise}

\begin{exercise}
\label{exercise-injective-local-ring-map-not-surjective}
Give an example of an injective local homomorphism $A \to B$
of local rings, such that $\Spec(B) \to \Spec(A)$ is not surjective.
\end{exercise}

\begin{situation}[Notation plane curve]
\label{situation-curve-in-the-plane}
Let $k$ be an algebraically closed field. Let
$F(X_0, X_1, X_2) \in k[X_0, X_1, X_2]$ be an irreducible polynomial
homogeneous of degree $d$. We let
$$
D = V(F) \subset \mathbf{P}^2
$$
be the projective plane curve given by the vanishing of $F$.
Set $x = X_1/X_0$ and $y = X_2/X_0$ and
$f(x, y) = X_0^{-d}F(X_0, X_1, X_2) = F(1, x, y)$.
We denote $K$ the fraction field of the domain $k[x, y]/(f)$.
We let $C$ be the abstract curve corresponding to $K$.
Recall (from the lectures) that there is a surjective map $C \to D$
which is bijective over the nonsingular locus of $D$ and an
isomorphism if $D$ is nonsingular.
Set $f_x = \partial f/\partial x$ and $f_y = \partial f/\partial y$.
Finally, we denote $\omega = \text{d}x/f_y = - \text{d}y/f_x$ the
element of $\Omega_{K/k}$ discussed in the lectures.
Denote $K_C$ the divisor of zeros and poles of $\omega$.
\end{situation}

\begin{exercise}
\label{exercise-node-in-the-plane}
In Situation \ref{situation-curve-in-the-plane} assume
$d \geq 3$ and that the curve $D$ has exactly one singular point,
namely $P = (1 : 0 : 0)$. Assume further that we have the expansion
$$
f(x, y) = xy + h.o.t
$$
around $P = (0, 0)$. Then $C$ has two points $v$ and $w$ lying over
$P$ characterized by
$$
v(x) = 1, v(y) > 1
\quad\text{and}\quad
w(x) > 1, w(y) = 1
$$
\begin{enumerate}
\item Show that the element
$\omega = \text{d}x/f_y = - \text{d}y/f_x$ of $\Omega_{K/k}$
has a first order pole at both $v$ and $w$. (The behaviour of
$\omega$ at nonsingular points is as discussed in the lectures.)
\item In the lectures we have shown that $\omega$ vanishes to order
$d - 3$ at the divisor $X_0 = 0$ pulled back to $C$ under the map
$C \to D$. Combined with the information of (1) what is the degree
of the divisor of zeros and poles of $\omega$ on $C$?
\item What is the genus of the curve $C$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-smooth-plane-curve-linear-system}
In Situation \ref{situation-curve-in-the-plane} assume $d = 5$
and that the curve $C = D$ is nonsingular. In the lectures we have shown
that the genus of $C$ is $6$ and that the linear system $K_C$ is given by
$$
L(K_C) = \{h\omega \mid h \in k[x, y],\ \deg(h) \leq 2\}
$$
where $\deg$ indicates total degree\footnote{We get $\leq 2$ because
$d - 3 = 5 - 3 = 2$.}. Let $P_1, P_2, P_3, P_4, P_5 \in D$
be pairwise distinct points lying in the affine open $X_0 \not = 0$. We denote
$\sum P_i = P_1 + P_2 + P_3 + P_4 + P_5$ the corresponding divisor of $C$.
\begin{enumerate}
\item Describe $L(K_C - \sum P_i)$ in terms of polynomials.
\item What are the possibilities for $l(\sum P_i)$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-rational-curve-high-degree}
Write down an $F$ as in Situation \ref{situation-curve-in-the-plane}
with $d = 100$ such that the genus of $C$ is $0$.
\end{exercise}

\begin{exercise}
\label{exercise-high-degree-curve-quadratic-equation}
Let $k$ be an algebraically closed field. Let $K/k$ be
finitely generated field extension of transcendence degree $1$.
Let $C$ be the abstract curve corresponding to $K$.
Let $V \subset K$ be a $g^r_d$ and let $\Phi : C \to \mathbf{P}^r$
be the corresponding morphism. Show that the image of $C$
is contained in a quadric\footnote{A quadric is a degree $2$ hypersurface,
i.e., the zero set in $\mathbf{P}^r$ of a degree $2$ homogeneous
polynomial.} if $V$ is a complete linear
system and $d$ is large enough relative to the genus of $C$.
(Extra credit: good bound on the degree needed.)
\end{exercise}

\begin{exercise}
\label{exercise-surjective-map-a2-p2}
Notation as in Situation \ref{situation-curve-in-the-plane}.
Let $U \subset \mathbf{P}^2_k$ be the open subscheme
whose complement is $D$. Describe the $k$-algebra
$A = \mathcal{O}_{\mathbf{P}^2_k}(U)$. Give an upper bound for the
number of generators of $A$ as a $k$-algebra.
\end{exercise}



\section{Schemes, Final Exam, Spring 2014}
\label{section-final-exam-spring-2014}

\noindent
These were the questions in the final exam of a course on
Schemes, in the Spring of 2014 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-spring-2014}
Let $(X, \mathcal{O}_X)$ be a scheme. Provide definitions of the
italicized concepts.
\begin{enumerate}
\item the {\it local ring of $X$ at a point $x$},
\item a {\it quasi-coherent} sheaf of $\mathcal{O}_X$-modules,
\item a {\it coherent} sheaf of $\mathcal{O}_X$-modules (please
assume $X$ is locally Noetherian,
\item an {\it affine open} of $X$,
\item a {\it finite morphism of schemes} $X \to Y$.
\end{enumerate}
\end{exercise}

\begin{exercise}[Theorems]
\label{exercise-results-spring-2014}
Precisely state a nontrivial fact discussed in the lectures related
to each item.
\begin{enumerate}
\item on birational invariance of pluri-genera of varieties,
\item being an affine morphism is a local property,
\item the topology of a scheme theoretic fibre of a morphism, and
\item valuative criterion of properness.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-miss-curve}
Let $X = \mathbf{A}^2_\mathbf{C}$ where $\mathbf{C}$ is the field
of complex numbers. A {\it line} will mean a closed
subscheme of $X$ defined by one linear equation $ax + by + c = 0$ for
some $a, b, c \in \mathbf{C}$ with $(a, b) \not = (0, 0)$.
A {\it curve} will mean an irreducible (so nonempty) closed subscheme
$C \subset X$ of dimension $1$.
A {\it quadric} will mean a curve defined by one
quadratic equation $ax^2 + bxy + cy^2 + dx + ey + f = 0$
for some $a, b, c, d, e, f \in \mathbf{C}$ and
$(a, b, c) \not = (0, 0, 0)$.
\begin{enumerate}
\item Find a curve $C$ such that every line has nonempty intersection with $C$.
\item Find a curve $C$ such that every line and every quadric has nonempty
intersection with $C$.
\item Show that for every curve $C$ there exists another curve
such that $C \cap C' = \emptyset$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-normal-bundle-exceptional-curve}
Let $k$ be a field. Let $b : X \to \mathbf{A}^2_k$ be the blow
up of the affine plane in the origin. In other words, if
$\mathbf{A}^2_k = \Spec(k[x, y])$, then
$X = \text{Proj}(\bigoplus_{n \geq 0} \mathfrak m^n)$
where $\mathfrak m = (x, y) \subset k[x, y]$.
Prove the following statements
\begin{enumerate}
\item the scheme theoretic fibre $E$ of $b$ over the origin
is isomorphic to $\mathbf{P}^1_k$,
\item $E$ is an effective Cartier divisor on $X$,
\item the restriction of $\mathcal{O}_X(-E)$
to $E$ is a line bundle of degree $1$.
\end{enumerate}
(Recall that $\mathcal{O}_X(-E)$ is the ideal sheaf of $E$ in $X$.)
\end{exercise}

\begin{exercise}
\label{exercise-surjective-map-affine-variety-projective-variety}
Let $k$ be a field. Let $X$ be a projective variety over $k$.
Show there exists an affine variety $U$ over $k$ and a surjective
morphism of varieties $U \to X$.
\end{exercise}

\begin{exercise}
\label{exercise-vandermonde}
Let $k$ be a field of characteristic $p > 0$ different from $2,3$.
Consider the closed subscheme $X$ of $\mathbf{P}^n_k$ defined by
$$
\sum\nolimits_{i = 0, \ldots, n} X_i = 0,\quad
\sum\nolimits_{i = 0, \ldots, n} X_i^2 = 0,\quad
\sum\nolimits_{i = 0, \ldots, n} X_i^3 = 0
$$
For which pairs $(n, p)$ is this variety singular?
\end{exercise}






\section{Commutative Algebra, Final Exam, Fall 2016}
\label{section-final-exam-fall-2016}

\noindent
These were the questions in the final exam of a course on
Commutative Algebra, in the Fall of 2016 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-fall-2016}
Let $R$ be a ring.
Provide definitions of the italicized concepts.
\begin{enumerate}
\item the {\it local ring of $R$ at a prime $\mathfrak p$},
\item a {\it finite} $R$-module,
\item a {\it finitely presented} $R$-module,
\item $R$ is {\it regular},
\item $R$ is {\it catenary},
\item $R$ is {\it Cohen-Macaulay}.
\end{enumerate}
\end{exercise}

\begin{exercise}[Theorems]
\label{exercise-results-fall-2016}
Precisely state a nontrivial fact discussed in the lectures related
to each item.
\begin{enumerate}
\item regular rings,
\item associated primes of Cohen-Macaulay modules,
\item dimension of a finite type domain over a field, and
\item Chevalley's theorem.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-finite-injective}
Let $A \to B$ be a ring map such that
\begin{enumerate}
\item $A$ is local with maximal ideal $\mathfrak m$,
\item $A \to B$ is a finite\footnote{Recall that this means $B$
is finite as an $A$-module.} ring map,
\item $A \to B$ is injective (we think of $A$ as a subring of $B$).
\end{enumerate}
Show that there is a prime ideal $\mathfrak q \subset B$ with
$\mathfrak m = A \cap \mathfrak q$.
\end{exercise}

\begin{exercise}
\label{exercise-find-components}
Let $k$ be a field. Let $R = k[x, y, z, w]$.
Consider the ideal $I = (xy, xz, xw)$.
What are the irreducible components of
$V(I) \subset \Spec(R)$ and what are their dimensions?
\end{exercise}

\begin{exercise}
\label{exercise-no-nonconstant-morphism}
Let $k$ be a field. Let $A = k[x, x^{-1}]$ and $B = k[y]$.
Show that any $k$-algebra map $\varphi : A \to B$ maps $x$ to a constant.
\end{exercise}

\begin{exercise}
\label{exercise-regular-over-Z}
Consider the ring $R = \mathbf{Z}[x, y]/(xy - 7)$.
Prove that $R$ is regular.
\end{exercise}

\noindent
Given a Noetherian local ring $(R, \mathfrak m, \kappa)$
for $n \geq 0$ we let
$\varphi_R(n) = \dim_\kappa(\mathfrak m^n/\mathfrak m^{n + 1})$.

\begin{exercise}
\label{exercise-hilbert-function-allowed}
Does there exist a Noetherian local ring $R$ with
$\varphi_R(n) = n + 1$ for all $n \geq 0$?
\end{exercise}

\begin{exercise}
\label{exercise-hilbert-function-prohibited}
Let $R$ be a Noetherian local ring.
Suppose that $\varphi_R(0) = 1$, $\varphi_R(1) = 3$,
$\varphi_R(2) = 5$. Show that $\varphi_R(3) \leq 7$.
\end{exercise}





\section{Schemes, Final Exam, Spring 2017}
\label{section-final-exam-spring-2017}

\noindent
These were the questions in the final exam of a course on schemes,
in the Spring of 2017 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-spring-2017}
Let $f : X \to Y$ be a morphism of schemes.
Provide brief definitions of the italicized concepts.
\begin{enumerate}
\item the {\it scheme theoretic fibre} of $f$ at $y \in Y$,
\item $f$ is a {\it finite morphism},
\item a {\it quasi-coherent} $\mathcal{O}_X$-module,
\item $X$ is {\it variety},
\item $f$ is a {\it smooth morphism},
\item $f$ is a {\it proper morphism}.
\end{enumerate}
\end{exercise}

\begin{exercise}[Theorems]
\label{exercise-results-spring-2017}
Precisely but briefly state a nontrivial fact discussed in the lectures
related to each item.
\begin{enumerate}
\item pushforward of quasi-coherent sheaves,
\item cohomology of coherent sheaves on projective varieties,
\item Serre duality for a projective scheme over a field, and
\item Riemann-Hurwitz.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-compute-degree}
Let $k$ be an algebraically closed field.
Let $\ell > 100$ be a prime number different from the
characteristic of $k$. Let $X$ be the nonsingular projective model
of the affine curve given by the equation
$$
y^\ell = x(x - 1)^3
$$
in $\mathbf{A}^2_k$. Answer the following questions:
\begin{enumerate}
\item What is the genus of $X$?
\item Give an upper bound for the
gonality\footnote{The gonality is the smallest degree of a nonconstant
morphism from $X$ to $\mathbf{P}^1_k$.} of $X$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-count-components}
Let $k$ be an algebraically closed field. Let $X$ be a reduced,
projective scheme over $k$ all of whose irreducible components
have the same dimension $1$. Let $\omega_{X/k}$ be the
relative dualizing module. Show that if
$\dim_k H^1(X, \omega_{X/k}) > 1$, then $X$ is disconnected.
\end{exercise}

\begin{exercise}
\label{exercise-sections-L-L-inverse}
Give an example of a scheme $X$ and a nontrivial invertible
$\mathcal{O}_X$-module $\mathcal{L}$ such that both
$H^0(X, \mathcal{L})$ and $H^0(X, \mathcal{L}^{\otimes -1})$
are nonzero.
\end{exercise}

\begin{exercise}
\label{exercise-in-product}
Let $k$ be an algebraically closed field. Let $g \geq 3$.
Let $X$ and $X'$ be smooth projective curves over $k$ of
genus $g$ and $g + 1$. Let $Y \subset X \times X'$
be a curve such that the projections $Y \to X$ and $Y \to X'$
are nonconstant. Prove that the nonsingular projective model
of $Y$ has genus $\geq 2g + 1$.
\end{exercise}

\begin{exercise}
\label{exercise-finitely-many}
Let $k$ be a finite field. Let $g > 1$. Sketch a proof of the following:
there are only a finite number of isomorphism classes of
smooth projective curves over $k$ of genus $g$.
(You will get credit for even just trying to answer this.)
\end{exercise}







\section{Commutative Algebra, Final Exam, Fall 2017}
\label{section-final-exam-fall-2017}

\noindent
These were the questions in the final exam of a course on commutative algebra,
in the Fall of 2017 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-fall-2017}
Provide brief definitions of the italicized concepts.
\begin{enumerate}
\item the {\it left adjoint} of a functor $F : \mathcal{A} \to \mathcal{B}$,
\item the {\it transcendence degree} of an extension $L/K$ of fields,
\item a {\it regular function} on a classical affine variety
$X \subset k^n$,
\item a {\it sheaf} on a topological space,
\item a {\it local ring}, and
\item a morphism of schemes $f : X \to Y$ being {\it affine}.
\end{enumerate}
\end{exercise}

\begin{exercise}[Theorems]
\label{exercise-results-fall-2017}
Precisely but briefly state a nontrivial fact discussed in the lectures
related to each item (if there is more than one then just pick
one of them).
\begin{enumerate}
\item Yoneda lemma,
\item Mayer-Vietoris,
\item dimension and cohomology,
\item Hilbert polynomial, and
\item duality for projective space.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-compute-dimension}
Let $k$ be an algebraically closed field. Consider the closed subset
$X$ of $k^5$ with Zariski topology and coordinates $x_1, x_2, x_3, x_4, x_5$
given by the equations
$$
x_1^2 - x_4 = 0,\quad
x_2^5 - x_5 = 0,\quad
x_3^2 + x_3 + x_4 + x_5 = 0
$$
What is the dimension of $X$ and why?
\end{exercise}

\begin{exercise}
\label{exercise-can-there-be}
Let $k$ be a field. Let $X = \mathbf{P}^1_k$ be the projective space
of dimension $1$ over $k$. Let $\mathcal{E}$ be a finite locally free
$\mathcal{O}_X$-module. For $d \in \mathbf{Z}$ denote
$\mathcal{E}(d) = \mathcal{E} \otimes_{\mathcal{O}_X} \mathcal{O}_X(d)$
the $d$th Serre twist of $\mathcal{E}$ and
$h^i(X, \mathcal{E}(d)) = \dim_k H^i(X, \mathcal{E}(d))$.
\begin{enumerate}
\item Why is there no $\mathcal{E}$ with
$h^0(X, \mathcal{E}) = 5$ and $h^0(X, \mathcal{E}(1)) = 4$?
\item Why is there no $\mathcal{E}$ with
$h^1(X, \mathcal{E}(1)) = 5$ and $h^1(X, \mathcal{E}) = 4$?
\item For which $a \in \mathbf{Z}$ can there exist a vector bundle
$\mathcal{E}$ on $X$ with
$$
\begin{matrix}
h^0(X, \mathcal{E})\phantom{(1)} = 1 &
h^1(X, \mathcal{E})\phantom{(1)} = 1 \\
h^0(X, \mathcal{E}(1)) = 2 &
h^1(X, \mathcal{E}(1)) = 0 \\
h^0(X, \mathcal{E}(2)) = 4 &
h^1(X, \mathcal{E}(2)) = a
\end{matrix}
$$
\end{enumerate}
Partial answers are welcomed and encouraged.
\end{exercise}

\begin{exercise}
\label{exercise-banana}
Let $X$ be a topological space which is the union
$X = Y \cup Z$ of two closed
subsets $Y$ and $Z$ whose intersection is denoted $W = Y \cap Z$.
Denote $i : Y \to X$, $j : Z \to X$, and $k : W \to X$ the inclusion
maps.
\begin{enumerate}
\item Show that there is a short exact sequence of sheaves
$$
0 \to \underline{\mathbf{Z}}_X \to
i_*(\underline{\mathbf{Z}}_Y) \oplus
j_*(\underline{\mathbf{Z}}_Z) \to
k_*(\underline{\mathbf{Z}}_W) \to 0
$$
where $\underline{\mathbf{Z}}_X$ denotes the constant sheaf
with value $\mathbf{Z}$ on $X$, etc.
\item What can you conclude about the relationship between the
cohomology groups of $X$, $Y$, $Z$, $W$ with $\mathbf{Z}$-coefficients?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-cohomology-infinite-punctured}
Let $k$ be a field. Let $A = k[x_1, x_2, x_3, \ldots]$ be the polynomial
ring in infinitely many variables.
Denote $\mathfrak m$ the maximal ideal of $A$ generated by
all the variables. Let $X = \Spec(A)$ and $U = X \setminus \{\mathfrak m\}$.
\begin{enumerate}
\item Show $H^1(U, \mathcal{O}_U) = 0$. Hint: {\v C}ech
cohomology computation.
\item What is your guess for $H^i(U, \mathcal{O}_U)$ for $i \geq 1$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-principal}
Let $A$ be a local ring. Let $a \in A$ be a nonzerodivisor.
Let $I, J \subset A$ be ideals such that $IJ = (a)$. Show that
the ideal $I$ is principal, i.e., generated by one element
(which will turn out to be a nonzerodivisor).
\end{exercise}



\section{Schemes, Final Exam, Spring 2018}
\label{section-final-exam-spring-2018}

\noindent
These were the questions in the final exam of a course on schemes,
in the Spring of 2018 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-spring-2018}
Provide brief definitions of the italicized concepts.
Let $k$ be an algebraically closed field.
Let $X$ be a projective curve over $k$.
\begin{enumerate}
\item a {\it smooth} algebra over $k$,
\item the {\it degree} of an invertible $\mathcal{O}_X$-module on $X$,
\item the {\it genus} of $X$,
\item the {\it Weil divisor class group} of $X$,
\item $X$ is {\it hyperelliptic}, and
\item the {\it intersection number}
of two curves on a smooth projective surface over $k$.
\end{enumerate}
\end{exercise}

\begin{exercise}[Theorems]
\label{exercise-results-spring-2018}
Precisely but briefly state a nontrivial fact discussed in the lectures
related to each item (if there is more than one then just pick
one of them).
\begin{enumerate}
\item Riemann-Hurwitz theorem,
\item Clifford's theorem,
\item factorization of maps between smooth projective surfaces,
\item Hodge index theorem, and
\item Riemann hypothesis for curves over finite fields.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-hyperelliptic}
Let $k$ be an algebraically closed field. Let $X \subset \mathbf{P}^3_k$
be a smooth curve of degree $d$ and genus $\geq 2$. Assume $X$
is not contained in a plane and that there is
a line $\ell$ in $\mathbf{P}^3_k$ meeting $X$ in $d - 2$ points.
Show that $X$ is hyperelliptic.
\end{exercise}

\begin{exercise}
\label{exercise-singular}
Let $k$ be an algebraically closed field. Let $X$ be a projective
curve with pairwise distinct singular points $p_1, \ldots, p_n$.
Explain why the genus of the normalization of $X$ is at most
$-n + \dim_k H^1(X, \mathcal{O}_X)$.
\end{exercise}

\begin{exercise}
\label{exercise-how-many-blowups}
Let $k$ be a field. Let $X = \Spec(k[x, y])$ be affine $2$ space.
Let
$$
I = (x^3, x^2y, xy^2, y^3) \subset k[x, y].
$$
Let $Y \subset X$ be the closed subscheme corresponding to $I$.
Let $b : X' \to X$ be the blowing up of the ideal $(x, y)$, i.e.,
the blow up of affine space at the origin.
\begin{enumerate}
\item Show that the scheme theoretic inverse image $b^{-1}Y \subset X'$
is an effective Cartier divisor.
\item Given an example of an ideal $J \subset k[x, y]$
with $I \subset J \subset (x, y)$ such that if $Z \subset X$
is the closed subscheme corresponding to $J$, then the scheme theoretic
inverse image $b^{-1}Z$ is not an effective Cartier divisor.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-rational-surface}
Let $k$ be an algebraically closed field. Consider the following
types of surfaces
\begin{enumerate}
\item $S = C_1 \times C_2$ where $C_1$ and $C_2$ are smooth projective curves,
\item $S = C_1 \times C_2$ where $C_1$ and $C_2$ are smooth projective curves
and the genus of $C_1$ is $> 0$,
\item $S \subset \mathbf{P}^3_k$ is a hypersurface of degree $4$, and
\item $S \subset \mathbf{P}^3_k$ is a smooth hypersurface of degree $4$.
\end{enumerate}
For each type briefly indicate why or why not the class of surfaces of
this type contains rational surfaces.
\end{exercise}

\begin{exercise}
\label{exercise-self-square-line}
Let $k$ be an algebraically closed field. Let $S \subset \mathbf{P}^3_k$
be a smooth hypersurface of degree $d$. Assume that $S$ contains a
line $\ell$. What is the self square of $\ell$ viewed as a divisor on $S$?
\end{exercise}






\section{Commutative Algebra, Final Exam, Fall 2019}
\label{section-final-exam-fall-2019}

\noindent
These were the questions in the final exam of a course on commutative algebra,
in the Fall of 2019 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-fall-2019}
Provide brief definitions of the italicized concepts.
\begin{enumerate}
\item a {\it constructible subset} of a Noetherian topological space,
\item the {\it localization} of an $R$-module $M$ at a prime $\mathfrak p$,
\item the {\it length} of a module over a Noetherian local ring
$(A, \mathfrak m, \kappa)$,
\item a {\it projective module} over a ring $R$, and
\item a {\it Cohen-Macaulay} module over a
Noetherian local ring $(A, \mathfrak m, \kappa)$.
\end{enumerate}
\end{exercise}

\begin{exercise}[Theorems]
\label{exercise-results-fall-2019}
Precisely but briefly state a nontrivial fact discussed in the lectures
related to each item (if there is more than one then just pick
one of them).
\begin{enumerate}
\item images of constructible sets,
\item Hilbert Nullstellensatz,
\item dimension of finite type algebras over fields,
\item Noether normalization, and
\item regular local rings.
\end{enumerate}
\end{exercise}

\noindent
For a ring $R$ and an ideal $I \subset R$ recall that $V(I)$
denotes the set of $\mathfrak p \in \Spec(R)$ with $I \subset \mathfrak p$.

\begin{exercise}[Making primes]
\label{exercise-infinitely-many-primes}
Construct infinitely many distinct prime ideals
$\mathfrak p \subset \mathbf{C}[x, y]$
such that $V(\mathfrak p)$ contains $(x, y)$ and $(x - 1, y - 1)$.
\end{exercise}

\begin{exercise}[No prime]
\label{exercise-no-prime}
Let $R = \mathbf{C}[x, y, z]/(xy)$. Argue briefly there does not exist
a prime ideal $\mathfrak p \subset R$ such that
$V(\mathfrak p)$ contains $(x, y - 1, z - 5)$ and $(x - 1, y, z - 7)$.
\end{exercise}

\begin{exercise}[Frobenius]
\label{exercise-frobenius}
Let $p$ be a prime number (you may assume $p = 2$ to simplify the formulas).
Let $R$ be a ring such that $p = 0$ in $R$.
\begin{enumerate}
\item Show that the map $F : R \to R$, $x \mapsto x^p$ is a ring homomorphism.
\item Show that $\Spec(F) : \Spec(R) \to \Spec(R)$ is the identity map.
\end{enumerate}
\end{exercise}

\noindent
Recall that a {\it specialization} $x \leadsto y$ of points of a topological
space simply means $y$ is in the closure of $x$. We say $x \leadsto y$ is an
{\it immediate specialization} if there does not exist a $z$ different
from $x$ and $y$ such that $x \leadsto z$ and $z \leadsto y$.

\begin{exercise}[Dimension]
\label{exercise-dimension}
Suppose we have a sober topological space $X$ containing $5$ distinct points
$x, y, z, u, v$ having the following specializations
$$
\xymatrix{
x \ar[d] \ar[r] & u & v \ar[l] \ar[dl] \\
y \ar[r] & z
}
$$
What is the minimal dimension such an $X$ can have? If $X$ is the spectrum
of a finite type algebra over a field and $x \leadsto u$ is an
immediate specialization, what can you say about the
specialization $v \leadsto z$?
\end{exercise}

\begin{exercise}[Tor computation]
\label{exercise-tor-computation}
Let $R = \mathbf{C}[x, y, z]$. Let $M = R/(x, z)$ and $N = R/(y, z)$.
For which $i \in \mathbf{Z}$ is $\text{Tor}_i^R(M, N)$ nonzero?
\end{exercise}

\begin{exercise}
\label{exercise-depth-goes-up}
Let $A \to B$ be a flat local homomorphism of local Noetherian rings.
Show that if $A$ has depth $k$, then $B$ has depth at least $k$.
\end{exercise}









\section{Algebraic Geometry, Final Exam, Spring 2020}
\label{section-final-exam-spring-2020}

\noindent
These were the questions in the final exam of a course on Algebraic Geometry,
in the Spring of 2020 at Columbia University.

\begin{exercise}[Definitions]
\label{exercise-definitions-spring-2020}
Provide brief definitions of the italicized concepts.
\begin{enumerate}
\item a {\it scheme},
\item a {\it morphism of schemes},
\item a {\it quasi-coherent module} on a scheme,
\item a {\it variety} over a field $k$,
\item a {\it curve} over a field $k$,
\item a {\it finite morphism} of schemes,
\item the {\it cohomology} of a sheaf of abelian groups $\mathcal{F}$
over a topological space $X$,
\item a {\it dualizing sheaf} on a scheme $X$ of dimension $d$
proper over a field $k$, and
\item a {\it rational map} from a variety $X$ to a variety $Y$.
\end{enumerate}
\end{exercise}

\begin{exercise}[Theorems]
\label{exercise-results-spring-2020}
Precisely but briefly state a nontrivial fact discussed in the lectures
related to each item (if there is more than one then just pick
one of them).
\begin{enumerate}
\item cohomology of abelian sheaves on a Noetherian topological space
$X$ of dimension $d$,
\item sheaf of differentials $\Omega^1_{X/k}$ of a smooth variety
over a field $k$,
\item dualizing sheaf $\omega_X$ of a smooth projective variety $X$
over the field $k$,
\item a smooth proper
genus $0$ curve over an algebraically closed field $k$, and
\item the genus of a plane curve of degree $d$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-coh-P1-infty-doubled}
Let $k$ be a field. Let $X$ be a scheme over $k$. Assume $X = X_1 \cup X_2$
is an open covering with $X_1$, $X_2$ both isomorphic to $\mathbf{P}^1_k$
and $X_1 \cap X_2$ isomorphic to $\mathbf{A}^1_k$. (Such a scheme exists,
for example you can take $\mathbf{P}^1_k$ with $\infty$ doubled.)
Show that $\dim_k H^1(X, \mathcal{O}_X)$ is infinite.
\end{exercise}

\begin{exercise}
\label{exercise-no-morphism}
Let $k$ be an algebraically closed field. Let $Y$ be a smooth projective
curve of genus $10$. Find a good lower bound for the
genus of a smooth projective
curve $X$ such that there exists a nonconstant morphism $f : X \to Y$
which is not an isomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-element-order-n-in-pic}
Let $k$ be an algebraically closed field of characteristic $0$.
Let
$$
X : T_0^d + T_1^d - T_2^d = 0 \subset \mathbf{P}^2_k
$$
be the Fermat curve of degree $d \geq 3$. Consider the closed points
$p = [1 : 0 : 1]$ and $q = [0 : 1 : 1]$ on $X$. Set $D = [p] - [q]$.
\begin{enumerate}
\item Show that $D$ is nontrivial in the Weil divisor class group.
\item Show that $d D$ is trivial in the Weil divisor class group.
(Hint: try to show that both $d[p]$ and $d[q]$ are the intersection
of $X$ with a line in the plane.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-number-equations}
Let $k$ be an algebraically closed field. Consider the $2$-uple embedding
$$
\varphi : \mathbf{P}^2 \longrightarrow \mathbf{P}^5
$$
In terms of the material/notation in the lectures this is the morphism
$$
\varphi = \varphi_{\mathcal{O}_{\mathbf{P}^2}(2)} :
\mathbf{P}^2
\longrightarrow
\mathbf{P}(\Gamma(\mathbf{P}^2, \mathcal{O}_{\mathbf{P}^2}(2)))
$$
In terms of homogeneous coordinates it is given by
$$
[a_0 : a_1 : a_2] \longmapsto
[a_0^2 : a_0a_1 : a_0a_2 : a_1^2 : a_1a_2 : a_2^2]
$$
It is a closed immersion (please just use this).
Let $I \subset k[T_0, \ldots, T_5]$ be the homogeneous ideal
of $\varphi(\mathbf{P}^2)$, i.e., the elements of the
homogeneous part $I_d$ are the
homogeneous polynomials $F(T_0, \ldots, T_5)$ of degree $d$ which
restrict to zero on the closed subscheme $\varphi(\mathbf{P}^2)$.
Compute $\dim_k I_d$ as a function of $d$.
\end{exercise}

\begin{exercise}
\label{exercise-dualizing-sheaf-rank-1}
Let $k$ be an algebraically closed field. Let $X$ be a proper scheme of
dimension $d$ over $k$ with dualizing module $\omega_X$.
You are given the following information:
\begin{enumerate}
\item $\text{Ext}^i_X(\mathcal{F}, \omega_X) \times
H^{d - i}(X, \mathcal{F}) \to H^d(X, \omega_X) \xrightarrow{t} k$
is nondegenerate for all $i$ and for all coherent $\mathcal{O}_X$-modules
$\mathcal{F}$, and
\item $\omega_X$ is finite locally free of some rank $r$.
\end{enumerate}
Show that $r = 1$. (Hint: see what happens if you take $\mathcal{F}$
a suitable module supported at a closed point.)
\end{exercise}







\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}

