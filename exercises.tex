\input{preamble}

% OK, start here.
%
\begin{document}

\title{Exercises}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

%\let\oldlabel\label
%\renewcommand{\label}[1]{%
%\oldlabel{#1}%
%\hypertarget{#1}{}%
%\marginpar{\footnotesize #1}}

\section{Algebra}
\label{section-algebra}

\noindent
This first section just contains some assorted questions.

\begin{exercise}
\label{exercise-isomorphism-localizations}
Let $A$ be a ring, and ${\mathfrak m}$ a maximal ideal. In $A[X]$
let $\tilde {\mathfrak m}_1 = ({\mathfrak m}, X)$ and
$\tilde {\mathfrak m}_2 = ({\mathfrak m}, X-1)$. Show
that
$$
A[X]_{\tilde {\mathfrak m}_1} \cong A[X]_{\tilde {\mathfrak m}_2}.
$$
\end{exercise}

\begin{exercise}
\label{exercise-coherent}
Find an example of a non Noetherian ring $R$ such that every
finitely generated ideal of $R$ is finitely presented as an $R$-module.
(A ring is said to be {\it coherent} if the last property holds.)
\end{exercise}

\begin{exercise}
\label{exercise-flat-ideals-pid}
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring. For any
finite $A$-module $M$ define $r(M)$ to be the minimum number
of generators of $M$ as an $A$-module. This number equals
$\dim_k M/{\mathfrak m} M = \dim_k M \otimes_A k$ by NAK.
\begin{enumerate}
\item Show that $r(M \otimes_A N) = r(M)r(N)$.
\item Let $I\subset A $ be an ideal with $r(I)>1$. Show that
$r(I^2) < r(I)^2$.
\item Conclude that if every ideal in $A$ is a flat module, then
$A$ is a PID (or a field).
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-not-isomorphic}
Let $k$ be a field. Show that the following pairs of
$k$-algebras are not isomorphic:
\begin{enumerate}
\item $k[x_1, \ldots, x_n]$ and $k[x_1, \ldots, x_{n + 1}]$ for any
$n\geq 1$.
\item $k[a, b, c, d, e, f]/(ab + cd + ef)$ and $k[x_1, \ldots, x_n]$
for $n = 5$.
\item $k[a, b, c, d, e, f]/(ab + cd + ef)$ and $k[x_1, \ldots, x_n]$
for $n = 6$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-simple-geometric}
Of course the idea of this exercise is to find
a simple argument in each case rather than applying a ``big'' theorem.
Nonetheless it is good to be guided by general principles.
\end{remark}

\begin{exercise}
\label{exercise-silly}
Algebra. (Silly and should be easy.)
\begin{enumerate}
\item Give an example of a ring $A$ and a nonsplit
short exact sequence of $A$-modules
$$
0 \to M_1 \to M_2 \to M_3 \to 0.
$$
\item Give an example of a nonsplit sequence of $A$-modules
as above and a faithfully flat $A \to B$ such that
$$
0 \to M_1\otimes_A B \to M_2\otimes_A B \to M_3\otimes_A B \to 0.
$$
is split as a sequence of $B$-modules.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-field-kummer}
Suppose that $k$ is a field having a primitive $n$th root
of unity $\zeta$. This means that $\zeta^n = 1$, but $\zeta^m\not = 1$ for
$0<m<n$.
\begin{enumerate}
\item Show that the characteristic of $k$ is prime to $n$.
\item Suppose that $a \in k$ is an element of $k$ which is not
an $d$th power in $k$ for any divisor $d$ of $n$, $in\geq d>1$. Show that
$k[x]/(x^n-a)$ is a field. (Hint: Consider a splitting field for
$x^n-a$ and use Galois theory.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-valuation}
Let $\nu : k[x]\setminus \{0\}  \to {\mathbf Z}$ be a map
with the following properties: $\nu(fg) = \nu(f) + \nu(g)$ whenever
$f$, $g$ not zero, and  $\nu(f + g) \geq min(\nu(f), \nu(g))$ whenever
$f$, $g$, $f + g$ are not zero, and $\nu(c) = 0$ for all $c\in k^*$.
\begin{enumerate}
\item Show that if $f$, $g$, and $f + g$ are nonzero and
$\nu(f) \not= \nu(g)$ then we have equality $\nu(f + g) = min(\nu(f), \nu(g))$.
\item Show that if $f = \sum a_i x^i$, $f\not = 0$, then
$\nu(f) \geq min(\{i\nu(x)\}_{a_i\not = 0})$. When does equality hold?
\item Show that if $\nu$ attains a negative value then
$\nu(f) = -n \deg(f)$ for some $n\in {\mathbf N}$.
\item Suppose $\nu(x) \geq 0$. Show that
$\{f \mid f = 0, \ or\ \nu(f) > 0\}$ is a prime ideal of $k[x]$.
\item Describe all possible $\nu$.
\end{enumerate}
\end{exercise}


\noindent
Let $A$ be a ring. An {\it idempotent} is an element $e \in A$
such that $e^2 = e$. The elements $1$ and $0$ are always idempotent.
A {\it nontrivial idempotent} is an idempotent which is not
equal to zero. Two idempotents $e, e' \in A$ are called {\it orthogonal}
if $ee' = 0$.

\begin{exercise}
\label{exercise-product}
Let $A$ be a ring. Show that $A$ is a product of two nonzero rings if
and only if $A$ has a nontrivial idempotent.
\end{exercise}

\begin{exercise}
\label{exercise-lift-idempotents}
Let $A$ be a ring and let $I \subset A$ be a locally nilpotent ideal.
Show that the map $A \to A/I$ induces a bijection on idempotents.
(Hint: It may be easier to prove this when $I$ is nilpotent. Do this first.
Then use ``absolute Noetherian reduction'' to reduce to the nilpotent case.)
\end{exercise}








\section{Colimits}
\label{section-colimits}


\begin{definition}
\label{definition-directed-poset}
A {\it directed partially ordered set} is a nonempty set $I$ endowed
with a partial ordering $\leq$ such that given any pair $i, j \in I$
there exists a $k \in I$ such that $i \leq k$ and $j \leq k$. A
{\it system of rings} over $I$ is given by a ring $A_i$ for each $i \in I$
and a map of rings $\varphi_{ij} : A_i \to A_j$ whenever $i \leq j$ such that
the composition $A_i \to A_j \to A_k$ is equal to
$A_i \to A_k$ whenever $i \leq j \leq k$.
\end{definition}

\noindent
One similarly defines systems of groups, modules over a fixed ring,
vector spaces over a field, etc.

\begin{exercise}
\label{exercise-directed-colimit}
Let $I$ be a directed partially ordered set and let
$(A_i, \varphi_{ij})$ be a system of rings over $I$.
Show that there exists a ring $A$ and maps $\varphi_i : A_i \to A$
such that $\varphi_j \circ \varphi_{ij} = \varphi_i$ for all $i \leq j$
with the following universal property: Given any ring $B$
and maps $\psi_i : A_i \to B$ such that
$\psi_j \circ \varphi_{ij} = \psi_i$ for all $i \leq j$, then
there exists a unique ring map $\psi : A \to B$ such that
$\psi_i = \psi \circ \varphi_i$.
\end{exercise}

\begin{definition}
\label{definition-colimit}
The ring $A$ constructed in Exercise \ref{exercise-directed-colimit}
is called the {\it colimit} of the system. Notation $\colim A_i$.
\end{definition}

\begin{exercise}
\label{exercise-prime-in-colimit}
Let $(I, \geq)$ be a directed partially ordered set and let
$(A_i, \varphi_{ij})$ be a system of rings over $I$ with colimit
$A$. Prove that there is a bijection
$$
\text{Spec}(A) = \{(\mathfrak p_i)_{i \in I} \mid\
\mathfrak p_i \subset A_i \text{ and }
\mathfrak p_i = \varphi_{ij}^{-1}(\mathfrak p_j)\ \forall i \leq j\}
\subset \prod\nolimits_{i \in I} \Spec(A_i)
$$
The set on the right hand side is the limit of the sets
$\Spec(A_i)$. Notation $\lim \Spec(A_i)$.
\end{exercise}

\begin{exercise}
\label{exercise-colimit-surjective}
Let $(I, \geq)$ be a directed partially ordered set and let
$(A_i, \varphi_{ij})$ be a system of rings over $I$ with colimit
$A$. Suppose that $\text{Spec}(A_j) \to \text{Spec}(A_i)$ is
surjective for all $i \leq j$. Show that
$\text{Spec}(A) \to \text{Spec}(A_i)$ is surjective for all $i$.
(Hint: You can try to use Tychonoff, but there is also a basically trivial
direct algebraic proof based on
Algebra, Lemma \ref{algebra-lemma-in-image}.)
\end{exercise}

\begin{exercise}
\label{exercise-integral-colimit-finite}
Let $A \subset B$ be an integral ring extension. Prove that
$\text{Spec}(B) \to \text{Spec}(A)$ is surjective.
Use the exercises above, the fact that this holds for a finite ring
extension (proved in the lectures), and by proving that
$B = \colim B_i$ is a directed colimit of finite extensions $A \subset B_i$.
\end{exercise}

\begin{exercise}
\label{exercise-colimit-tensor}
Let $(I, \geq)$ be a partially ordered set which is directed.
Let $A$ be a ring and let $(N_i, \varphi_{i, i'})$ be a directed system of
$A$-modules indexed by $I$. Suppose that $M$ is another $A$-module. Prove
that
$$
\colim_{i\in I} M \otimes_A N_i\cong
M \otimes_A \Big( \colim_{i\in I} N_i\Big).
$$
\end{exercise}

\begin{definition}
\label{definition-finite-presentation}
A module $M$ over $R$ is said to be of {\it finite presentation} over
$R$ if it  is isomorphic to the cokernel of a map of finite free modules
$ R^{\oplus n} \to R^{\oplus m}$.
\end{definition}

\begin{exercise}
\label{exercise-colimit-modules}
Prove that any module over any ring is
\begin{enumerate}
\item the colimit of its finitely generated submodules, and
\item in some way a colimit of finitely presented modules.
\end{enumerate}
\end{exercise}





\section{Additive and abelian categories}
\label{section-additive}

\begin{exercise}
\label{exercise-filtered-vector-spaces}
Let $k$ be a field. Let $\mathcal{C}$ be the category of filtered vector
spaces over $k$, see
Homology, Definition \ref{homology-definition-filtered}
for the definition of a filtered object of any category.
\begin{enumerate}
\item Show that this is an additive category (explain carefully what the
direct sum of two objects is).
\item Let $f : (V, F) \to (W, F)$ be a morphism of $\mathcal{C}$.
Show that $f$ has a kernel and cokernel (explain precisely
what the kernel and cokernel of $f$ are).
\item Give an example of a map of $\mathcal{C}$ such that
the canonical map $\text{Coim}(f) \to \text{Im}(f)$ is not an isomorphism.\
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-torsion-free}
Let $R$ be a Noetherian domain. Let $\mathcal{C}$ be the category of
finitely generated torsion free $R$-modules.
\begin{enumerate}
\item Show that this is an additive category.
\item Let $f : N \to M$ be a morphism of $\mathcal{C}$.
Show that $f$ has a kernel and cokernel (make sure you define precisely
what the kernel and cokernel of $f$ are).
\item Give an example of a Noetherian domain $R$ and a map of
$\mathcal{C}$ such that the canonical map $\text{Coim}(f) \to \text{Im}(f)$
is not an isomorphism.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-other}
Give an example of a category which is additive and has kernels
and cokernels but which is not as in
Exercises \ref{exercise-filtered-vector-spaces} and
\ref{exercise-torsion-free}.
\end{exercise}






\section{Flat ring maps}
\label{section-flat}

\begin{exercise}
\label{exercise-localization-flat}
Let $S$ be a multiplicative subset of the ring $A$.
\begin{enumerate}
\item For an $A$-module $M$ show that $S^{-1}M = S^{-1}A \otimes_A M$.
\item Show that $S^{-1}A$ is flat over $A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-examples-not-flat}
Find an injection $M_1 \to M_2$ of $A$-modules such that
$M_1\otimes N \to M_2 \otimes N$ is not injective in the following
cases:
\begin{enumerate}
\item $A = k[x, y]$ and $N = (x, y) \subset A$. (Here and below $k$ is a field.)
\item $A = k[x, y]$ and $N = A/(x, y)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-flat-not-projective}
Give an example of a ring $A$ and a finite $A$-module $M$
which is a flat but not a projective $A$-module.
\end{exercise}

\begin{remark}
\label{remark-flat-not-projective}
If $M$ is of finite presentation and flat over $A$,
then $M$ is projective over $A$. Thus your example will have to
involve a ring $A$ which is not Noetherian. I know of an example
where $A$ is the ring of ${\mathcal C}^\infty$-functions on ${\mathbf R}$.
\end{remark}

\begin{exercise}
\label{exercise-flat-not-free-dvr}
Find a flat but not free module over ${\mathbf Z}_{(2)}$.
\end{exercise}

\begin{exercise}
\label{exercise-flat-deformations}
Flat deformations.
\begin{enumerate}
\item Suppose that $k$ is a field and $k[\epsilon]$ is the ring of
dual numbers $k[\epsilon] = k[x]/(x^2)$ and $\epsilon = \bar x$. Show that for
any $k$-algebra $A$ there is a flat $k[\epsilon]$-algebra $B$ such that
$A$ is isomorphic to $B/\epsilon B$.
\item Suppose that $k = {\mathbf F}_p = {\mathbf Z}/p{\mathbf Z}$ and
$$
A = k[x_1, x_2, x_3, x_4, x_5, x_6]/
(x_1^p, x_2^p, x_3^p, x_4^p, x_5^p, x_6^p).
$$
Show that there exists a flat ${\mathbf Z}/p^2{\mathbf Z}$-algebra $B$ such
that $B/pB$ is isomorphic to $A$. (So here $p$ plays the role of $\epsilon$.)
\item Now let $p = 2$ and consider the same question for
$k = {\mathbf F}_2 = {\mathbf Z}/2{\mathbf Z}$ and
$$
A = k[x_1, x_2, x_3, x_4, x_5, x_6]/
(x_1^2, x_2^2, x_3^2, x_4^2, x_5^2, x_6^2, x_1x_2 + x_3x_4 + x_5x_6).
$$
However, in this case show that there does {\it not} exist a flat
${\mathbf Z}/4{\mathbf Z}$-algebra $B$ such that $B/2B$ is isomorphic to
$A$. (Find the trick! The same example works in arbitrary characteristic
$p>0$, except that the computation is more difficult.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-flat-given-residue-field-extension}
Let $(A, {\mathfrak m}, k)$ be a local ring and let $k \subset k'$ be
a finite field extension. Show there exists a flat, local map of
local rings $A \to B$ such that ${\mathfrak m}_B = {\mathfrak m} B$ and
$B/{\mathfrak m} B$ is
isomorphic to $k'$ as $k$-algebra. (Hint: first do the case where
$k \subset k'$ is generated by a single element.)
\end{exercise}

\begin{remark}
\label{remark-flat-given-residue-field-extension-general}
The same result holds for arbitrary field extensions $k \subset K$.
\end{remark}










\section{The Spectrum of a ring}
\label{section-spectrum-ring}

\begin{exercise}
\label{exercise-spec-Z}
Compute $\Spec(\mathbf{Z})$ as a set and describe its topology.
\end{exercise}

\begin{exercise}
\label{exercise-basis-opens-standard}
Let $A$ be any ring. For $f\in A$ we define
$D(f):= \{\mathfrak p \subset A \mid f \not \in \mathfrak p\}$.
Prove that the open subsets $D(f)$ form a basis of the topology of
$\Spec(A)$.
\end{exercise}

\begin{exercise}
\label{exercise-radical-ideals-closed}
Prove that the map $I\mapsto V(I)$
defines a natural bijection
$$
\{\hbox{$I\subset A$ with $I = \sqrt{I}$}\}
\longrightarrow
\{\hbox{$T\subset \Spec(A)$ closed}\}
$$
\end{exercise}

\begin{definition}
\label{definition-quasi-compact}
A topological space $X$ is called {\it quasi-compact}
if for any open covering $X = \bigcup_{i\in I} U_i$ there is a finite
subset $\{i_1, \ldots, i_n\}\subset I$ such that $X = U_{i_1}\cup\ldots
U_{i_n}$.
\end{definition}

\begin{exercise}
\label{exercise-spec-quasi-compact}
Prove that $\Spec(A)$ is quasi-compact for any ring $A$.
\end{exercise}

\begin{definition}
\label{definition-Hausdorff}
A topological space $X$ is said to verify the separation axiom $T_0$
if for any pair of points $x, y\in X$, $x\not = y$ there is an open
subset of $X$ containing one but not the other.
We say that $X$ is {\it Hausdorff} if for any pair $x, y\in X$, $x\not = y$
there are disjoint open subsets $U, V$ such that $x\in U$
and $y\in V$.
\end{definition}

\begin{exercise}
\label{exercise-not-hausdorff}
Show that $\Spec(A)$ is {\bf not} Hausdorff in general.
Prove that $\Spec(A)$ is $T_0$. Give an example of a topological
space $X$ that is not $T_0$.
\end{exercise}

\begin{remark}
\label{remark-not-hausdorff}
Usually the word compact is reserved for quasi-compact and
Hausdorff spaces.
\end{remark}

\begin{definition}
\label{definition-irreducible}
A topological space $X$ is called {\it irreducible} if $X$ is not empty
and if $X = Z_1\cup Z_2$ with $Z_1, Z_2\subset X$ closed, then either
$Z_1 = X$ or $Z_2 = X$. A subset $T\subset X$ of a topological space
is called {\it irreducible} if it is an irreducible
topological space with the topology induced from $X$.
This definition implies $T$ is irreducible if and only
if the closure $\bar T$ of $T$ in $X$ is irreducible.
\end{definition}

\begin{exercise}
\label{exercise-irreducible-spec}
Prove that $\Spec(A)$ is irreducible if and only if
$Nil(A)$ is a prime ideal and that in this case it is the unique
minimal prime ideal of $A$.
\end{exercise}

\begin{exercise}
\label{exercise-irreducible-prime}
Prove that a closed subset $T\subset \Spec(A)$
is irreducible if and only if it is of the form $T = V({\mathfrak p})$ for
some prime ideal ${\mathfrak p}\subset A$.
\end{exercise}

\begin{definition}
\label{definition-generic-point}
A point $x$ of an irreducible topological space $X$ is called
a {\it generic point} of $X$ if $X$ is equal to the closure of
the subset $\{x\}$.
\end{definition}

\begin{exercise}
\label{exercise-irreducible-T0-at-most-one-generic}
Show that in a $T_0$ space $X$ every irreducible closed
subset has at most one generic point.
\end{exercise}

\begin{exercise}
\label{exercise-spec-sober}
Prove that in $\Spec(A)$ every
irreducible closed subset {\it does} have a generic point.
In fact show that the map
${\mathfrak p} \mapsto \overline{\{{\mathfrak p}\}}$ is
a bijection of $\Spec(A)$ with the set of irreducible closed
subsets of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-irreducible-subset-not-generic}
Give an example to show that an irreducible
subset of $\Spec(\mathbf{Z})$ does not neccesarily have a generic point.
\end{exercise}

\begin{definition}
\label{definition-Noetherian-space}
A topological space $X$ is called {\it Noetherian} if any
decreasing sequence $Z_1\supset Z_2 \supset Z_3\supset \ldots$
of closed subsets of $X$ stabilizes.
(It is called {\it Artinian} if any increasing sequence of closed
subsets stabilizes.)
\end{definition}

\begin{exercise}
\label{exercise-Noetherian-spec}
Show that if the ring $A$ is Noetherian then
the topological space $\Spec(A)$ is Noetherian. Give an
example to show that the converse is false. (The same for
Artinian if you like.)
\end{exercise}

\begin{definition}
\label{definition-irreducible-component}
A maximal irreducible subset $T\subset X$ is called an
{\it irreducible component} of the space $X$. Such an irreducible
component of $X$ is automatically a closed subset of $X$.
\end{definition}

\begin{exercise}
\label{exercise-irreducible-in-irreducible}
Prove that any irreducible subset
of $X$ is contained in an irreducible component of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-Noetherian-finite-nr-irreducible}
Prove that a Noetherian topological space $X$
has only finitely many irreducible components, say $X_1, \ldots, X_n$,
and that $X = X_1\cup X_2\cup\ldots\cup X_n$. (Note that
any $X$ is always the union of its irreducible components, but that
if $X = {\mathbf R}$ with its usual topology for instance then the irreducible
components of $X$ are the one point subsets. This is not
terribly interesting.)
\end{exercise}

\begin{exercise}
\label{exercise-irreducible-components-minimal-primes}
Show that irreducible components of $\Spec(A)$
correspond to minimal primes of $A$.
\end{exercise}

\begin{definition}
\label{definition-closed}
A point $x\in X$ is called {\it closed} if $\overline{\{x\}} = \{ x\}$.
Let $x, y$ be points of $X$. We say that $x$ is a {\it specialization}
of $y$, or that $y$ is a {\it generalization} of $x$ if
$x\in \overline{\{y\}}$.
\end{definition}

\begin{exercise}
\label{exercise-closed-maximal}
Show that closed points of $\Spec(A)$
correspond to maximal ideals of $A$.
\end{exercise}

\begin{exercise}
\label{exercise-generalization}
Show that ${\mathfrak p}$ is a generalization of ${\mathfrak q}$
in $\Spec(A)$ if and only if ${\mathfrak p}\subset {\mathfrak q}$.
Characterize closed points,
maximal ideals, generic points and minimal prime ideals in terms of
generalization and specialization. (Here we use the terminology that a point
of a possibly reducible topological space $X$ is called a generic point
if it is a generic points of one of the irreducible components of $X$.)
\end{exercise}

\begin{exercise}
\label{exercise-disjoint-closed-spec}
Let $I$ and $J$ be ideals of $A$.
What is the condition for $V(I)$ and $V(J)$ to be disjoint?
\end{exercise}

\begin{definition}
\label{definition-connected-component}
A topological space $X$ is called {\it connected} if it is not the union
of two nonempty disjoint open subsets. A {\it connected component}
of $X$ is a (nonempty) maximal connected subset. Any point of $X$ is contained
in a connected component of $X$ and any connected component of $X$ is
closed in $X$. (But in general a connected component need not be open in $X$.)
\end{definition}

\begin{exercise}
\label{exercise-disconnnected-spec}
Show that $\Spec(A)$ is disconnected
iff $A\cong B \times C$ for certain nonzero rings $B, C$.
\end{exercise}

\begin{exercise}
\label{exercise-connected-component-stable-generalization}
Let $T$ be a connected component
of $\Spec(A)$. Prove that $T$ is stable under generalization.
Prove that $T$ is an open subset of $\Spec(A)$ if $A$ is Noetherian.
(Remark: This is wrong when $A$ is an infinite product of copies of
${\mathbf F}_2$ for example. The spectrum of this ring consists of infinitely
many closed points.)
\end{exercise}

\begin{exercise}
\label{exercise-primes-kx}
Compute $\Spec(k[x])$, i.e., describe
the prime ideals in this ring, describe the possible specializations, and
describe the topology. (Work this out when $k$ is algebraically closed but
also when $k$ is not.)
\end{exercise}

\begin{exercise}
\label{exercise-primes-kxy}
 Compute $\Spec(k[x, y])$, where $k$ is algebraically
closed.
[Hint: use the morphism
$\varphi: \Spec(k[x, y]) \to \Spec(k[x])$; if
$\varphi({\mathfrak p}) = (0)$ then localize with respect to
$S = \{f\in k[x] \mid f \not = 0\}$ and use result of lecture
on localization and $\Spec$.]
(Why do you think algebraic geometers call this affine 2-space?)
\end{exercise}

\begin{exercise}
\label{exercise-primes-Zy}
Compute $\Spec(\mathbf{Z}[y])$.
[Hint: as above.] (Affine 1-space over $\mathbf{Z}$.)
\end{exercise}






\section{Localization}
\label{section-localization}


\begin{exercise}
\label{exercise-submodule-localization}
Let $A$ be a ring. Let $S \subset A$ be a multiplicative subset.
Let $M$ be an $A$-module. Let $N \subset S^{-1}M$ be an $S^{-1}A$-submodule.
Show that there exists an $A$-submodule $N' \subset M$ such that
$N = S^{-1}N'$. (This useful result applies in particular to ideals
of $S^{-1}A$.)
\end{exercise}

\begin{exercise}
\label{exercise-localize-zero}
Let $A$ be a ring. Let $M$ be an $A$-module. Let $m \in M$.
\begin{enumerate}
\item Show that $I = \{a \in A \mid am = 0\}$ is an ideal of $A$.
\item For a prime $\mathfrak p$ of $A$ show that the image of $m$
in $M_\mathfrak p$ is zero if and only if $I \not \subset \mathfrak p$.
\item Show that $m$ is zero if and only if the image of $m$ is zero
in $M_\mathfrak p$ for all primes $\mathfrak p$ of $A$.
\item Show that $m$ is zero if and only if the image of $m$ is zero
in $M_\mathfrak m$ for all maximal ideals $\mathfrak m$ of $A$.
\item Show that $M = 0$ if and only if $M_{\mathfrak m}$ is zero
for all maximal ideals $\mathfrak m$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-localization-is-field}
Find a pair $(A, f)$ where $A$ is a domain with three or more pairwise
distinct primes and $f \in A$ is an element such that the principal
localization $A_f = \{1, f, f^2, \ldots \}^{-1}A$ is a field.
\end{exercise}

\begin{exercise}
\label{exercise-localize-finite-module-zero}
Let $A$ be a ring. Let $M$ be a finite $A$-module. Let $S \subset A$
be a multiplicative set. Assume that $S^{-1}M = 0$. Show that there
exists an $f \in S$ such that the principal localization
$M_f = \{1, f, f^2, \ldots \}^{-1}M$ is zero.
\end{exercise}

\begin{exercise}
\label{exercise-localization-is-quotient}
Give an example of a triple $(A, I, S)$ where $A$ is a ring,
$0 \not = I \not = A$ is a proper nonzero ideal, and $S \subset A$
is a multiplicative subset
such that $A/I \cong S^{-1}A$ as $A$-algebras.
\end{exercise}




\section{Nakayama's Lemma}
\label{section-nakayama}

\begin{exercise}
\label{exercise-nakayama}
Let $A$ be a ring.
Let $I$ be an ideal of $A$.
Let $M$ be an $A$-module.
Let $x_1, \ldots, x_n \in M$.
Assume that
\begin{enumerate}
\item $M/IM$ is generated by $x_1, \ldots, x_n$,
\item $M$ is a finite $A$-module,
\item $I$ is contained in every maximal ideal of $A$.
\end{enumerate}
Show that $x_1, \ldots, x_n$ generate $M$. (Suggested solution:
Reduce to a localization at a maximal ideal of $A$ using
Exercise \ref{exercise-localize-zero} and exactness of localization.
Then reduce to the statement of Nakayama's lemma in the lectures
by looking at the quotient of $M$ by the submodule generated by
$x_1, \ldots, x_n$.)
\end{exercise}






\section{Length}
\label{section-length}

\begin{definition}
\label{definition-length}
Let $A$ be a ring. Let $M$ be an $A$-module. The
{\it length} of $M$ as an $R$-module is
$$
\text{length}_A(M)
=
\sup
\{
n
\mid
\exists\ 0 = M_0 \subset M_1 \subset \ldots \subset M_n = M,
\text{ }M_i \not= M_{i + 1}
\}.
$$
In other words, the supremum of the lengths of chains of submodules.
\end{definition}

\begin{exercise}
\label{exercise-length-is-one}
Show that a module $M$ over a ring $A$ has length $1$ if and only if
it is isomorphic to $A/\mathfrak m$ for some maximal ideal $\mathfrak m$
in $A$.
\end{exercise}

\begin{exercise}
\label{exercise-length-easy}
Compute the length of the following modules over the following rings.
Briefly(!) explain your answer. (Please feel free to use additivity of
the length function in short exact sequences, see
Algebra, Lemma \ref{algebra-lemma-length-additive}).
\begin{enumerate}
\item The length of $\mathbf{Z}/120\mathbf{Z}$ over $\mathbf{Z}$.
\item The length of $\mathbf{C}[x]/(x^{100} + x + 1)$ over $\mathbf{C}[x]$.
\item The length of $\mathbf{R}[x]/(x^4 + 2x^2 + 1)$ over $\mathbf{R}[x]$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-compute-length}
Let $A = k[x, y]_{(x, y)}$ be the local ring of the affine plane at
the origin. Make any assumption you like about the field $k$. Suppose
that $f = x^3 + x^2y^2 + y^{100}$ and $g = y^3 - x^{999}$. What is the length
of $A/(f, g)$ as an $A$-module? (Possible way to proceed: think about the
ideal that $f$ and $g$ generate in quotients of the form $A/{\mathfrak m}_A^n=
k[x, y]/(x, y)^n$ for varying $n$. Try to find $n$ such that
$A/(f, g)+{\mathfrak m}_A^n \cong A/(f, g)+{\mathfrak m}_A^{n + 1}$
and use NAK.)
\end{exercise}



\section{Singularities}
\label{section-singularities}

\begin{exercise}
\label{exercise-singularities}
Let $k$ be any field. Suppose that $A = k[[x, y]]/(f)$ and
$B = k[[u, v]]/(g)$, where $f = xy$ and $g = uv + \delta$ with
$\delta \in (u, v)^3$. Show that $A$ and $B$ are isomorphic rings.
\end{exercise}

\begin{remark}
\label{remark-singularities}
A singularity on a curve over a field $k$ is called an
ordinary double point if the complete local ring of the curve at the
point is of the form $k'[[x, y]]/(f)$, where (a) $k'$ is a finite separable
extension of $k$, (b) the initial term of $f$ has degree two, i.e., it
looks like $q = ax^2 + bxy + cy^2$ for some $a, b, c\in k'$ not all zero, and
(c) $q$ is a nondegenerate quadratic form over $k'$ (in char 2 this means that
$b$ is not zero). In general there is one isomorphism class of such rings for
each isomophism class of pairs $(k', q)$.
\end{remark}






\section{Hilbert Nullstellensatz}
\label{section-Hilbert-Nullstellensatz}


\begin{exercise}
\label{exercise-uncountable}
{\it A silly argument using the complex numbers!}
Let ${\mathbf C}$ be the complex number field. Let $V$ be a vector
space over ${\mathbf C}$. The spectrum of a linear operator
$T : V \to V$ is the set of complex numbers $\lambda \in {\mathbf C}$
such that the operator $T - \lambda \text{id}_V$ is not invertible.
\begin{enumerate}
\item Show that ${\mathbf C}(X) = f.f.({\mathbf C}[X])$
has uncountable dimension over ${\mathbf C}$.
\item Show that any linear operator on $V$ has a
nonempty spectrum if the dimension of $V$ is finite or
countable.
\item Show that if a finitely generated ${\mathbf C}$-algebra
$R$ is a field, then the map ${\mathbf C}\to R$ is an isomorphism.
\item Show that any maximal ideal ${\mathfrak m}$ of
${\mathbf C}[x_1, \ldots, x_n]$ is of the form
$(x_1-\alpha_1, \ldots, x_n-\alpha_n)$ for some $\alpha_i \in {\mathbf C}$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-HNSS}
Let $k$ be a field. Then for every integer $n\in {\mathbf N}$ and
every maximal ideal ${\mathfrak m} \subset k[x_1, \ldots, x_n]$
the quotient $k[x_1, \ldots, x_n]/{\mathfrak m}$ is a finite field
extension of $k$. This will be shown later in the course. Of course
(please check this) it implies a similar statement for maximal ideals
of finitely generated $k$-algebras. The exercise above proves
it in the case $k = {\mathbf C}$.
\end{remark}

\begin{exercise}
\label{exercise-Hilbert-Nullstellensatz}
Let $k$ be a field. Please use Remark \ref{remark-HNSS}.
\begin{enumerate}
\item Let $R$ be a $k$-algebra. Suppose that $\dim_k R < \infty$
and that $R$ is a domain. Show that $R$ is a field.
\item Suppose that $R$ is a finitely generated $k$-algebra, and
$f\in R$ not nilpotent. Show that there exists a maximal ideal
${\mathfrak m} \subset R$ with $f\not\in {\mathfrak m}$.
\item Show by an example that this statement fails when $R$
is not of finite type over a field.
\item Show that any radical ideal $I \subset {\mathbf C}[x_1, \ldots, x_n]$
is the intersection of the maximal ideals containing it.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-Hilbert-Nullstellensatz}
This is the Hilbert Nullstellensatz. Namely it says
that the closed subsets of $\Spec(k[x_1, \ldots, x_n])$
(which correspond to radical ideals by a previous exercise)
are determined by the closed points contained in them.
\end{remark}

\begin{exercise}
\label{exercise-product-matrices-ring}
Let $A =
{\mathbf C}[x_{11}, x_{12}, x_{21}, x_{22}, y_{11}, y_{12}, y_{21}, y_{22}]$.
Let $I$ be the ideal of $A$ generated by the entries of the
matrix $XY$, with
$$
X = \left(
\begin{matrix}
x_{11} & x_{12}\\
x_{21} & x_{22}
\end{matrix}
\right)
\quad \hbox{and} \quad
Y = \left(
\begin{matrix}
y_{11} & y_{12}\\
y_{21} & y_{22}
\end{matrix}
\right).
$$
Find the irreducible components of the closed subset $V(I)$ of
$\Spec(A)$.
(I mean describe them and give equations for each of them. You do not have
to prove that the equations you write down define prime ideals.) Hints:
\begin{enumerate}
\item You may use the Hilbert Nullstellensatz, and it suffices to find
irreducible locally closed subsets which cover the set of closed points of
$V(I)$.
\item There are two easy components.
\item An image of an irreducible set under a continuous map is
irreducible.
\end{enumerate}
\end{exercise}




\section{Dimension}
\label{section-dimension}

\begin{exercise}
\label{exercise-dimension-bigger-one-finite-nr-primes}
Construct a ring $A$ with finitely many prime ideals having dimension $> 1$.
\end{exercise}

\begin{exercise}
\label{exercise-hypersurface-in-A2-dimension-one}
Let $f \in \mathbf{C}[x, y]$ be a nonconstant polynomial.
Show that $\mathbf{C}[x, y]/(f)$ has dimension $1$.
\end{exercise}

\begin{exercise}
\label{exercise-dimension-polynomial-ring}
Let $(R, \mathfrak m)$ be a Noetherian local ring.
Let $n \geq 1$. Let $\mathfrak m' = (\mathfrak m, x_1, \ldots, x_n)$
in the polynomial ring $R[x_1, \ldots, x_n]$.
Show that
$$
\dim(R[x_1, \ldots, x_n]_{\mathfrak m'}) = \dim(R) + n.
$$
\end{exercise}





\section{Catenary rings}
\label{section-catenary}

\begin{definition}
\label{definition-catenary}
A Noetherian ring $A$ is said to be {\it catenary}
if for any triple of prime ideals
${\mathfrak p}_1 \subset {\mathfrak p}_2 \subset {\mathfrak p}_3$
we have
$$
ht({\mathfrak p}_3 / {\mathfrak p}_1) = ht({\mathfrak p}_3/{\mathfrak p}_2) +
ht({\mathfrak p}_2/{\mathfrak p}_1).
$$
Here $ht(\mathfrak p/\mathfrak q)$ means the height of
$\mathfrak p/\mathfrak q$ in the ring $A/\mathfrak q$.
\end{definition}

\begin{exercise}
\label{exercise-Noetherian-local-domain-dim-2-catenary}
Show that a Noetherian local domain of dimension $2$ is catenary.
\end{exercise}

\begin{exercise}
\label{exercise-finite-type-over-field-catenary}
Let $k$ be a field.
Show that a finite type $k$-algebra is catenary.
\end{exercise}




\section{Fraction fields}
\label{section-fraction-fields}

\begin{exercise}
\label{exercise-find-fraction-field}
Consider the domain
$$
{\mathbf Q}[r, s, t]/(s^2-(r-1)(r-2)(r-3), t^2-(r + 1)(r + 2)(r + 3)).
$$
Find a domain of the form ${\mathbf Q}[x, y]/(f)$ with isomorphic
field of fractions.
\end{exercise}



\section{Transcendence degree}
\label{section-transcendence}

\begin{exercise}
\label{exercise-algebraic-extension}
Let $k \subset K \subset K'$ be field extensions with $K'$
algebraic over $K$. Prove that $\text{trdeg}_k(K) = \text{trdeg}_k(K')$.
(Hint: Show that if $x_1, \ldots, x_d \in K$ are algebraically independent
over $k$ and $d < \text{trdeg}_k(K')$ then $k(x_1, \dots, x_d) \subset K$
cannot be algebraic.)
\end{exercise}






\section{Finite locally free modules}
\label{section-finite-locally-free}

\begin{definition}
\label{definition-finite-locally-free}
Let $A$ be a ring. Recall that a {\it finite locally free} $A$-module
$M$ is a module such that for every ${\mathfrak p} \in \Spec(A)$
there exists an
$f\in A$, $f \not \in {\mathfrak p}$ such that $M_f$ is a finite free
$A_f$-module. We say $M$ is an {\it invertible module} if
$M$ is finite locally free of rank $1$, i.e., for every
${\mathfrak p} \in \Spec(A)$ there exists an
$f\in A$, $f \not \in \mathfrak p$ such that $M_f \cong A_f$
as an $A_f$-module.
\end{definition}

\begin{exercise}
\label{exercise-tensor-finite-locally-free}
Prove that the tensor product of finite locally free modules
is finite locally free. Prove that the tensor product of two
invertible modules is invertible.
\end{exercise}

\begin{definition}
\label{definition-class-group}
Let $A$ be a ring. The {\it class group of $A$}, sometimes called
the {\it Picard group of $A$} is the set $\text{Pic}(A)$
of isomomorphism classes of invertible $A$-modules endowed with
a group operation defined by tensor product (see
Exercise \ref{exercise-tensor-finite-locally-free}).
\end{definition}

\noindent
Note that the class group of $A$ is trivial exactly when every invertible
module is isomorphic to a free module of rank 1.

\begin{exercise}
\label{exercise-class-group-trivial}
Show that the class groups of the following rings are trivial
\begin{enumerate}
\item a polynomial ring $A = k[x]$ where $k$ is a field,
\item the integers $A = \mathbf{Z}$,
\item a polynomial ring $A = k[x, y]$ where $k$ is a field, and
\item the quotient $k[x, y]/(xy)$ where $k$ is a field.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-class-group-not-trivial}
Show that the class group of the the ring
$A = k[x, y]/(y^2 - f(x))$ where $k$ is a field of characteristic not $2$
and where $f(x) = (x - t_1) \ldots (x - t_n)$ with $t_1, \ldots, t_n \in k$
distinct and $n \geq 3$ an odd integer is not trivial. (Hint: Show that the
ideal $(y, x - t_1)$ defines a nontrivial element of $\text{Pic}(A)$.)
\end{exercise}

\begin{exercise}
\label{exercise-trace-det}
Let $A$ be a ring.
\begin{enumerate}
\item Suppose that $M$ is a finite locally free $A$-module, and
suppose that $\varphi : M \to M$ is an endomorphism. Define/construct
the {\it trace}  and {\it determinant} of $\varphi$ and prove that your
construction is ``functorial in the triple $(A, M, \varphi)$''.
\item Show that if $M, N$ are finite locally free $A$-modules,
and if $\varphi : M \to N$ and $\psi : N \to M$ then
$Trace(\varphi \circ \psi) = Trace(\psi \circ \varphi)$ and
$Det(\varphi \circ \psi) = Det(\psi \circ \varphi)$.
\item In case $M$ is finite locally free show that
$Det$ defines a multiplicative map $End_A(M) \to A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-trace-det-rings}
Now suppose that $B$ is an $A$-algebra which is finite
locally free as an $A$-module, in other words $B$ is a finite locally
free $A$-algebra.
\begin{enumerate}
\item Define $Trace_{B/A}$ and $Norm_{B/A}$ using
$Trace$ and $Det$ as defined above.
\item Let $b\in B$ and let $\pi : \Spec(B) \to \Spec(A)$ be
the induced morphism. Show that $\pi(V(b)) = V(Norm_{B/A}(b))$.
(Recall that $V(f) = \{ {\mathfrak p} \mid f \in {\mathfrak p}\}$.)
\item (Base change.) Suppose that $i : A \to A'$ is a ring map. Set
$B' = B \otimes_A A'$. Indicate why $i(Norm_{B/A}(b))$ equals
$Norm_{B'/A'}(b \otimes 1)$.
\item Compute $Norm_{B/A}(b)$ when
$B = A \times A \times A \times \ldots \times A$
and $b = (a_1, \ldots, a_n)$.
\item Compute the norm of $y-y^3$ under the finite flat
map ${\mathbf Q}[x] \to {\mathbf Q}[y]$, $x \to y^n$. (Hint: use
the ``base change''
$A = {\mathbf Q}[x] \subset A' = {\mathbf Q}(\zeta_n)(x^{1/n})$.)
\end{enumerate}
\end{exercise}



\section{Glueing}
\label{section-glueing}

\begin{exercise}
\label{exercise-cover}
Suppose that $A$ is a ring and $M$ is an $A$-module.
Let $f_i$, $i \in I$ be a collection of elements of $A$ such that
$$
\Spec(A) = \bigcup D(f_i).
$$
\begin{enumerate}
\item Show that if $M_{f_i}$ is a finite $A_{f_i}$-module,
then $M$ is a finite $A$-module.
\item Show that if $M_{f_i}$ is a flat $A_{f_i}$-module,
then $M$ is a flat $A$-module.
(This is kind of silly if you think about it right.)
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-cover}
In algebraic geometric language this means that the property
of ``being finitely generated'' or ``being flat'' is local for the Zariski
topology (in a suitable sense). You can also show this for the property
``being of finite presentation''.
\end{remark}

\begin{exercise}
\label{exercise-cover-ring-map}
Suppose that $A \to B$ is a ring map.
Let $f_i \in A$, $i \in I$ and $g_j \in B$, $j \in J$ be collections of
elements such that
$$
\Spec(A) = \bigcup D(f_i)
\quad\text{and}\quad
\Spec(B) = \bigcup D(g_j).
$$
Show that if $A_{f_i} \to B_{f_ig_j}$ is of finite type for all $i, j$
then $A \to B$ is of finite type.
\end{exercise}




\section{Going up and going down}
\label{section-going-up}


\begin{definition}
\label{definition-GU-GD}
Let $\phi: A \to B$ be a homomorphism of rings. We say
that the {\it going-up theorem} holds for $\phi$ if the
following condition is satisfied:
\begin{list}{(GU)}{}
\item for any ${\mathfrak p}, {\mathfrak p}' \in \Spec(A)$ such that
${\mathfrak p} \subset {\mathfrak p}'$, and for any $P \in \Spec(B)$ lying
over ${\mathfrak p}$, there exists $P'\in \Spec(B)$ lying
over ${\mathfrak p}'$ such that $P \subset P'$.
\end{list}
Similarly, we say that the {\it going-down theorem} holds for $\phi$
if the following condition is satisfied:
\begin{list}{(GD)}{}
\item for any ${\mathfrak p}, {\mathfrak p}' \in \Spec(A)$ such that
${\mathfrak p} \subset {\mathfrak p}'$, and for any
$P' \in \Spec(B)$ lying
over ${\mathfrak p}'$, there exists $P\in \Spec(B)$ lying
over ${\mathfrak p}$ such that $P \subset P'$.
\end{list}
\end{definition}

\begin{exercise}
\label{exercise-GU-GD}
In each of the following cases determine whether
(GU), (GD) holds, and explain why. (Use any Prop/Thm/Lemma you can find,
but check the hypotheses in each case.)
\begin{enumerate}
\item $k$ is a field, $A = k$, $B = k[x]$.
\item $k$ is a field, $A = k[x]$, $B = k[x, y]$.
\item $A = {\mathbf Z}$, $B = {\mathbf Z}[1/11]$.
\item $k$ is an algebraically closed field, $A = k[x, y]$,
$B = k[x, y, z]/(x^2-y, z^2-x)$.
\item $A = {\mathbf Z}$, $B = {\mathbf Z}[i, 1/(2 + i)]$.
\item $A = {\mathbf Z}$, $B = {\mathbf Z}[i, 1/(14 + 7i)]$.
\item $k$ is an algebraically closed field, $A = k[x]$,
$B = k[x, y, 1/(xy-1)]/(y^2-y)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-images}
Let $k$ be an algebraically closed field. Compute the image in
$\Spec(k[x, y])$
of the following maps:
\begin{enumerate}
\item $\Spec(k[x, yx^{-1}]) \to \Spec(k[x, y])$, where
$k[x, y] \subset k[x, yx^{-1}] \subset k[x, y, x^{-1}]$.
(Hint: To avoid confusion, give the element $yx^{-1}$ another name.)
\item $\Spec(k[x, y, a, b]/(ax-by-1))\to \Spec(k[x, y])$.
\item $\Spec(k[t, 1/(t-1)]) \to \Spec(k[x, y])$, induced by $x
\mapsto t^2$,
and $y \mapsto t^3$.
\item $k = {\mathbf C}$ (complex numbers),
$\Spec(k[s, t]/(s^3 + t^3-1)) \to \Spec(k[x, y])$, where
$x\mapsto s^2$, $y \mapsto t^2$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-elimination-theory}
Finding the image as above usually is done by using elimination theory.
\end{remark}




\section{Fitting ideals}
\label{section-fitting-ideals}

\begin{exercise}
\label{exercise-fitting}
Let $R$ be a ring and let $M$ be a finite $R$-module.
Choose a presentation
$$
\bigoplus\nolimits_{j \in J} R \longrightarrow R^{\oplus n}
\longrightarrow M \longrightarrow 0.
$$
of $M$. Note that the map $R^{\oplus n} \to M$ is given by a sequence
of elements $x_1, \ldots, x_n$ of $M$. The elements $x_i$
are {\it generators} of $M$. The map $\bigoplus_{j \in J} R \to R^{\oplus n}$
is given by a $n \times J$ matrix $A$ with coefficients in $R$.
In other words, $A = (a_{ij})_{i = 1, \ldots, n, j \in J}$.
The columns $(a_{1j}, \ldots, a_{nj})$, $j \in J$ of $A$
are said to be the {\it relations}. Any vector $(r_i) \in R^{\oplus n}$
such that $\sum r_i x_i = 0$ is a linear combination of the columns of $A$.
Of course any finite $R$-module has a lot of different presentations.
\begin{enumerate}
\item Show that the ideal generated by the $(n - k) \times (n - k)$ minors of
$A$ is independent of the choice of the presentation.
This ideal is the {\it $k$th fitting ideal of $M$}. Notation $Fit_k(M)$.
\item Show that
$Fit_0(M) \subset Fit_1(M) \subset Fit_2(M) \subset \ldots$.
(Hint: Use that a determinant can be computed by expanding along a column.)
\item Show that the following are equivalent:
\begin{enumerate}
\item $Fit_{r - 1}(M) = (0)$ and $Fit_r(M) = R$, and
\item $M$ is locally free of rank $r$.
\end{enumerate}
\end{enumerate}
\end{exercise}




\section{Hilbert functions}
\label{section-hilbert}

\begin{definition}
\label{definition-numerical-polynomial}
A {\it numerical polynomial} is a polynomial $f(x) \in {\mathbf Q}[x]$
such that $f(n) \in {\mathbf Z}$ for every integer $n$.
\end{definition}

\begin{definition}
\label{definition-graded-module}
A {\it graded module} $M$ over a ring $A$ is an $A$-module $M$
endowed with a direct sum decomposition
$
\bigoplus\nolimits_{n \in {\mathbf Z}} M_n
$
into $A$-submodules. We will say that $M$ is {\it locally finite} if all of
the $M_n$ are finite $A$-modules. Suppose that $A$ is a Noetherian ring and
that $\varphi$ is a {\it Euler-Poincar\'e function} on finite $A$-modules.
This means that for every finitely generated $A$-module $M$ we are given an
integer $\varphi(M) \in {\mathbf Z}$ and for every short exact sequence
$$
0
\longrightarrow
M'
\longrightarrow
M
\longrightarrow
M''
\longrightarrow
0
$$
we have $\varphi(M) = \varphi(M') + \varphi(M')$. The {\it Hilbert function}
of a locally finite graded module $M$ (with respect to $\varphi$) is the
function $\chi_\varphi(M, n) = \varphi(M_n)$. We say that $M$ has a
{\it Hilbert polynomial} if there is some numerical polynomial
$P_\varphi$ such that $\chi_\varphi(M, n) = P_\varphi(n)$ for all sufficiently
large integers $n$.
\end{definition}

\begin{definition}
\label{definition-graded-algebra}
A {\it graded $A$-algebra} is a graded $A$-module
$B = \bigoplus_{n \geq 0} B_n$ together with an $A$-bilinear map
$$
B \times B \longrightarrow B, \ (b, b') \longmapsto bb'
$$
that turns $B$ into an $A$-algebra so that $B_n \cdot B_m \subset B_{n + m}$.
Finally, a {\it graded module $M$ over a graded $A$-algebra $B$} is given
by a graded $A$-module $M$ together with a (compatible) $B$-module structure
such that $B_n \cdot M_d \subset M_{n + d}$. Now you can define {\it
homomorphisms of graded modules/rings}, {\it graded submodules}, {\it graded
ideals}, {\it exact sequences of graded modules}, etc, etc.
\end{definition}

\begin{exercise}
\label{exercise-Euler-Poincare-field}
Let $A = k$ a field. What are all possible Euler-Poincar\'e functions
on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
\label{exercise-Euler-Poincare-Z}
Let $A ={\mathbf Z}$. What are all possible Euler-Poincar\'e functions
on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
\label{exercise-Euler-Poincare-node}
Let $A = k[x, y]/(xy)$ with $k$ algebraically closed. What are all
possible Euler-Poincar\'e functions on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
\label{exercise-kernel-locally-finite}
Suppose that $A$ is Noetherian. Show that the kernel of a map
of locally finite graded $A$-modules is locally finite.
\end{exercise}

\begin{exercise}
\label{exercise-no-hilbert}
Let $k$ be a field and let $A = k$ and $B = k[x, y]$ with grading
determined by $\deg(x) = 2$ and $\deg(y) = 3$. Let $\varphi(M) = \dim_k(M)$.
Compute the Hilbert function of $B$ as a graded $k$-module. Is there
a Hilbert polynomial in this case?
\end{exercise}

\begin{exercise}
\label{exercise-no-hilbert-or-is-there}
Let $k$ be a field and let $A = k$ and $B = k[x, y]/(x^2, xy)$ with grading
determined by $\deg(x) = 2$ and $\deg(y) = 3$. Let $\varphi(M) = \dim_k(M)$.
Compute the Hilbert function of $B$ as a graded $k$-module. Is there
a Hilbert polynomial in this case?
\end{exercise}

\begin{exercise}
\label{exercise-hilbert-to-compute}
Let $k$ be a field and let $A = k$.  Let $\varphi(M) = \dim_k(M)$.
Fix $d\in {\mathbf N}$. Consider the graded $A$-algebra
$B = k[x, y, z]/(x^d + y^d + z^d)$, where  $x, y, z$ each have degree $1$.
Compute the Hilbert function of $B$. Is there a Hilbert polynomial
in this case?
\end{exercise}



\section{Proj of a ring}
\label{section-proj-ring}

\begin{definition}
\label{definition-homogeneous-ideal}
Let $R$ be a graded ring. A {\it homogeneous} ideal is simply an ideal
$I \subset R$ which is also a graded submodule of $R$. Equivalently,
it is an ideal generated by homogeneous elements. Equivalently, if
$f \in I$ and
$$
f = f_0 + f_1 + \ldots + f_n
$$
is the decomposition of $f$ into homogenous pieces in $R$ then $f_i \in I$
for each $i$.
\end{definition}

\begin{definition}
\label{definition-Proj-R}
We define the {\it homogeneous spectrum $\text{Proj}(R)$}
of the graded ring $R$ to be the set of homogenous, prime ideals
${\mathfrak p}$ of $R$ such that $R_{+} \not \subset {\mathfrak p}$.
Note that $\text{Proj}(R)$ is a subset of $\Spec(R)$ and hence has a
natural induced topology.
\end{definition}

\begin{definition}
\label{definition-Dplus-Vplus}
Let $R = \oplus_{d \geq 0} R_d$ be a graded ring, let $f\in R_d$ and
assume that $d \geq 1$. We define {\it $R_{(f)}$} to be the subring of
$R_f$ consisting of elements of the form $r/f^n$ with $r$ homogenous and
$\deg(r) = nd$. Furthermore, we define
$$
D_{+}(f) = \{ {\mathfrak p} \in \text{Proj}(R) | f \not\in {\mathfrak p} \}.
$$
Finally, for a homogenous ideal $I \subset R$ we define
$V_{+}(I) = V(I) \cap \text{Proj}(R)$.
\end{definition}

\begin{exercise}
\label{exercise-topology-proj}
On the topology on $\text{Proj}(R)$. With definitions and notation as
above prove the following statements.
\begin{enumerate}
\item Show that $D_{+}(f)$ is open in $\text{Proj}(R)$.
\item Show that $D_{+}(ff') = D_{+}(f) \cap D_{+}(f')$.
\item Let $g = g_0 + \ldots + g_m$ be an element
of $R$ with $g_i \in R_i$. Express $D(g) \cap \text{Proj}(R)$
in terms of $D_{+}(g_i)$, $i \geq 1$ and $D(g_0) \cap \text{Proj}(R)$.
No proof necessary.
\item Let $g\in R_0$ be a homogenous element of degree $0$.
Express $D(g) \cap \text{Proj}(R)$ in terms of $D_{+}(f_\alpha)$
for a suitable family $f_\alpha \in R$ of homogenous elements of
positive degree.
\item Show that the collection $\{D_{+}(f)\}$ of opens forms a
basis for the topology of $\text{Proj}(R)$.
\item
\label{item-bijection}
Show that there is a canonical bijection $D_{+}(f) \to \Spec(R_{(f)})$.
(Hint: Imitate the proof for $\Spec$ but at some point thrown in the
radical of an ideal.)
\item Show that the map from (\ref{item-bijection}) is a homeomorphism.
\item Give an example of an $R$ such that $\text{Proj}(R)$ is not
quasi-compact. No proof necessary.
\item Show that any closed subset $T \subset \text{Proj}(R)$ is of
the form $V_{+}(I)$ for some homogenous ideal $I \subset R$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-continuous-proj-spec}
There is a continuous map $ \text{Proj}(R) \longrightarrow \Spec(R_0) $.
\end{remark}

\begin{exercise}
\label{exercise-iso-polynomial-ring-one-variable}
If $R = A[X]$ with $\deg(X) = 1$, show that the natural map
$\text{Proj}(R) \to \Spec(A)$ is a bijection and in fact
a homeomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-blowing-up-I}
Blowing up: part I.
In this exercise $R = Bl_I(A) = A \oplus I \oplus I^2 \oplus \ldots$.
Consider the natural map $b : \text{Proj}(R) \to \Spec(A)$.
Set $U = \Spec(A) - V(I)$. Show that
$$
b : b^{-1}(U) \longrightarrow U
$$
is a homeomorphism.
Thus we may think of $U$ as an open subset of $\text{Proj}(R)$.
Let $Z \subset \Spec(A)$ be an irreducible closed subscheme
with generic point $\xi \in Z$. Assume that $\xi \not\in V(I)$,
in other words $Z \not\subset V(I)$, in other words
$\xi \in U$, in other words $Z\cap U \not = \emptyset$. We define
the {\it strict transform} $Z'$ of $Z$ to be the closure of the unique
point $\xi'$ lying above $\xi$. Another way to say this is that
$Z'$ is the closure in $\text{Proj}(R)$ of the locally closed subset
$Z\cap U \subset U \subset \text{Proj}(R)$.
\end{exercise}

\begin{exercise}
\label{exercise-blowing-up-II}
Blowing up: Part II.
Let $A = k[x, y]$ where $k$ is a field, and let $I = (x, y)$.
Let $R$ be the blow up algebra for $A$ and $I$.
\begin{enumerate}
\item Show that the strict transforms of $Z_1 = V(\{x\})$ and
$Z_2 = V(\{y\})$ are disjoint.
\item Show that the strict transforms of $Z_1 = V(\{x\})$ and
$Z_2 = V(\{x-y^2\})$ are not disjoint.
\item Find an ideal $J \subset A$ such that $V(J) = V(I)$
and such that the strict transforms of $Z_1 = V(\{x\})$ and
$Z_2 = V(\{x-y^2\})$ are disjoint.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-proj-when-empty}
Let $R$ be a graded ring.
\begin{enumerate}
\item Show that $\text{Proj}(R)$ is empty if $R_n = (0)$ for all $n >> 0$.
\item Show that $\text{Proj}(R)$ is an irreducible topological space
if $R$ is a domain and $R_{+}$ is not zero. (Recall that the empty
topological space is not irreducible.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-blwoing-up-III}
Blowing up: Part III.
Consider $A$, $I$ and $U$, $Z$ as in the definition of strict transform.
Let $Z = V({\mathfrak p})$ for some prime ideal ${\mathfrak p}$. Let $\bar A =
A/{\mathfrak p}$ and let
$\bar I$ be the image of $I$ in $\bar A$.
\begin{enumerate}
\item Show that there exists a surjective ring map
$R: = Bl_I(A) \to \bar R: = Bl_{\bar I}(\bar A)$.
\item Show that the ring map above induces a bijective map
from $\text{Proj}(\bar R)$ onto the strict transform $Z'$ of $Z$. (This
is not so easy. Hint: Use 5(b) above.)
\item Conclude that the strict transform $Z' = V_{+}(P)$ where
$P \subset R$ is the homogenous ideal defined by $P_d = I^d \cap {\mathfrak p}$.
\item Suppose that $Z_1 = V({\mathfrak p})$ and
$Z_2 = V({\mathfrak q})$ are irreducible
closed subsets defined by prime ideals such that  $Z_1 \not \subset Z_2$,
and $Z_2 \not \subset Z_1$. Show that blowing up the ideal
$I = {\mathfrak p} + {\mathfrak q}$ separates the
strict transforms of $Z_1$ and $Z_2$,
i.e., $Z_1' \cap Z_2' = \emptyset$. (Hint: Consider the homogenous
ideal $P$ and $Q$ from part (c) and consider $V(P + Q)$.)
\end{enumerate}
\end{exercise}


\section{Cohen-Macaulay rings of dimension 1}
\label{section-CM-dim-1}

\begin{definition}
\label{definition-CM}
A Noetherian local ring $A$ is said to be {\it Cohen-Macaulay}
of dimension $d$ if it has dimension $d$ and there exists a system
of parameters $x_1, \ldots, x_d$ for $A$ such that $x_i$ is a nonzero
divisor in $A/(x_1, \ldots, x_{i-1})$ for $i = 1, \ldots, d$.
\end{definition}

\begin{exercise}
\label{exercise-CM-dim-1-I}
Cohen-Macaulay rings of dimension 1. Part I: Theory.
\begin{enumerate}
\item Let $(A, {\mathfrak m})$ be a local Noetherian with $\dim A = 1$.
Show that if $x\in {\mathfrak m}$ is not a zero divisor then
\begin{enumerate}
\item $\dim A/xA = 0$, in other words $A/xA$ is Artinian,
in other words $\{x\}$ is a system of parameters for $A$.
\item $A$ is has no embedded prime.
\end{enumerate}
\item Conversely, let $(A, {\mathfrak m})$ be a local Noetherian ring of
dimension $1$. Show that if $A$ has no embedded prime then there exists
a nonzero divisor in ${\mathfrak m}$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-CM-dim-1-II}
Cohen-Macaulay rings of dimension 1. Part II: Examples.
\begin{enumerate}
\item Let $A$ be the local ring at $(x, y)$ of $k[x, y]/(x^2, xy)$.
\begin{enumerate}
\item Show that $A$ has dimension 1.
\item Prove that every element of ${\mathfrak m}\subset A$ is a
zero divisor.
\item Find $z\in {\mathfrak m}$ such that $\dim A/zA = 0$
(no proof required).
\end{enumerate}
\item Let $A$ be the local ring at $(x, y)$ of $k[x, y]/(x^2)$.
Find a nonzero divisor in ${\mathfrak m}$ (no proof required).
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-embedding-dim-1}
Local rings of embedding dimension $1$.
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring
of embedding dimension $1$, i.e.,
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 1.
$$
Show that the function $f(n) = \dim_k {\mathfrak m}^n/{\mathfrak m}^{n + 1}$
is either constant with value $1$, or its values are
$$
1, 1, \ldots, 1, 0, 0, 0, 0, 0, \ldots
$$
\end{exercise}

\begin{exercise}
\label{exercise-regular-local-dim-1}
Regular local rings of dimension $1$.
Suppose that $(A, {\mathfrak m}, k)$ is a regular Noetherian local ring of
dimension $1$. Recall that this means that $A$ has dimension $1$
and embedding dimension $1$, i.e.,
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 1.
$$
Let $x\in{\mathfrak m}$ be any element whose class in ${\mathfrak m}/{\mathfrak
m}^2$ is not zero.
\begin{enumerate}
\item Show that for every element $y$
of ${\mathfrak m}$ there exists an integer $n$ such that $y$ can be written as
$y = ux^n$ with $u\in A^\ast$ a unit.
\item Show that $x$ is a nonzero divisor in $A$.
\item Conclude that $A$ is a domain.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-nonzerodivisor-graded}
Let $(A, {\mathfrak m}, k)$ be a Noetherian local ring with associated
graded $Gr_{\mathfrak m}(A)$.
\begin{enumerate}
\item Suppose that $x\in {\mathfrak m}^d$ maps to a nonzero
divisor $\bar x \in {\mathfrak m}^d/{\mathfrak m}^{d + 1}$ in degree $d$ of
$Gr_{\mathfrak m}(A)$.
Show that $x$ is a nonzero divisor.
\item Suppose the depth of $A$ is at least $1$.
Namely, suppose that there exists a nonzero divisor $y \in {\mathfrak m}$.
In this case we can do better: assume just that $x\in {\mathfrak m}^d$ maps to
the element $\bar x \in {\mathfrak m}^d/{\mathfrak m}^{d + 1}$ in degree $d$
of $Gr_{\mathfrak m}(A)$ which is a nonzero divisor on sufficiently
high degrees: $\exists N$ such that for all $n \geq N$ the map
of multiplication by $\bar x$
$$
{\mathfrak m}^n/{\mathfrak m}^{n + 1} \longrightarrow
{\mathfrak m}^{n + d}/{\mathfrak m}^{n + d + 1}
$$
is injective. Then show that $x$ is a nonzero divisor.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-embedding-2-dim-1}
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring of
dimension $1$. Assume also that the embedding dimension of $A$ is
$2$, i.e., assume that
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 2.	
$$
Notation: $f(n) = \dim_k {\mathfrak m}^n/{\mathfrak m}^{n + 1}$.
Pick generators $x, y \in {\mathfrak m}$
and write $Gr_{\mathfrak m}(A) = k[\bar x, \bar y]/I$ for some
homogenous ideal $I$.
\begin{enumerate}
\item Show that there exists a homogenous element
$F\in k[\bar x, \bar y]$ such that $I \subset (F)$ with equality
in all sufficiently high degrees.
\item Show that $f(n) \leq n + 1$.
\item Show that if $f(n) < n + 1$ then $n \geq \deg(F)$.
\item Show that if $f(n) < n + 1$, then $f(n + 1) \leq f(n)$.
\item Show that $f(n) = \deg(F)$ for all $n >> 0$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-CM-dim-1-embedding-dim-2}
Cohen-Macaulay rings of dimension 1 and embedding dimension 2.
Suppose that $(A, {\mathfrak m}, k)$ is a Noetherian local ring which is
Cohen-Macaulay
of dimension $1$. Assume also that the embedding dimension of $A$ is
$2$, i.e., assume that
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 2.	
$$
Notations: $f$, $F$, $x, y\in {\mathfrak m}$, $I$ as in Ex.\ 6 above. Please
use any results from the problems above.
\begin{enumerate}
\item Suppose that $z\in {\mathfrak m}$ is an element whose class
in ${\mathfrak m}/{\mathfrak m}^2$ is a linear form
$\alpha \bar x + \beta \bar y \in k[\bar x, \bar y]$
which is coprime with $f$.
\begin{enumerate}
\item Show that $z$ is a nonzero divisor on $A$.
\item Let $d = \deg(F)$.
Show that ${\mathfrak m}^n = z^{n + 1-d}{\mathfrak m}^{d-1}$
for all sufficiently large $n$. (Hint: First show
$z^{n + 1-d}{\mathfrak m}^{d-1} \to {\mathfrak m}^n/{\mathfrak m}^{n + 1}$
is surjective by what you know about $Gr_{\mathfrak m}(A)$. Then use NAK.)
\end{enumerate}
\item What condition on $k$ garantees the existence of
such a $z$? (No proof required; it's too easy.)

\noindent
Now we are going to assume there exists a $z$ as above. This turns out
to be a harmless assumption (in the sense that you can reduce to
the situation where it holds in order to obtain the results in
parts (d) and (e) below).
\item Now show that ${\mathfrak m}^\ell = z^{\ell-d + 1} {\mathfrak m}^{d-1}$
for all $\ell \geq d$.
\item Conclude that $I = (F)$.
\item Conclude that the function $f$ has values
$$
2, 3, 4, \ldots, d-1, d, d, d, d, d, d, d, \ldots
$$
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-CM-dim-1-embedding-dim-2}
This suggests that a local Noetherian Cohen-Macaulay ring of dimension 1
and embedding dimension 2 is of the form $B/FB$, where $B$ is a 2-dimensional
regular local ring. This is more or less true (under suitable ``niceness''
properties of the ring).
\end{remark}






\section{Infinitely many primes}
\label{section-many-primes}

\noindent
A section with a collection of strange questions on rings where
infinitely many primes are not invertible.

\begin{exercise}
\label{exercise-not-in-Q}
Give an example of a finite type ${\mathbf Z}$-algebra $R$
with the following two properties:
\item{(a)} There is no ring map $R \to {\mathbf Q}$.
\item{(b)} For every prime $p$ there exists a maximal ideal
${\mathfrak m} \subset R$ such that $R/{\mathfrak m} \cong {\mathbf F}_p$.
\end{exercise}

\begin{exercise}
\label{exercise-strange-fp-1}
For $f \in {\mathbf Z}[x, u]$ we define $f_p(x)
= f(x, x^p) \bmod p \in {\mathbf F}_p[x]$. Give an example
of an $f \in {\mathbf Z}[x, u]$ such that the following two
properties hold:
\item{(a)} There exist infinitely many $p$ such that $f_p$
does not have a zero in ${\mathbf F}_p$.
\item{(b)} For all $p>>0$ the polynomial $f_p$ either has
a linear or a quadratic factor.
\end{exercise}

\begin{exercise}
\label{exercise-strange-fp-2}
For $f \in {\mathbf Z}[x, y, u, v]$ we define $f_p(x, y)
= f(x, y, x^p, y^p) \bmod p \in {\mathbf F}_p[x, y]$. Give an ``interesting''
example of an $f$ such that $f_p$ is reducible for all $p>>0$.
For example, $f = xv-yu$ with $f_p = xy^p-x^py = xy(x^{p-1}-y^{p-1})$ is
``uninteresting''; any $f$ depeding only on $x, u$ is ``uninteresting'',
etc.
\end{exercise}

\begin{remark}
\label{remark-strange-fp}
Let $h \in {\mathbf Z}[y]$ be a monic polynomial of degree $d$.
Then:
\begin{enumerate}
\item The map $A = {\mathbf Z}[x] \to B ={\mathbf Z}[y]$,
$x \mapsto h$ is finite locally free of rank $d$.
\item For all primes $p$ the map
$A_p = {\mathbf F}_p[x]\to B_p = {\mathbf F}_p[y]$,
$y \mapsto h(y) \bmod p$ is finite locally free of rank $d$.
\end{enumerate}
\end{remark}

\begin{exercise}
\label{exercise-strange-fp-3}
Let $h, A, B, A_p, B_p$ be as in the remark. For $f \in {\mathbf Z}[x, u]$ we
define $f_p(x) = f(x, x^p) \bmod p \in {\mathbf F}_p[x]$. For
$g \in {\mathbf Z}[y, v]$ we define
$g_p(y) = g(y, y^p) \bmod p \in {\mathbf F}_p[y]$.
\begin{enumerate}
\item Give an example of a $h$ and $g$ such that
there does not exist a $f$ with the property
$$
f_p  =  Norm_{B_p/A_p}(g_p).
$$
\item Show that for any choice of $h$ and $g$ as above
there exists a nonzero $f$ such that for all $p$ we have
$$
Norm_{B_p/A_p}(g_p)\ \ \hbox{divides}\ \ f_p .
$$
If you want you can restrict to the case $h = y^n$, even with $n = 2$,
but it is true in general.
\item Discuss the relevance of this to Exercises 6 \& 7 of the previous
set.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-strange-fp-unsolved}
Unsolved problems. They may be really hard or they may be easy.
I don't know.
\begin{enumerate}
\item Is there any $f \in {\mathbf Z}[x, u]$ such that $f_p$ is
irreducible for an infinite number of $p$? (Hint: Yes, this happens for
$f(x, u) = u - x - 1$ and also for $f(x, u) = u^2 - x^2 + 1$.)
\item Let $f \in {\mathbf Z}[x, u]$ nonzero, and suppose
$\deg_x(f_p) = dp + d'$ for all large $p$. (In other words $\deg_u(f) = d$
and the coefficient $c$ of $u^d$ in $f$ has $\deg_x(c) = d'$.) Suppose we
can write $d = d_1 + d_2$ and $d' = d'_1 + d'_2$ with $d_1, d_2 > 0$
and $d'_1, d'_2 \geq 0$ such that for all sufficiently large $p$
there exists a factorization
$$
	f_p = f_{1, p} f_{2, p}
$$
with $\deg_x(f_{1, p}) = d_1p + d'_1$. Is it true that $f$ comes about via a
norm construction as in Exercise 4? (More precisely, are there a $h$ and
$g$ such that $Norm_{B_p/A_p}(g_p)$ divides $f_p$ for all $p >> 0$.)
\item Analogous question to the one in (b) but now with
$f \in {\mathbf Z}[x_1, x_2, u_1, u_2]$ irreducible and just assuming that
$f_p(x_1, x_2) = f(x_1, x_2, x_1^p, x_2^p) \bmod p$ factors for all
$p >> 0$.
\end{enumerate}
\end{exercise}


















\section{Filtered derived category}
\label{section-filtered-derived}

\noindent
In order to do the exercises in this section, please read the material
in Homology, Section \ref{homology-section-filtrations}. We will say
$A$ is a filtered object of $\mathcal{A}$, to mean that $A$ comes endowed
with a filtration $F$ which we omit from the notation.

\begin{exercise}
\label{exercise-split-injective}
Let $\mathcal{A}$ be an abelian category.
Let $I$ be a filtered object of $\mathcal{A}$.
Assume that the filtration on $I$ is finite
and that each $\text{gr}^p(I)$ is an injective object of $\mathcal{A}$.
Show that there exists an isomorphism
$I \cong \bigoplus \text{gr}^p(I)$ with filtration
$F^p(I)$ corresponding to $\bigoplus_{p' \geq p} \text{gr}^p(I)$.
\end{exercise}

\begin{exercise}
\label{exercise-filtered-injective}
Let $\mathcal{A}$ be an abelian category.
Let $I$ be a filtered object of $\mathcal{A}$.
Assume that the filtration on $I$ is finite.
Show the following are equivalent:
\begin{enumerate}
\item For any solid diagram
$$
\xymatrix{
A \ar[r]_\alpha \ar[d] & B \ar@{-->}[ld] \\
I &
}
$$
of filtered objects with
(\romannumeral1) the filtrations on $A$ and $B$ are finite,
and (\romannumeral2) $\text{gr}(\alpha)$ injective the
dotted arrow exists making the diagram commute.
\item Each $\text{gr}^p I$ is injective.
\end{enumerate}
\end{exercise}

\noindent
Note that given a morphism $\alpha : A \to B$ of filtered objects
with finite filtrations to say that $\text{gr}(\alpha)$ injective
is the same thing as saying that $\alpha$ is a {\it strict monomorphism}
in the category $\text{Fil}(\mathcal{A})$. Namely,
being a monomorphism means $\text{Ker}(\alpha) = 0$ and strict means that
this also implies $\text{Ker}(\text{gr}(\alpha)) = 0$.
See Homology, Lemma \ref{homology-lemma-characterize-strict}.
(We only use the term ``injective'' for a morphism in an abelian category,
allthough it makes sense in any additive category having kernels.)
The exercises above justifies the following definition.

\begin{definition}
\label{definition-injective-filtered}
Let $\mathcal{A}$ be an abelian category.
Let $I$ be a filtered object of $\mathcal{A}$.
Assume the filtration on $I$ is finite.
We say $I$ is {\it filtered injective} if each $\text{gr}^p(I)$ is
an injective object of $\mathcal{A}$.
\end{definition}

\noindent
We make the following definition to avoid having to keep saying
``with a finite filtration'' everywhere.

\begin{definition}
\label{definition-finite-filtration-category}
Let $\mathcal{A}$ be an abelian category.
We denote {\it $\text{Fil}^f(\mathcal{A})$} the full subcategory
of $\text{Fil}(\mathcal{A})$ whose objects consist of
those $A \in \Ob(\text{Fil}(\mathcal{A}))$
whose filtration is finite.
\end{definition}

\begin{exercise}
\label{exercise-inject-into-injective}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
Let $A$ be an object of $\text{Fil}^f(\mathcal{A})$.
Show that there exists a strict monomorphism $\alpha : A \to I$
of $A$ into a filtered injective object $I$ of $\text{Fil}^f(\mathcal{A})$.
\end{exercise}

\begin{definition}
\label{definition-filtered-quasi-isomorphism}
Let $\mathcal{A}$ be an abelian category.
Let $\alpha : K^\bullet \to L^\bullet$ be a morphism of
complexes of $\text{Fil}(\mathcal{A})$. We say that
$\alpha$ is a {\it filtered quasi-isomorphism} if
for each $p \in \mathbf{Z}$ the morphism
$\text{gr}^p(K^\bullet) \to \text{gr}^p(L^\bullet)$ is
a quasi-isomorphism.
\end{definition}

\begin{definition}
\label{definition-filtered-acyclic}
Let $\mathcal{A}$ be an abelian category.
Let $K^\bullet$ be a complex of $\text{Fil}^f(\mathcal{A})$.
We say that $K^\bullet$ is {\it filtered acyclic} if
for each $p \in \mathbf{Z}$ the complex $\text{gr}^p(K^\bullet)$ is
acyclic.
\end{definition}

\begin{exercise}
\label{exercise-filtered-quasi-isomorphism}
Let $\mathcal{A}$ be an abelian category.
Let $\alpha : K^\bullet \to L^\bullet$ be a morphism of bounded below
complexes of $\text{Fil}^f(\mathcal{A})$. (Note the superscript $f$.)
Show that the following are equivalent:
\begin{enumerate}
\item $\alpha$ is a filtered quasi-isomorphism,
\item for each $p \in \mathbf{Z}$ the map
$\alpha : F^pK^\bullet \to F^pL^\bullet$ is a quasi-isomorphism,
\item for each $p \in \mathbf{Z}$ the map
$\alpha : K^\bullet/F^pK^\bullet \to L^\bullet/F^pL^\bullet$
is a quasi-isomorphism, and
\item the cone of $\alpha$ (see
Derived Categories, Definition \ref{derived-definition-cone})
is a filtered acyclic complex.
\end{enumerate}
Moreover, show that if $\alpha$ is a filtered quasi-isomorphism
then $\alpha$ is also a usual quasi-isomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-injective-resolution}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
Let $A$ be an object of $\text{Fil}^f(\mathcal{A})$.
Show there exists a complex
$I^\bullet$ of $\text{Fil}^f(\mathcal{A})$,
and a morphism $A[0] \to I^\bullet$ such that
\begin{enumerate}
\item each $I^p$ is filtered injective,
\item $I^p = 0$ for $p < 0$, and
\item $A[0] \to I^\bullet$ is a filtered quasi-isomorphism.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-injective-resolution-complex}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
Let $K^\bullet$ be a bounded below complex of objects of
$\text{Fil}^f(\mathcal{A})$. Show there exists a
filtered quasi-isomorphism $\alpha : K^\bullet \to I^\bullet$
with $I^\bullet$ a complex of $\text{Fil}^f(\mathcal{A})$
having filtered injective terms $I^n$, and bounded below.
In fact, we may choose $\alpha$ such that each $\alpha^n$ is
a strict monomorphism.
\end{exercise}

\begin{exercise}
\label{exercise-morphisms-lift}
Let $\mathcal{A}$ be an abelian category.
Consider a solid diagram
$$
\xymatrix{
K^\bullet \ar[r]_\alpha \ar[d]_\gamma & L^\bullet \ar@{-->}[dl]^\beta \\
I^\bullet
}
$$
of complexes of $\text{Fil}^f(\mathcal{A})$. Assume
$K^\bullet$, $L^\bullet$ and $I^\bullet$ are bounded below and
assume each $I^n$ is a filtered injective object.
Also assume that $\alpha$ is a filtered quasi-isomorphism.
\begin{enumerate}
\item There exists a map of complexes $\beta$ making the diagram
commute up to homotopy.
\item If $\alpha$ is a strict monomorphism in every degree
then we can find a $\beta$ which makes the diagram commute.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-acyclic-is-zero}
Let $\mathcal{A}$ be an abelian category.
Let $K^\bullet$, $K^\bullet$ be complexes of $\text{Fil}^f(\mathcal{A})$.
Assume
\begin{enumerate}
\item $K^\bullet$ bounded below and filtered acyclic, and
\item $I^\bullet$ bounded below and consisting of filtered injective objects.
\end{enumerate}
Then any morphism $K^\bullet \to I^\bullet$ is homotopic to zero.
\end{exercise}

\begin{exercise}
\label{exercise-morphisms-equal-up-to-homotopy}
Let $\mathcal{A}$ be an abelian category.
Consider a solid diagram
$$
\xymatrix{
K^\bullet \ar[r]_\alpha \ar[d]_\gamma & L^\bullet \ar@{-->}[dl]^{\beta_i} \\
I^\bullet
}
$$
of complexes of $\text{Fil}^f(\mathcal{A})$.
Assume $K^\bullet$, $L^\bullet$ and $I^\bullet$ bounded below and
each $I^n$ a filtered injective
object. Aslo assume $\alpha$ a filtered quasi-isomorphism.
Any two morphisms $\beta_1, \beta_2$ making the diagram commute
up to homotopy are homotopic.
\end{exercise}







\section{Regular functions}
\label{section-regular-functions}


\begin{exercise}
\label{exercise-regular-functions}
In this exercise we try to see what happens with regular functions
over non-algebraically closed fields. Let $k$ be a field.
Let $Z \subset k^n$ be a Zariski locally closed subset, i.e., there
exist ideals $I \subset J \subset k[x_1, \ldots, x_n]$ such that
$$
Z = \{a \in k^n \mid
f(a) = 0\ \forall\ f \in I,\ \exists\ g \in J,\ g(a) \not = 0\}.
$$
A function $\varphi : Z \to k$ is said to be {\it regular} if for every
$z \in Z$ there exists a Zariski open neighbourhood $z \in U \subset Z$
and polynomials $f, g \in k[x_1, \ldots, x_n]$ such that
$g(u) \not = 0$ for all $u \in U$ and such that
$\varphi(u) = f(u)/g(u)$ for all $u \in U$.
\begin{enumerate}
\item If $k = \bar k$ and $Z = k^n$ show that regular functions are
given by polynomials. (Only do this if you haven't seen this argument
before.)
\item If $k$ is finite show that (a) every function $\varphi$ is regular,
(b) the ring of regular functions is finite dimensional over $k$.
(If you like you can take $Z = k^n$ and even $n = 1$.)
\item If $k = \mathbf{R}$ give an example of a regular function on
$Z = \mathbf{R}$ which is not given by a polynomial.
\item If $k = \mathbf{Q}_p$ give an example of a regular function on
$Z = \mathbf{Q}_p$ which is not given by a polynomial.
\end{enumerate}
\end{exercise}






\section{Sheaves}
\label{section-sheaves}

\noindent
A morphism $f : X \to Y$ of a category $\mathcal{C}$ is an {\it monomorphism}
if for every pair of morphisms $a, b : W \to X$ we have
$f \circ a = f \circ b \Rightarrow a = b$. A monomorphism in the category
of sets is an injective map of sets.

\begin{exercise}
\label{exercise-mono-sheaves-sets}
Carefully prove that a map of sheaves of sets is an monomorphism
(in the category of sheaves of sets) if and only if the induced maps on
all the stalks are injective.
\end{exercise}

\noindent
A morphism $f : X \to Y$ of a category $\mathcal{C}$ is an {\it isomorphism}
if there exists a morphsm $g : Y \to X$ such that $f \circ g = \text{id}_Y$
and $g \circ f = \text{id}_X$. An isomorphism in the category of sets
is a bijective map of sets.

\begin{exercise}
\label{exercise-isomorphism-sheaves-sets}
Carefully prove that a map of sheaves of sets is an isomorphism
(in the category of sheaves of sets) if and only if the induced maps on
all the stalks are bijective.
\end{exercise}

\noindent
A morphism $f : X \to Y$ of a category $\mathcal{C}$ is an {\it epimorphism}
if for every pair of morphisms $a, b : Y \to Z$ we have
$a \circ f = b \circ f \Rightarrow a = b$. An epimorphism in the
category of sets is a surjective map of sets.

\begin{exercise}
\label{exercise-epi-sheaves-sets}
Carefully prove that a map of sheaves of sets is an epimorphism
(in the category of sheaves of sets) if and only if the induced maps on
all the stalks are surjective.
\end{exercise}

\begin{exercise}
\label{exercise-adjoint-push-pull}
Let $f : X \to Y$ be a map of topological spaces.
Prove pushforward $f_\ast$ and pullback $f^{-1}$ for sheaves of {\bf sets}
form an adjoint pair of functors.
\end{exercise}

\begin{exercise}
\label{exercise-j-shriek}
Let $j : U \to X$ be an open immersion. Show
that $j^{-1}$ has a left adjoint $j_{!}$ on the category of sheaves
of sets. Characterize the stalks of $j_{!}({\mathcal G})$. (Hint: $j_{!}$
is called extension by zero when you do this for abelian sheaves... )
\end{exercise}

\begin{exercise}
\label{exercise-not-locally-generated-by-sections}
Let $X = \mathbf{R}$ with the usual topology.
Let $\mathcal{O}_X = \underline{\mathbf{Z}/2\mathbf{Z}}_X$.
Let $i : Z = \{0\} \to X$ be the inclusion and let
$\mathcal{O}_Z = \underline{\mathbf{Z}/2\mathbf{Z}}_Z$.
Prove the following (the first three follow from the definitions but if you
are not clear on the definitions you should elucidate them):
\begin{enumerate}
\item $i_*\mathcal{O}_Z$ is a skyscraper sheaf.
\item There is a canonical surjective map from
$\underline{\mathbf{Z}/2\mathbf{Z}}_X \to
i_*\underline{\mathbf{Z}/2\mathbf{Z}}_Z$.
Denote the kernel $\mathcal{I} \subset \mathcal{O}_X$.
\item $\mathcal{I}$ is an ideal sheaf of $\mathcal{O}_X$.
\item The sheaf $\mathcal{I}$ on $X$ cannot be locally generated
by sections (as in
Modules, Definition \ref{modules-definition-locally-generated}.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-quotient-j-shriek-Z}
Let $X$ be a topological space.
Let ${\mathcal F}$ be an abelian sheaf on $X$. Show
that ${\mathcal F}$ is the quotient of a (possibly very large) direct sum
of sheaves all of whose terms are of the form
$$
j_{!}(\underline{{\mathbf Z}}_U)
$$
where $U \subset X$ is open and $\underline{{\mathbf Z}}_U$ denotes the
constant sheaf with value ${\mathbf Z}$ on $U$.
\end{exercise}

\begin{remark}
\label{remark-direct-sum-stalk-abelian}
Let $X$ be a topological space.
In the category of abelian sheaves the direct sum of
a family of sheaves $\{{\mathcal F}_i\}_{i\in I}$ is the sheaf associated to
the presheaf $U \mapsto \oplus {\mathcal F}_i(U)$. Consequently the stalk of
the direct sum at a point $x$ is the direct sum of the stalks of the
${\mathcal F}_i$ at $x$.
\end{remark}

\begin{exercise}
\label{exercise-product-over-points}
Let $X$ be a topological space. Suppose we are given a collection of
abelian groups $A_x$ indexed by $x \in X$. Show that the rule
$U \mapsto \prod_{x \in U} A_x$ with obvious restriction mappings
defines a sheaf $\mathcal{G}$ of abelian groups. Show, by an example,
that usually it is not the case that $\mathcal{G}_x = A_x$ for $x \in X$.
\end{exercise}

\begin{exercise}
\label{exercise-modified-product-over-points}
Let $X$, $A_x$, $\mathcal{G}$ be as in
Exercise \ref{exercise-product-over-points}.
Let $\mathcal{B}$ be a basis for the topology of $X$, see
Topology, Definition \ref{topology-definition-base}.
For $U \in \mathcal{B}$ let $A_U$ be a subgroup
$A_U \subset \mathcal{G}(U) = \prod_{x \in U} A_x$. Assume that for
$U \subset V$ with $U, V \in \mathcal{B}$ the restriction
maps $A_V$ into $A_U$. For $U \subset X$ open set
$$
\mathcal{F}(U) =
\left\{(s_x)_{x \in U}
\;\middle\vert\;
\begin{matrix}
\text{ for every }x\text{ in }U\text{ there exists } V \in \mathcal{B} \\
x \in V \subset U\text{ such that } (s_y)_{y \in V} \in A_V
\end{matrix}
\right\}
$$
Show that $\mathcal{F}$ defines a sheaf of abelian groups on $X$.
Show, by an example, that it is usually not the case that
$\mathcal{F}(U) = A_U$ for $U \in \mathcal{B}$.
\end{exercise}





\section{Schemes}
\label{section-schemes}

\noindent
Let $LRS$ be the category of locally ringed spaces.
An affine scheme is an object in $LRS$ isomorphic in $LRS$ to
a pair of the form $(\Spec(A), {\mathcal O}_{\Spec(A)})$.
A scheme is an
object $(X, {\mathcal O}_X)$ of $LRS$ such that every point $x\in X$
has an open neighbourhood $U \subset X$ such that the pair
$(U, {\mathcal O}_X|_U)$ is an affine scheme.

\begin{exercise}
\label{exercise-one-point}
Find a $1$-point locally ringed space which is not a scheme.
\end{exercise}

\begin{exercise}
\label{exercise-two-points}
Suppose that $X$ is a scheme whose underlying
topological space has 2 points. Show that $X$ is an affine scheme.
\end{exercise}

\begin{exercise}
\label{exercise-discrete-finite-set-points}
Suppose that $X$ is a scheme whose underlying topological space is a
finite discrete set. Show that $X$ is an affine scheme.
\end{exercise}

\begin{exercise}
\label{exercise-three-points}
Show that there exists a non-affine scheme having three points.
\end{exercise}

\begin{exercise}
\label{exercise-quasi-compact-closed-point}
Suppose that $X$ is a quasi-compact scheme.
Show that $X$ has a closed point.
\end{exercise}

\begin{remark}
\label{remark-open-immersion}
When $(X, {\mathcal O}_X)$ is a ringed space and $U \subset X$
is an open subset then $(U, {\mathcal O}_X|_U)$ is a ringed space. Notation:
${\mathcal O}_U = {\mathcal O}_X|_U$. There is a canonical morphisms
of ringed spaces
$$
j : (U, {\mathcal O}_U) \longrightarrow (X, {\mathcal O}_X).
$$
If $(X, {\mathcal O}_X)$ is a locally ringed space, so is
$(U, {\mathcal O}_U)$ and
$j$ is a morphism of locally ringed spaces. If $(X, {\mathcal O}_X)$
is a scheme
so is $(U, {\mathcal O}_U)$ and $j$ is a morphism of schemes. We say
that
$(U, {\mathcal O}_U)$ is an {\it open subscheme} of $(X, {\mathcal O}_X)$
and that
$j$ is an {\it open immersion}. More generally, any morphism
$j' : (V, {\mathcal O}_V) \to (X, {\mathcal O}_X)$ that is {\it isomorphic}
to a
morphism $j : (U, {\mathcal O}_U) \to (X, {\mathcal O}_X)$ as above is
called an
open immersion.
\end{remark}

\begin{exercise}
\label{exercise-open-affine-not-affine}
Give an example of an affine scheme $(X, {\mathcal O}_X)$
and an open $U \subset X$ such that $(U, {\mathcal O}_X|U)$ is not an affine
scheme.
\end{exercise}

\begin{exercise}
\label{exercise-morphism-does-not-extend}
Given an example of a pair of affine schemes
$(X, {\mathcal O}_X)$, $(Y, {\mathcal O}_Y)$,
an open subscheme $(U, {\mathcal O}_X|_U)$
of $X$ and a morphism of schemes
$(U, {\mathcal O}_X|_U) \to (Y, {\mathcal O}_Y)$
that does not extend to a morphism of schemes
$(X, {\mathcal O}_X) \to (Y, {\mathcal O}_Y)$.
\end{exercise}

\begin{exercise}
\label{exercise-closed-subscheme-does-not-extend}
(This is pretty hard.)
Given an example of a scheme $X$, and open subscheme $U \subset X$
and a closed subscheme $Z \subset U$ such that $Z$ does not extend
to a closed subscheme of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-not-morphism-schemes}
Give an example of a scheme $X$, a field $K$, and a
morphism of ringed spaces $\Spec(K) \to X$ which
is NOT a morphism of schemes.
\end{exercise}

\begin{exercise}
\label{exercise-just-kidding}
Do all the exercises in Hartshorne, \cite[Chapter II]{H},
Sections 1 and 2...\ \ Just kidding!
\end{exercise}

\begin{definition}
\label{definition-integral}
A scheme $X$ is called {\it integral} if for every nonempty affine
open $U \subset X$ the ring $\Gamma(U, \mathcal{O}_X) = \mathcal{O}_X(U)$
is a domain.
\end{definition}

\begin{exercise}
\label{exercise-morphism-integral-schemes-surjective-stalks-not-closed}
Give an example of a morphism of {\it integral}
schemes $f : X \to Y$ such that the induced maps ${\mathcal O}_{Y, f(x)}
\to {\mathcal O}_{X, x}$ are surjective for all $x\in X$, but $f$
is not a closed immersion.
\end{exercise}

\begin{exercise}
\label{exercise-fibre-product-affines-not-affine}
Give an example of a fibre product $X \times_S Y$ such that $X$ and $Y$
are affine but $X \times_S Y$ is not.
\end{exercise}

\begin{remark}
\label{remark-separated-base-fibre-product-affines-affine}
It turns out this cannot happen with $S$ separated. Do you know why?
\end{remark}

\begin{exercise}
\label{exercise-not-geometrically-integral}
Give an example of a scheme
$V$ which is integral 1-dimensional scheme of finite type
over ${\mathbf Q}$ such that
$\Spec({\mathbf C}) \times_{\Spec({\mathbf Q})} V$
is not integral.
\end{exercise}

\begin{exercise}
\label{exercise-not-geometrically-reduced}
Give an example of a scheme
$V$ which is integral 1-dimensional scheme of finite type
over a field $k$ such that $\Spec(k') \times_{\Spec(k)} V$
is not reduced for some finite field extension $k \subset k'$.
\end{exercise}

\begin{remark}
\label{remark-affine-dimension}
If your scheme is affine then dimension is the
same as the Krull dimension of the underlying ring. So you can
use last semesters results to compute dimension.
\end{remark}






\section{Morphisms}
\label{section-morphisms}

\noindent
An important question is, given a morphism $\pi : X \to S$,
whether the morphism has a section or a rational section.
Here are some example exercises.

\begin{exercise}
\label{exercise-no-section}
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, t, 1/xt])
\longrightarrow
S = \Spec(\mathbf{C}[t]).
$$
\begin{enumerate}
\item Show there does not exist a morphism $\sigma : S \to X$
such that $\pi \circ \sigma = \text{id}_U$.
\item Show there does exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-no-rational-section}
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, t]/(x^2 + t))
\longrightarrow
S = \Spec(\mathbf{C}[t]).
$$
Show there does not exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{exercise}

\begin{exercise}
\label{exercise-has-rational-section}
Let $A, B, C \in \mathbf{C}[t]$ be nonzero polynomials.
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, y, t]/(A + Bx^2 + Cy^2))
\longrightarrow
S = \Spec(\mathbf{C}[t]).
$$
Show there does exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
(Hint: Symbolically, write $x = X/Z$, $y = Y/Z$ for some
$X, Y, Z \in \mathbf{C}[t]$ of degree $\leq d$ for some $d$,
and work out the condition that this solves the equation.
Then show, using dimension theory, that if $d >> 0$ you can find
nonzero $X, Y, Z$ solving the equation.)
\end{exercise}

\begin{remark}
\label{remark-tsen}
Exercise \ref{exercise-has-rational-section}
is a special case of ``Tsen's theorem''.
Exercise \ref{exercise-no-section-curve} shows that the
method is limited to low degree equations (conics when the base and
fibre have dimension 1).
\end{remark}

\begin{exercise}
\label{exercise-no-section-curve}
Consider the morphism of schemes
$$
\pi :
X = \Spec(\mathbf{C}[x, y, t]
/(1 + t x^3 + t^2 y^3))
\longrightarrow
S = \Spec(\mathbf{C}[t])
$$
Show there does not exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{exercise}

\begin{exercise}
\label{exercise-no-section-surface}
Consider the schemes
$$
X = \Spec(\mathbf{C}[\{x_i\}_{i = 1}^{8}, s, t]
/(1 + s x_1^3 + s^2 x_2^3 +
t x_3^3 + st x_4^3 + s^2t x_5^3 +
t^2 x_6^3 + st^2 x_7^3 + s^2t^2 x_8^3))
$$
and
$$
S = \Spec(\mathbf{C}[s, t])
$$
and the morphism of schemes
$$
\pi : X \longrightarrow S
$$
Show there does not exist a nonempty open $U \subset S$ and
a morphism $\sigma : U \to X$ such that $\pi \circ \sigma = \text{id}_U$.
\end{exercise}

\begin{exercise}
\label{exercise-for-number-theorists}
(For the number theorists.) Give an example of a closed subscheme
$$
Z \subset \Spec\left({\mathbf Z}[x, \frac{1 }{ x(x-1)(2x-1)}]\right)
$$
such that the morphism $Z \to \Spec({\mathbf Z})$ is finite
and surjective.
\end{exercise}

\begin{exercise}
\label{exercise-quasi-section}
If you do not like number theory, you can try the
variant where you look at
$$
\Spec\left({\mathbf F}_p[t, x, \frac{1 }{ x(x-t)(tx-1)}]\right)
\longrightarrow
\Spec({\mathbf F}_p[t])
$$
and you try to find a closed subscheme of the top scheme
which maps finite surjectively to the bottom one. (There is a
theoretical reason for having a finite ground field here; allthough
it may not be necessary in this particular case.)
\end{exercise}

\begin{remark}
\label{remark-interpretation-skolem-noether}
The interpretation of the results of
Exercise \ref{exercise-for-number-theorists} and \ref{exercise-quasi-section}
is that given the morphism $X \to S$ all of whose fibres are nonempty,
there exists a finite surjective morphism $S' \to S$ such that
the base change $X_{S'} \to S'$ does have a section.
This is not a general fact, but it holds if the base is the spectrum of a
dedekind ring with finite residue fields at closed points, and
the morphism $X \to S$ is flat with geometrically irreducible generic
fibre. See Exercise \ref{exercise-no-quasi-section} below for an example
where it doesn't work.
\end{remark}

\begin{exercise}
\label{exercise-no-quasi-section}
Prove there exist a $f \in \mathbf{C}[x, t]$ which is not divisible
by $t - \alpha$ for any $\alpha \in \mathbf{C}$ such that
there does not exist any $Z \subset \Spec(\mathbf{C}[x, t, 1/f])$
which maps finite surjectively to $\Spec(\mathbf{C}[t])$.
(I think that $f(x, t) = (xt - 2)(x - t + 3)$ works. To show any candidate
has the required property is not so easy I think.)
\end{exercise}


\section{Tangent Spaces}
\label{section-tangent-space}

\begin{definition}
\label{definition-dual-numbers}
For any ring $R$ we denote $R[\epsilon]$ the ring
of {\it dual numbers}. As an $R$-module it is free with
basis $1$, $\epsilon$. The ring structure comes from setting
$\epsilon^2 = 0$.
\end{definition}

\begin{exercise}
\label{exercise-tangent-space-Zariski}
Let $f : X \to S$ be a morphism of schemes.
Let $x \in X$ be a point, let $s = f(x)$.
Consider the solid commutative diagram
$$
\xymatrix{
\Spec(\kappa(x)) \ar[r] \ar[dr] \ar@/^1pc/[rr] &
\Spec(\kappa(x)[\epsilon]) \ar@{.>}[r] \ar[d]&
X \ar[d] \\
&
\Spec(\kappa(s)) \ar[r] &
S
}
$$
with the curved arrow being the canonical morphism of
$\Spec(\kappa(x))$ into $X$.
If $\kappa(x) = \kappa(s)$ show that the set of dotted
arrows which make the diagram commute are in one to one correspondence
with the set of linear maps
$$
\Hom_{\kappa(x)}(
\frac{\mathfrak m_x}{\mathfrak m_x^2 + \mathfrak m_s\mathcal{O}_{X, x}},
\kappa(x))
$$
In other words: describe such a bijection.
(This works more generally if $\kappa(x) \supset \kappa(s)$ is a
separable algebraic extension.)
\end{exercise}

\begin{definition}
\label{definition-tangent-space}
Let $f : X \to S$ be a morphism of schemes.
Let $x \in X$. We dub the set of dotted arrows
of Exercise \ref{exercise-tangent-space-Zariski}
the {\it tangent space of $X$ over $S$}
and we denote it $T_{X/S, x}$. An element of this
space is called a {\it tangent vector} of $X/S$ at $x$.
\end{definition}

\begin{exercise}
\label{exercise-simple-push-out}
For any field $K$ prove that the diagram
$$
\xymatrix{
\Spec(K) \ar[r] \ar[d] & \Spec(K[\epsilon_1]) \ar[d] \\
\Spec(K[\epsilon_2) \ar[r] &
\Spec(K[\epsilon_1, \epsilon_2]/(\epsilon_1\epsilon_2))
}
$$
is a push out diagram in the category of schemes.
(Here $\epsilon_i^2 = 0$ as before.)
\end{exercise}

\begin{exercise}
\label{exercise-tangent-space-vectors-space}
Let $f : X \to S$ be a morphism of schemes.
Let $x \in X$. Define addition of tangent vectors,
using Exercise \ref{exercise-simple-push-out}
and a suitable morphism
$$
\Spec(K[\epsilon])
\longrightarrow
\Spec(K[\epsilon_1, \epsilon_2]/(\epsilon_1\epsilon_2)).
$$
Similarly, define scalar multiplication of tangent vectors (this is easier).
Show that $T_{X/S, x}$ becomes a $\kappa(x)$-vector space with your
constructions.
\end{exercise}

\begin{exercise}
\label{exercise-compute-TS}
Let $k$ be a field. Consider
the structure morphism $f : X = \mathbf{A}^1_k \to \Spec(k) = S$.
\begin{enumerate}
\item Let $x \in X$ be a closed point. What is the dimension of
$T_{X/S, x}$?
\item Let $\eta \in X$ be the generic point. What is the dimension
of $T_{X/S, \eta}$?
\item Consider now $X$ as a scheme over $\Spec(\mathbf{Z})$.
What are the dimensions of $T_{X/\mathbf{Z}, x}$ and
$T_{X/\mathbf{Z}, \eta}$?
\end{enumerate}
\end{exercise}

\begin{remark}
\label{exercise-tangent-space-relative}
Exercise \ref{exercise-compute-TS} explains why it is necessary
to consider the tangent space of $X$ over $S$ to get a good notion.
\end{remark}

\begin{exercise}
\label{exercise-compute-TS-field}
Consider the morphism of schemes
$$
f : X = \Spec(\mathbf{F}_p(t))
\longrightarrow
\Spec(\mathbf{F}_p(t^p)) = S
$$
Compute the tangent space of $X/S$ at the unique point of $X$.
Isn't that weird? What do you think happens if you take the morphism
of schemes corresponding to $\mathbf{F}_p[t^p] \to \mathbf{F}_p[t]$?
\end{exercise}

\begin{exercise}
\label{exercise-compute-TS-cusp}
Let $k$ be a field.
Compute the tangent space of $X/k$ at the point $x = (0, 0)$
where $X = \Spec(k[x, y]/(x^2 - y^3))$.
\end{exercise}

\begin{exercise}
\label{exercise-map-tangent-spaces}
Let $f : X \to Y$ be a morphism of schemes over $S$.
Let $x \in X$ be a point. Set $y = f(x)$.
Assume that the natural map $\kappa(y) \to \kappa(x)$ is
bijective. Show, using the definition,
that $f$ induces a natural linear map
$$
\text{d}f : T_{X/S, x} \longrightarrow T_{Y/S, y}.
$$
Match it with what happens on local rings via
Exercise \ref{exercise-tangent-space-Zariski} in case $\kappa(x) = \kappa(s)$.
\end{exercise}

\begin{exercise}
\label{exercise-Jacobian}
Let $k$ be an algebraically closed field.
Let
\begin{eqnarray*}
f : \mathbf{A}_k^n & \longrightarrow & \mathbf{A}^m_k \\
(x_1, \ldots, x_n) & \longmapsto & (f_1(x_i), \ldots, f_m(x_i))
\end{eqnarray*}
be a morphism of schemes over $k$. This is given by
$m$ polynomials $f_1, \ldots, f_m$ in $n$ variables.
Consider the matrix
$$
A = \left( \frac{\partial f_j}{\partial x_i} \right)
$$
Let $x \in \mathbf{A}^n_k$ be a closed point.
Set $y =  f(x)$. Show that the map on tangent spaces
$T_{\mathbf{A}^n_k/k, x} \to T_{\mathbf{A}^m_k/k, y}$
is given by the value of the matrix $A$ at the point $x$.
\end{exercise}














\section{Quasi-coherent Sheaves}
\label{section-quasi-coherent}

\begin{definition}
\label{definition-quasi-coherent}
Let $X$ be a scheme.
A sheaf $\mathcal{F}$ of $\mathcal{O}_X$-modules is {\it quasi-coherent}
if for every affine open $\Spec(R) = U \subset X$ the restriction
$\mathcal{F}|_U$ is of the form $\widetilde M$ for some $R$-module
$M$.
\end{definition}

\noindent
It is enough to check this conditions on the members of an
affine open covering of $X$.
See Schemes, Section \ref{schemes-section-quasi-coherent}
for more results.

\begin{definition}
\label{definition-specialization}
Let $X$ be a topological space. Let $x, x' \in X$.
We say $x$ is a {\it specialization} of $x'$
if and only if $x \in \overline{\{x'\}}$.
\end{definition}

\begin{exercise}
\label{exercise-quasi-coherent-specialization-points}
Let $X$ be a scheme. Let $x, x' \in X$. Let $\mathcal{F}$ be
a quasi-coherent sheaf of $\mathcal{O}_X$-modules.
Suppose that (a) $x$ is a specialization of $x'$ and (b)
$\mathcal{F}_{x'} \not = 0$. Show that $\mathcal{F}_x \not = 0$.
\end{exercise}

\begin{exercise}
\label{exercise-O-module-specialization-points}
Find an example of a scheme $X$, points $x, x' \in X$,
a sheaf of $\mathcal{O}_X$-modules
$\mathcal{F}$ such that (a) $x$ is a specialization of $x'$ and (b)
$\mathcal{F}_{x'} \not = 0$ and $\mathcal{F}_x = 0$.
\end{exercise}

\begin{definition}
\label{definition-Noetherian-scheme}
A scheme $X$ is called {\it locally Noetherian} if and only if
for every point $x \in X$ there exists an affine open
$\Spec(R) = U \subset X$ such that $R$ is Noetherian.
A scheme is {\it Noetherian} if it is locally Noetherian and quasi-compact.
\end{definition}

\noindent
If $X$ is locally Noetherian then any affine open of $X$
is the spectrum of a Noetherian ring, see
Properties, Lemma \ref{properties-lemma-locally-Noetherian}.

\begin{definition}
\label{definition-coherent}
Let $X$ be a locally Noetherian scheme.
Let $\mathcal{F}$ be a quasi-coherent sheaf of
$\mathcal{O}_X$-modules. We say $\mathcal{F}$ is {\it coherent}
if for every point $x \in X$ there exists an affine open
$\Spec(R) = U \subset X$ such that $\mathcal{F}|_U$
is isomorphic to $\widetilde M$ for some finite $R$-module $M$.
\end{definition}

\begin{exercise}
\label{exercise-extend-quasi-coherent}
Let $X = \Spec(R)$ be an affine scheme.
\begin{enumerate}
\item Let $f \in R$. Let $\mathcal{G}$ be a
quasi-coherent sheaf of $\mathcal{O}_{D(f)}$-modules
on the open subscheme $D(f)$.
Show that $\mathcal{G} = \mathcal{F}|_U$ for some
quasi-coherent sheaf of $\mathcal{O}_X$-modules
$\mathcal{F}$.
\item Let $I \subset R$ be an ideal.
Let $i : Z \to X$ be the closed subscheme of $X$ corresponding
to $I$. Let $\mathcal{G}$ be a
quasi-coherent sheaf of $\mathcal{O}_Z$-modules
on the closed subscheme $Z$.
Show that $\mathcal{G} = i^*\mathcal{F}$ for some
quasi-coherent sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$.
(Why is this silly?)
\item Assume that $R$ is Noetherian.
Let $f \in R$. Let $\mathcal{G}$ be a
coherent sheaf of $\mathcal{O}_{D(f)}$-modules
on the open subscheme $D(f)$.
Show that $\mathcal{G} = \mathcal{F}|_U$ for some
coherent sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-extend-off-open}
If $U \to X$ is a quasi-compact immersion then any
quasi-coherent sheaf on $U$ is the restriction of a
quasi-coherent sheaf on $X$.
If $X$ is a Noetherian scheme, and $U \subset X$ is open,
then any coherent sheaf on $U$ is the restriction of a
coherent sheaf on $X$.
Of course the exercise above is easier, and shouldn't use these general facts.
\end{remark}
















\section{Proj and projective schemes}
\label{section-proj}

\begin{exercise}
\label{exercise-graded-ring-specified-result}
Give examples of graded rings $S$ such that
\begin{enumerate}
\item $\text{Proj}(S)$ is affine and nonempty, and
\item $\text{Proj}(S)$ is integral, nonempty but not isomorphic
to ${\mathbf P}^n_A$ for any $n\geq 0$, any ring $A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-nonconstant-morphism-proj}
Give an example of a nonconstant morphism
of schemes ${\mathbf P}^1_{\mathbf C} \to {\mathbf P}^5_{\mathbf C}$ over
$\Spec({\mathbf C})$.
\end{exercise}

\begin{exercise}
\label{exercise-isomorphism-P1-conic}
Give an example of an isomorphism of schemes
$$
{\mathbf P}^1_{\mathbf C} \to
\text{Proj}({\mathbf C}[X_0, X_1, X_2]/(X_0^2 + X_1^2 + X_2^2))
$$
\end{exercise}

\begin{exercise}
\label{exercise-family-special-fibre-different}
Give an example of a morphism of schemes
$f : X \to {\mathbf A}^1_{\mathbf C} = \Spec({\mathbf C}[T])$
such that the (scheme theoretic) fibre $X_t$ of $f$ over
$t \in {\mathbf A}^1_{\mathbf C}$ is
(a) isomorphic to ${\mathbf P}^1_{\mathbf C}$ when $t$
is a closed point not equal to $0$, and
(b) not isomorphic to ${\mathbf P}^1_{\mathbf C}$ when $t = 0$.
We will call $X_0$ the {\it special fibre} of the morphism.
This can be done in many, many ways. Try to give examples that
satisfy (each of) the following additional restraints (unless
it isn't possible):
\begin{enumerate}
\item Can you do it with special fibre projective?
\item Can you do it with special fibre irreducible and projective?
\item Can you do it with special fibre integral and projective?
\item Can you do it with special fibre smooth and projective?
\item Can you do it with $f$ a flat morphism?
This just means that for every affine open $\Spec(A) \subset X$ the
induced ring map $\mathbf{C}[t] \to A$ is flat, which in this case means
that any nonzero polynomial in $t$ is a nonzero divisor on $A$.
\item Can you do it with $f$ a flat and projective morphism?
\item Can you do it with $f$ flat, projective and special fibre reduced?
\item Can you do it with $f$ flat, projective and special fibre irreducible?
\item Can you do it with $f$ flat, projective and special fibre integral?
\end{enumerate}
What do you think happens when you replace
${\mathbf P}^1_{\mathbf C}$ with another variety over ${\mathbf C}$?
(This can get very hard depending on which of the variants above you
ask for.)
\end{exercise}

\begin{exercise}
\label{exercise-affine-onto-projective-space}
Let $n \geq 1$ be any positive integer.
Give an example of a surjective morphism
$X \to {\mathbf P}^n_{\mathbf C}$ with $X$ affine.
\end{exercise}

\begin{exercise}
\label{exercise-morphism-proj}
Maps of $\text{Proj}$. Let $R$ and $S$ be graded rings.
Suppose we have a ring map
$$
\psi : R \to S
$$
and an integer $e \geq 1$ such that $\psi(R_d) \subset S_{de}$
for all $d \geq 0$. (By our conventions this is not a homomorphism
of graded rings, unless $e = 1$.)
\begin{enumerate}
\item For which elements $\mathfrak p \in \text{Proj}(S)$ is
there a well-defined corresponding point in $\text{Proj}(R)$? In other words,
find a suitable open $U \subset \text{Proj}(S)$ such that $\psi$ defines
a continuous map $r_\psi : U \to \text{Proj}(R)$.
\item Give an example where $U \not = \text{Proj}(S)$.
\item Give an example where $U = \text{Proj}(S)$.
\item (Do not write this down.) Convince yourself that
the continuous map $U \to \text{Proj}(R)$ comes canonically with
a map on sheaves so that $r_\psi$ is a morphism of schemes:
$$
\text{Proj}(S) \supset U \longrightarrow \text{Proj}(R).
$$
\item What can you say about this map if
$R = \bigoplus_{d \geq 0} S_{de}$ (as a graded ring with
$S_e$, $S_{2e}$, etc in degree $1$, $2$, etc) and $\psi$
is the inclusion mapping?
\end{enumerate}
\end{exercise}

\noindent
{\bf Notation.} Let $R$ be a graded ring as above and
let $n \geq 0$ be an integer. Let $X = \text{Proj}(R)$. Then there is a unique
quasi-coherent ${\mathcal O}_X$-module ${\mathcal O}_X(n)$ on $X$ such that
for every homogeneous element $f \in R$ of positive degree we have
${\mathcal O}_X |_{D_{+}(f)}$ is the quasi-coherent sheaf associated to the
$R_{(f)} = (R_f)_0$-module $(R_f)_n$ ($ = $elements homogenous of degree
$n$ in $R_f = R[1/f]$). See Hartshorne, page 116+. Note that there are
natural maps
$$
{\mathcal O}_X(n_1) \otimes_{{\mathcal O}_X} {\mathcal O}_X(n_2)
\longrightarrow
{\mathcal O}_X(n_1 + n_2)
$$

\begin{exercise}
\label{exercise-pathologies-proj}
Pathologies in $\text{Proj}$.
Give examples of $R$ as above such that
\begin{enumerate}
\item ${\mathcal O}_X(1)$ is not an invertible ${\mathcal O}_X$-module.
\item ${\mathcal O}_X(1)$ is invertible, but the
natural map ${\mathcal O}_X(1) \otimes_{{\mathcal O}_X} {\mathcal O}_X(1) \to
{\mathcal O}_X(2)$ is NOT an isomorphism.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-finitely-many-points-in-affine}
Let $S$ be a graded ring.
Let $X = \text{Proj}(S)$.
Show that any finite set of points of $X$ is contained in a standard
affine open.
\end{exercise}

\begin{exercise}
\label{exercise-prepare-glueing}
Let $S$ be a graded ring.
Let $X = \text{Proj}(S)$.
Let $Z, Z' \subset X$ be two closed subschemes.
Let $\varphi : Z \to Z'$ be an isomorphism.
Assume $Z \cap Z' = \emptyset$.
Show that for any $z \in Z$ there exists an affine
open $U \subset X$ such that $z \in U$, $\varphi(z) \in U$ and
$\varphi(Z \cap U) = Z' \cap U$.
(Hint: Use Exercise \ref{exercise-finitely-many-points-in-affine}
and something akin to
Schemes, Lemma \ref{schemes-lemma-standard-open-two-affines}.)
\end{exercise}










\section{Morphisms from surfaces to curves}
\label{section-from-surfaces-to-curves}

\begin{exercise}
\label{exercise-points-projective-space}
Let $R$ be a ring.
Let $R \to k$ be a map from $R$ to a field.
Let $n \geq 0$.
Show that
$$
\Mor_{\Spec(R)}(\Spec(k), \mathbf{P}^n_R)
=
(k^{n + 1} \setminus \{0\})/k^*
$$
where $k^*$ acts via scalar multiplication on $k^{n + 1}$.
From now on we denote $(x_0 : \ldots : x_n)$ the
morphism $\Spec(k) \to \mathbf{P}^n_k$ corresponding
to the equivalence class of the element
$(x_0, \ldots, x_n) \in k^{n + 1} \setminus \{0\}$.
\end{exercise}

\begin{exercise}
\label{exercise-curve-projective-plane}
Let $k$ be a field. Let $Z \subset \mathbf{P}^2_k$ be a
irreducible closed subscheme.
Show that either (a) $Z$ is a closed point, or (b) there exists
an homogeneous irreducible $F \in k[X_0, X_1, X_2]$ of degree $> 0$
such that $Z = V_{+}(F)$, or (c) $Z = \mathbf{P}^2_k$.
(Hint: Look on a standard affine open.)
\end{exercise}

\begin{exercise}
\label{exercise-bezout}
Let $k$ be a field. Let $Z_1, Z_2 \subset \mathbf{P}^2_k$ be
irreducible closed subschemes of the form $V_{+}(F)$
for some homogeneous irreducible $F_i \in k[X_0, X_1, X_2]$ of degree $> 0$.
Show that $Z_1 \cap Z_2$ is not empty.
(Hint: Use dimension theory to estimate the dimension of
the local ring of $k[X_0, X_1, X_2]/(F_1, F_2)$ at $0$.)
\end{exercise}

\begin{exercise}
\label{exercise-no-nonconstant-morphism-proj}
Show there does not exist a nonconstant morphism of schemes
$\mathbf{P}^2_{\mathbf{C}} \to \mathbf{P}^1_{\mathbf{C}}$
over $\Spec(\mathbf{C})$. Here a {\it constant morphism} is
one whose image is a single point.
(Hint: If the morphism is not constant consider the fibres over
$0$ and $\infty$ and argue that they have to meet to get a contradiction.)
\end{exercise}

\begin{exercise}
\label{exercise-nonconstant-morphism}
Let $k$ be a field.
Suppose that $X \subset \mathbf{P}^3_k$ is a closed subscheme
given by a single homogeneous equation $F \in k[X_0, X_1, X_2, X_3]$.
In other words,
$$
X = \text{Proj}(k[X_0, X_1, X_2, X_3]/(F)) \subset \mathbf{P}^3_k
$$
as explained in the course. Assume that
$$
F = X_0 G + X_1 H
$$
for some homogeneous polynomials $G, H \in k[X_0, X_1, X_2, X_3]$
of positive degree. Show that if $X_0, X_1, G, H$ have no common zeros
then there exists a nonconstant morphism
$$
X \longrightarrow \mathbf{P}^1_k
$$
of schemes over $\Spec(k)$
which on field points (see Exercise \ref{exercise-points-projective-space})
looks like $(x_0 : x_1 : x_2 : x_3) \mapsto (x_0 : x_1)$ whenever
$x_0$ or $x_1$ is not zero.
\end{exercise}





\section{Invertible sheaves}
\label{section-invertible-sheaves}

\begin{definition}
\label{definition-invertible-sheaf}
Let $X$ be a locally ringed space.
An {\it invertible ${\mathcal O}_X$-module} on $X$
is a sheaf of ${\mathcal O}_X$-modules ${\mathcal L}$ such that every point
has an open neighbourhood $U \subset X$ such that ${\mathcal L}|_U$
is isomorphic to ${\mathcal O}_U$ as ${\mathcal O}_U$-module.
We say that ${\mathcal L}$ is trivial if it is isomorphic to
${\mathcal O}_X$ as a ${\mathcal O}_X$-module.
\end{definition}

\begin{exercise}
\label{exercise-general-facts-invertible}
General facts.
\begin{enumerate}
\item Show that an invertible ${\mathcal O}_X$-module on
a scheme $X$ is quasi-coherent.
\item Suppose $X\to Y$ is a morphism of ringed spaces,
and ${\mathcal L}$ an invertible ${\mathcal O}_Y$-module.
Show that $f^\ast {\mathcal L}$ is an invertible ${\mathcal O}_X$ module.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-invertible-algebra}
Algebra.
\begin{enumerate}
\item Show that an invertible ${\mathcal O}_X$-module on
an affine scheme $\Spec(A)$ corresponds to an $A$-module $M$ which is
(i) finite, (ii) projective, (iii) locally free of rank 1,
and hence (iv) flat, and (v) finitely presented. (Feel free to
quote things from last semesters course; or from algebra books.)
\item Suppose that $A$ is a domain and that $M$ is
a module as in (a). Show that $M$ is isomorphic as an $A$-module
to an ideal $I \subset A$ such that $IA_{\mathfrak p}$ is principal for
every prime ${\mathfrak p}$.
\end{enumerate}
\end{exercise}

\begin{definition}
\label{definition-invertible-module}
Let $R$ be a ring. An {\it invertible module $M$} is an $R$-module
$M$ such that $\widetilde M$ is an invertible sheaf on the
spectrum of $R$. We say $M$ is {\it trivial} if $M \cong R$ as
an $R$-module.
\end{definition}

\noindent
In other words, $M$ is invertible if and only if
it satisfies all of the following conditions:
it is flat, of finite presentation, projective, and
locally free of rank 1. (Of course it suffices for it
to be locally free of rank 1).

\begin{exercise}
\label{exercise-simple-examples-invertible}
Simple examples.
\begin{enumerate}
\item
\label{item-affine-line}
Let $k$ be a field. Let $A = k[x]$.
Show that $X = \Spec(A)$ has only trivial invertible
${\mathcal O}_X$-modules. In other words, show that every
invertible $A$-module is free of rank 1.
\item
\label{item-affine-line-with-0-and-1-identified}
Let $A$ be the ring
$$
A = \{ f\in k[x] \mid f(0) = f(1) \}.
$$
Show there exists a nontrivial invertible $A$-module, unless
$k = {\mathbf F}_2$. (Hint: Think about $\Spec(A)$ as identifying
$0$ and $1$ in ${\mathbf A}^1_k = \Spec(k[x])$.)
\item
\label{item-affine-line-with-cusp}
Same question as in (\ref{item-affine-line-with-0-and-1-identified})
for the ring $A = k[x^2, x^3] \subset k[x]$
(except now $k = {\mathbf F}_2$ works as well).
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-higher-dimension-invertible}
Higher dimensions.
\begin{enumerate}
\item Prove that every invertible sheaf on two dimensional
affine space is trivial. More precisely, let
${\mathbf A}^2_k = \Spec(k[x, y])$ where $k$ is a field.
Show that every invertible sheaf on ${\mathbf A}^2_k$ is trivial.
(Hint: One way to do this is to consider the corresponding
module $M$, to look at $M \otimes_{k[x, y]} k(x)[y]$, and
then use
Exercise \ref{exercise-simple-examples-invertible} (\ref{item-affine-line})
to find a generator for this; then you still have to think.
Another way to is to use
Exercise \ref{exercise-invertible-algebra}
and use what we know about ideals of the
polynomial ring: primes of height one are generated by an irreducible
polynomial; then you still have to think.)
\item Prove that every invertible sheaf on any open
subscheme of two dimensional affine space is trivial. More precisely, let
$U \subset {\mathbf A}^2_k$ be an open subscheme where $k$ is a field.
Show that every invertible sheaf on $U$ is trivial. Hint: Show that every
invertible sheaf on $U$ extends to one on ${\mathbf A}^2_k$. Not easy;
but you can find it in Hartshorne.
\item Find an example of a nontrivial
invertible sheaf on a punctured cone over a field. More
precisely, let $k$ be a field and let $C = \Spec(k[x, y, z]/(xy-z^2))$.
Let $U = C \setminus \{ (x, y, z) \}$. Find a nontrivial
invertible sheaf on $U$. Hint: It may be easier to compute the
group of isomorphism classes of invertible sheaves on $U$ than to
just find one. Note that $U$ is covered by the opens
$\Spec(k[x, y, z, 1/x]/(xy-z^2))$ and
$\Spec(k[x, y, z, 1/y]/(xy-z^2))$
which are ``easy'' to deal with.
\end{enumerate}
\end{exercise}

\begin{definition}
\label{definition-picard-group}
Let $X$ be a locally ringed space.
The {\it Picard group of $X$} is the set $\text{Pic}(X)$
of isomorphism classes of invertible $\mathcal{O}_X$-modules
with addition given by tensor product.
See Modules, Definition \ref{modules-definition-pic}.
For a ring $R$ we set $\text{Pic}(R) = \text{Pic}(\Spec(R))$.
\end{definition}

\begin{exercise}
\label{exercise-traverso}
Let $R$ be a ring.
\begin{enumerate}
\item Show that if $R$ is a Noetherian normal domain, then
$\text{Pic}(R) = \text{Pic}(R[t])$. [Hint: There is a map
$R[t] \to R$, $t \mapsto 0$ which is a left inverse to the map
$R \to R[t]$. Hence it suffices to show that any invertible
$R[t]$-module $M$ such that $M/tM \cong R$ is free of rank $1$.
Let $K = f.f.(R)$.
Pick a trivialization $K[t] \to M \otimes_{R[t]} K[t]$ which is possible by
Exercise \ref{exercise-simple-examples-invertible} (\ref{item-affine-line}).
Adjust it so it agrees with the trivialization
of $M/tM$ above. Show that it is in fact a trivialization of
$M$ over $R[t]$ (this is where normality comes in).]
\item Let $k$ be a field. Show that
$\text{Pic}(k[x^2, x^3, t]) \not = \text{Pic}(k[x^2, x^3])$.
\end{enumerate}
\end{exercise}













\section{{\v C}ech Cohomology}
\label{section-cech-cohomology}

\begin{exercise}
\label{exercise-cech-cohomology}
{\v C}ech cohomology. Here $k$ is a field.
\begin{enumerate}
\item Let $X$ be a scheme with an open covering
${\mathcal U} : X = U_1 \cup U_2$, with $U_1 = \Spec(k[x])$,
$U_2 =  \Spec(k[y])$
with $U_1 \cap U_2 = \Spec(k[z, 1/z])$ and with open immersions
$U_1 \cap U_2 \to U_1$ resp.\ $U_1 \cap U_2 \to U_2$ determined
by $x \mapsto z$ resp.\ $y \mapsto z$ (and I really mean this).
(We've seen in the lectures that such an $X$ exists; it is the affine
line zith zero doubled.) Compute ${\mathaccent 20 H}^1({\mathcal U}, {\mathcal
O})$;
eg.\ give a basis for it as a $k$-vectorspace.
\item For each element in
${\mathaccent 20 H}^1({\mathcal U}, {\mathcal O})$
construct an exact sequence of sheaves of ${\mathcal O}_X$-modules
$$
0 \to {\mathcal O}_X \to E \to {\mathcal O}_X \to 0
$$
such that the boundary $\delta(1) \in {\mathaccent 20 H}^1({\mathcal U},
{\mathcal O})$
equals the given element. (Part of the problem is to make sense of this.
See also below.
It is also OK to show abstractly such a thing has to exist.)
\end{enumerate}
\end{exercise}

\begin{definition}
\label{definition-delta}
(Definition of delta.) Suppose that
$$
0 \to {\mathcal F}_1 \to {\mathcal F}_2 \to {\mathcal F}_3 \to 0
$$
is a short exact sequence of abelian sheaves on any topological space $X$.
The boundary map
$\delta : H^0(X, {\mathcal F}_3) \to {\mathaccent 20 H}^1(X, {\mathcal F}_1)$
is defined as follows. Take an element $\tau \in H^0(X, {\mathcal F}_3)$.
Choose an open covering ${\mathcal U} : X = \bigcup_{i\in I} U_i$ such
that for each $i$ there exists a section $\tilde \tau_i \in {\mathcal F}_2$
lifting the restriction of $\tau$ to $U_i$. Then consider the assignment
$$
(i_0, i_1) \longmapsto
\tilde \tau_{i_0}|_{U_{i_0i_1}} - \tilde \tau_{i_1}|_{U_{i_0i_1}}.
$$
This is clearly a 1-coboundary in the {\v C}ech complex
${\mathaccent 20 C}^\ast({\mathcal U}, {\mathcal F}_2)$. But we observe that
(thinking of ${\mathcal F}_1$ as a subsheaf of ${\mathcal F}_2$) the RHS
always is a section of ${\mathcal F}_1$ over $U_{i_0i_1}$. Hence we
see that the assignment defines a 1-cochain in the complex
${\mathaccent 20 C}^\ast({\mathcal U}, {\mathcal F}_2)$. The cohomology
class of this 1-cochain is by definition {\it $\delta(\tau)$}.
\end{definition}



\section{Divisors}
\label{section-divisors}

\noindent
We collect all relevant definitions here in one spot for convenience.

\begin{definition}
\label{definition-divisor}
Throughout, let $S$ be any scheme and let
$X$ be a Noetherian, integral scheme.
\begin{enumerate}
\item A {\it Weil divisor} on $X$ is a formal linear combination
$\Sigma n_i[Z_i]$ of prime divisors $Z_i$ with integer coefficients.
\item A {\it prime divisor} is a closed subscheme $Z \subset X$,
which is integral with generic point $\xi \in Z$ such that
${\mathcal O}_{X, \xi}$ has dimension $1$. We will use the notation
${\mathcal O}_{X, Z} = {\mathcal O}_{X, \xi}$
when $\xi \in Z \subset X$ is as above. Note that ${\mathcal O}_{X, Z} \subset
K(X)$ is a subring of the function field of $X$.
\item The {\it Weil divisor associated to a rational function
$f \in K(X)^\ast$} is the sum $\Sigma v_Z(f)[Z]$. Here $v_Z(f)$ is
defined as follows
\begin{enumerate}
\item If $f \in {\mathcal O}_{X, Z}^\ast$ then $v_Z(f) = 0$.
\item If $f \in {\mathcal O}_{X, Z}$ then
$$
v_Z(f) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(f)).
$$
\item If $f = \frac{a}{b}$ with $a, b \in {\mathcal O}_{X, Z}$
then
$$
v_Z(f) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(a)) -
\text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(b)).
$$
\end{enumerate}
\item An {\it effective Cartier divisor} on a scheme $S$
is a closed subscheme $D \subset S$ such that every point $d\in D$
has an affine open neighbourhood $\Spec(A) = U \subset S$ in $S$
so that $D \cap U = \Spec(A/(f))$ with $f \in A$ a nonzero divisor.
\item The {\it Weil divisor $[D]$ associated to an effective
Cartier divisor $D \subset X$} of our Noetherian integral
scheme $X$ is defined as the sum $\Sigma v_Z(D)[Z]$ where
$v_Z(D)$ is defined as follows
\begin{enumerate}
\item If the generic point $\xi$ of $Z$ is not in $D$
then $v_Z(D) = 0$.
\item If the generic point $\xi$ of $Z$ is in $D$
then
$$
v_Z(D) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(f))
$$
where $f \in {\mathcal O}_{X, Z} = {\mathcal O}_{X, \xi}$ is the nonzero divisor
which defines $D$ in an affine neighbourhood of $\xi$ (as in (4) above).
\end{enumerate}
\item Let $S$ be a scheme. The {\it sheaf of total quotient
rings ${\mathcal K}_S$} is the sheaf of ${\mathcal O}_S$-algebras which is
the sheafification of the pre-sheaf ${\mathcal K}'$ defined as follows.
For $U \subset S$ open we set ${\mathcal K}'(U) = S_U^{-1}{\mathcal O}_S(U)$
where $S_U \subset {\mathcal O}_S(U)$ is the multiplicative subset
consisting of sections $f \in {\mathcal O}_S(U)$ such that the germ
of $f$ in ${\mathcal O}_{S, u}$ is a nonzero divisor for every $u\in U$.
In particular the elements of $S_U$ are all nonzero divisors.
Thus ${\mathcal O}_S$ is a subsheaf of ${\mathcal K}_S$, and we get a
short exact sequence
$$
0 \to {\mathcal O}_S^\ast \to {\mathcal K}_S^\ast \to
{\mathcal K}_S^\ast/{\mathcal O}_S^\ast \to 0.
$$
\item A {\it Cartier divisor} on a scheme $S$ is a global
section of the quotient sheaf ${\mathcal K}_S^\ast/{\mathcal O}_S^\ast$.
\item The {\it Weil divisor associated to a Cartier divisor}
$\tau \in \Gamma(X, {\mathcal K}_X^\ast/{\mathcal O}_X^\ast)$ over our
Noetherian integral scheme
$X$ is the sum $\Sigma v_Z(\tau)[Z]$ where $v_Z(\tau)$ is defined
as by the following recipe
\begin{enumerate}
\item If the germ of $\tau$ at the generic point $\xi$
of $Z$ is zero -- in other words the image of $\tau$ in the stalk
$({\mathcal K}^\ast/{\mathcal O}^\ast)_\xi$ is ``zero'' -- then $v_Z(\tau) = 0$.
\item Find an affine open neighbourhood $\Spec(A) = U \subset X$
so that $\tau|_U$ is the image of a section $f \in {\mathcal K}(U)$
and moreover $f = a/b$ with $a, b \in A$. Then we set
$$
v_Z(f) = \text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(a)) -
\text{length}_{{\mathcal O}_{X, Z}}({\mathcal O}_{X, Z}/(b)).
$$
\end{enumerate}
\end{enumerate}
\end{definition}

\begin{remarks}
\label{remarks-divisors}
Here are some trivial remarks.
\begin{enumerate}
\item On a Noetherian integral scheme $X$ the
sheaf ${\mathcal K}_X$ is constant with value the function field $K(X)$.
\item To make sense out of the definitions above one needs
to show that
$$
\text{length}_{\mathcal O}({\mathcal O}/(ab)) =
\text{length}_{\mathcal O}({\mathcal O}/(a)) +
\text{length}_{\mathcal O}({\mathcal O}/(b))
$$
for any pair $(a, b)$ of nonzero elements of a Noetherian 1-dimensional
local domain ${\mathcal O}$. This will be done in the lectures.
\end{enumerate}
\end{remarks}

\begin{exercise}
\label{exercise-effective-cartier-cartier}
(On any scheme.)
Describe how to assign a Cartier divisor to an effective Cartier divisor.
\end{exercise}

\begin{exercise}
\label{exercise-rational-function-cartier}
(On an integral scheme.)
Describe how to assign a Cartier divisor $D$ to a rational function
$f$ such that the Weil divisor associated to $D$ and to $f$ agree.
(This is silly.)
\end{exercise}

\begin{exercise}
\label{exercise-weil-not-cartier}
Give an example of a Weil divisor on a variety which is not
the Weil divisor associated to any Cartier divisor.
\end{exercise}

\begin{exercise}
\label{exercise-weil-Q-cartier}
Give an example of a Weil divisor $D$ on a variety which is not
the Weil divisor associated to any Cartier divisor but
such that $nD$ is the Weil divisor associated to a Cartier
divisor for some $n>1$.
\end{exercise}

\begin{exercise}
\label{exercise-weil-not-Q-cartier}
Give an example of a Weil divisor $D$ on a variety which is not
the Weil divisor associated to any Cartier divisor and
such that $nD$ is NOT the Weil divisor associated to a Cartier
divisor for any $n>1$.
(Hint: Consider a cone, for example $X : xy - zw = 0$ in
$\mathbf{A}^4_k$. Try to show that $D = [x = 0, z = 0]$ works.)
\end{exercise}

\begin{exercise}
\label{exercise-cartier-not-difference-effective-cartier}
On a separated scheme $X$ of finite type over a field:
Give an example of a Cartier divisor which is not the difference of
two effective Cartier divisors.
Hint: Find some $X$ which does not have any nonempty effective Cartier
Cartier divisors for example the scheme constructed in
Harthorne, III Exercise 5.9. There is even an example
with $X$ a variety -- namely the variety of
Exercise \ref{exercise-nonprojective}.
\end{exercise}

\begin{exercise}
\label{exercise-nonprojective}
Example of a nonprojective proper variety.
Let $k$ be a field. Let $L \subset \mathbf{P}^3_k$ be a line and
let $C \subset \mathbf{P}^3_k$ be a nonsingular conic. Assume that
$C \cap L = \emptyset$. Choose an
isomorphism $\varphi : L \to C$. Let $X$ be the $k$-variety obtained
by glueing $C$ to $L$ via $\varphi$. In other words there is
a surjective proper birational morphism
$$
\pi : \mathbf{P}^3_k \longrightarrow X
$$
and an open $U \subset X$ such that $\pi : \pi^{-1}(U) \to U$ is
an isomorphism, $\pi^{-1}(U) = \mathbf{P}^3_k \setminus (L \cup C)$
and such that $\pi|_L = \pi|_C \circ \varphi$. (These conditions do not
yet uniquely define $X$. In order to do this you need to specify the
structure sheaf of $X$ along points of $Z = X \setminus U$.)
Show $X$ exists, is a proper variety, but is not projective.
(Hint: For existence use the result of
Exercise \ref{exercise-prepare-glueing}. For non-projectivity use that
$\text{Pic}(\mathbf{P}^3_k) = \mathbf{Z}$ to show that $X$ cannot have
an ample invertible sheaf.)
\end{exercise}



\section{Differentials}
\label{section-differentials}

\noindent
{\bf Definitions and results.} K\"ahler differentials.
\begin{enumerate}
\item Let $R \to A$ be a ring map. The {\it module of K\"ahler
differentials of $A$ over $R$} is
$$
\Omega_{A/R} = \bigoplus\nolimits_{a\in A} A \cdot {\rm d}a \Big/
\big\langle {\rm d}(a_1a_2)-a_1{\rm d}a_2-a_2{\rm d}a_1, {\rm d}r\big\rangle.
$$
The canonical universal $R$-derivation ${\rm d} : A \to \Omega_{A/R}$
maps $a\mapsto {\rm d}a$.
\item Consider the short exact sequence
$$
0 \to I \to A \otimes_R A \to A \to 0
$$
which defines the ideal $I$. There is a canonical derivation
${\rm d} : A \to I/I^2$ which maps $a$ to the class of
$a \otimes 1 - 1 \otimes a$. This is another presentation of
the module of derivations of $A$ over $R$, in other words
$$
(I/I^2, {\rm d}) \cong (\Omega_{A/R}, {\rm d}).
$$
\item For multiplicative subsets $S_R \subset R$ and
$S_A \subset A$ such that $S_R$ maps into $S_A$ we have
$$
\Omega_{S_A^{-1}A / S_R^{-1}R} =
S_A^{-1}\Omega_{A/R}.
$$
\item If $A$ is a finitely presented $R$-algebra then
$\Omega_{A/R}$ is a finitely presented $A$-module. Hence in
this case the {\it fitting} ideals of $\Omega_{A/R}$ are defined.
(See exercise set 6 of last semester.)
\item Let $f : X \to S$ be a morphism of schemes. There is
a quasi-coherent sheaf of ${\mathcal O}_X$-modules $\Omega_{X/S}$
and a ${\mathcal O}_S$-linear derivation
$$
{\rm d} : {\mathcal O}_X \longrightarrow \Omega_{X/S}
$$
such that for any affine opens $\Spec(A) = U \subset X$,
$\Spec(R) = V \subset S$
with $f(U) \subset V$ we have
$$
\Gamma(\Spec(A), \Omega_{X/S}) = \Omega_{A/R}
$$
compatibly with ${\rm d}$.
\end{enumerate}

\begin{exercise}
\label{exercise-dual-numbers}
Let $k[\epsilon]$ be the ring of dual numbers
over the field $k$, i.e., $\epsilon^2 = 0$.
\begin{enumerate}
\item Consider the ring map
$$
R = k[\epsilon] \to A = k[x, \epsilon]/(\epsilon x)
$$
Show that the fitting ideals of $\Omega_{A/R}$ are (starting with the
zeroth fitting ideal)
$$
(\epsilon), A, A, \ldots
$$
\item Consider the map $R = k[t] \to
A = k[x, y, t]/(x(y-t)(y-1), x(x-t))$. Show that the fitting ideals of
of $\Omega_{A/R}$ in $A$ are (assume characteristic $k$ is zero
for simplicity)
$$
x(2x-t)(2y-t-1)A, \ (x, y, t)\cap (x, y-1, t), \ A, \ A, \ldots
$$
So the $0$-the fitting ideal is cut out by a single element of $A$,
the $1$st fitting ideal defines two closed points of $\Spec(A)$, and
the others are all trivial.
\item Consider the map $R = k[t] \to A = k[x, y, t]/(xy-t^n)$.
Compute the fitting ideals of $\Omega_{A/R}$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{exercise-fitting-omega-not-sings}
The $k$th fitting ideal of $\Omega_{X/S}$ is commonly used
to define the singular scheme of the morphism $X \to S$ when $X$ has relative
dimension $k$ over $S$. But as part (a) shows, you have to be careful doing
this when your family does not have ``constant'' fibre dimension, e.g., when
it is not flat. As part (b) shows, flatness doesn't garantee it works either
(and yes this is a flat family). In ``good cases'' -- such as in (c) -- for
families of curves you expect the $0$-th fitting ideal to be zero and
the $1$st fitting ideal to define (scheme-theoretically) the singular locus.
\end{remark}

\begin{exercise}
\label{exercise-formally-smooth}
Suppose that $R$ is a ring and
$$
A = k[x_1, \ldots, x_n]/(f_1, \ldots, f_n).
$$
Note that we are assuming that $A$ is presented by the same
number of equations as variables. Thus the matrix of partial
derivatives
$$
( \partial f_i / \partial x_j )
$$
is $n \times n$, i.e., a square matrix. Assume that
its determinant is invertible as an element in $A$. Note that
this is exactly the condition that says that $\Omega_{A/R} = (0)$
in this case of $n$-generators and $n$ relations.
Let $\pi : B' \to B$ be a surjection of $R$-algebras
whose kernel $J$ has square zero (as an ideal in $B'$).
Let $\varphi : A \to B$ be a homomorphism of $R$-algebras.
Show there exists a unique homomorphism of $R$-algebras
$\varphi' : A \to B'$ such that $\varphi = \pi \circ \varphi'$.
\end{exercise}

\begin{exercise}
\label{exercise-formally-smooth-one-equation}
Find a generalization
of the result of the previous exercise to the case where $A = R[x, y]/(f)$.
\end{exercise}



\section{Schemes, Final Exam, Fall 2007}
\label{section-final-exam-fall-2007}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Spring of 2007 at Columbia University.

\begin{exercise}
\label{exercise-definitions}
Definitions. Provide definitions of the following concepts.
\begin{enumerate}
\item $X$ is a {\it scheme}
\item the morphism of schemes $f : X \to Y$ is {\it finite}
\item the morphisms of schemes $f : X \to Y$ is {\it of finite type}
\item the scheme $X$ is {\it Noetherian}
\item the ${\mathcal O}_X$-module ${\mathcal L}$ on
the scheme $X$ is {\it invertible}
\item the {\it genus} of a nonsingular
projective curve over an algebraically closed field
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-kill-global-sections}
Let $X = \Spec({\mathbf Z}[x, y])$, and let ${\mathcal F}$ be a
quasi-coherent
${\mathcal O}_X$-module. Suppose that ${\mathcal F}$ is zero when restricted to
the
standard affine open $D(x)$.
\begin{enumerate}
\item Show that every global section $s$ of ${\mathcal F}$ is killed by some
power of $x$, i.e., $x^ns = 0$ for some $n\in {\mathbf N}$.
\item Do you think the same is true if we do not assume that ${\mathcal F}$
is quasi-coherent?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-empty-fibre-empty}
Suppose that $X \to \Spec(R)$ is a proper morphism and that
$R$ is a discrete valuation ring with residue field $k$. Suppose that
$X \times_{\Spec(R)} \Spec(k)$ is the empty scheme. Show that
$X$ is the empty scheme.
\end{exercise}

\begin{exercise}
\label{exercise-curve-p1-p1}
Consider the
projective\footnote{The projective embedding is
$((X_0, X_1), (Y_0, Y_1))\mapsto (X_0Y_0, X_0Y_1, X_1Y_0, X_1Y_1)$
in other words $(x, y)\mapsto (1, y, x, xy)$.} variety
$$
{\mathbf P}^1 \times {\mathbf P}^1 = {\mathbf P}^1_{{\mathbf C}}
\times_{\Spec({\mathbf C})} {\mathbf P}^1_{\mathbf C}
$$
over the field of complex numbers ${\mathbf C}$. It is covered by four affine
pieces,
corresponding to pairs of standard affine pieces of ${\mathbf P}^1_{\mathbf
C}$. For example,
suppose we use homogenous coordinates $X_0, X_1$ on the first factor and
$Y_0, Y_1$ on the second. Set $x = X_1/X_0$, and $y = Y_1/Y_0$. Then the 4
affine open pieces are the spectra of the  rings
$$
{\mathbf C}[x, y], \quad
{\mathbf C}[x^{-1}, y], \quad
{\mathbf C}[x, y^{-1}], \quad
{\mathbf C}[x^{-1}, y^{-1}].
$$
Let $X \subset {\mathbf P}^1 \times {\mathbf P}^1$ be the closed subscheme
which is the
closure of the closed subset of the first affine piece given by the equation
$$
y^3(x^4 + 1) = x^4 -1.
$$
\begin{enumerate}
\item Show that $X$ is contained in the union of the first and
the last of the 4 affine open pieces.
\item Show that $X$ is a nonsingular projective curve.
\item Consider the morphism $pr_2 : X \to {\mathbf P}^1$ (projection onto
the first factor). On the first affine piece it is the map $(x, y) \mapsto x$.
Briefly explain why it has degree $3$.
\item Compute the ramification points and ramification indices
for the map $pr_2 : X \to {\mathbf P}^1$.
\item Compute the genus of $X$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-finite-type-over-Z}
Let $X \to \Spec({\mathbf Z})$ be a morphism of finite type.
Suppose that there is an infinite number of primes $p$ such that
$X \times_{\Spec({\mathbf Z})} \Spec({\mathbf F}_p)$ is not empty.
\begin{enumerate}
\item Show that $X \times_{\Spec({\mathbf Z})}\Spec(\mathbf{Q})$
is not empty.
\item Do you think the same is true if we replace the condition
``finite type'' by the condition ``locally of finite type''?
\end{enumerate}
\end{exercise}




\section{Schemes, Final Exam, Spring 2009}
\label{section-final-exam-spring-2009}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Spring of 2009 at Columbia University.

\begin{exercise}
\label{exercise-Noetherian-coherent}
Let $X$ be a Noetherian scheme.
Let $\mathcal{F}$ be a coherent sheaf on $X$.
Let $x \in X$ be a point.
Assume that $\text{Supp}(\mathcal{F}) = \{ x \}$.
\begin{enumerate}
\item Show that $x$ is a closed point of $X$.
\item Show that $H^0(X, \mathcal{F})$ is not zero.
\item Show that $\mathcal{F}$ is generated by global sections.
\item Show that $H^p(X, \mathcal{F}) = 0$ for $p > 0$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-invertible-projective-space}
Let $k$ be a field.
Let $\mathbf{P}^2_k = \text{Proj}(k[X_0, X_1, X_2])$.
Any invertible sheaf on $\mathbf{P}^2_k$ is isomorphic to
$\mathcal{O}_{\mathbf{P}^2_k}(n)$ for some $n \in \mathbf{Z}$.
Recall that
$$
\Gamma(\mathbf{P}^2_k, \mathcal{O}_{\mathbf{P}^2_k}(n)) =
k[X_0, X_1, X_2]_n
$$
is the degree $n$ part of the polynomial ring.
For a quasi-coherent sheaf $\mathcal{F}$ on $\mathbf{P}^2_k$ set
$\mathcal{F}(n) =
\mathcal{F}
\otimes_{\mathcal{O}_{\mathbf{P}^2_k}}
\mathcal{O}_{\mathbf{P}^2_k}(n)$
as usual.
\end{remark}

\begin{exercise}
\label{exercise-nonsplit-vectorbundle}
Let $k$ be a field.
Let $\mathcal{E}$ be a vector bundle on $\mathbf{P}^2_k$, i.e., a finite locally
free $\mathcal{O}_{\mathbf{P}^2_k}$-module.
We say $\mathcal{E}$ is {\it split} if $\mathcal{E}$ is isomorphic to
a direct sum invertible $\mathcal{O}_{\mathbf{P}^2_k}$-modules.
\begin{enumerate}
\item Show that $\mathcal{E}$ is split if and only if $\mathcal{E}(n)$
is split.
\item Show that if $\mathcal{E}$ is split then
$H^1({\mathbf{P}^2_k}, \mathcal{E}(n)) = 0$
for all $n \in \mathbf{Z}$.
\item Let
$$
\varphi :
\mathcal{O}_{\mathbf{P}^2_k}
\longrightarrow
\mathcal{O}_{\mathbf{P}^2_k}(1) \oplus
\mathcal{O}_{\mathbf{P}^2_k}(1) \oplus
\mathcal{O}_{\mathbf{P}^2_k}(1)
$$
be given by linear forms
$L_0, L_1, L_2 \in \Gamma(\mathbf{P}^2_k, \mathcal{O}_{\mathbf{P}^2_k}(1))$.
Assume $L_i \not = 0$ for some $i$.
What is the condition on $L_0, L_1, L_2$ such that
the cokernel of $\varphi$ is a vector bundle?
Why?
\item Given an example of such a $\varphi$.
\item Show that $\text{Coker}(\varphi)$ is not split (if it is
a vector bundle).
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-recall-dimension-theory}
Freely use the following facts on dimension theory
(and add more if you need more).
\begin{enumerate}
\item The dimension of a scheme is the supremum of the length of chains
of irreducible closed subsets.
\item The dimension of a finite type scheme over a field is the maximum
of the dimensions of its affine opens.
\item The dimension of a Noetherian scheme is the maximum of the dimensions
of its irreducible components.
\item The dimension of an affine scheme
coincides with the dimension of the corresponding ring.
\item Let $k$ be a field and let $A$ be a finite type $k$-algebra.
If $A$ is a domain, and $x \not = 0$, then $\dim(A) = \dim(A/xA) + 1$.
\end{enumerate}
\end{remark}

\begin{exercise}
\label{exercise-irreducible-fibres-same-dimension-irreducible}
Let $k$ be a field.
Let $X$ be a projective, reduced scheme over $k$.
Let $f : X \to \mathbf{P}^1_k$ be a morphism of schemes over $k$.
Assume there exists an integer $d \geq 0$ such that
for every point $t \in \mathbf{P}^1_k$ the fibre $X_t = f^{-1}(t)$
is irreducible of dimension $d$. (Recall that an irreducible space is
not empty.)
\begin{enumerate}
\item Show that $\dim(X) = d + 1$.
\item Let $X_0 \subset X$ be an irreducible component of $X$ of dimension
$d + 1$. Prove that for every $t \in \mathbf{P}^1_k$ the fibre
$X_{0, t}$ has dimension $d$.
\item What can you conclude about $X_t$ and $X_{0, t}$ from the above?
\item Show that $X$ is irreducible.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-chi}
Given a projective scheme $X$ over a field $k$ and
a coherent sheaf $\mathcal{F}$ on $X$ we set
$$
\chi(X, \mathcal{F}) =
\sum\nolimits_{i \geq 0} (-1)^i\dim_k H^i(X, \mathcal{F}).
$$
\end{remark}

\begin{exercise}
\label{exercise-complete-intersection}
Let $k$ be a field.
Write $\mathbf{P}^3_k = \text{Proj}(k[X_0, X_1, X_2, X_3])$.
Let $C \subset \mathbf{P}^3_k$ be a
{\it type $(5, 6)$ complete intersection curve}.
This means that there exist $F \in k[X_0, X_1, X_2, X_3]_5$ and
$G \in k[X_0, X_1, X_2, X_3]_6$ such that
$$
C = \text{Proj}(k[X_0, X_1, X_2, X_3]/(F, G))
$$
is a variety of dimension $1$. (Variety implies reduced and irreducible,
but feel free to assume $C$ is nonsingular if you like.)
Let $i : C \to \mathbf{P}^3_k$ be the corresponding closed immersion.
Being a complete intersection also implies that
$$
\xymatrix{
0 \ar[r] &
\mathcal{O}_{\mathbf{P}^3_k}(-11)
\ar[r]^-{
\left(
\begin{matrix}
-G \\
F
\end{matrix}
\right)
} &
\mathcal{O}_{\mathbf{P}^3_k}(-5) \oplus \mathcal{O}_{\mathbf{P}^3_k}(-6)
\ar[r]^-{(F, G)} &
\mathcal{O}_{\mathbf{P}^3_k} \ar[r] &
i_*\mathcal{O}_C \ar[r] &
0
}
$$
is an exact sequence of sheaves. Please use these facts to:
\begin{enumerate}
\item compute $\chi(C, i^*\mathcal{O}_{\mathbf{P}^3_k}(n))$ for
any $n \in \mathbf{Z}$, and
\item compute the dimension of $H^1(C, \mathcal{O}_C)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-glueing}
Let $k$ be a field.
Consider the rings
\begin{align*}
A & = k[x, y]/(xy) \\
B & = k[u, v]/(uv) \\
C & = k[t, t^{-1}] \times k[s, s^{-1}]
\end{align*}
and the $k$-algebra maps
$$
\begin{matrix}
A \longrightarrow C, &
x \mapsto (t, 0), &
y \mapsto (0, s) \\
B \longrightarrow C, &
u \mapsto (t^{-1}, 0), &
v \mapsto (0, s^{-1})
\end{matrix}
$$
It is a true fact that these maps induce isomorphisms
$A_{x + y} \to C$ and $B_{u + v} \to C$. Hence the maps $A \to C$
and $B \to C$ identify $\Spec(C)$ with open subsets of
$\Spec(A)$ and $\Spec(B)$. Let $X$ be the scheme obtained
by glueing $\Spec(A)$ and $\Spec(B)$ along $\Spec(C)$:
$$
X = \Spec(A) \coprod\nolimits_{\Spec(C)} \Spec(B).
$$
As we saw in the course such a scheme exists and there are affine
opens $\Spec(A) \subset X$ and $\Spec(B) \subset X$
whose overlap is exactly $\Spec(C)$ identified with an open of
each of these using the maps above.
\begin{enumerate}
\item Why is $X$ separated?
\item Why is $X$ of finite type over $k$?
\item Compute $H^1(X, \mathcal{O}_X)$, or what is its dimension?
\item What is a more geometric way to describe $X$?
\end{enumerate}
\end{exercise}





\section{Schemes, Final Exam, Fall 2010}
\label{section-final-exam-fall-2010}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Fall of 2010 at Columbia University.

\begin{exercise}
\label{exercise-definitions-fall-2010}
Definitions. Provide definitions of the following concepts.
\begin{enumerate}
\item a separated scheme,
\item a quasi-compact morphism of schemes,
\item an affine morphism of schemes,
\item a multiplicative subset of a ring,
\item a Noetherian scheme,
\item a variety.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-prime-avoidance}
Prime avoidance.
\begin{enumerate}
\item Let $A$ be a ring. Let $I \subset A$ be an ideal and
let $\mathfrak q_1$, $\mathfrak q_2$ be prime ideals such that
$I \not \subset \mathfrak q_i$. Show that
$I \not \subset \mathfrak q_1 \cup \mathfrak q_2$.
\item What is a geometric interpretation of (1)?
\item Let $X = \text{Proj}(S)$ for some graded ring $S$.
Let $x_1, x_2 \in X$. Show that there exists a standard open
$D_{+}(F)$ which contains both $x_1$ and $x_2$.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-compose-affine}
Why is a composition of affine morphisms affine?
\end{exercise}

\begin{exercise}
\label{exercise-examples}
Examples. Give examples of the following:
\begin{enumerate}
\item A reducible projective scheme over a field $k$.
\item A scheme with 100 points.
\item A non-affine morphism of schemes.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-chevalley-hilbert-nullstellensatz}
Chevalley's theorem and the Hilbert Nullstellensatz.
\begin{enumerate}
\item Let $\mathfrak p \subset \mathbf{Z}[x_1, \ldots, x_n]$
be a maximal ideal. What does Chevalley's theorem imply about
$\mathfrak p \cap \mathbf{Z}$?
\item In turn, what does the Hilbert Nullstellensatz imply about
$\kappa(\mathfrak p)$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-P0}
Let $A$ be a ring. Let $S = A[X]$ as a graded $A$-algebra
where $X$ has degree $1$. Show that $\text{Proj}(S) \cong \Spec(A)$
as schemes over $A$.
\end{exercise}

\begin{exercise}
\label{exercise-finite-is-projective}
Let $A \to B$ be a finite ring map. Show that
$\Spec(B)$ is a H-projective scheme over $\Spec(A)$.
\end{exercise}

\begin{exercise}
\label{exercise-not-geometrcally-irreducible}
Give an example of a scheme $X$ over a field $k$ such that
$X$ is irreducible and such that for some finite extension $k \subset k$
the base change $X_{k'} = X \times_{\Spec(k)} \Spec(k')$
is connected but reducible.
\end{exercise}





\section{Schemes, Final Exam, Spring 2011}
\label{section-final-exam-spring-2011}

\noindent
These were the questions in the final exam of a course on Schemes,
in the Spring of 2011 at Columbia University.


\begin{exercise}
\label{exercise-definitions-spring-2011}
Definitions. Provide definitions of the italicized concepts.
\begin{enumerate}
\item a {\it separated} scheme,
\item a {\it universally closed} morphism of schemes,
\item {\it $A$ dominates $B$} for local rings $A, B$ contained in a
common field,
\item the {\it dimension} of a scheme $X$,
\item the {\it codimension} of an irreducible closed subscheme $Y$
of a scheme $X$,
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-results-spring-2011}
Results. State something formally equivalent to the fact discussed
in the course.
\begin{enumerate}
\item The valuative criterion of properness for a morphism
$X \to Y$ of varieties for example.
\item The relationship between $\dim(X)$ and the function field
$k(X)$ of $X$ for a variety $X$ over a field $k$.
\item Fill in the blank: The category of nonsingular projective curves over
$k$ and nonconstant morphisms is anti-equivalent to $\ldots\ldots\ldots$.
\item Noether normalization.
\item Jacobian criterion.
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-genus-plane-curve}
Let $k$ be a field.
Let $F \in k[X_0, X_1, X_2]$ be a homogeneous form of degree $d$.
Assume that $C = V_{+}(F) \subset \mathbf{P}^2_k$ is a smooth curve over $k$.
Denote $i : C \to \mathbf{P}^2_k$ the corresponding closed immersion.
\begin{enumerate}
\item Show that there is a short exact sequence
$$
0 \to \mathcal{O}_{\mathbf{P}^2_k}(-d)
\to \mathcal{O}_{\mathbf{P}^2_k} \to i_*\mathcal{O}_C \to 0
$$
of coherent sheaves on $\mathbf{P}^2_k$: tell me what the maps are
and briefly why it is exact.
\item Conclude that $H^0(C, \mathcal{O}_C) = k$.
\item Compute the genus of $C$.
\item Assume now that $P = (0 : 0 : 1)$ is not on $C$. Prove that
$\pi : C \to \mathbf{P}^1_k$ given by $(a_0 : a_1 : a_2) \mapsto (a_0 : a_1)$
has degree $d$.
\item Assume $k$ is algebraically closed, assume all ramification indices
(the ``$e_i$'') are $1$ or $2$, and assume the characteristic of $k$
is not equal to $2$. How many ramification
points does $\pi : C \to \mathbf{P}^1_k$ have?
\item In terms of $F$, what do you think is a set of equations of
the set of ramification points of $\pi$?
\item Can you guess $K_C$?
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-Pic-triangle}
Let $k$ be a field. Let $X$ be a ``triangle'' over $k$, i.e.,
you get $X$ by glueing three copies of $\mathbf{A}^1_k$ to each other by
identifying $0$ on the first copy to $1$ on the second copy, $0$ on the
second copy to $1$ on the first copy, and $0$ on the third copy to $1$ on
the first copy. It turns out that $X$ is isomorphic to
$\Spec(k[x, y]/(xy(x + y + 1)))$; feel free to use this.
Compute the Picard group of $X$.
\end{exercise}

\begin{exercise}
\label{exercise-birational-morphism-curves-ample}
Let $k$ be a field. Let $\pi : X \to Y$ be a finite birational
morphism of curves with $X$ a projective nonsingular curve over $k$.
It follows from the material in the course that $Y$ is a proper curve and
that $\pi$ is the normalization morphism of $Y$.
We have also seen in the course that there exists a dense open $V \subset Y$
such that $U = \pi^{-1}(V)$ is a dense open in $X$ and $\pi : U \to V$
is an isomorphism.
\begin{enumerate}
\item Show that there exists an effective Cartier divisor $D \subset X$
such that $D \subset U$ and such that $\mathcal{O}_X(D)$ is ample on $X$.
\item Let $D$ be as in (1). Show that $E = \pi(D)$ is an effective Cartier
divisor on $Y$.
\item Briefly indicate why
\begin{enumerate}
\item the map $\mathcal{O}_Y \to \pi_*\mathcal{O}_X$ has a coherent cokernel
$Q$ which is supported in $Y \setminus V$, and
\item for every $n$ there is a corresponding map
$\mathcal{O}_Y(nE) \to \pi_*\mathcal{O}_X(nD)$
whose cokernel is isomorphic to $Q$.
\end{enumerate}
\item Show that
$\dim_k H^0(X, \mathcal{O}_X(nD)) - \dim_k H^0(Y, \mathcal{O}_Y(nE))$
is bounded (by what?) and conclude that the invertible sheaf
$\mathcal{O}_Y(nE)$ has lots of sections for large $n$ (why?).
\end{enumerate}
\end{exercise}










\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

%\renewcommand{\label}[1]{\oldlabel{#1}}

\end{document}

