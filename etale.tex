\input{preamble}

% OK, start here.
%
\begin{document}

\title{\'Etale Morphisms of Schemes}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents



\section{Introduction}
\label{section-introduction}

\noindent
In this Chapter, we discuss \'etale morphisms of schemes. We illustrate
some of the more important concepts by working with the Noetherian case.
Our principal goal is to collect for the reader with enough commutative
algebra results to start reading a treatise on \'etale cohomology. An
auxiliary goal is to provide enough evidence to ensure that the reader stops
calling the phrase ``the \'etale topology of schemes'' an exercise in general
nonsense, if (s)he does indulge in such blasphemy.

\medskip\noindent
We will refer to the other
chapters of the stacks project for standard results in algebraic geometry
(on schemes and commutative algebra). We will provide detailed
proofs of the new results that we state here.




\section{Conventions}
\label{section-conventions}

\noindent
In this chapter, frequently schemes will be assumed locally Noetherian
and frequently rings will be assumed Noetherian. But in all the statements
we will reiterate this when necessary, and make sure we list all the
hypotheses! On the other hand, here are some general facts that we will use
often and are useful to keep in mind:
\begin{enumerate}
\item A ring homomorphism $A \to B$ of finite type with $A$ Noetherian
is of finite presentation. See Algebra,
Lemma \ref{algebra-lemma-Noetherian-finite-type-is-finite-presentation}.
\item A morphism (locally) of finite type between locally Noetherian schemes
is automatically (locally) of finite presentation.
See Morphisms,
Lemma \ref{morphisms-lemma-noetherian-finite-type-finite-presentation}.
\item Add more like this here.
\end{enumerate}




\section{Unramified morphisms}
\label{section-unramified-definition}

\noindent
We first define the notion of unramified morphisms for local rings, and then
globalise it to get one for arbitrary schemes.

\begin{definition}
\label{definition-unramified-rings}
Let $A$, $B$ be Noetherian local rings. A local homomorphism $A \to B$
is said to be {\it unramified homomorphism of local rings} if
\begin{enumerate}
\item $\mathfrak m_AB = \mathfrak m_B$,
\item $\kappa(\mathfrak m_B)$ is a finite separable extension of
$\kappa(\mathfrak m_A)$, and
\item $B$ is essentially of finite type over $A$ (this means
that $B$ is the localization of a finite type $A$-algebra at a prime).
\end{enumerate}
\end{definition}

\noindent
This is the local version of the
definition in Algebra, Section \ref{algebra-section-unramified}.
In that section a ring map $R \to S$ is defined to be unramified if and
only if it is of finite type, and $\Omega_{S/R} = 0$.
It is shown in
Algebra, Lemmas \ref{algebra-lemma-unramified-at-prime} and
\ref{algebra-lemma-characterize-unramified} that given a ring
map $R \to S$ of finite type, and a prime $\mathfrak q$ of $S$
lying over $\mathfrak p \subset R$, then we have
$$
R \to S\text{ is unramified at }\mathfrak q
\Leftrightarrow
\mathfrak pS_{\mathfrak q} = \mathfrak q S_{\mathfrak q}
\text{ and }
\kappa(\mathfrak p) \subset \kappa(\mathfrak q)\text{ finite separable}
$$
Thus we see that for a local homomorphism of local rings the properties
of our definition above are closely related to the question of
being unramified. In fact, we have proved the following lemma.

\begin{lemma}
\label{lemma-characterize-unramified-Noetherian}
Let $A \to B$ be of finite type with $A$ a Noetherian ring.
Let $\mathfrak q$ be a prime of $B$ lying over $\mathfrak p \subset A$.
Then $A \to B$ is unramified at $\mathfrak q$ if and only if
$A_{\mathfrak p} \to B_{\mathfrak q}$ is an unramified homomorphism
of local rings.
\end{lemma}

\begin{proof}
See discussion above.
\end{proof}

\noindent
We will characterize the property of being unramified in terms
of completions. For a Noetherian local ring $A$
we denote $A^\wedge$ the completion of $A$ with respect to the
maximal ideal. It is also a Noetherian local ring, see
Algebra, Lemma \ref{algebra-lemma-completion-Noetherian-Noetherian}.

\begin{lemma}
\label{lemma-unramified-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism.
\begin{enumerate}
\item if $A \to B$ is an unramified homomorphism of local rings,
then $B^\wedge$ is a finite $A^\wedge$ module,
\item if $A \to B$ is an unramified homomorphism of local rings and
$\kappa(\mathfrak m_A) = \kappa(\mathfrak m_B)$,
then $A^\wedge \to B^\wedge$ is surjective,
\item if $A \to B$ is an unramified homomorphism of local rings
and $\kappa(\mathfrak m_A)$
is separably closed, then $A^\wedge \to B^\wedge$ is surjective,
\item if $A$ and $B$ are complete discrete valuation rings, then
$A \to B$ is an unramified homomorphism of local rings
if and only the uniformizer for $A$ maps to a uniformizer for $B$,
and the residue field extension is finite separable (and $B$ is
essentially of finite type over $A$).
\end{enumerate}
\end{lemma}

\begin{proof}
Part (1) is a special case of
Algebra, Lemma \ref{algebra-lemma-finite-after-completion}.
For part (2), note that the $\kappa(\mathfrak m_A)$-vector space
$B^\wedge/\mathfrak m_{A^\wedge}B^\wedge$
is generated by $1$. Hence by Nakayama's lemma
(Algebra, Lemma \ref{algebra-lemma-NAK}) the map
$A^\wedge \to B^\wedge$ is surjective.
Part (3) is a special case of part (2).
Part (4) is immediate from the definitions.
\end{proof}

\begin{lemma}
\label{lemma-characterize-unramified-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism such that $B$ is
essentially of finite type over $A$.
The following are equivalent
\begin{enumerate}
\item $A \to B$ is an unramified homomorphism of local rings
\item $A^\wedge \to B^\wedge$ is an unramified homomorphism of local rings, and
\item $A^\wedge \to B^\wedge$ is unramified.
\end{enumerate}
\end{lemma}

\begin{proof}
The equivalence of (1) and (2) follows from the fact that
$\mathfrak m_AA^\wedge$ is the maximal ideal of $A^\wedge$
(and similarly for $B$) and faithful flatness of $B \to B^\wedge$.
For example if $A^\wedge \to B^\wedge$ is unramified, then
$\mathfrak m_AB^\wedge = (\mathfrak m_AB)B^\wedge = \mathfrak m_BB^\wedge$
and hence $\mathfrak m_AB = \mathfrak m_B$.

\medskip\noindent
Assume the equivalent conditions (1) and (2).
By Lemma \ref{lemma-unramified-completions}
we see that $A^\wedge \to B^\wedge$ is
finite. Hence $A^\wedge \to B^\wedge$ is of finite presentation, and by
Algebra, Lemma \ref{algebra-lemma-characterize-unramified}
we conclude that $A^\wedge \to B^\wedge$ is unramified at
$\mathfrak m_{B^\wedge}$. Since $B^\wedge$ is local we conclude
that $A^\wedge \to B^\wedge$ is unramified.

\medskip\noindent
Assume (3). By Algebra, Lemma \ref{algebra-lemma-unramified-at-prime}
we conclude that $A^\wedge \to B^\wedge$ is an unramified homomorphism
of local rings, i.e., (2) holds.
\end{proof}

\begin{definition}
\label{definition-unramified-schemes}
(See Morphisms, Definition \ref{morphisms-definition-unramified}
for the definition in the general case.)
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$.
\begin{enumerate}
\item We say $f$ is {\it unramified at $x$} if
$\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$
is an unramified homomorphism of local rings.
\item The morphism $f : X \to Y$ is said to be {\it unramified}
if it is unramified at all points of $X$.
\end{enumerate}
\end{definition}

\noindent
Let us prove that this definition agrees with the definition in the
chapter on morphisms of schemes. This in particular guarantees that the
set of points where a morphism is unramified is open.

\begin{lemma}
\label{lemma-unramified-defintion}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$. The morphism $f$ is unramified at $x$ in
the sense of Definition \ref{definition-unramified-schemes}
if and only if it is unramified in
the sense of Morphisms, Definition \ref{morphisms-definition-unramified}.
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-characterize-unramified-Noetherian}
and the definitions.
\end{proof}

\noindent
Here are some results on unramified morphisms.
The formulations as given in this list apply only to
morphisms locally of finite type between locally Noetherian schemes.
In each case we give a reference to the general result as
proved earlier in the project, but in some cases one can
prove the result more easily in the Noetherian case.
Here is the list:
\begin{enumerate}
\item Unramifiedness is local on the source and the target in the Zariski
topology.
\item Unramified morphisms are stable under base change and composition.
See Morphisms, Lemmas \ref{morphisms-lemma-base-change-unramified}
and \ref{morphisms-lemma-composition-unramified}.
\item Unramified morphisms of schemes are locally quasi-finite
and quasi-compact unramified morphisms are quasi-finite.
See Morphisms, Lemma \ref{morphisms-lemma-unramified-quasi-finite}
\item Unramified morphisms have relative dimension $0$. See
Morphisms, Definition \ref{morphisms-definition-relative-dimension-d}
and
Morphisms, Lemma \ref{morphisms-lemma-locally-quasi-finite-rel-dimension-0}.
\item A morphism is unramified if and only if all its fibres are unramified.
That is, unramifiedness can be checked on the scheme theoretic fibres. See
Morphisms, Lemma \ref{morphisms-lemma-unramified-etale-fibres}.
\item Let $X$ and $Y$ be unramified over a base scheme $S$.
Any $S$-morphism from $X$ to $Y$ is unramified.
See Morphisms, Lemma \ref{morphisms-lemma-unramified-permanence}.
\end{enumerate}

\section{Three other characterizations of unramified morphisms}
\label{section-three-other}

\noindent
The following theorem gives three equivalent notions of being
unramified at a point. See
Morphisms, Lemma \ref{morphisms-lemma-unramified-at-point}
for (part of) the statement for general schemes.

\begin{theorem}
\label{theorem-unramified-equivalence}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism of schemes which is locally of finite type.
Let $x$ be a point of $X$. The following are equivalent
\begin{enumerate}
\item $f$ is unramified at $x$,
\item the stalk $\Omega_{X/Y, x}$ of the module of relative differentials
at $x$ is trivial,
\item there exist open neighbourhoods $U$ of $x$ and $V$ of $f(x)$, and a
commutative diagram
$$
\xymatrix{
U \ar[rr]_i \ar[rd] & & \mathbf{A}^n_V \ar[ld] \\
& V
}
$$
where $i$ is a closed immersion defined by a
quasi-coherent sheaf of ideals $\mathcal{I}$ such that the differentials
$\text{d}g$ for $g \in \mathcal{I}_{i(x)}$ generate
$\Omega_{\mathbf{A}^n_V/V, i(x)}$, and
\item the diagonal $\Delta_{X/Y} : X \to X \times_Y X$
is a local isomorphism at $x$.
\end{enumerate}
\end{theorem}

\begin{proof}
The equivalence of (1) and (2) is proved in
Morphisms, Lemma \ref{morphisms-lemma-unramified-at-point}.

\medskip\noindent
If $f$ is unramified at $x$, then $f$ is unramified in an open
neighbourhood of $x$; this does not follow immediately
from Definition \ref{definition-unramified-schemes} of this chapter
but it does follow from
Morphisms, Definition \ref{morphisms-definition-unramified} which we
proved to be equivalent in
Lemma \ref{lemma-unramified-defintion}.
Choose affine opens $V \subset Y$, $U \subset X$
with $f(U) \subset V$ and $x \in U$, such that $f$ is
unramified on $U$, i.e., $f|_U : U \to V$ is unramified.
By Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramified-morphism}
the morphism $U \to U \times_V U$
is an open immersion. This proves that (1) implies (4).

\medskip\noindent
If $\Delta_{X/Y}$ is a local isomorphism at $x$, then
$\Omega_{X/Y, x} = 0$ by
Morphisms, Lemma \ref{morphisms-lemma-differentials-diagonal}.
Hence we see that (4) implies (2).
At this point we know that (1), (2) and (4) are all equivalent.

\medskip\noindent
Assume (3). The assumption on the diagram combined with
Morphisms, Lemma \ref{morphisms-lemma-differentials-relative-immersion}
show that $\Omega_{U/V, x} = 0$. Since $\Omega_{U/V, x} = \Omega_{X/Y, x}$
we conclude (2) holds.

\medskip\noindent
Finally, assume that (2) holds. To prove (3) we may localize on
$X$ and $Y$ and assume that $X$ and $Y$ are affine.
Say $X = \Spec(B)$ and $Y = \Spec(A)$.
The point $x \in X$ corresponds to a prime $\mathfrak q \subset B$.
Our assumption is that $\Omega_{B/A, \mathfrak q} = 0$
(see Morphisms, Lemma \ref{morphisms-lemma-differentials-affine} for the
relationship between differentials on schemes and modules
of differentials in commutative algebra).
Since $Y$ is locally Noetherian and $f$ locally of finite type
we see that $A$ is Noetherian and
$B \cong A[x_1, \ldots, x_n]/(f_1, \ldots, f_m)$, see
Properties, Lemma \ref{properties-lemma-locally-Noetherian} and
Morphisms, Lemma \ref{morphisms-lemma-locally-finite-type-characterize}.
In particular, $\Omega_{B/A}$ is a finite $B$-module. Hence we
can find a single $g \in B$, $g \not \in \mathfrak q$ such that
the principal localization $(\Omega_{B/A})_g$ is zero. Hence after
replacing $B$ by $B_g$ we see that $\Omega_{B/A} = 0$ (formation
of modules of differentials commutes with localization, see
Algebra, Lemma \ref{algebra-lemma-differentials-localize}). This means that
$\text{d}(f_j)$ generate the kernel of the canonical map
$\Omega_{A[x_1, \ldots, x_n]/A} \otimes_A B \to \Omega_{B/A}$.
Thus the surjection $A[x_1, \ldots, x_n] \to B$ of $A$-algebras gives the
commutative diagram of (3), and the theorem is proved.
\end{proof}

\noindent
How can we use this theorem? Well, here are a few remarks:
\begin{enumerate}
\item Suppose that
$f : X \to Y$ and $g : Y \to Z$ are two morphisms locally of finite
type between locally Noetherian schemes. There is a canonical short
exact sequence
$$
f^*(\Omega_{Y/Z}) \to \Omega_{X/Z} \to \Omega_{X/Y} \to 0
$$
see Morphisms, Lemma \ref{morphisms-lemma-triangle-differentials}.
The theorem therefore implies that if $g \circ f$ is unramified,
then so is $f$. This is
Morphisms, Lemma \ref{morphisms-lemma-unramified-permanence}.
\item Since $\Omega_{X/Y}$ is isomorphic to the conormal sheaf
of the diagonal morphism
(Morphisms, Lemma \ref{morphisms-lemma-differentials-diagonal})
we see that if $X \to Y$ is a monomorphism of
locally Noetherian schemes and locally of finite type,
then $X \to Y$ is unramified.
In particular, open and closed immersions of locally Noetherian schemes
are unramified. See
Morphisms, Lemmas
\ref{morphisms-lemma-open-immersion-unramified} and
\ref{morphisms-lemma-closed-immersion-unramified}.
\item The theorem also implies that the set of points
where a morphism $f : X \to Y$ (locally of finite type of locally Noetherian
schemes) is not unramified is
the support of the coherent sheaf $\Omega_{X/Y}$.
This allows one to give a scheme theoretic definition to the
``ramification locus''.
\end{enumerate}

\section{The functorial characterization of unramified morphisms}
\label{section-functorial-unramified}

\noindent
In basic algebraic geometry we learn that some classes of morphisms can be
characterised functorially, and that such descriptions are quite useful.
Unramified morphisms too have such a characterisation.

\begin{theorem}
\label{theorem-formally-unramified}
Let $f : X \to S$ be a morphism of schemes.
Assume $S$ is a locally Noetherian scheme, and $f$ is locally of finite type.
Then the following are equivalent:
\begin{enumerate}
\item $f$ is unramified,
\item the morphism $f$ is formally unramified:
for any affine $S$-scheme $T$ and subscheme $T_0$ of $T$
defined by a square-zero ideal,
the natural map
$$
\Hom_S(T, X) \longrightarrow \Hom_S(T_0, X)
$$
is injective.
\end{enumerate}
\end{theorem}

\begin{proof}
See More on Morphisms,
Lemma \ref{more-morphisms-lemma-unramified-formally-unramified}
for a more general statement and proof.
What follows is a sketch of the proof in the current case.

\medskip\noindent
Firstly, one checks both properties are local on the source and the target.
This we may assume that $S$ and $X$ are affine.
Say $X = \Spec(B)$ and $S = \Spec(R)$.
Say $T = \Spec(C)$. Let $J$ be the square-zero ideal of $C$
with $T_0 = \Spec(C/J)$. Assume that we are given the diagram
$$
\xymatrix{
& B \ar[d]^\phi \ar[rd]^{\bar{\phi}}	
& \\
R \ar[r] \ar[ur] & C \ar[r]						
& C/J
}
$$
Secondly, one checks that the association $\phi' \mapsto \phi' - \phi$
gives a bijection between the set of liftings of $\bar{\phi}$ and the module
$\text{Der}_R(B, J)$. Thus, we obtain the implication (1) $\Rightarrow$ (2)
via the description of unramified morphisms having trivial module
of differentials, see Theorem \ref{theorem-unramified-equivalence}.

\medskip\noindent
To obtain the reverse implication, consider the surjection
$q : C = (B \otimes_R B)/I^2 \to B = C/J$ defined by the square zero ideal
$J = I/I^2$ where $I$ is the kernel of the multiplication map
$B \otimes_R B \to B$. We already have a lifting $B \to C$ defined by, say,
$b \mapsto b \otimes 1$. Thus, by the same reasoning as above, we obtain a
bijective correspondence between liftings of $\text{id} : B \to C/J$ and
$\text{Der}_R(B, J)$. The hypothesis therefore implies that the latter module is
trivial. But we know that $J \cong \Omega_{B/R}$. Thus, $B/R$ is unramified.
\end{proof}



\section{Topological properties of unramified morphisms}
\label{section-topological-unramified}

\noindent
The first topological result that will be of utility to us is one which says
that unramified and separated morphisms have ``nice'' sections.
The material in this section does not require any Noetherian hypotheses.

\begin{proposition}
\label{proposition-properties-sections}
Sections of unramified morphisms.
\begin{enumerate}
\item Any section of an unramified morphism is an open immersion.
\item Any section of a separated morphism is a closed immersion.
\item Any section of an unramified separated morphism is open and closed.
\end{enumerate}
\end{proposition}

\begin{proof}
Fix a base scheme $S$.
If $f : X' \to X$ is any $S$-morphism, then the graph
$\Gamma_f : X' \to X' \times_S X$
is obtained as the base change of the diagonal
$\Delta_{X/S} : X \to X \times_S X$ via the projection
$X' \times_S X \to X \times_S X$.
If $g : X \to S$ is separated (resp. unramified)
then the diagonal is a closed immersion (resp. open immersion)
by Schemes, Definition \ref{schemes-definition-separated}
(resp.\ Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramified-morphism}).
Hence so is the graph as a base change (by
Schemes, Lemma \ref{schemes-lemma-base-change-immersion}).
In the special case $X' = S$, we obtain (1), resp.\ (2).
Part (3) follows on combining (1) and (2).
\end{proof}

\noindent
We can now explicitly describe the sections of unramified morphisms.

\begin{theorem}
\label{theorem-sections-unramified-maps}
Let $Y$ be a connected scheme.
Let $f : X \to Y$ be unramified and separated.
Every section of $f$ is an isomorphism onto a connected component.
There exists a bijective correspondence
$$
\text{sections of }f
\leftrightarrow
\left\{
\begin{matrix}
\text{connected components }X'\text{ of }X\text{ such that}\\
\text{the induced map }X' \to Y\text{ is an isomorphism}
\end{matrix}
\right\}
$$
In particular, given $x \in X$ there is at most one
section passing through $x$.
\end{theorem}

\begin{proof}
Direct from Proposition \ref{proposition-properties-sections} part (3).
\end{proof}

\noindent
The preceding theorem gives us some idea of the ``rigidity'' of unramified
morphisms. Further indication is provided by the following proposition
which, besides being intrinsically interesting, is also useful in the
theory of the algebraic fundamental group (see \cite[Expos\'e V]{SGA1}).
See also the more general
Morphisms, Lemma \ref{morphisms-lemma-value-at-one-point}.

\begin{proposition}
\label{proposition-equality}
Let $S$ is be a scheme.
Let $\pi : X \to S$ be unramified and separated.
Let $Y$ be an $S$-scheme and $y \in Y$ a point.
Let $f, g : Y \to X$ be two $S$-morphisms. Assume
\begin{enumerate}
\item $Y$ is connected
\item $x = f(y) = g(y)$, and
\item the induced maps $f^\sharp, g^\sharp : \kappa(x) \to \kappa(y)$
on residue fields are equal.
\end{enumerate}
Then $f = g$.
\end{proposition}

\begin{proof}
The maps $f, g : Y \to X$ define maps $f', g' : Y \to X_Y = Y \times_S X$
which are sections of the structure map $X_Y \to Y$.
Note that $f = g$ if and only if $f' = g'$.
The structure map $X_Y \to Y$ is the base change of $\pi$ and hence
unramified and separated also (see
Morphisms, Lemmas \ref{morphisms-lemma-base-change-unramified} and
Schemes, Lemma \ref{schemes-lemma-separated-permanence}).
Thus according to Theorem \ref{theorem-sections-unramified-maps}
it suffices to prove that $f'$ and $g'$ pass through the same
point of $X_Y$. And this is exactly what the hypotheses (2) and (3)
garantee, namely $f'(y) = g'(y) \in X_Y$.
\end{proof}






\section{Universally injective, unramified morphisms}
\label{section-universally-injective-unramified}

\noindent
Recall that a morphism of schemes $f : X \to Y$ is universally
injective if any base change of $f$ is injective (on underlying
topological spaces), see
Morphisms, Definition \ref{morphisms-definition-universally-injective}.
Universally injective and unramified morphisms can be
characterized as follows.

\begin{lemma}
\label{lemma-universally-injective-unramified}
Let $f : X \to S$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item $f$ is unramified and a monomorphism,
\item $f$ is unramified and universally injective,
\item $f$ is locally of finite type and a monomorphism,
\item $f$ is universally injective, locally of finite type, and
formally unramified,
\item $f$ is locally of finite type and $X_y$ is either empty
or $X_y \to y$ is an isomorphism for all $y \in Y$.
\end{enumerate}
\end{lemma}

\begin{proof}
We have seen in
More on Morphisms, Lemma
\ref{more-morphisms-lemma-unramified-formally-unramified}
that being formally unramified and locally of finite type is the same thing
as being unramified. Hence (4) is equivalent to (2).
A monomorphism is certainly universally injective and
formally unramified hence (3) implies (4).
It is clear that (1) implies (3). Finally, if (2) holds, then
$\Delta : X \to X \times_S X$ is both an open immersion
(Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramified-morphism})
and surjective
(Morphisms, Lemma \ref{morphisms-lemma-universally-injective})
hence an isomorphism, i.e., $f$ is a monomorphism. In this way we see that
(2) implies (1).

\medskip\noindent
Condition (3) implies (5) because monomorphisms are preserved under
base change
(Schemes, Lemma \ref{schemes-lemma-base-change-monomorphism})
and because of the description of monomorphisms towards the spectra of fields
in
Schemes, Lemma \ref{schemes-lemma-mono-towards-spec-field}.
Condition (5) implies (4) by
Morphisms, Lemmas \ref{morphisms-lemma-universally-injective} and
\ref{morphisms-lemma-unramified-etale-fibres}.
\end{proof}

\noindent
This leads to the following useful characterization of closed immersions.

\begin{lemma}
\label{lemma-characterize-closed-immersion}
Let $f : X \to S$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item $f$ is a closed immersion,
\item $f$ is a proper monomorphism,
\item $f$ is proper, unramified, and universally injective,
\item $f$ is universally closed, unramified, and a monomorphism,
\item $f$ is universally closed, unramified, and universally injective,
\item $f$ is universally closed, locally of finite type, and a monomorphism,
\item $f$ is universally closed, universally injective, locally of
finite type, and formally unramified.
\end{enumerate}
\end{lemma}

\begin{proof}
The equivalence of (4) -- (7) follows immediately from
Lemma \ref{lemma-universally-injective-unramified}.

\medskip\noindent
Let $f : X \to S$ satisfy (6). Then $f$ is separated, see
Schemes, Lemma \ref{schemes-lemma-monomorphism-separated}
and has finite fibres. Hence
More on Morphisms, Lemma \ref{more-morphisms-lemma-characterize-finite}
shows $f$ is finite. Then
Morphisms, Lemma \ref{morphisms-lemma-finite-monomorphism-closed}
implies $f$ is a closed immersion, i.e., (1) holds.

\medskip\noindent
Note that (1) $\Rightarrow$ (2) because a closed immersion is
proper and a monomorphism
(Morphisms, Lemma \ref{morphisms-lemma-closed-immersion-proper}
and
Schemes, Lemma \ref{schemes-lemma-immersions-monomorphisms}).
By
Lemma \ref{lemma-universally-injective-unramified}
we see that (2) implies (3). It is clear that (3) implies (5).
\end{proof}

\noindent
Here is another result of a similar flavor.

\begin{lemma}
\label{lemma-finite-unramified-one-point}
Let $\pi : X \to S$ be a morphism of schemes. Let $s \in S$.
Assume that
\begin{enumerate}
\item $\pi$ is finite,
\item $\pi$ is unramified,
\item $\pi^{-1}(\{s\}) = \{x\}$, and
\item $\kappa(s) \subset \kappa(x)$ is purely
inseparable\footnote{In view of condition (2)
this is equivalent to $\kappa(s) = \kappa(x)$.}.
\end{enumerate}
Then there exists an open neighbourhood $U$ of $s$ such that
$\pi|_{\pi^{-1}(U)} : \pi^{-1}(U) \to U$ is a closed immersion.
\end{lemma}

\begin{proof}
The question is local on $S$. Hence we may assume that $S = \Spec(A)$.
By definition of a finite morphism this implies $X = \Spec(B)$.
Note that the ring map $\varphi : A \to B$ defining $\pi$
is a finite unramified ring map.
Let $\mathfrak p \subset A$ be the prime corresponding to $s$.
Let $\mathfrak q \subset B$ be the prime corresponding to $x$. By
Conditions (2), (3) and (4) imply that
$B_{\mathfrak q}/\mathfrak pB_{\mathfrak q} = \kappa(\mathfrak p)$.
Algebra, Lemma \ref{algebra-lemma-unique-prime-over-localize-below}
we have $B_{\mathfrak q} = B_{\mathfrak p}$
(note that a finite ring map satisfies going up, see
Algebra, Section \ref{algebra-section-going-up}.)
Hence we see that
$B_{\mathfrak p}/\mathfrak pB_{\mathfrak p} = \kappa(\mathfrak p)$.
As $B$ is a finite $A$-module we see from Nakayama's lemma (see
Algebra, Lemma \ref{algebra-lemma-NAK})
that $B_{\mathfrak p} = \varphi(A_{\mathfrak p})$. Hence (using the finiteness
of $B$ as an $A$-module again) there exists a
$f \in A$, $f \not \in \mathfrak p$ such that $B_f = \varphi(A_f)$
as desired.
\end{proof}

\noindent
The topological results presented above will be used to give a functorial
characterisation of \'etale morphisms similar to Theorem
\ref{theorem-formally-unramified}.




\section{Examples of unramified morphisms}
\label{section-examples}

\noindent
Here are a few examples.

\begin{example}
\label{example-etale-field-extensions}
Let $k$ be a field.
Unramified quasi-compact morphisms $X \to \Spec(k)$ are affine.
This is true because $X$ has dimension $0$ and is Noetherian,
hence is a finite discrete set, and each point gives an affine open,
so $X$ is a finite disjoint union of affines hence affine.
Noether normalisation forces $X$ to be the spectrum of a finite
$k$-algebra $A$.
This algebra is a product of finite separable field extensions of $k$.
Thus, an unramified quasi-compact morphism to $\Spec(k)$
corresponds to a finite number of finite separable field extensions of $k$.
In particular, an unramified morphism with a connected source and a one point
target is forced to be a finite separable field extension.
As we will see later, $X \to \Spec(k)$ is \'etale if and
only if it is unramified. Thus, in this case at least, we obtain a very easy
description of the \'etale topology of a scheme. Of course, the cohomology of
this topology is another story.
\end{example}

\begin{example}
\label{example-standard-etale}
Property (3) in
Theorem \ref{theorem-unramified-equivalence}
gives us a canonical source of examples for unramified morphisms.
Fix a ring $R$ and an integer $n$. Let $I = (g_1, \cdots, g_m)$ be an
ideal in $R[x_1, \cdots, x_n]$. Let $\mathfrak q \subset R[x_1, \ldots, x_n]$
be a prime. Assume $I \subset \mathfrak q$ and that the matrix
$$
\left(\frac{\partial g_i}{\partial x_j}\right) \bmod \mathfrak q
\quad\in\quad
\text{Mat}(n \times m, \kappa(\mathfrak q))
$$
has rank $n$. Then the morphism
$f : Z = \Spec(R[x_1, \cdots, x_n]/I) \to \Spec(R)$
is unramified at the point $x \in Z \subset \mathbf{A}^n_R$ corresponding
to $\mathfrak q$. Clearly we must have $m \geq n$.
In the extreme case $m = n$, i.e., the differential of the map
$\mathbf{A}^n_R \to \mathbf{A}^n_R$ defined by the $g_i$'s
is an isomorphism of the tangent spaces, then $f$ is also flat
$x$ and, hence, is an \'etale map (see Algebra,
Definition \ref{algebra-definition-standard-smooth},
Lemma \ref{algebra-lemma-standard-smooth} and
Example \ref{algebra-example-make-standard-smooth}).
\end{example}

\begin{example}
\label{example-number-theory-etale}
Fix an extension of number fields $L/K$ with rings of integers
$\mathcal{O}_L$ and $\mathcal{O}_K$. The injection $K \to L$ defines a
morphism $f : \Spec(\mathcal{O}_L) \to \Spec(\mathcal{O}_K)$.
As discussed above, the points where $f$ is unramified in our sense
correspond to the set of points where $f$ is unramified in the conventional
sense. In the conventional sense, the locus of ramification in
$\Spec(\mathcal{O}_L)$ can be defined by vanishing set of the
different; this is an ideal in $\mathcal{O}_L$. In fact, the different is
nothing but the annihilator of the module
$\Omega_{\mathcal{O}_L/\mathcal{O}_K}$. Similarly, the
discriminant is an ideal in $\mathcal{O}_K$, namely it is the
norm of the different.
The vanishing set of the discriminant is precisely the set
of points of $K$ which ramify in $L$.
Thus, denoting by $X$ the complement of the closed subset
defined by the different in $\Spec(\mathcal{O}_L)$,
we obtain a morphism $X \to \Spec(\mathcal{O}_L)$ which is unramified.
Furthermore, this morphism is also flat, as any local homomorphism
of discrete valuation rings is flat, and hence this morphism is
actually \'etale. If $L/K$ is Galois, then denoting by
$Y$ the complement of the closed subset defined by the discriminant in
$\Spec(\mathcal{O}_K)$, we see that we get even a
finite \'etale morphism $X \to Y$.
Thus, this is an example of a finite \'etale covering.
\end{example}





\section{Flat morphisms}
\label{section-flat-morphisms}

\noindent
This section simply exists to summarise the properties of flatness that will
be useful to us. Thus, we will be content with stating the theorems precisely
and giving references for the proofs.

\medskip\noindent
After briefly recalling the necessary facts about flat modules over Noetherian
rings, we state a theorem of Grothendieck which gives sufficient conditions
for ``hyperplane sections'' of certain modules to be flat.

\begin{definition}
\label{definition-flat-rings}
Flatness of modules and rings.
\begin{enumerate}
\item A module $N$ over a ring $A$ is said to be {\it flat}
if the functor $M \mapsto M \otimes_A N$ is exact.
\item If this functor is also faithful, we say that
$N$ is {\it faithfully flat} over $A$.
\item A morphism of rings $f : A \to B$ is said to be
{\it flat (resp. faithfully flat)}
if the functor $M \mapsto M \otimes_A B$ is exact
(resp. faithful and exact).
\end{enumerate}
\end{definition}

\noindent
Here is a list of facts with references to the algebra chapter.
\begin{enumerate}
\item Free and projective modules are flat. This is clear for free modules
and follows for projective modules as they are direct summands of free
modules and $\otimes$ commutes with direct sums.
\item Flatness is a local property, that is, $M$ is flat over $A$
if and only if $M_{\mathfrak p}$ is flat over $A_{\mathfrak p}$ for all
$\mathfrak p \in \Spec(A)$.
See Algebra, Lemma \ref{algebra-lemma-flat-localization}.
\item If $M$ is a flat $A$-module and $A \to B$ is a ring map,
then $M \otimes_A B$ is a flat $B$-module. See
Algebra, Lemma \ref{algebra-lemma-flat-base-change}.
\item Finite flat modules over local rings are free.
See Algebra, Lemma \ref{algebra-lemma-finite-flat-local}.
\item If $f : A \to B$ is a morphism of arbitrary rings,
$f$ is flat if and only if the induced maps
$A_{f^{-1}(\mathfrak q)} \to B_{\mathfrak q}$ are flat for all
$\mathfrak q \in \Spec(B)$.
See Algebra, Lemma \ref{algebra-lemma-flat-localization}
\item If $f : A \to B$ is a local homomorphism of local rings,
$f$ is flat if and only if it is faithfully flat.
See Algebra, Lemma \ref{algebra-lemma-local-flat-ff}.
\item A map $A \to B$ of rings is faithfully flat if and only if it is
flat and the induced map on spectra is surjective.
See Algebra, Lemma \ref{algebra-lemma-ff-rings}.
\item If $A$ is a noetherian local ring, the completion
$A^\wedge$ is faithfully flat over $A$.
See Algebra, Lemma \ref{algebra-lemma-completion-faithfully-flat}.
\item Let $A$ be a Noetherian local ring and $M$ an $A$-module.
Then $M$ is flat over $A$ if and only if $M \otimes_A A^\wedge$
is flat over $A^\wedge$. (Combine the previous statement with
Algebra, Lemma \ref{algebra-lemma-flatness-descends}.)
\end{enumerate}
Before we move on to the geometric category, we present Grothendieck's
theorem, which provides a convenient recipe for producing flat
modules.

\begin{theorem}
\label{theorem-flatness-grothendieck}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be a local homomorphism.
If $M$ is a finite $B$-module that is flat as an $A$-module,
and $t \in \mathfrak m_B$ is an element such that multiplication
by $t$ is injective on $M/\mathfrak m_AM$, then $M/tM$ is also $A$-flat.
\end{theorem}

\begin{proof}
See Algebra, Lemma \ref{algebra-lemma-mod-injective}.
See also \cite[Section 20]{MatCA}.
\end{proof}

\begin{definition}
\label{definition-flat-schemes}
(See Morphisms, Definition \ref{morphisms-definition-flat}).
Let $f : X \to Y$ be a morphism of schemes.
Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module.
\begin{enumerate}
\item Let $x \in X$. We say $\mathcal{F}$ is
{\it flat over $Y$ at $x \in X$} if $\mathcal{F}_x$
is a flat $\mathcal{O}_{Y, f(x)}$-module.
This uses the map $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ to
think of $\mathcal{F}_x$ as a $\mathcal{O}_{Y, f(x)}$-module.
\item Let $x \in X$. We say $f$ is {\it flat at $x \in X$}
if $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is flat.
\item We say $f$ is {\it flat} if it is flat at all points of $X$.
\item A morphism $f : X \to Y$ that is flat and surjective is sometimes
said to be {\it faithfully flat}.
\end{enumerate}
\end{definition}

\noindent
Once again, here is a list of results:
\begin{enumerate}
\item The property (of a morphism) of being flat is, by fiat,
local in the Zariski topology on the source and the target.
\item Open immersions are flat. (This is clear because it induces isomorphisms
on local rings.)
\item Flat morphisms are stable under base change and composition.
Morphisms, Lemmas \ref{morphisms-lemma-base-change-flat} and
\ref{morphisms-lemma-composition-flat}.
\item If $f : X \to Y$ is flat, then the pullback functor
$\textit{QCoh}(\mathcal{O}_Y) \to \textit{QCoh}(\mathcal{O}_X)$ is exact.
This is immediate by looking at stalks.
\item Let $f : X \to Y$ be a morphism of schemes, and assume $Y$
is quasi-compact and quasi-separated. In this case
if the functor $f^*$ is exact then $f$ is flat.
(Proof omitted. Hint: Use
Properties, Lemma \ref{properties-lemma-extend-trivial} to see that
$Y$ has ``enough'' ideal sheaves and use the characterization of
flatness in Algebra, Lemma \ref{algebra-lemma-flat}.)
\end{enumerate}



\section{Topological properties of flat morphisms}
\label{section-topological-flat}

\noindent
We ``recall'' below some openness properties that flat morphisms enjoy.

\begin{theorem}
\label{theorem-flat-open}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism which is locally of finite type.
Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module.
The set of points in $X$ where $\mathcal{F}$ is flat over $S$ is an open set.
In particular the set of points where $f$ is flat is open in $X$.
\end{theorem}

\begin{proof}
See More on Morphisms, Theorem \ref{more-morphisms-theorem-openess-flatness}.
\end{proof}

\begin{theorem}
\label{theorem-flat-map-open}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism which is flat and locally of finite type.
Then $f$ is (universally) open.
\end{theorem}

\begin{proof}
See Morphisms, Lemma \ref{morphisms-lemma-fppf-open}.
\end{proof}

\begin{theorem}
\label{theorem-flat-is-quotient}
A faithfully flat quasi-compact morphism is a quotient map for
the Zariski topology.
\end{theorem}

\begin{proof}
See Morphisms, Lemma \ref{morphisms-lemma-fpqc-quotient-topology}.
\end{proof}

\noindent
An important reason to study flat morphisms is that they provide the adequate
framework for capturing the notion of a family of schemes parametrised by the
points of another scheme. Naively one may think that any morphism $f : X \to S$
should be thought of as a family parametrized by the points of $S$. However,
without a flatness restriction on $f$, really bizarre things can happen in
this so-called family. For instance, we aren't guaranteed that relative
dimension (dimension of the fibres) is constant in a family. Other numerical
invariants, such as the Hilbert polynomial, too may change from fibre to
fibre. Flatness prevents such things from happening and, therefore, provides
some ``continuity'' to the fibres.


\section{\'Etale morphisms}
\label{section-etale-morphisms}

\noindent
In this section, we will define \'etale morphisms and prove a number of
important properties about them. The most important one, no doubt, is the
functorial characterisation presented in Theorem \ref{theorem-formally-etale}.
Following this, we will also discuss a few properties of rings which are
insensitive to an \'etale extension (properties which hold for a ring
if and only if they hold for all its \'etale extensions) to motivate the basic
tenet of \'etale cohomology -- \'etale morphisms are the algebraic analogue of
local isomorphisms.

\medskip\noindent
As the title suggests, we will define the class of \'etale morphisms -- the
class of morphisms (whose surjective families) we shall deem to be coverings
in the category of schemes over a base scheme $S$ in order to define the
\'etale site $S_{\acute{e}tale}$. Intuitively, an \'etale morphism is supposed
to capture the idea of a covering space and, therefore, should be close to a
local isomorphism. If we're working with varieties over algebraically closed
fields, this last statement can be made into a definition provided we replace
``local isomorphism'' with ``formal local isomorphism'' (isomorphism after
completion). One can then give a definition over any base field by asking
that the base change to the algebraic closure be \'etale (in the
aforementioned sense). But, rather than proceeding via such aesthetically
displeasing constructions, we will adopt a cleaner, albeit slightly more
abstract, algebraic approach.

\begin{definition}
\label{definition-etale-ring}
Let $A$, $B$ be Noetherian local rings.
A local homomorphism $f : A \to B$ is said to be a
{\it \'etale homomorphism of local rings}
if it is flat and unramified homomorphism of local rings
(please see Definition \ref{definition-unramified-rings}).
\end{definition}

\noindent
This is the local version of the definition of an \'etale ring map in
Algebra, Section \ref{algebra-section-etale}.
The exact definition
given in that section is that it is a smooth ring map of relative
dimension $0$. It is shown (in
Algebra, Lemma \ref{algebra-lemma-etale-standard-smooth})
that an \'etale $R$-algebra $S$ always has a presentation
$$
S = R[x_1, \ldots, x_n]/(f_1, \ldots, f_n)
$$
such that
$$
g =
\det
\left(
\begin{matrix}
\partial f_1/\partial x_1 &
\partial f_2/\partial x_1 &
\ldots &
\partial f_n/\partial x_1 \\
\partial f_1/\partial x_2 &
\partial f_2/\partial x_2 &
\ldots &
\partial f_n/\partial x_2 \\
\ldots & \ldots & \ldots & \ldots \\
\partial f_1/\partial x_n &
\partial f_2/\partial x_n &
\ldots &
\partial f_n/\partial x_n
\end{matrix}
\right)
$$
maps to an invertible element in $S$. The following two lemmas link the two
notions.

\begin{lemma}
\label{lemma-characterize-etale-Noetherian}
Let $A \to B$ be of finite type with $A$ a Noetherian ring.
Let $\mathfrak q$ be a prime of $B$ lying over $\mathfrak p \subset A$.
Then $A \to B$ is \'etale at $\mathfrak q$ if and only if
$A_{\mathfrak p} \to B_{\mathfrak q}$ is an \'etale homomorphism
of local rings.
\end{lemma}

\begin{proof}
See Algebra, Lemmas \ref{algebra-lemma-etale} (flatness of \'etale maps),
\ref{algebra-lemma-etale-at-prime} (\'etale maps are unramified)
and \ref{algebra-lemma-characterize-etale} (flat and unramified maps
are \'etale).
\end{proof}

\begin{lemma}
\label{lemma-characterize-etale-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism such that $B$ is essentially of
finite type over $A$.
The following are equivalent
\begin{enumerate}
\item $A \to B$ is an \'etale homomorphism of local rings
\item $A^\wedge \to B^\wedge$ is an \'etale homomorphism of local rings, and
\item $A^\wedge \to B^\wedge$ is \'etale.
\end{enumerate}
Moreover, in this case $B^\wedge \cong (A^\wedge)^{\oplus n}$ as
$A^\wedge$-modules for some $n \geq 1$.
\end{lemma}

\begin{proof}
To see the equivalences of (1), (2) and (3), as we have the corresponding
results for unramified ring maps
(Lemma \ref{lemma-characterize-unramified-completions})
it suffices to prove that
$A \to B$ is flat if and only if $A^\wedge \to B^\wedge$ is flat.
This is clear from our lists of properties of flat maps since
the ring maps $A \to A^\wedge$ and $B \to B^\wedge$ are faithfully flat.
For the final statement, by Lemma \ref{lemma-unramified-completions}
we see that $B^\wedge$ is a finite flat $A^\wedge$ module.
Hence it is finite free by our list
of properties on flat modules in Section \ref{section-flat-morphisms}.
\end{proof}

\noindent
The integer $n$ which occurs in the lemma above
is nothing other than the degree
$[\kappa(\mathfrak m_B) : \kappa(\mathfrak m_A)]$ of the residue field
extension. In particular, if $\kappa(\mathfrak m_A)$
is separably closed, we see that $A^\wedge \to B^\wedge$
is an isomorphism, which vindicates our earlier claims.

\begin{definition}
\label{definition-etale-schemes-1}
(See Morphisms, Definition \ref{morphisms-definition-etale}.)
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism of schemes which is locally of finite type.
\begin{enumerate}
\item Let $x \in X$. We say $f$ is {\it \'etale at $x \in X$} if
$\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is an
\'etale homomorphism of local rings.
\item The morphism is said to be {\it \'etale} if it is \'etale at all its
points.
\end{enumerate}
\end{definition}

\noindent
Let us prove that this definition agrees with the definition in the
chapter on morphisms of schemes. This in particular guarantees that the
set of points where a morphism is \'etale is open.

\begin{lemma}
\label{lemma-etale-defintion}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$. The morphism $f$ is \'etale at $x$ in
the sense of Definition \ref{definition-etale-schemes-1}
if and only if it is unramified at $x$ in
the sense of Morphisms, Definition \ref{morphisms-definition-etale}.
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-characterize-etale-Noetherian}
and the definitions.
\end{proof}

\noindent
Here are some results on \'etale morphisms.
The formulations as given in this list apply only to
morphisms locally of finite type between locally Noetherian schemes.
In each case we give a reference to the general result as
proved earlier in the project, but in some cases one can
prove the result more easily in the Noetherian case.
Here is the list:
\begin{enumerate}
\item An \'etale morphism is unramified. (Clear from our definitions.)
\item \'Etaleness is local on the source and the target in the Zariski
topology.
\item \'Etale morphisms are stable under base change and composition.
See Morphisms, Lemmas \ref{morphisms-lemma-base-change-etale}
and \ref{morphisms-lemma-composition-etale}.
\item \'Etale morphisms of schemes are locally quasi-finite
and quasi-compact \'etale morphisms are quasi-finite. (This is
true because it holds for unramified morphisms as seen earlier.)
\item \'Etale morphisms have relative dimension $0$. See
Morphisms, Definition \ref{morphisms-definition-relative-dimension-d}
and
Morphisms, Lemma \ref{morphisms-lemma-locally-quasi-finite-rel-dimension-0}.
\item A morphism is \'etale if and only if it is flat and
all its fibres are \'etale. See
Morphisms, Lemma \ref{morphisms-lemma-etale-flat-etale-fibres}.
\item \'Etale morphisms are open. This is true because an \'etale
morphism is flat, and Theorem \ref{theorem-flat-map-open}.
\item Let $X$ and $Y$ be \'etale over a base scheme $S$.
Any $S$-morphism from $X$ to $Y$ is \'etale.
See Morphisms, Lemma \ref{morphisms-lemma-etale-permanence}.
\end{enumerate}






\section{The structure theorem}
\label{section-structure-etale-map}

\noindent
We present a theorem which describes the local structure of \'etale
and unramified morphisms. Besides its obvious independent importance,
this theorem also allows us to make the transition to another
definition of \'etale morphisms that captures the geometric intuition better
than the one we've used so far.

\medskip\noindent
To state it we need the notion of a {\it standard \'etale ring map}, see
Algebra, Definition \ref{algebra-definition-standard-etale}.
Namely, suppose that $R$ is a ring and $f, g \in R[t]$ are polynomials
such that
\begin{enumerate}
\item[(a)] $f$ is a monic polynomial, and
\item[(b)] $f' = \text{d}f/\text{d}t$ is invertible in the localization
$R[t]_g/(f)$.
\end{enumerate}
Then the map
$$
R \longrightarrow R[t]_g/(f) = R[t, 1/g]/(f)
$$
is a standard \'etale algebra, and any standard \'etale algebra is isomorphic
to one of these. It is a pleasant exercise to prove that such a ring map
is flat, and unramified and hence \'etale (as expected of course).
A special case of a standard \'etale ring map is any ring map
$$
R \longrightarrow R[t]_{f'}/(f) = R[t, 1/f']/(f)
$$
with $f$ a monic polynomial, and any standard \'etale algebra is (isomorphic to)
a principal localization of one of these.

\begin{theorem}
\label{theorem-structure-etale}
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then there exist $f, g \in A[t]$ such that
\begin{enumerate}
\item $B' = A[t]_g/(f)$ is standard \'etale -- see (a) and (b) above, and
\item $B$ is isomorphic to a localization of $B'$ at a prime.
\end{enumerate}
\end{theorem}

\begin{proof}
Write $B = B'_{\mathfrak q}$ for some finite type $A$-algebra $B'$
(we can do this because $B$ is essentially of finite type over $A$).
By Lemma \ref{lemma-characterize-etale-Noetherian}
we see that $A \to B'$ is \'etale at $\mathfrak q$.
Hence we may apply
Algebra, Proposition \ref{algebra-proposition-etale-locally-standard}
to see that a principal localization of $B'$ is standard \'etale.
\end{proof}

\noindent
Here is the version for unramified homomorphisms of local rings.

\begin{theorem}
\label{theorem-structure-unramified}
Let $f : A \to B$ be an unramified morphism of local rings.
Then there exist $f, g \in A[t]$ such that
\begin{enumerate}
\item $B' = A[t]_g/(f)$ is standard \'etale -- see (a) and (b) above, and
\item $B$ is isomorphic to a quotient of a localization of $B'$ at a prime.
\end{enumerate}
\end{theorem}

\begin{proof}
Write $B = B'_{\mathfrak q}$ for some finite type $A$-algebra $B'$
(we can do this because $B$ is essentially of finite type over $A$).
By Lemma \ref{lemma-characterize-unramified-Noetherian}
we see that $A \to B'$ is unramified at $\mathfrak q$.
Hence we may apply
Algebra, Proposition \ref{algebra-proposition-unramified-locally-standard}
to see that a principal localization of $B'$ is a quotient of a
standard \'etale $A$-algebra.
\end{proof}

\noindent
Via standard lifting arguments, one then obtains the following geometric
statement which will be of essential use to us.

\begin{theorem}
\label{theorem-geometric-structure}
Let $\varphi : X \to Y$ be a morphism of schemes.
Let $x \in X$.
If $\varphi$ is \'etale at $x$, then there exist exist affine opens
$V \subset Y$ and $U \subset X$ with $x \in U$ and $\varphi(U) \subset V$
such that we have the following diagram
$$
\xymatrix{
X \ar[d] & U \ar[l] \ar[d] \ar[r]_-j & \Spec(R[t]_{f'}/(f)) \ar[d] \\
Y & V \ar[l] \ar@{=}[r] & \Spec(R)
}
$$
where $j$ is an open immersion, and $f \in R[t]$ is monic.
\end{theorem}

\begin{proof}
This is equivalent to
Morphisms, Lemma \ref{morphisms-lemma-etale-locally-standard-etale}
allthough the statements differ slightly.
\end{proof}


\section{\'Etale and smooth morphisms}
\label{section-etale-smooth}

\noindent
An \'etale morphism is smooth of relative dimension zero.
The projection $\mathbf{A}^n_S \to S$ is a standard example
of a smooth morphism of relative dimension $n$.
It turns out that any smooth morphism is \'etale locally
of this form. Here is the precise statement.

\begin{theorem}
\label{theorem-smooth-etale-over-n-space}
Let $\varphi : X \to Y$ be a morphism of schemes.
Let $x \in X$.
If $\varphi$ is smooth at $x$, then
there exist exist and integer $n \geq 0$ and affine opens
$V \subset Y$ and $U \subset X$ with $x \in U$ and $\varphi(U) \subset V$
such that there exists a commutative diagram
$$
\xymatrix{
X \ar[d] & U \ar[l] \ar[d] \ar[r]_-\pi &
\mathbf{A}^n_R \ar[d] \ar@{=}[r] &  \Spec(R[x_1, \ldots, x_n]) \ar[dl] \\
Y & V \ar[l] \ar@{=}[r] & \Spec(R)
}
$$
where $\pi$ is \'etale.
\end{theorem}

\begin{proof}
See
Morphisms, Lemma \ref{morphisms-lemma-smooth-etale-over-affine-space}.
\end{proof}




\section{Topological properties of \'etale morphisms}
\label{section-topological-etale}

\noindent
We present a few of the topological properties of \'etale and
unramified morphisms. First, we give what Grothendieck
calls the {\it fundamental property of \'etale morphisms}, see
\cite[Expos\'e I.5]{SGA1}.

\begin{theorem}
\label{theorem-etale-radiciel-open}
Let $f : X \to Y$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item $f$ is an open immersion,
\item $f$ is universally injective and \'etale, and
\item $f$ is a flat monomorphism, locally of finite presentation.
\end{enumerate}
\end{theorem}

\begin{proof}
An open immersion is universally injective
since any base change of an open immersion
is an open immersion. Moreover, it is \'etale by
Morphisms, Lemma \ref{morphisms-lemma-open-immersion-etale}.
Hence (1) implies (2).

\medskip\noindent
Assume $f$ is universally injective and \'etale.
Since $f$ is \'etale it is flat and locally of finite presentation, see
Morphisms, Lemmas \ref{morphisms-lemma-etale-flat} and
\ref{morphisms-lemma-etale-locally-finite-presentation}.
By
Lemma \ref{lemma-universally-injective-unramified}
we see that $f$ is a monomorphism. Hence (2) implies (3).

\medskip\noindent
Assume $f$ is flat, locally of finite presentation, and a monomorphism.
Then $f$ is open, see
Morphisms, Lemma \ref{morphisms-lemma-fppf-open}.
Thus we may replace $Y$ by $f(X)$ and we may assume $f$ is
surjective. Then $f$ is open and bijective hence a homeomorphism.
Hence $f$ is quasi-compact. Hence
Descent, Lemma
\ref{descent-lemma-flat-surjective-quasi-compact-monomorphism-isomorphism}
shows that $f$ is an isomorphism and we win.
\end{proof}

\noindent
Here is another result of a similar flavor.

\begin{lemma}
\label{lemma-finite-etale-one-point}
Let $\pi : X \to S$ be a morphism of schemes. Let $s \in S$.
Assume that
\begin{enumerate}
\item $\pi$ is finite,
\item $\pi$ is \'etale,
\item $\pi^{-1}(\{s\}) = \{x\}$, and
\item $\kappa(s) \subset \kappa(x)$ is purely
inseparable\footnote{In view of condition (2)
this is equivalent to $\kappa(s) = \kappa(x)$.}.
\end{enumerate}
Then there exists an open neighbourhood $U$ of $s$ such that
$\pi|_{\pi^{-1}(U)} : \pi^{-1}(U) \to U$ is an isomorphism.
\end{lemma}

\begin{proof}
By
Lemma \ref{lemma-finite-unramified-one-point}
there exists an open neighbourhood $U$ of $s$ such that
$\pi|_{\pi^{-1}(U)} : \pi^{-1}(U) \to U$ is a closed immersion.
But a morphism which is \'etale and a closed immersion is an
open immersion (for example by
Theorem \ref{theorem-etale-radiciel-open}).
Hence after shrinking $U$ we obtain an isomorphism.
\end{proof}




\section{Topological invariance of the \'etale topology}
\label{section-topological-invariance}

\noindent
Next, we present an extremely crucial theorem which, roughly speaking, says
that \'etaleness is a topological property.

\begin{theorem}
\label{theorem-etale-topological}
Let $X$ and $Y$ be two schemes over a base scheme $S$.
Let $S_0$ be a closed subscheme of $S$ whose ideal sheaf has square zero.
Denote $X_0$ (resp.\ $Y_0$) the base change $S_0 \times_S X$
(resp.\ $S_0 \times_S Y$).
If $X$ is \'etale over $S$, then the map
$$
\Mor_S(Y, X) \longrightarrow \Mor_{S_0}(Y_0, X_0)
$$
is bijective.
\end{theorem}

\begin{proof}
After base changing via $Y \to S$, we may assume that $Y = S$.
In this case the theorem states that any $S$-morphism $\sigma_0 : S_0 \to X$
actually factors uniquely through a section $S \to X$ of the
\'etale structure morphism $X \to S$.

\medskip\noindent
Existence. Since we have equality of underlying topological spaces
$|S_0| = |S|$ and $|X_0| = |X|$,
by Theorem \ref{theorem-sections-unramified-maps},
the section $\sigma_0$ is uniquely determined by a connected component
$X'$ of $X$ such that the base change
$X'_0 = S_0 \times_S X'$ maps isomorphically to $S_0$.
In particular, $X' \to S$ is a universal homeomorphism
and therefore universally injective. Since $X' \to S$ is \'etale, it
follows from Theorem \ref{theorem-etale-radiciel-open}
that $X' \to S$ is an isomorphism and, therefore, it has
an inverse $\sigma$ which is the required section.

\medskip\noindent
Uniqueness. This follows from Theorem
\ref{theorem-formally-unramified}, or directly from Theorem
\ref{theorem-sections-unramified-maps}, or, if one carefully observes,
from our proof itself.
\end{proof}

\noindent
From the proof of preceeding theorem, we also obtain one direction of the
promised functorial characterisation of \'etale morphisms. The following
theorem will be strengthened in
\'Etale Cohomology,
Theorem \ref{etale-cohomology-theorem-topological-invariance}.

\begin{theorem}[Une equivalence remarquable de cat\'egories]
\label{theorem-remarkable-equivalence}
Let $S$ be a scheme.
Let $S_0 \subset S$ be a closed subscheme defined by an ideal
with square zero.
The functor
$$
X \longmapsto X_0 = S_0 \times_S X
$$
defines an equivalence of categories
$$
\{
\text{schemes }X\text{ \'etale over }S
\}
\leftrightarrow
\{
\text{schemes }X_0\text{ \'etale over }S_0
\}
$$
\end{theorem}

\begin{proof}
By Theorem \ref{theorem-etale-topological}
we see that this functor is fully faithful.
It remains to show that the functor is essentially surjective.
Let $Y \to S_0$ be an \'etale morphism of schemes.

\medskip\noindent
Suppose that the result holds if $S$ and $Y$ are affine.
In that case, we choose an affine open covering
$Y = \bigcup V_j$ such that each $V_j$ maps
into an affine open of $S$. By assumption (affine case) we can
find \'etale morphisms $W_j \to S$ such that $W_{j, 0} \cong V_j$
(as schemes over $S_0$). Let $W_{j, j'} \subset W_j$
be the open subscheme whose underlying topological space
corresponds to $V_j \cap V_{j'}$. Because we have isomorphisms
$$
W_{j, j', 0} \cong V_j \cap V_{j'} \cong W_{j', j, 0}
$$
as schemes over $S_0$ we see by fully faithfulness that we
obtain isomorphisms
$\theta_{j, j'} : W_{j, j'} \to W_{j', j}$ of schemes over $S$.
We omit the verification that these isomorphisms satisfy the
cocyle condition of Schemes, Section \ref{schemes-section-glueing-schemes}.
Applying Schemes, Lemma \ref{schemes-lemma-glue-schemes}
we obtain a scheme $X \to S$ by
glueing the schemes $W_j$ along the identifications $\theta_{j, j'}$.
It is clear that $X \to S$ is \'etale and $X_0 \cong Y$ by construction.

\medskip\noindent
Thus it suffices to show the lemma in case $S$ and $Y$ are affine.
Say $S = \Spec(R)$ and $S_0 = \Spec(R/I)$ with $I^2 = 0$.
By Algebra, Lemma \ref{algebra-lemma-etale-standard-smooth} we know that
$Y$ is the spectrum of a ring $\overline{A}$ with
$$
\overline{A} = (R/I)[x_1, \ldots, x_n]/(\overline{f}_1, \ldots, \overline{f}_n)
$$
such that
$$
\overline{g} =
\det
\left(
\begin{matrix}
\partial \overline{f}_1/\partial x_1 &
\partial \overline{f}_2/\partial x_1 &
\ldots &
\partial \overline{f}_n/\partial x_1 \\
\partial \overline{f}_1/\partial x_2 &
\partial \overline{f}_2/\partial x_2 &
\ldots &
\partial \overline{f}_n/\partial x_2 \\
\ldots & \ldots & \ldots & \ldots \\
\partial \overline{f}_1/\partial x_n &
\partial \overline{f}_2/\partial x_n &
\ldots &
\partial \overline{f}_n/\partial x_n
\end{matrix}
\right)
$$
maps to an invertible element in $A$. Choose any lifts
$f_i \in R[x_1, \ldots, x_n]$. Since $I$ is nilpotent it
follows that the determinant of the matrix of partials of the
$f_i$ is invertible in the algebra $A$ defined by
$$
A = R[x_1, \ldots, x_n]/(f_1, \ldots, f_n)
$$
Hence $R \to A$ is \'etale and $(R/I) \otimes_R A \cong \overline{A}$.
To prove the general case one argues with glueing affine pieces.
\end{proof}



\section{The functorial characterization}
\label{section-functorial-etale}

\noindent
We finally present the promised functorial characterisation.
Thus there are four ways to think about \'etale morphisms of schemes:
\begin{enumerate}
\item as a smooth morphism of relative dimension $0$,
\item as locally finitely presented, flat, and unramified morphisms,
\item using the structure theorem, and
\item using the functorial characterisation.
\end{enumerate}

\begin{theorem}
\label{theorem-formally-etale}
Let $f : X \to S$ be a morphism that is locally of finite presentation.
The following are equivalent
\begin{enumerate}
\item $f$ is \'etale,
\item for all affine $S$-schemes $Y$, and closed subschemes $Y_0 \subset Y$
defined by square-zero ideals, the natural map
$$
\Mor_S(Y, X) \longrightarrow \Mor_S(Y_0, X)
$$
is bijective.
\end{enumerate}
\end{theorem}

\begin{proof}
This is
More on Morphisms, Lemma \ref{more-morphisms-lemma-etale-formally-etale}.
\end{proof}

\noindent
This characterisation says that solutions to the equations defining $X$ can
be lifted uniquely through nilpotent thickenings.



\section{\'Etale local structure of unramified morphisms}
\label{section-unramified-etale-local}

\noindent
In the chapter
More on Morphisms, Section \ref{more-morphisms-section-etale-localization}
the reader can find some results on the \'etale local structure of
quasi-finite morphisms. In this section we want to combine this
with the topological properties of unramified morphisms we have seen
in this chapter. The basic overall picture to keep in mind is
$$
\xymatrix{
V \ar[r] \ar[dr] & X_U \ar[d] \ar[r] & X \ar[d]^f \\
& U \ar[r] & S
}
$$
see
More on Morphisms, Equation (\ref{more-morphisms-equation-basic-diagram}).
We start with a very general case.

\begin{lemma}
\label{lemma-unramified-etale-local}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is unramified at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and opens $V_{i, j} \subset X_U$, $i = 1, \ldots, n$, $j = 1, \ldots, m_i$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is a closed immersion passing through $u$,
\item $u$ is not in the image of $V_{i, j} \cap V_{i', j'}$ unless
$i = i'$ and $j = j'$, and
\item any point of $(X_U)_u$ mapping to $x_i$ is in some $V_{i, j}$.
\end{enumerate}
\end{lemma}

\begin{proof}
By
Morphisms, Definition \ref{morphisms-definition-unramified}
there exists an open neighbourhood of each $x_i$ which is locally of finite
type over $S$. Replacing $X$ by an open neighbourhood of $\{x_1, \ldots, x_n\}$
we may assume $f$ is locally of finite type. Apply
More on Morphisms, Lemma
\ref{more-morphisms-lemma-etale-makes-quasi-finite-finite-multiple-points-var}
to get the \'etale neighbourhood $(U, u)$ and the opens $V_{i, j}$ finite over
$U$. By
Lemma \ref{lemma-finite-unramified-one-point}
after possibly shrinking $U$ we get that $V_{i, j} \to U$ is a closed
immersion.
\end{proof}

\begin{lemma}
\label{lemma-unramified-etale-local-technical}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is separated and $f$ is unramified at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U =
W \amalg \coprod\nolimits_{i, j} V_{i, j}
$$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is a closed immersion passing through $u$,
\item the fibre $W_u$ contains no point mapping to any $x_i$.
\end{enumerate}
In particular, if $f^{-1}(\{s\}) = \{x_1, \ldots, x_n\}$, then
the fibre $W_u$ is empty.
\end{lemma}

\begin{proof}
Apply
Lemma \ref{lemma-unramified-etale-local}.
We may assume $U$ is affine, so $X_U$ is separated.
Then $V_{i, j} \to X_U$ is a closed map, see
Morphisms, Lemma \ref{morphisms-lemma-image-proper-scheme-closed}.
Suppose $(i, j) \not = (i', j')$.
Then $V_{i, j} \cap V_{i', j'}$ is closed in $V_{i, j}$ and
its image in $U$ does not contain $u$.
Hence after shrinking $U$ we may assume that
$V_{i, j} \cap V_{i', j'} = \emptyset$. Moreover, $\bigcup V_{i, j}$ is
a closed and open subscheme of $X_U$ and hence has an open and closed
complement $W$. This finishes the proof.
\end{proof}

\noindent
The following lemma is in some sense much weaker than the preceding one
but it may be useful to state it explicitly here. It says that a finite
uramified morphism is \'etale locally on the base a closed immersion.

\begin{lemma}
\label{lemma-finite-unramified-etale-local}
Let $f : X \to S$ be a finite unramified morphism of schemes.
Let $s \in S$.
There exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U = \coprod\nolimits_j V_j
$$
such that each $V_j \to U$ is a closed immersion.
\end{lemma}

\begin{proof}
Since $X \to S$ is finite the fibre over $S$ is a finite set
$\{x_1, \ldots, x_n\}$ of points of $X$. Apply
Lemma \ref{lemma-unramified-etale-local-technical}
to this set (a finite morphism is separated, see
Morphisms, Section \ref{morphisms-section-integral}).
The image of $W$ in $U$ is a closed
subset (as $X_U \to U$ is finite, hence proper) which does not
contain $u$. After removing this from $U$ we see that $W = \emptyset$
as desired.
\end{proof}




\section{\'Etale local structure of \'etale morphisms}
\label{section-etale-local-etale}

\noindent
This is a bit silly, but perhaps helps form intuition about \'etale
morphisms. We simply copy over the results of
Section \ref{section-unramified-etale-local}
and change ``closed immersion'' into ``isomorphism''.

\begin{lemma}
\label{lemma-etale-etale-local}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is \'etale at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and opens $V_{i, j} \subset X_U$, $i = 1, \ldots, n$, $j = 1, \ldots, m_i$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is an isomorphism,
\item $u$ is not in the image of $V_{i, j} \cap V_{i', j'}$ unless
$i = i'$ and $j = j'$, and
\item any point of $(X_U)_u$ mapping to $x_i$ is in some $V_{i, j}$.
\end{enumerate}
\end{lemma}

\begin{proof}
An \'etale morphism is unramified, hence we may apply
Lemma \ref{lemma-unramified-etale-local}.
Now $V_{i, j} \to U$ is a closed immersion and \'etale.
Hence it is an open immersion, for example by
Theorem \ref{theorem-etale-radiciel-open}.
Replace $U$ by the intersection of the images of $V_{i, j} \to U$
to get the lemma.
\end{proof}

\begin{lemma}
\label{lemma-etale-etale-local-technical}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is separated and $f$ is \'etale at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U =
W \amalg \coprod\nolimits_{i, j} V_{i, j}
$$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is an isomorphism,
\item the fibre $W_u$ contains no point mapping to any $x_i$.
\end{enumerate}
In particular, if $f^{-1}(\{s\}) = \{x_1, \ldots, x_n\}$, then
the fibre $W_u$ is empty.
\end{lemma}

\begin{proof}
An \'etale morphism is unramified, hence we may apply
Lemma \ref{lemma-unramified-etale-local-technical}.
As in the proof of
Lemma \ref{lemma-etale-etale-local}
the morphisms $V_{i, j} \to U$ are open immersions and
we win after replacing $U$ by the intersection of their
images.
\end{proof}

\noindent
The following lemma is in some sense much weaker than the preceding one
but it may be useful to state it explicitly here. It says that a finite
\'etale morphism is \'etale locally on the base a
``topological covering space'', i.e., a finite product of copies of the base.

\begin{lemma}
\label{lemma-finite-etale-etale-local}
Let $f : X \to S$ be a finite \'etale morphism of schemes.
Let $s \in S$. There exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U = \coprod\nolimits_j V_j
$$
such that each $V_j \to U$ is an isomorphism.
\end{lemma}

\begin{proof}
An \'etale morphism is unramified, hence we may apply
Lemma \ref{lemma-finite-unramified-etale-local}.
As in the proof of
Lemma \ref{lemma-etale-etale-local}
we see that $V_{i, j} \to U$ is an open immersion and we win
after replacing $U$ by the intersection of their images.
\end{proof}




\section{Permanence properties}
\label{section-properties-permanence}

\noindent
In what follows, we present a few ``permanence''
properties of \'etale homomorphisms of Noetherian local rings
(as defined in Definition \ref{definition-etale-ring}). See
More on Algebra, Sections \ref{more-algebra-section-permanence-completion} and
\ref{more-algebra-section-permanence-henselization}
for the analogue of this material for the completion and
henselization of a Noetherian local ring.

\begin{lemma}
\label{lemma-etale-dimension}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a \'etale homomorphism of local rings.
Then $\dim(A) = \dim(B)$.
\end{lemma}

\begin{proof}
See for example
Algebra, Lemma \ref{algebra-lemma-dimension-base-fibre-equals-total}.
\end{proof}

\begin{proposition}
\label{proposition-etale-depth}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $\text{depth}(A) = \text{depth}(B)$
\end{proposition}

\begin{proof}
See Algebra, Lemma \ref{algebra-lemma-apply-grothendieck}.
\end{proof}

\begin{proposition}
\label{proposition-etale-CM}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is Cohen-Macaulay if and only if $B$ is so.
\end{proposition}

\begin{proof}
A local ring $A$ is Cohen-Macaulay if and only $\dim(A) = \text{depth}(A)$.
As both of these invariants is preserved under an \'etale extension,
the claim follows.
\end{proof}

\begin{proposition}
\label{proposition-etale-regular}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is regular if and only if $B$ is so.
\end{proposition}

\begin{proof}
If $B$ is regular, then $A$ is regular by
Algebra, Lemma \ref{algebra-lemma-flat-under-regular}.
Assume $A$ is regular. Let $\mathfrak m$ be the maximal ideal
of $A$. Then $\dim_{\kappa(\mathfrak m)} \mathfrak m/\mathfrak m^2 =
\dim(A) = \dim(B)$ (see Lemma \ref{lemma-etale-dimension}).
On the other hand, $\mathfrak mB$ is the maximal ideal of
$B$ and hence $\mathfrak m_B/\mathfrak m_B = \mathfrak mB/\mathfrak m^2B$
is generated by at most $\dim(B)$ elements. Thus $B$ is regular.
(You can also use the slightly more general
Algebra, Lemma \ref{algebra-lemma-flat-over-regular-with-regular-fibre}.)
\end{proof}


\begin{proposition}
\label{proposition-etale-reduced}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is reduced if and only if $B$ is so.
\end{proposition}

\begin{proof}
It is clear from the faithful flatness of $A \to B$ that if $B$ is reduced, so
is $A$. See also Algebra, Lemma \ref{algebra-lemma-descent-reduced}.
Conversely, assume $A$ is reduced. By assumption $B$ is a localization
of a finite type $A$-algebra $B'$ at some prime $\mathfrak q$.
After replacing $B'$ by a localization we may assume that $B'$
is \'etale over $A$, see Lemma \ref{lemma-characterize-etale-Noetherian}.
Then we see that Algebra, Lemma \ref{algebra-lemma-reduced-goes-up} applies to
$A \to B'$ and $B'$ is reduced. Hence $B$ is reduced.
\end{proof}

\begin{remark}
\label{remark-technicality-needed}
The result on ``reducedness'' does not hold with a weaker
definition of \'etale local ring maps $A \to B$ where one
drops the assumption that $B$ is essentially of finite type over $A$.
Namely, it can happen that a Noetherian local domain $A$ has nonreduced
completion $A^\wedge$, see
Examples, Section \ref{examples-section-local-completion-nonreduced}.
But the ring map $A \to A^\wedge$ is flat, and $\mathfrak m_AA^\wedge$
is the maximal ideal of $A^\wedge$ and of course $A$ and $A^\wedge$ have
the same residue fields. This is why it is important to consider
this notion only for ring extensions which are essentially of finite type
(or essentially of finite presentation if $A$ is not Noetherian).
\end{remark}

\begin{proposition}
\label{proposition-etale-normal}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is a normal domain if and only if $B$ is so.
\end{proposition}

\begin{proof}
See
Algebra, Lemma \ref{algebra-lemma-descent-normal}
for descending normality. Conversely, assume $A$ is normal.
By assumption $B$ is a localization of a finite type $A$-algebra
$B'$ at some prime $\mathfrak q$. After replacing $B'$ by a localization
we may assume that $B'$ is \'etale over $A$, see
Lemma \ref{lemma-characterize-etale-Noetherian}.
Then we see that
Algebra, Lemma \ref{algebra-lemma-normal-goes-up}
applies to $A \to B'$ and we conclude that $B'$ is normal.
Hence $B$ is a normal domain.
\end{proof}

\noindent
The preceeding propositions give some indication as to why we'd like to think
of \'etale maps as ``local isomorphisms''. Another property that gives an
excellent indication that we have the ``right'' definition is the fact that
for $\mathbf{C}$-schemes of finite type, a morphism is \'etale if and only if
the associated morphism on analytic spaces (the $\mathbf{C}$-valued points given
the complex topology) is a local isomorphism in the analytic sense (open
embedding locally on the source). This fact can be proven with the aid of the
structure theorem and the fact that the analytification commutes with the
formation of the completed local rings -- the details are left to the reader.


\input{chapters}


\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
